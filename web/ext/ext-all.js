/*
This file is part of Ext JS 3.4

Copyright (c) 2011-2013 Sencha Inc

Contact:  http://www.sencha.com/contact

GNU General Public License Usage
This file may be used under the terms of the GNU General Public License version 3.0 as
published by the Free Software Foundation and appearing in the file LICENSE included in the
packaging of this file.

Please review the following information to ensure the GNU General Public License version 3.0
requirements will be met: http://www.gnu.org/copyleft/gpl.html.

If you are unsure which license is appropriate for your use, please contact the sales department
at http://www.sencha.com/contact.

Generated from ext-all-debug.js on Thu Feb 4 14:27:52 2016 +0100
*/
!function(){function createTargeted(h,o,scope){return function(){o.target==arguments[0]&&h.apply(scope,Array.prototype.slice.call(arguments,0))}}function createBuffered(h,o,l,scope){return l.task=new EXTUTIL.DelayedTask,function(){l.task.delay(o.buffer,h,scope,Array.prototype.slice.call(arguments,0))}}function createSingle(h,e,fn,scope){return function(){return e.removeListener(fn,scope),h.apply(scope,arguments)}}function createDelayed(h,o,l,scope){return function(){var task=new EXTUTIL.DelayedTask,args=Array.prototype.slice.call(arguments,0);l.tasks||(l.tasks=[]),l.tasks.push(task),task.delay(o.delay||10,function(){l.tasks.remove(task),h.apply(scope,args)},scope)}}var EXTUTIL=Ext.util,EACH=Ext.each,TRUE=!0,FALSE=!1;EXTUTIL.Observable=function(){var me=this,e=me.events;me.listeners&&(me.on(me.listeners),delete me.listeners),me.events=e||{}},EXTUTIL.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var cc,q,c,a=Array.prototype.slice.call(arguments,0),ename=a[0].toLowerCase(),me=this,ret=TRUE,ce=me.events[ename];if(me.eventsSuspended===TRUE)(q=me.eventQueue)&&q.push(a);else if("object"==typeof ce)if(ce.bubble){if(ce.fire.apply(ce,a.slice(1))===FALSE)return FALSE;if(c=me.getBubbleTarget&&me.getBubbleTarget(),c&&c.enableBubble)return cc=c.events[ename],cc&&"object"==typeof cc&&cc.bubble||c.enableBubble(ename),c.fireEvent.apply(c,a)}else a.shift(),ret=ce.fire.apply(ce,a);return ret},addListener:function(eventName,fn,scope,o){var e,oe,ce,me=this;if("object"==typeof eventName){o=eventName;for(e in o)oe=o[e],me.filterOptRe.test(e)||me.addListener(e,oe.fn||oe,oe.scope||o.scope,oe.fn?oe:o)}else eventName=eventName.toLowerCase(),ce=me.events[eventName]||TRUE,"boolean"==typeof ce&&(me.events[eventName]=ce=new EXTUTIL.Event(me,eventName)),ce.addListener(fn,scope,"object"==typeof o?o:{})},removeListener:function(eventName,fn,scope){var ce=this.events[eventName.toLowerCase()];"object"==typeof ce&&ce.removeListener(fn,scope)},purgeListeners:function(){var evt,key,events=this.events;for(key in events)evt=events[key],"object"==typeof evt&&evt.clearListeners()},addEvents:function(o){var me=this;if(me.events=me.events||{},"string"==typeof o)for(var a=arguments,i=a.length;i--;)me.events[a[i]]=me.events[a[i]]||TRUE;else Ext.applyIf(me.events,o)},hasListener:function(eventName){var e=this.events[eventName.toLowerCase()];return"object"==typeof e&&e.listeners.length>0},suspendEvents:function(queueSuspended){this.eventsSuspended=TRUE,queueSuspended&&!this.eventQueue&&(this.eventQueue=[])},resumeEvents:function(){var me=this,queued=me.eventQueue||[];me.eventsSuspended=FALSE,delete me.eventQueue,EACH(queued,function(e){me.fireEvent.apply(me,e)})}};var OBSERVABLE=EXTUTIL.Observable.prototype;OBSERVABLE.on=OBSERVABLE.addListener,OBSERVABLE.un=OBSERVABLE.removeListener,EXTUTIL.Observable.releaseCapture=function(o){o.fireEvent=OBSERVABLE.fireEvent},EXTUTIL.Event=function(obj,name){this.name=name,this.obj=obj,this.listeners=[]},EXTUTIL.Event.prototype={addListener:function(fn,scope,options){var l,me=this;scope=scope||me.obj,me.isListening(fn,scope)||(l=me.createListener(fn,scope,options),me.firing&&(me.listeners=me.listeners.slice(0)),me.listeners.push(l))},createListener:function(fn,scope,o){o=o||{},scope=scope||this.obj;var l={fn:fn,scope:scope,options:o},h=fn;return o.target&&(h=createTargeted(h,o,scope)),o.delay&&(h=createDelayed(h,o,l,scope)),o.single&&(h=createSingle(h,this,fn,scope)),o.buffer&&(h=createBuffered(h,o,l,scope)),l.fireFn=h,l},findListener:function(fn,scope){var l,list=this.listeners,i=list.length;for(scope=scope||this.obj;i--;)if(l=list[i],l&&l.fn==fn&&l.scope==scope)return i;return-1},isListening:function(fn,scope){return-1!=this.findListener(fn,scope)},removeListener:function(fn,scope){var index,l,k,me=this,ret=FALSE;if(-1!=(index=me.findListener(fn,scope))){if(me.firing&&(me.listeners=me.listeners.slice(0)),l=me.listeners[index],l.task&&(l.task.cancel(),delete l.task),k=l.tasks&&l.tasks.length){for(;k--;)l.tasks[k].cancel();delete l.tasks}me.listeners.splice(index,1),ret=TRUE}return ret},clearListeners:function(){for(var me=this,l=me.listeners,i=l.length;i--;)me.removeListener(l[i].fn,l[i].scope)},fire:function(){var l,me=this,listeners=me.listeners,len=listeners.length,i=0;if(len>0){me.firing=TRUE;for(var args=Array.prototype.slice.call(arguments,0);len>i;i++)if(l=listeners[i],l&&l.fireFn.apply(l.scope||me.obj||window,args)===FALSE)return me.firing=FALSE}return me.firing=FALSE,TRUE}}}(),Ext.DomHelper=function(){function doInsert(el,o,returnElement,pos,sibling,append){var newNode=pub.insertHtml(pos,Ext.getDom(el),createHtml(o));return returnElement?Ext.get(newNode,!0):newNode}function createHtml(o){var attr,val,key,cn,b="";if("string"==typeof o)b=o;else if(Ext.isArray(o))for(var i=0;i<o.length;i++)o[i]&&(b+=createHtml(o[i]));else{b+="<"+(o.tag=o.tag||"div");for(attr in o)if(val=o[attr],!confRe.test(attr))if("object"==typeof val){b+=" "+attr+'="';for(key in val)b+=key+":"+val[key]+";";b+='"'}else b+=" "+({cls:"class",htmlFor:"for"}[attr]||attr)+'="'+val+'"';emptyTags.test(o.tag)?b+="/>":(b+=">",(cn=o.children||o.cn)?b+=createHtml(cn):o.html&&(b+=o.html),b+="</"+o.tag+">")}return b}function ieTable(depth,s,h,e){tempTableEl.innerHTML=[s,h,e].join("");for(var ns,i=-1,el=tempTableEl;++i<depth;)el=el.firstChild;if(ns=el.nextSibling){for(var df=document.createDocumentFragment();el;)ns=el.nextSibling,df.appendChild(el),el=ns;el=df}return el}function insertIntoTable(tag,where,el,html){var node,before;return tempTableEl=tempTableEl||document.createElement("div"),("td"!=tag||where!=afterbegin&&where!=beforeend)&&(tableElRe.test(tag)||where!=beforebegin&&where!=afterend)?(before=where==beforebegin?el:where==afterend?el.nextSibling:where==afterbegin?el.firstChild:null,(where==beforebegin||where==afterend)&&(el=el.parentNode),node="td"==tag||"tr"==tag&&(where==beforeend||where==afterbegin)?ieTable(4,trs,html,tre):"tbody"==tag&&(where==beforeend||where==afterbegin)||"tr"==tag&&(where==beforebegin||where==afterend)?ieTable(3,tbs,html,tbe):ieTable(2,ts,html,te),el.insertBefore(node,before),node):void 0}function createContextualFragment(html){var length,childNodes,div=document.createElement("div"),fragment=document.createDocumentFragment(),i=0;for(div.innerHTML=html,childNodes=div.childNodes,length=childNodes.length;length>i;i++)fragment.appendChild(childNodes[i].cloneNode(!0));return fragment}var pub,tempTableEl=null,emptyTags=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,tableRe=/^table|tbody|tr|td$/i,confRe=/tag|children|cn|html$/i,tableElRe=/td|tr|tbody/i,cssRe=/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,endRe=/end/i,afterbegin="afterbegin",afterend="afterend",beforebegin="beforebegin",beforeend="beforeend",ts="<table>",te="</table>",tbs=ts+"<tbody>",tbe="</tbody>"+te,trs=tbs+"<tr>",tre="</tr>"+tbe;return pub={markup:function(o){return createHtml(o)},applyStyles:function(el,styles){if(styles){var matches;if(el=Ext.fly(el),"function"==typeof styles&&(styles=styles.call()),"string"==typeof styles)for(cssRe.lastIndex=0;matches=cssRe.exec(styles);)el.setStyle(matches[1],matches[2]);else"object"==typeof styles&&el.setStyle(styles)}},insertHtml:function(where,el,html){var hashVal,range,rangeEl,setStart,frag,rs,hash={};if(where=where.toLowerCase(),hash[beforebegin]=["BeforeBegin","previousSibling"],hash[afterend]=["AfterEnd","nextSibling"],!el.insertAdjacentHTML)return range=el.ownerDocument.createRange(),setStart="setStart"+(endRe.test(where)?"After":"Before"),hash[where]?(range[setStart](el),frag=range.createContextualFragment?range.createContextualFragment(html):createContextualFragment(html),el.parentNode.insertBefore(frag,where==beforebegin?el:el.nextSibling),el[(where==beforebegin?"previous":"next")+"Sibling"]):(rangeEl=(where==afterbegin?"first":"last")+"Child",el.firstChild?(range[setStart](el[rangeEl]),frag=range.createContextualFragment?range.createContextualFragment(html):createContextualFragment(html),where==afterbegin?el.insertBefore(frag,el.firstChild):el.appendChild(frag)):el.innerHTML=html,el[rangeEl]);if(tableRe.test(el.tagName)&&(rs=insertIntoTable(el.tagName.toLowerCase(),where,el,html)))return rs;if(hash[afterbegin]=["AfterBegin","firstChild"],hash[beforeend]=["BeforeEnd","lastChild"],hashVal=hash[where])return el.insertAdjacentHTML(hashVal[0],html),el[hashVal[1]];throw'Illegal insertion point -> "'+where+'"'},insertBefore:function(el,o,returnElement){return doInsert(el,o,returnElement,beforebegin)},insertAfter:function(el,o,returnElement){return doInsert(el,o,returnElement,afterend,"nextSibling")},insertFirst:function(el,o,returnElement){return doInsert(el,o,returnElement,afterbegin,"firstChild")},append:function(el,o,returnElement){return doInsert(el,o,returnElement,beforeend,"",!0)},overwrite:function(el,o,returnElement){return el=Ext.getDom(el),el.innerHTML=createHtml(o),returnElement?Ext.get(el.firstChild):el.firstChild},createHtml:createHtml}}(),Ext.Template=function(html){var v,me=this,a=arguments,buf=[];if(Ext.isArray(html))html=html.join("");else if(a.length>1){for(var i=0,len=a.length;len>i;i++)v=a[i],"object"==typeof v?Ext.apply(me,v):buf.push(v);html=buf.join("")}me.html=html,me.compiled&&me.compile()},Ext.Template.prototype={re:/\{([\w\-]+)\}/g,applyTemplate:function(values){var me=this;return me.compiled?me.compiled(values):me.html.replace(me.re,function(m,name){return void 0!==values[name]?values[name]:""})},set:function(html,compile){var me=this;return me.html=html,me.compiled=null,compile?me.compile():me},compile:function(){function fn(m,name){return name="values['"+name+"']","'"+sep+"("+name+" == undefined ? '' : "+name+")"+sep+"'"}var me=this,sep=Ext.isGecko?"+":",";return eval("this.compiled = function(values){ return "+(Ext.isGecko?"'":"['")+me.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+(Ext.isGecko?"';};":"'].join('');};")),me},insertFirst:function(el,values,returnElement){return this.doInsert("afterBegin",el,values,returnElement)},insertBefore:function(el,values,returnElement){return this.doInsert("beforeBegin",el,values,returnElement)},insertAfter:function(el,values,returnElement){return this.doInsert("afterEnd",el,values,returnElement)},append:function(el,values,returnElement){return this.doInsert("beforeEnd",el,values,returnElement)},doInsert:function(where,el,values,returnEl){el=Ext.getDom(el);var newNode=Ext.DomHelper.insertHtml(where,el,this.applyTemplate(values));return returnEl?Ext.get(newNode,!0):newNode},overwrite:function(el,values,returnElement){return el=Ext.getDom(el),el.innerHTML=this.applyTemplate(values),returnElement?Ext.get(el.firstChild,!0):el.firstChild}},Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.Template.from=function(el,config){return el=Ext.getDom(el),new Ext.Template(el.value||el.innerHTML,config||"")},Ext.DomQuery=function(){function child(parent,index){for(var i=0,n=parent.firstChild;n;){if(1==n.nodeType&&++i==index)return n;n=n.nextSibling}return null}function next(n){for(;(n=n.nextSibling)&&1!=n.nodeType;);return n}function prev(n){for(;(n=n.previousSibling)&&1!=n.nodeType;);return n}function children(parent){for(var nextNode,n=parent.firstChild,nodeIndex=-1;n;)nextNode=n.nextSibling,3!=n.nodeType||nonSpace.test(n.nodeValue)?n.nodeIndex=++nodeIndex:parent.removeChild(n),n=nextNode;return this}function byClassName(nodeSet,cls){if(!cls)return nodeSet;for(var ci,result=[],ri=-1,i=0;ci=nodeSet[i];i++)-1!=(" "+ci.className+" ").indexOf(cls)&&(result[++ri]=ci);return result}function attrValue(n,attr){return n.tagName||"undefined"==typeof n.length||(n=n[0]),n?"for"==attr?n.htmlFor:"class"==attr||"className"==attr?n.className:n.getAttribute(attr)||n[attr]:null}function getNodes(ns,mode,tagName){var cs,result=[],ri=-1;if(!ns)return result;if(tagName=tagName||"*","undefined"!=typeof ns.getElementsByTagName&&(ns=[ns]),mode){if("/"==mode||">"==mode)for(var ni,cn,utag=tagName.toUpperCase(),i=0;ni=ns[i];i++){cn=ni.childNodes;for(var cj,j=0;cj=cn[j];j++)(cj.nodeName==utag||cj.nodeName==tagName||"*"==tagName)&&(result[++ri]=cj)}else if("+"==mode)for(var n,utag=tagName.toUpperCase(),i=0;n=ns[i];i++){for(;(n=n.nextSibling)&&1!=n.nodeType;);!n||n.nodeName!=utag&&n.nodeName!=tagName&&"*"!=tagName||(result[++ri]=n)}else if("~"==mode)for(var n,utag=tagName.toUpperCase(),i=0;n=ns[i];i++)for(;n=n.nextSibling;)(n.nodeName==utag||n.nodeName==tagName||"*"==tagName)&&(result[++ri]=n)}else for(var ni,i=0;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(var ci,j=0;ci=cs[j];j++)result[++ri]=ci}return result}function concat(a,b){if(b.slice)return a.concat(b);for(var i=0,l=b.length;l>i;i++)a[a.length]=b[i];return a}function byTag(cs,tagName){if((cs.tagName||cs==document)&&(cs=[cs]),!tagName)return cs;var result=[],ri=-1;tagName=tagName.toLowerCase();for(var ci,i=0;ci=cs[i];i++)1==ci.nodeType&&ci.tagName.toLowerCase()==tagName&&(result[++ri]=ci);return result}function byId(cs,id){if((cs.tagName||cs==document)&&(cs=[cs]),!id)return cs;for(var ci,result=[],ri=-1,i=0;ci=cs[i];i++)if(ci&&ci.id==id)return result[++ri]=ci,result;return result}function byAttribute(cs,attr,value,op,custom){for(var a,xml,hasXml,ci,result=[],ri=-1,useGetStyle="{"==custom,fn=Ext.DomQuery.operators[op],i=0;ci=cs[i];i++)1==ci.nodeType&&(hasXml||(xml=Ext.DomQuery.isXml(ci),hasXml=!0),a=xml?ci.getAttribute(attr):useGetStyle?Ext.DomQuery.getStyle(ci,attr):"class"==attr||"className"==attr?ci.className:"for"==attr?ci.htmlFor:"href"==attr?ci.getAttribute("href",2):ci.getAttribute(attr),(fn&&fn(a,value)||!fn&&a)&&(result[++ri]=ci));return result}function byPseudo(cs,name,value){return Ext.DomQuery.pseudos[name](cs,value)}function nodupIEXml(cs){var r,d=++key;cs[0].setAttribute("_nodup",d),r=[cs[0]];for(var i=1,len=cs.length;len>i;i++){var c=cs[i];!c.getAttribute("_nodup")!=d&&(c.setAttribute("_nodup",d),r[r.length]=c)}for(var i=0,len=cs.length;len>i;i++)cs[i].removeAttribute("_nodup");return r}function nodup(cs){if(!cs)return[];var c,i,cj,len=cs.length,r=cs,ri=-1;if(!len||"undefined"!=typeof cs.nodeType||1==len)return cs;if(isIE&&"undefined"!=typeof cs[0].selectSingleNode)return nodupIEXml(cs);var d=++key;for(cs[0]._nodup=d,i=1;c=cs[i];i++){if(c._nodup==d){r=[];for(var j=0;i>j;j++)r[++ri]=cs[j];for(j=i+1;cj=cs[j];j++)cj._nodup!=d&&(cj._nodup=d,r[++ri]=cj);return r}c._nodup=d}return r}function quickDiffIEXml(c1,c2){for(var d=++key,r=[],i=0,len=c1.length;len>i;i++)c1[i].setAttribute("_qdiff",d);for(var i=0,len=c2.length;len>i;i++)c2[i].getAttribute("_qdiff")!=d&&(r[r.length]=c2[i]);for(var i=0,len=c1.length;len>i;i++)c1[i].removeAttribute("_qdiff");return r}function quickDiff(c1,c2){var len1=c1.length,d=++key,r=[];if(!len1)return c2;if(isIE&&"undefined"!=typeof c1[0].selectSingleNode)return quickDiffIEXml(c1,c2);for(var i=0;len1>i;i++)c1[i]._qdiff=d;for(var i=0,len=c2.length;len>i;i++)c2[i]._qdiff!=d&&(r[r.length]=c2[i]);return r}function quickId(ns,mode,root,id){if(ns==root){var d=root.ownerDocument||root;return d.getElementById(id)}return ns=getNodes(ns,mode,"*"),byId(ns,id)}var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=window.ActiveXObject?!0:!1,key=30803;return eval("var batch = 30803;"),{getStyle:function(el,name){return Ext.fly(el).getStyle(name)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);for(lmode&&lmode[1]&&(fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";',path=path.replace(lmode[1],""));"/"==path.substr(0,1);)path=path.substr(1);for(;path&&lastPath!=path;){lastPath=path;var tokenMatch=path.match(tagTokenRe);for("select"==type?tokenMatch?("#"==tokenMatch[1]?fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");':fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],"")):"@"!=path.substr(0,1)&&(fn[fn.length]='n = getNodes(n, mode, "*");'):tokenMatch&&("#"==tokenMatch[1]?fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");':fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");',path=path.replace(tokenMatch[0],""));!(modeMatch=path.match(modeRe));){for(var matched=!1,j=0;matchersLn>j;j++){var t=matchers[j],m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i]}),path=path.replace(m[0],""),matched=!0;break}}if(!matched)throw'Error parsing selector, parsing failed at "'+path+'"'}modeMatch[1]&&(fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";',path=path.replace(modeMatch[1],""))}return fn[fn.length]="return nodup(n);\n}",eval(fn.join("")),f},jsSelect:function(path,root,type){root=root||document,"string"==typeof root&&(root=document.getElementById(root));for(var paths=path.split(","),results=[],i=0,len=paths.length;len>i;i++){var subPath=paths[i].replace(trimRe,"");if(!cache[subPath]&&(cache[subPath]=Ext.DomQuery.compile(subPath),!cache[subPath]))throw subPath+" is not a valid selector";var result=cache[subPath](root);result&&result!=document&&(results=results.concat(result))}return paths.length>1?nodup(results):results},isXml:function(el){var docEl=(el?el.ownerDocument||el:0).documentElement;return docEl?"HTML"!==docEl.nodeName:!1},select:document.querySelectorAll?function(path,root,type){if(root=root||document,!Ext.DomQuery.isXml(root))try{var cs=root.querySelectorAll(path);return Ext.toArray(cs)}catch(ex){}return Ext.DomQuery.jsSelect.call(this,path,root,type)}:function(path,root,type){return Ext.DomQuery.jsSelect.call(this,path,root,type)},selectNode:function(path,root){return Ext.DomQuery.select(path,root)[0]},selectValue:function(path,root,defaultValue){path=path.replace(trimRe,""),valueCache[path]||(valueCache[path]=Ext.DomQuery.compile(path,"select"));var v,n=valueCache[path](root);return n=n[0]?n[0]:n,"function"==typeof n.normalize&&n.normalize(),v=n&&n.firstChild?n.firstChild.nodeValue:null,null===v||void 0===v||""===v?defaultValue:v},selectNumber:function(path,root,defaultValue){var v=Ext.DomQuery.selectValue(path,root,defaultValue||0);return parseFloat(v)},is:function(el,ss){"string"==typeof el&&(el=document.getElementById(el));var isArray=Ext.isArray(el),result=Ext.DomQuery.filter(isArray?el:[el],ss);return isArray?result.length==el.length:result.length>0},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,""),simpleCache[ss]||(simpleCache[ss]=Ext.DomQuery.compile(ss,"simple"));var result=simpleCache[ss](els);return nonMatches?quickDiff(result,els):result},matchers:[{re:/^\.([\w\-]+)/,select:'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?(["']?)(.*?)\4)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{5}", "{3}", "{1}");'},{re:/^#([\w\-]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,v){return a==v},"!=":function(a,v){return a!=v},"^=":function(a,v){return a&&a.substr(0,v.length)==v},"$=":function(a,v){return a&&a.substr(a.length-v.length)==v},"*=":function(a,v){return a&&-1!==a.indexOf(v)},"%=":function(a,v){return a%v==0},"|=":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+"-")},"~=":function(a,v){return a&&-1!=(" "+a+" ").indexOf(" "+v+" ")}},pseudos:{"first-child":function(c){for(var n,ci,r=[],ri=-1,i=0;ci=n=c[i];i++){for(;(n=n.previousSibling)&&1!=n.nodeType;);n||(r[++ri]=ci)}return r},"last-child":function(c){for(var n,ci,r=[],ri=-1,i=0;ci=n=c[i];i++){for(;(n=n.nextSibling)&&1!=n.nodeType;);n||(r[++ri]=ci)}return r},"nth-child":function(c,a){for(var n,r=[],ri=-1,m=nthRe.exec("even"==a&&"2n"||"odd"==a&&"2n+1"||!nthRe2.test(a)&&"n+"+a||a),f=(m[1]||1)-0,l=m[2]-0,i=0;n=c[i];i++){var pn=n.parentNode;if(batch!=pn._batch){for(var j=0,cn=pn.firstChild;cn;cn=cn.nextSibling)1==cn.nodeType&&(cn.nodeIndex=++j);pn._batch=batch}1==f?(0==l||n.nodeIndex==l)&&(r[++ri]=n):(n.nodeIndex+l)%f==0&&(r[++ri]=n)}return r},"only-child":function(c){for(var ci,r=[],ri=-1,i=0;ci=c[i];i++)prev(ci)||next(ci)||(r[++ri]=ci);return r},empty:function(c){for(var ci,r=[],ri=-1,i=0;ci=c[i];i++){for(var cn,cns=ci.childNodes,j=0,empty=!0;cn=cns[j];)if(++j,1==cn.nodeType||3==cn.nodeType){empty=!1;break}empty&&(r[++ri]=ci)}return r},contains:function(c,v){for(var ci,r=[],ri=-1,i=0;ci=c[i];i++)-1!=(ci.textContent||ci.innerText||"").indexOf(v)&&(r[++ri]=ci);return r},nodeValue:function(c,v){for(var ci,r=[],ri=-1,i=0;ci=c[i];i++)ci.firstChild&&ci.firstChild.nodeValue==v&&(r[++ri]=ci);return r},checked:function(c){for(var ci,r=[],ri=-1,i=0;ci=c[i];i++)1==ci.checked&&(r[++ri]=ci);return r},not:function(c,ss){return Ext.DomQuery.filter(c,ss,!0)},any:function(c,selectors){for(var s,ci,ss=selectors.split("|"),r=[],ri=-1,i=0;ci=c[i];i++)for(var j=0;s=ss[j];j++)if(Ext.DomQuery.is(ci,s)){r[++ri]=ci;break}return r},odd:function(c){return this["nth-child"](c,"odd")},even:function(c){return this["nth-child"](c,"even")},nth:function(c,a){return c[a-1]||[]},first:function(c){return c[0]||[]},last:function(c){return c[c.length-1]||[]},has:function(c,ss){for(var ci,s=Ext.DomQuery.select,r=[],ri=-1,i=0;ci=c[i];i++)s(ss,ci).length>0&&(r[++ri]=ci);return r},next:function(c,ss){for(var ci,is=Ext.DomQuery.is,r=[],ri=-1,i=0;ci=c[i];i++){var n=next(ci);n&&is(n,ss)&&(r[++ri]=ci)}return r},prev:function(c,ss){for(var ci,is=Ext.DomQuery.is,r=[],ri=-1,i=0;ci=c[i];i++){var n=prev(ci);n&&is(n,ss)&&(r[++ri]=ci)}return r}}}}(),Ext.query=Ext.DomQuery.select,Ext.util.DelayedTask=function(fn,scope,args){var id,me=this,call=function(){clearInterval(id),id=null,fn.apply(scope,args||[])};me.delay=function(delay,newFn,newScope,newArgs){me.cancel(),fn=newFn||fn,scope=newScope||scope,args=newArgs||args,id=setInterval(call,delay)},me.cancel=function(){id&&(clearInterval(id),id=null)}},function(){function garbageCollect(){if(Ext.enableGarbageCollector){var eid,el,d,o;for(eid in EC)o=EC[eid],o.skipGC?Ext.EventManager.removeFromSpecialCache(o.el):(el=o.el,d=el.dom,d&&d.parentNode&&(d.offsetParent||DOC.getElementById(eid))||(Ext.enableListenerCollection&&Ext.EventManager.removeAll(d),delete EC[eid]));if(Ext.isIE){var t={};for(eid in EC)t[eid]=EC[eid];EC=Ext.elCache=t}}else clearInterval(El.collectorThreadId)}var DOC=document;Ext.Element=function(element,forceNew){var id,dom="string"==typeof element?DOC.getElementById(element):element;return dom?(id=dom.id,!forceNew&&id&&Ext.elCache[id]?Ext.elCache[id].el:(this.dom=dom,void(this.id=id||Ext.id(dom)))):null};var DH=Ext.DomHelper,El=Ext.Element,EC=Ext.elCache;El.prototype={set:function(o,useSet){var attr,val,el=this.dom,useSet=useSet!==!1&&!!el.setAttribute;for(attr in o)o.hasOwnProperty(attr)&&(val=o[attr],"style"==attr?DH.applyStyles(el,val):"cls"==attr?el.className=val:useSet?el.setAttribute(attr,val):el[attr]=val);return this},defaultUnit:"px",is:function(simpleSelector){return Ext.DomQuery.is(this.dom,simpleSelector)},focus:function(defer,dom){var me=this,dom=dom||me.dom;try{Number(defer)?me.focus.defer(defer,null,[null,dom]):dom.focus()}catch(e){}return me},blur:function(){try{this.dom.blur()}catch(e){}return this},getValue:function(asNumber){var val=this.dom.value;return asNumber?parseInt(val,10):val},addListener:function(eventName,fn,scope,options){return Ext.EventManager.on(this.dom,eventName,fn,scope||this,options),this},removeListener:function(eventName,fn,scope){return Ext.EventManager.removeListener(this.dom,eventName,fn,scope||this),this},removeAllListeners:function(){return Ext.EventManager.removeAll(this.dom),this},purgeAllListeners:function(){return Ext.EventManager.purgeElement(this,!0),this},addUnits:function(size){return""===size||"auto"==size||void 0===size?size=size||"":isNaN(size)&&unitPattern.test(size)||(size+=this.defaultUnit||"px"),size},load:function(url,params,cb){return Ext.Ajax.request(Ext.apply({params:params,url:url.url||url,callback:cb,el:this.dom,indicatorText:url.indicatorText||""},Ext.isObject(url)?url:{})),this},isBorderBox:function(){return Ext.isBorderBox||Ext.isForcedBorderBox||noBoxAdjust[(this.dom.tagName||"").toLowerCase()]},remove:function(){var me=this,dom=me.dom;dom&&(delete me.dom,Ext.removeNode(dom))},hover:function(overFn,outFn,scope,options){var me=this;return me.on("mouseenter",overFn,scope||me.dom,options),me.on("mouseleave",outFn,scope||me.dom,options),me},contains:function(el){return el?Ext.lib.Dom.isAncestor(this.dom,el.dom?el.dom:el):!1},getAttributeNS:function(ns,name){return this.getAttribute(name,ns)},getAttribute:function(){var test=document.createElement("table"),isBrokenOnTable=!1,hasGetAttribute="getAttribute"in test,unknownRe=/undefined|unknown/;if(hasGetAttribute){try{test.getAttribute("ext:qtip")}catch(e){isBrokenOnTable=!0}return function(name,ns){var value,el=this.dom;if(el.getAttributeNS&&(value=el.getAttributeNS(ns,name)||null),null==value)if(ns)if(isBrokenOnTable&&"TABLE"==el.tagName.toUpperCase())try{value=el.getAttribute(ns+":"+name)}catch(e){value=""}else value=el.getAttribute(ns+":"+name);else value=el.getAttribute(name)||el[name];return value||""}}return function(name,ns){var value,attribute,el=this.om;return ns?(attribute=el[ns+":"+name],value=unknownRe.test(typeof attribute)?void 0:attribute):value=el[name],value||""}}(),update:function(html){return this.dom&&(this.dom.innerHTML=html),this}};var ep=El.prototype;El.addMethods=function(o){Ext.apply(ep,o)},ep.on=ep.addListener,ep.un=ep.removeListener,ep.autoBoxAdjust=!0;var docEl,unitPattern=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i;El.get=function(el){var ex,elm,id;if(!el)return null;if("string"==typeof el)return(elm=DOC.getElementById(el))?(EC[el]&&EC[el].el?(ex=EC[el].el,ex.dom=elm):ex=El.addToCache(new El(elm)),ex):null;if(el.tagName)return(id=el.id)||(id=Ext.id(el)),EC[id]&&EC[id].el?(ex=EC[id].el,ex.dom=el):ex=El.addToCache(new El(el)),ex;if(el instanceof El)return el!=docEl&&(!Ext.isIE||void 0!=el.id&&""!=el.id?el.dom=DOC.getElementById(el.id)||el.dom:el.dom=el.dom),el;if(el.isComposite)return el;if(Ext.isArray(el))return El.select(el);if(el==DOC){if(!docEl){var f=function(){};f.prototype=El.prototype,docEl=new f,docEl.dom=DOC}return docEl}return null},El.addToCache=function(el,id){return id=id||el.id,EC[id]={el:el,data:{},events:{}},el},El.data=function(el,key,value){if(el=El.get(el),!el)return null;var c=EC[el.id].data;return 2==arguments.length?c[key]:c[key]=value},El.collectorThreadId=setInterval(garbageCollect,3e4);var flyFn=function(){};flyFn.prototype=El.prototype,El.Flyweight=function(dom){this.dom=dom},El.Flyweight.prototype=new flyFn,El.Flyweight.prototype.isFlyweight=!0,El._flyweights={},El.fly=function(el,named){var ret=null;return named=named||"_global",(el=Ext.getDom(el))&&((El._flyweights[named]=El._flyweights[named]||new El.Flyweight).dom=el,ret=El._flyweights[named]),ret},Ext.get=El.get,Ext.fly=El.fly;var noBoxAdjust=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};(Ext.isIE||Ext.isGecko)&&(noBoxAdjust.button=1)}(),Ext.Element.addMethods(function(){var PARENTNODE="parentNode",NEXTSIBLING="nextSibling",PREVIOUSSIBLING="previousSibling",DQ=Ext.DomQuery,GET=Ext.get;return{findParent:function(simpleSelector,maxDepth,returnEl){var stopEl,p=this.dom,b=document.body,depth=0;if(Ext.isGecko&&"[object XULElement]"==Object.prototype.toString.call(p))return null;for(maxDepth=maxDepth||50,isNaN(maxDepth)&&(stopEl=Ext.getDom(maxDepth),maxDepth=Number.MAX_VALUE);p&&1==p.nodeType&&maxDepth>depth&&p!=b&&p!=stopEl;){if(DQ.is(p,simpleSelector))return returnEl?GET(p):p;depth++,p=p.parentNode}return null},findParentNode:function(simpleSelector,maxDepth,returnEl){var p=Ext.fly(this.dom.parentNode,"_internal");return p?p.findParent(simpleSelector,maxDepth,returnEl):null},up:function(simpleSelector,maxDepth){return this.findParentNode(simpleSelector,maxDepth,!0)},select:function(selector){return Ext.Element.select(selector,this.dom)},query:function(selector){return DQ.select(selector,this.dom)},child:function(selector,returnDom){var n=DQ.selectNode(selector,this.dom);return returnDom?n:GET(n)},down:function(selector,returnDom){var n=DQ.selectNode(" > "+selector,this.dom);return returnDom?n:GET(n)},parent:function(selector,returnDom){return this.matchNode(PARENTNODE,PARENTNODE,selector,returnDom)},next:function(selector,returnDom){return this.matchNode(NEXTSIBLING,NEXTSIBLING,selector,returnDom)},prev:function(selector,returnDom){return this.matchNode(PREVIOUSSIBLING,PREVIOUSSIBLING,selector,returnDom)},first:function(selector,returnDom){return this.matchNode(NEXTSIBLING,"firstChild",selector,returnDom)},last:function(selector,returnDom){return this.matchNode(PREVIOUSSIBLING,"lastChild",selector,returnDom)},matchNode:function(dir,start,selector,returnDom){for(var n=this.dom[start];n;){if(1==n.nodeType&&(!selector||DQ.is(n,selector)))return returnDom?n:GET(n);n=n[dir]}return null}}}()),Ext.Element.addMethods(function(){var GETDOM=Ext.getDom,GET=Ext.get,DH=Ext.DomHelper;return{appendChild:function(el){return GET(el).appendTo(this)},appendTo:function(el){return GETDOM(el).appendChild(this.dom),this},insertBefore:function(el){return(el=GETDOM(el)).parentNode.insertBefore(this.dom,el),this},insertAfter:function(el){return(el=GETDOM(el)).parentNode.insertBefore(this.dom,el.nextSibling),this},insertFirst:function(el,returnDom){return el=el||{},el.nodeType||el.dom||"string"==typeof el?(el=GETDOM(el),this.dom.insertBefore(el,this.dom.firstChild),returnDom?el:GET(el)):this.createChild(el,this.dom.firstChild,returnDom)},replace:function(el){return el=GET(el),this.insertBefore(el),el.remove(),this},replaceWith:function(el){var me=this;return el.nodeType||el.dom||"string"==typeof el?(el=GETDOM(el),me.dom.parentNode.insertBefore(el,me.dom)):el=DH.insertBefore(me.dom,el),delete Ext.elCache[me.id],Ext.removeNode(me.dom),me.id=Ext.id(me.dom=el),Ext.Element.addToCache(me.isFlyweight?new Ext.Element(me.dom):me),me},createChild:function(config,insertBefore,returnDom){return config=config||{tag:"div"},insertBefore?DH.insertBefore(insertBefore,config,returnDom!==!0):DH[this.dom.firstChild?"append":"overwrite"](this.dom,config,returnDom!==!0)},wrap:function(config,returnDom){var newEl=DH.insertBefore(this.dom,config||{tag:"div"},!returnDom);return newEl.dom?newEl.dom.appendChild(this.dom):newEl.appendChild(this.dom),newEl},insertHtml:function(where,html,returnEl){var el=DH.insertHtml(where,this.dom,html);return returnEl?Ext.get(el):el}}}()),Ext.Element.addMethods(function(){function camelFn(m,a){return a.charAt(1).toUpperCase()}function chkCache(prop){return propCache[prop]||(propCache[prop]="float"==prop?supports.cssFloat?"cssFloat":"styleFloat":prop.replace(camelRe,camelFn))}var supports=Ext.supports,propCache={},camelRe=/(-[a-z])/gi,view=document.defaultView,opacityRe=/alpha\(opacity=(.*)\)/i,trimRe=/^\s+|\s+$/g,spacesRe=(Ext.Element,/\s+/),wordsRe=/\w/g,PADDING="padding",MARGIN="margin",BORDER="border",LEFT="-left",RIGHT="-right",TOP="-top",BOTTOM="-bottom",WIDTH="-width",MATH=Math,HIDDEN="hidden",ISCLIPPED="isClipped",OVERFLOW="overflow",OVERFLOWX="overflow-x",OVERFLOWY="overflow-y",ORIGINALCLIP="originalClip",borders={l:BORDER+LEFT+WIDTH,r:BORDER+RIGHT+WIDTH,t:BORDER+TOP+WIDTH,b:BORDER+BOTTOM+WIDTH},paddings={l:PADDING+LEFT,r:PADDING+RIGHT,t:PADDING+TOP,b:PADDING+BOTTOM},margins={l:MARGIN+LEFT,r:MARGIN+RIGHT,t:MARGIN+TOP,b:MARGIN+BOTTOM},data=Ext.Element.data;return{adjustWidth:function(width){var me=this,isNum="number"==typeof width;return isNum&&me.autoBoxAdjust&&!me.isBorderBox()&&(width-=me.getBorderWidth("lr")+me.getPadding("lr")),isNum&&0>width?0:width},adjustHeight:function(height){var me=this,isNum="number"==typeof height;return isNum&&me.autoBoxAdjust&&!me.isBorderBox()&&(height-=me.getBorderWidth("tb")+me.getPadding("tb")),isNum&&0>height?0:height},addClass:function(className){var i,len,v,me=this,cls=[];if(Ext.isArray(className)){
for(i=0,len=className.length;len>i;i++)v=className[i],"string"==typeof v&&-1==(" "+me.dom.className+" ").indexOf(" "+v+" ")&&cls.push(v);cls.length&&(me.dom.className+=" "+cls.join(" "))}else"string"!=typeof className||this.hasClass(className)||(me.dom.className+=" "+className);return me},removeClass:function(className){var i,idx,len,cls,elClasses,me=this;if(Ext.isArray(className)||(className=[className]),me.dom&&me.dom.className){for(elClasses=me.dom.className.replace(trimRe,"").split(spacesRe),i=0,len=className.length;len>i;i++)cls=className[i],"string"==typeof cls&&(cls=cls.replace(trimRe,""),idx=elClasses.indexOf(cls),-1!=idx&&elClasses.splice(idx,1));me.dom.className=elClasses.join(" ")}return me},radioClass:function(className){var v,i,len,cn=this.dom.parentNode.childNodes;for(className=Ext.isArray(className)?className:[className],i=0,len=cn.length;len>i;i++)v=cn[i],v&&1==v.nodeType&&Ext.fly(v,"_internal").removeClass(className);return this.addClass(className)},toggleClass:function(className){return this.hasClass(className)?this.removeClass(className):this.addClass(className)},hasClass:function(className){return className&&-1!=(" "+this.dom.className+" ").indexOf(" "+className+" ")},replaceClass:function(oldClassName,newClassName){return this.removeClass(oldClassName).addClass(newClassName)},isStyle:function(style,val){return this.getStyle(style)==val},getStyle:function(){return view&&view.getComputedStyle?function(prop){var v,cs,out,display,el=this.dom;return el==document?null:(prop=chkCache(prop),out=(v=el.style[prop])?v:(cs=view.getComputedStyle(el,""))?cs[prop]:null,"marginRight"!=prop||"0px"==out||supports.correctRightMargin||(display=el.style.display,el.style.display="inline-block",out=view.getComputedStyle(el,"").marginRight,el.style.display=display),"backgroundColor"!=prop||"rgba(0, 0, 0, 0)"!=out||supports.correctTransparentColor||(out="transparent"),out)}:function(prop){var m,cs,el=this.dom;if(el==document)return null;if("opacity"==prop){if(el.style.filter.match&&(m=el.style.filter.match(opacityRe))){var fv=parseFloat(m[1]);if(!isNaN(fv))return fv?fv/100:0}return 1}return prop=chkCache(prop),el.style[prop]||((cs=el.currentStyle)?cs[prop]:null)}}(),getColor:function(attr,defaultValue,prefix){var h,v=this.getStyle(attr),color="undefined"!=typeof prefix?prefix:"#";return!v||/transparent|inherit/.test(v)?defaultValue:(/^r/.test(v)?Ext.each(v.slice(4,v.length-1).split(","),function(s){h=parseInt(s,10),color+=(16>h?"0":"")+h.toString(16)}):(v=v.replace("#",""),color+=3==v.length?v.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):v),color.length>5?color.toLowerCase():defaultValue)},setStyle:function(prop,value){var tmp,style;"object"!=typeof prop&&(tmp={},tmp[prop]=value,prop=tmp);for(style in prop)value=prop[style],"opacity"==style?this.setOpacity(value):this.dom.style[chkCache(style)]=value;return this},setOpacity:function(opacity,animate){var me=this,s=me.dom.style;if(animate&&me.anim)me.anim({opacity:{to:opacity}},me.preanim(arguments,1),null,.35,"easeIn");else if(Ext.isIE9m){var opac=1>opacity?"alpha(opacity="+100*opacity+")":"",val=s.filter.replace(opacityRe,"").replace(trimRe,"");s.zoom=1,s.filter=val+(val.length>0?" ":"")+opac}else s.opacity=opacity;return me},clearOpacity:function(){var style=this.dom.style;return Ext.isIE9m?Ext.isEmpty(style.filter)||(style.filter=style.filter.replace(opacityRe,"").replace(trimRe,"")):style.opacity=style["-moz-opacity"]=style["-khtml-opacity"]="",this},getHeight:function(contentHeight){var me=this,dom=me.dom,hidden=Ext.isIE9m&&me.isStyle("display","none"),h=MATH.max(dom.offsetHeight,hidden?0:dom.clientHeight)||0;return h=contentHeight?h-me.getBorderWidth("tb")-me.getPadding("tb"):h,0>h?0:h},getWidth:function(contentWidth){var me=this,dom=me.dom,hidden=Ext.isIE9m&&me.isStyle("display","none"),w=MATH.max(dom.offsetWidth,hidden?0:dom.clientWidth)||0;return w=contentWidth?w-me.getBorderWidth("lr")-me.getPadding("lr"):w,0>w?0:w},setWidth:function(width,animate){var me=this;return width=me.adjustWidth(width),animate&&me.anim?me.anim({width:{to:width}},me.preanim(arguments,1)):me.dom.style.width=me.addUnits(width),me},setHeight:function(height,animate){var me=this;return height=me.adjustHeight(height),animate&&me.anim?me.anim({height:{to:height}},me.preanim(arguments,1)):me.dom.style.height=me.addUnits(height),me},getBorderWidth:function(side){return this.addStyles(side,borders)},getPadding:function(side){return this.addStyles(side,paddings)},clip:function(){var me=this,dom=me.dom;return data(dom,ISCLIPPED)||(data(dom,ISCLIPPED,!0),data(dom,ORIGINALCLIP,{o:me.getStyle(OVERFLOW),x:me.getStyle(OVERFLOWX),y:me.getStyle(OVERFLOWY)}),me.setStyle(OVERFLOW,HIDDEN),me.setStyle(OVERFLOWX,HIDDEN),me.setStyle(OVERFLOWY,HIDDEN)),me},unclip:function(){var me=this,dom=me.dom;if(data(dom,ISCLIPPED)){data(dom,ISCLIPPED,!1);var o=data(dom,ORIGINALCLIP);o.o&&me.setStyle(OVERFLOW,o.o),o.x&&me.setStyle(OVERFLOWX,o.x),o.y&&me.setStyle(OVERFLOWY,o.y)}return me},addStyles:function(sides,styles){var side,size,i,ttlSize=0,sidesArr=sides.match(wordsRe),len=sidesArr.length;for(i=0;len>i;i++)side=sidesArr[i],size=side&&parseInt(this.getStyle(styles[side]),10),size&&(ttlSize+=MATH.abs(size));return ttlSize},margins:margins}}()),function(){var D=Ext.lib.Dom,LEFT="left",RIGHT="right",TOP="top",BOTTOM="bottom",POSITION="position",STATIC="static",RELATIVE="relative",AUTO="auto",ZINDEX="z-index";Ext.Element.addMethods({getX:function(){return D.getX(this.dom)},getY:function(){return D.getY(this.dom)},getXY:function(){return D.getXY(this.dom)},getOffsetsTo:function(el){var o=this.getXY(),e=Ext.fly(el,"_internal").getXY();return[o[0]-e[0],o[1]-e[1]]},setX:function(x,animate){return this.setXY([x,this.getY()],this.animTest(arguments,animate,1))},setY:function(y,animate){return this.setXY([this.getX(),y],this.animTest(arguments,animate,1))},setLeft:function(left){return this.setStyle(LEFT,this.addUnits(left)),this},setTop:function(top){return this.setStyle(TOP,this.addUnits(top)),this},setRight:function(right){return this.setStyle(RIGHT,this.addUnits(right)),this},setBottom:function(bottom){return this.setStyle(BOTTOM,this.addUnits(bottom)),this},setXY:function(pos,animate){var me=this;return animate&&me.anim?me.anim({points:{to:pos}},me.preanim(arguments,1),"motion"):D.setXY(me.dom,pos),me},setLocation:function(x,y,animate){return this.setXY([x,y],this.animTest(arguments,animate,2))},moveTo:function(x,y,animate){return this.setXY([x,y],this.animTest(arguments,animate,2))},getLeft:function(local){return local?parseInt(this.getStyle(LEFT),10)||0:this.getX()},getRight:function(local){var me=this;return local?me.getLeft(!0)+me.getWidth()||0:me.getX()+me.getWidth()},getTop:function(local){return local?parseInt(this.getStyle(TOP),10)||0:this.getY()},getBottom:function(local){var me=this;return local?me.getTop(!0)+me.getHeight()||0:me.getY()+me.getHeight()},position:function(pos,zIndex,x,y){var me=this;!pos&&me.isStyle(POSITION,STATIC)?me.setStyle(POSITION,RELATIVE):pos&&me.setStyle(POSITION,pos),zIndex&&me.setStyle(ZINDEX,zIndex),(x||y)&&me.setXY([x||!1,y||!1])},clearPositioning:function(value){return value=value||"",this.setStyle({left:value,right:value,top:value,bottom:value,"z-index":"",position:STATIC}),this},getPositioning:function(){var l=this.getStyle(LEFT),t=this.getStyle(TOP);return{position:this.getStyle(POSITION),left:l,right:l?"":this.getStyle(RIGHT),top:t,bottom:t?"":this.getStyle(BOTTOM),"z-index":this.getStyle(ZINDEX)}},setPositioning:function(pc){var me=this,style=me.dom.style;return me.setStyle(pc),pc.right==AUTO&&(style.right=""),pc.bottom==AUTO&&(style.bottom=""),me},translatePoints:function(x,y){y=isNaN(x[1])?y:x[1],x=isNaN(x[0])?x:x[0];var me=this,relative=me.isStyle(POSITION,RELATIVE),o=me.getXY(),l=parseInt(me.getStyle(LEFT),10),t=parseInt(me.getStyle(TOP),10);return l=isNaN(l)?relative?0:me.dom.offsetLeft:l,t=isNaN(t)?relative?0:me.dom.offsetTop:t,{left:x-o[0]+l,top:y-o[1]+t}},animTest:function(args,animate,i){return animate&&this.preanim?this.preanim(args,i):!1}})}(),Ext.Element.addMethods({isScrollable:function(){var dom=this.dom;return dom.scrollHeight>dom.clientHeight||dom.scrollWidth>dom.clientWidth},scrollTo:function(side,value){return this.dom["scroll"+(/top/i.test(side)?"Top":"Left")]=value,this},getScroll:function(){var l,t,ret,d=this.dom,doc=document,body=doc.body,docElement=doc.documentElement;return d==doc||d==body?(Ext.isIE&&Ext.isStrict?(l=docElement.scrollLeft,t=docElement.scrollTop):(l=window.pageXOffset,t=window.pageYOffset),ret={left:l||(body?body.scrollLeft:0),top:t||(body?body.scrollTop:0)}):ret={left:d.scrollLeft,top:d.scrollTop},ret}}),Ext.Element.VISIBILITY=1,Ext.Element.DISPLAY=2,Ext.Element.OFFSETS=3,Ext.Element.ASCLASS=4,Ext.Element.visibilityCls="x-hide-nosize",Ext.Element.addMethods(function(){var El=Ext.Element,VISIBILITY="visibility",DISPLAY="display",HIDDEN="hidden",OFFSETS="offsets",ASCLASS="asclass",NONE="none",NOSIZE="nosize",ORIGINALDISPLAY="originalDisplay",VISMODE="visibilityMode",ISVISIBLE="isVisible",data=El.data,getDisplay=function(dom){var d=data(dom,ORIGINALDISPLAY);return void 0===d&&data(dom,ORIGINALDISPLAY,d=""),d},getVisMode=function(dom){var m=data(dom,VISMODE);return void 0===m&&data(dom,VISMODE,m=1),m};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(visMode){return data(this.dom,VISMODE,visMode),this},animate:function(args,duration,onComplete,easing,animType){return this.anim(args,{duration:duration,callback:onComplete,easing:easing},animType),this},anim:function(args,opt,animType,defaultDur,defaultEase,cb){animType=animType||"run",opt=opt||{};var me=this,anim=Ext.lib.Anim[animType](me.dom,args,opt.duration||defaultDur||.35,opt.easing||defaultEase||"easeOut",function(){cb&&cb.call(me),opt.callback&&opt.callback.call(opt.scope||me,me,opt)},me);return opt.anim=anim,anim},preanim:function(a,i){return a[i]?"object"==typeof a[i]?a[i]:{duration:a[i+1],callback:a[i+2],easing:a[i+3]}:!1},isVisible:function(){var me=this,dom=me.dom,visible=data(dom,ISVISIBLE);return"boolean"==typeof visible?visible:(visible=!(me.isStyle(VISIBILITY,HIDDEN)||me.isStyle(DISPLAY,NONE)||getVisMode(dom)==El.ASCLASS&&me.hasClass(me.visibilityCls||El.visibilityCls)),data(dom,ISVISIBLE,visible),visible)},setVisible:function(visible,animate){var me=this,dom=me.dom,visMode=getVisMode(dom);if("string"==typeof animate){switch(animate){case DISPLAY:visMode=El.DISPLAY;break;case VISIBILITY:visMode=El.VISIBILITY;break;case OFFSETS:visMode=El.OFFSETS;break;case NOSIZE:case ASCLASS:visMode=El.ASCLASS}me.setVisibilityMode(visMode),animate=!1}if(animate&&me.anim)visible&&(me.setOpacity(.01),me.setVisible(!0)),me.anim({opacity:{to:visible?1:0}},me.preanim(arguments,1),null,.35,"easeIn",function(){visible||me.setVisible(!1).setOpacity(1)});else if(visMode==El.ASCLASS)me[visible?"removeClass":"addClass"](me.visibilityCls||El.visibilityCls);else{if(visMode==El.DISPLAY)return me.setDisplayed(visible);visMode==El.OFFSETS?visible?(me.applyStyles(me.hideModeStyles||{position:"",top:"",left:""}),delete me.hideModeStyles):(me.hideModeStyles={position:me.getStyle("position"),top:me.getStyle("top"),left:me.getStyle("left")},me.applyStyles({position:"absolute",top:"-10000px",left:"-10000px"})):(me.fixDisplay(),dom.style.visibility=visible?"visible":HIDDEN)}return data(dom,ISVISIBLE,visible),me},hasMetrics:function(){var dom=this.dom;return this.isVisible()||getVisMode(dom)==El.VISIBILITY},toggle:function(animate){var me=this;return me.setVisible(!me.isVisible(),me.preanim(arguments,0)),me},setDisplayed:function(value){return"boolean"==typeof value&&(value=value?getDisplay(this.dom):NONE),this.setStyle(DISPLAY,value),this},fixDisplay:function(){var me=this;me.isStyle(DISPLAY,NONE)&&(me.setStyle(VISIBILITY,HIDDEN),me.setStyle(DISPLAY,getDisplay(this.dom)),me.isStyle(DISPLAY,NONE)&&me.setStyle(DISPLAY,"block"))},hide:function(animate){return"string"==typeof animate?(this.setVisible(!1,animate),this):(this.setVisible(!1,this.preanim(arguments,0)),this)},show:function(animate){return"string"==typeof animate?(this.setVisible(!0,animate),this):(this.setVisible(!0,this.preanim(arguments,0)),this)}}}()),function(){var NULL=null,UNDEFINED=void 0,TRUE=!0,FALSE=!1,SETX="setX",SETY="setY",SETXY="setXY",LEFT="left",BOTTOM="bottom",TOP="top",RIGHT="right",HEIGHT="height",WIDTH="width",POINTS="points",HIDDEN="hidden",ABSOLUTE="absolute",VISIBLE="visible",MOTION="motion",POSITION="position",EASEOUT="easeOut",flyEl=new Ext.Element.Flyweight,queues={},getObject=function(o){return o||{}},fly=function(dom){return flyEl.dom=dom,flyEl.id=Ext.id(dom),flyEl},getQueue=function(id){return queues[id]||(queues[id]=[]),queues[id]},setQueue=function(id,value){queues[id]=value};Ext.enableFx=TRUE,Ext.Fx={switchStatements:function(key,fn,argHash){return fn.apply(this,argHash[key])},slideIn:function(anchor,o){o=getObject(o);var xy,r,b,wrap,st,args,pt,bw,bh,me=this,dom=me.dom,st=dom.style;return anchor=anchor||"t",me.queueFx(o,function(){function after(){fly(dom).fxUnwrap(wrap,r.pos,o),st.width=r.width,st.height=r.height,fly(dom).afterFx(o)}function argCalc(wrap,style,ww,wh,sXY,sXYval,s1,s2,w,h,p){var ret={};return fly(wrap).setWidth(ww).setHeight(wh),fly(wrap)[sXY]&&fly(wrap)[sXY](sXYval),style[s1]=style[s2]="0",w&&(ret.width=w),h&&(ret.height=h),p&&(ret.points=p),ret}xy=fly(dom).getXY(),fly(dom).fixDisplay(),r=fly(dom).getFxRestore(),b={x:xy[0],y:xy[1],0:xy[0],1:xy[1],width:dom.offsetWidth,height:dom.offsetHeight},b.right=b.x+b.width,b.bottom=b.y+b.height,fly(dom).setWidth(b.width).setHeight(b.height),wrap=fly(dom).fxWrap(r.pos,o,HIDDEN),st.visibility=VISIBLE,st.position=ABSOLUTE,pt={to:[b.x,b.y]},bw={to:b.width},bh={to:b.height},args=fly(dom).switchStatements(anchor.toLowerCase(),argCalc,{t:[wrap,st,b.width,0,NULL,NULL,LEFT,BOTTOM,NULL,bh,NULL],l:[wrap,st,0,b.height,NULL,NULL,RIGHT,TOP,bw,NULL,NULL],r:[wrap,st,b.width,b.height,SETX,b.right,LEFT,TOP,NULL,NULL,pt],b:[wrap,st,b.width,b.height,SETY,b.bottom,LEFT,TOP,NULL,bh,pt],tl:[wrap,st,0,0,NULL,NULL,RIGHT,BOTTOM,bw,bh,pt],bl:[wrap,st,0,0,SETY,b.y+b.height,RIGHT,TOP,bw,bh,pt],br:[wrap,st,0,0,SETXY,[b.right,b.bottom],LEFT,TOP,bw,bh,pt],tr:[wrap,st,0,0,SETX,b.x+b.width,LEFT,BOTTOM,bw,bh,pt]}),st.visibility=VISIBLE,fly(wrap).show(),arguments.callee.anim=fly(wrap).fxanim(args,o,MOTION,.5,EASEOUT,after)}),me},slideOut:function(anchor,o){o=getObject(o);var wrap,r,b,a,me=this,dom=me.dom,st=dom.style,xy=me.getXY(),zero={to:0};return anchor=anchor||"t",me.queueFx(o,function(){function after(){o.useDisplay?fly(dom).setDisplayed(FALSE):fly(dom).hide(),fly(dom).fxUnwrap(wrap,r.pos,o),st.width=r.width,st.height=r.height,fly(dom).afterFx(o)}function argCalc(style,s1,s2,p1,v1,p2,v2,p3,v3){var ret={};return style[s1]=style[s2]="0",ret[p1]=v1,p2&&(ret[p2]=v2),p3&&(ret[p3]=v3),ret}r=fly(dom).getFxRestore(),b={x:xy[0],y:xy[1],0:xy[0],1:xy[1],width:dom.offsetWidth,height:dom.offsetHeight},b.right=b.x+b.width,b.bottom=b.y+b.height,fly(dom).setWidth(b.width).setHeight(b.height),wrap=fly(dom).fxWrap(r.pos,o,VISIBLE),st.visibility=VISIBLE,st.position=ABSOLUTE,fly(wrap).setWidth(b.width).setHeight(b.height),a=fly(dom).switchStatements(anchor.toLowerCase(),argCalc,{t:[st,LEFT,BOTTOM,HEIGHT,zero],l:[st,RIGHT,TOP,WIDTH,zero],r:[st,LEFT,TOP,WIDTH,zero,POINTS,{to:[b.right,b.y]}],b:[st,LEFT,TOP,HEIGHT,zero,POINTS,{to:[b.x,b.bottom]}],tl:[st,RIGHT,BOTTOM,WIDTH,zero,HEIGHT,zero],bl:[st,RIGHT,TOP,WIDTH,zero,HEIGHT,zero,POINTS,{to:[b.x,b.bottom]}],br:[st,LEFT,TOP,WIDTH,zero,HEIGHT,zero,POINTS,{to:[b.x+b.width,b.bottom]}],tr:[st,LEFT,BOTTOM,WIDTH,zero,HEIGHT,zero,POINTS,{to:[b.right,b.y]}]}),arguments.callee.anim=fly(wrap).fxanim(a,o,MOTION,.5,EASEOUT,after)}),me},puff:function(o){o=getObject(o);var width,height,r,me=this,dom=me.dom,st=dom.style;return me.queueFx(o,function(){function after(){o.useDisplay?fly(dom).setDisplayed(FALSE):fly(dom).hide(),fly(dom).clearOpacity(),fly(dom).setPositioning(r.pos),st.width=r.width,st.height=r.height,st.fontSize="",fly(dom).afterFx(o)}width=fly(dom).getWidth(),height=fly(dom).getHeight(),fly(dom).clearOpacity(),fly(dom).show(),r=fly(dom).getFxRestore(),arguments.callee.anim=fly(dom).fxanim({width:{to:fly(dom).adjustWidth(2*width)},height:{to:fly(dom).adjustHeight(2*height)},points:{by:[.5*-width,.5*-height]},opacity:{to:0},fontSize:{to:200,unit:"%"}},o,MOTION,.5,EASEOUT,after)}),me},switchOff:function(o){o=getObject(o);var r,me=this,dom=me.dom,st=dom.style;return me.queueFx(o,function(){function after(){o.useDisplay?fly(dom).setDisplayed(FALSE):fly(dom).hide(),fly(dom).clearOpacity(),fly(dom).setPositioning(r.pos),st.width=r.width,st.height=r.height,fly(dom).afterFx(o)}fly(dom).clearOpacity(),fly(dom).clip(),r=fly(dom).getFxRestore(),fly(dom).fxanim({opacity:{to:.3}},NULL,NULL,.1,NULL,function(){fly(dom).clearOpacity(),function(){fly(dom).fxanim({height:{to:1},points:{by:[0,.5*fly(dom).getHeight()]}},o,MOTION,.3,"easeIn",after)}.defer(100)})}),me},highlight:function(color,o){o=getObject(o);var restore,me=this,dom=me.dom,attr=o.attr||"backgroundColor",a={};return me.queueFx(o,function(){function after(){dom.style[attr]=restore,fly(dom).afterFx(o)}fly(dom).clearOpacity(),fly(dom).show(),restore=dom.style[attr],a[attr]={from:color||"ffff9c",to:o.endColor||fly(dom).getColor(attr)||"ffffff"},arguments.callee.anim=fly(dom).fxanim(a,o,"color",1,"easeIn",after)}),me},frame:function(color,count,o){o=getObject(o);var proxy,active,me=this,dom=me.dom;return me.queueFx(o,function(){function animFn(){var scale=Ext.isBorderBox?2:1;active=proxy.anim({top:{from:b.y,to:b.y-20},left:{from:b.x,to:b.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:b.height,to:b.height+20*scale},width:{from:b.width,to:b.width+20*scale}},{duration:o.duration||1,callback:function(){proxy.remove(),--count>0?queue():fly(dom).afterFx(o)}}),arguments.callee.anim={isAnimated:!0,stop:function(){active.stop()}}}color=color||"#C3DAF9",6==color.length&&(color="#"+color),count=count||1,fly(dom).show();var xy=fly(dom).getXY(),b={x:xy[0],y:xy[1],0:xy[0],1:xy[1],width:dom.offsetWidth,height:dom.offsetHeight},queue=function(){return proxy=fly(document.body||document.documentElement).createChild({style:{position:ABSOLUTE,"z-index":35e3,border:"0px solid "+color}}),proxy.queueFx({},animFn)};arguments.callee.anim={isAnimated:!0,stop:function(){count=0,proxy.stopFx()}},queue()}),me},pause:function(seconds){var t,dom=this.dom;return this.queueFx({},function(){t=setTimeout(function(){fly(dom).afterFx({})},1e3*seconds),arguments.callee.anim={isAnimated:!0,stop:function(){clearTimeout(t),fly(dom).afterFx({})}}}),this},fadeIn:function(o){o=getObject(o);var me=this,dom=me.dom,to=o.endOpacity||1;return me.queueFx(o,function(){fly(dom).setOpacity(0),fly(dom).fixDisplay(),dom.style.visibility=VISIBLE,arguments.callee.anim=fly(dom).fxanim({opacity:{to:to}},o,NULL,.5,EASEOUT,function(){1==to&&fly(dom).clearOpacity(),fly(dom).afterFx(o)})}),me},fadeOut:function(o){o=getObject(o);var me=this,dom=me.dom,style=dom.style,to=o.endOpacity||0;return me.queueFx(o,function(){arguments.callee.anim=fly(dom).fxanim({opacity:{to:to}},o,NULL,.5,EASEOUT,function(){0==to&&(Ext.Element.data(dom,"visibilityMode")==Ext.Element.DISPLAY||o.useDisplay?style.display="none":style.visibility=HIDDEN,fly(dom).clearOpacity()),fly(dom).afterFx(o)})}),me},scale:function(w,h,o){return this.shift(Ext.apply({},o,{width:w,height:h})),this},shift:function(o){o=getObject(o);var dom=this.dom,a={};return this.queueFx(o,function(){for(var prop in o)o[prop]!=UNDEFINED&&(a[prop]={to:o[prop]});a.width?a.width.to=fly(dom).adjustWidth(o.width):a,a.height?a.height.to=fly(dom).adjustWidth(o.height):a,(a.x||a.y||a.xy)&&(a.points=a.xy||{to:[a.x?a.x.to:fly(dom).getX(),a.y?a.y.to:fly(dom).getY()]}),arguments.callee.anim=fly(dom).fxanim(a,o,MOTION,.35,EASEOUT,function(){fly(dom).afterFx(o)})}),this},ghost:function(anchor,o){o=getObject(o);var r,w,h,me=this,dom=me.dom,st=dom.style,a={opacity:{to:0},points:{}},pt=a.points;return anchor=anchor||"b",me.queueFx(o,function(){function after(){o.useDisplay?fly(dom).setDisplayed(FALSE):fly(dom).hide(),fly(dom).clearOpacity(),fly(dom).setPositioning(r.pos),st.width=r.width,st.height=r.height,fly(dom).afterFx(o)}r=fly(dom).getFxRestore(),w=fly(dom).getWidth(),h=fly(dom).getHeight(),pt.by=fly(dom).switchStatements(anchor.toLowerCase(),function(v1,v2){return[v1,v2]},{t:[0,-h],l:[-w,0],r:[w,0],b:[0,h],tl:[-w,-h],bl:[-w,h],br:[w,h],tr:[w,-h]}),arguments.callee.anim=fly(dom).fxanim(a,o,MOTION,.5,EASEOUT,after)}),me},syncFx:function(){var me=this;return me.fxDefaults=Ext.apply(me.fxDefaults||{},{block:FALSE,concurrent:TRUE,stopFx:FALSE}),me},sequenceFx:function(){var me=this;return me.fxDefaults=Ext.apply(me.fxDefaults||{},{block:FALSE,concurrent:FALSE,stopFx:FALSE}),me},nextFx:function(){var ef=getQueue(this.dom.id)[0];ef&&ef.call(this)},hasActiveFx:function(){return getQueue(this.dom.id)[0]},stopFx:function(finish){var me=this,id=me.dom.id;if(me.hasActiveFx()){var cur=getQueue(id)[0];cur&&cur.anim&&(cur.anim.isAnimated?(setQueue(id,[cur]),cur.anim.stop(void 0!==finish?finish:TRUE)):setQueue(id,[]))}return me},beforeFx:function(o){return this.hasActiveFx()&&!o.concurrent?o.stopFx?(this.stopFx(),TRUE):FALSE:TRUE},hasFxBlock:function(){var q=getQueue(this.dom.id);return q&&q[0]&&q[0].block},queueFx:function(o,fn){var me=fly(this.dom);if(!me.hasFxBlock())if(Ext.applyIf(o,me.fxDefaults),o.concurrent)fn.call(me);else{var run=me.beforeFx(o);fn.block=o.block,getQueue(me.dom.id).push(fn),run&&me.nextFx()}return me},fxWrap:function(pos,o,vis){var wrap,wrapXY,dom=this.dom;if(!o.wrap||!(wrap=Ext.getDom(o.wrap))){o.fixPosition&&(wrapXY=fly(dom).getXY());var div=document.createElement("div");div.style.visibility=vis,wrap=dom.parentNode.insertBefore(div,dom),fly(wrap).setPositioning(pos),fly(wrap).isStyle(POSITION,"static")&&fly(wrap).position("relative"),fly(dom).clearPositioning("auto"),fly(wrap).clip(),wrap.appendChild(dom),wrapXY&&fly(wrap).setXY(wrapXY)}return wrap},fxUnwrap:function(wrap,pos,o){var dom=this.dom;if(fly(dom).clearPositioning(),fly(dom).setPositioning(pos),!o.wrap){var pn=fly(wrap).dom.parentNode;pn.insertBefore(dom,wrap),fly(wrap).remove()}},getFxRestore:function(){var st=this.dom.style;return{pos:this.getPositioning(),width:st.width,height:st.height}},afterFx:function(o){var dom=this.dom,id=dom.id;o.afterStyle&&fly(dom).setStyle(o.afterStyle),o.afterCls&&fly(dom).addClass(o.afterCls),o.remove==TRUE&&fly(dom).remove(),o.callback&&o.callback.call(o.scope,fly(dom)),o.concurrent||(getQueue(id).shift(),fly(dom).nextFx())},fxanim:function(args,opt,animType,defaultDur,defaultEase,cb){animType=animType||"run",opt=opt||{};var anim=Ext.lib.Anim[animType](this.dom,args,opt.duration||defaultDur||.35,opt.easing||defaultEase||EASEOUT,cb,this);return opt.anim=anim,anim}},Ext.Fx.resize=Ext.Fx.scale,Ext.Element.addMethods(Ext.Fx)}(),Ext.CompositeElementLite=function(els,root){this.elements=[],this.add(els,root),this.el=new Ext.Element.Flyweight},Ext.CompositeElementLite.prototype={isComposite:!0,getElement:function(el){var e=this.el;return e.dom=el,e.id=el.id,e},transformElement:function(el){return Ext.getDom(el)},getCount:function(){return this.elements.length},add:function(els,root){var me=this,elements=me.elements;if(!els)return this;"string"==typeof els?els=Ext.Element.selectorFunction(els,root):els.isComposite?els=els.elements:Ext.isIterable(els)||(els=[els]);for(var i=0,len=els.length;len>i;++i)elements.push(me.transformElement(els[i]));return me},invoke:function(fn,args){var e,i,me=this,els=me.elements,len=els.length;for(i=0;len>i;i++)e=els[i],e&&Ext.Element.prototype[fn].apply(me.getElement(e),args);return me},item:function(index){var me=this,el=me.elements[index],out=null;return el&&(out=me.getElement(el)),out},addListener:function(eventName,handler,scope,opt){var i,e,els=this.elements,len=els.length;for(i=0;len>i;i++)e=els[i],e&&Ext.EventManager.on(e,eventName,handler,scope||e,opt);return this},each:function(fn,scope){var i,e,me=this,els=me.elements,len=els.length;for(i=0;len>i&&(e=els[i],!e||(e=this.getElement(e),fn.call(scope||e,e,me,i)!==!1));i++);return me},fill:function(els){var me=this;return me.elements=[],me.add(els),me},filter:function(selector){var els=[],me=this,fn=Ext.isFunction(selector)?selector:function(el){return el.is(selector)};return me.each(function(el,self,i){fn(el,i)!==!1&&(els[els.length]=me.transformElement(el))}),me.elements=els,me},indexOf:function(el){return this.elements.indexOf(this.transformElement(el))},replaceElement:function(el,replacement,domReplace){var d,index=isNaN(el)?this.indexOf(el):el;return index>-1&&(replacement=Ext.getDom(replacement),domReplace&&(d=this.elements[index],d.parentNode.insertBefore(replacement,d),Ext.removeNode(d)),this.elements.splice(index,1,replacement)),this},clear:function(){this.elements=[]}},Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener,Ext.CompositeElementLite.importElementMethods=function(){var fnName,ElProto=Ext.Element.prototype,CelProto=Ext.CompositeElementLite.prototype;for(fnName in ElProto)"function"==typeof ElProto[fnName]&&function(fnName){CelProto[fnName]=CelProto[fnName]||function(){return this.invoke(fnName,arguments)}}.call(CelProto,fnName)},Ext.CompositeElementLite.importElementMethods(),Ext.DomQuery&&(Ext.Element.selectorFunction=Ext.DomQuery.select),Ext.Element.select=function(selector,root){var els;if("string"==typeof selector)els=Ext.Element.selectorFunction(selector,root);else{if(void 0===selector.length)throw"Invalid selector";els=selector}return new Ext.CompositeElementLite(els)},Ext.select=Ext.Element.select,function(){var BEFOREREQUEST="beforerequest",REQUESTCOMPLETE="requestcomplete",REQUESTEXCEPTION="requestexception",UNDEFINED=void 0,LOAD="load",POST="POST",GET="GET",WINDOW=window;Ext.data.Connection=function(config){Ext.apply(this,config),this.addEvents(BEFOREREQUEST,REQUESTCOMPLETE,REQUESTEXCEPTION),Ext.data.Connection.superclass.constructor.call(this)},Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:!1,disableCaching:!0,disableCachingParam:"_dc",request:function(o){var me=this;if(me.fireEvent(BEFOREREQUEST,me,o)){o.el&&(Ext.isEmpty(o.indicatorText)||(me.indicatorText='<div class="loading-indicator">'+o.indicatorText+"</div>"),me.indicatorText&&(Ext.getDom(o.el).innerHTML=me.indicatorText),o.success=(Ext.isFunction(o.success)?o.success:function(){}).createInterceptor(function(response){Ext.getDom(o.el).innerHTML=response.responseText}));var method,form,serForm,p=o.params,url=o.url||me.url,cb={success:me.handleResponse,failure:me.handleFailure,scope:me,argument:{options:o},timeout:Ext.num(o.timeout,me.timeout)};if(Ext.isFunction(p)&&(p=p.call(o.scope||WINDOW,o)),p=Ext.urlEncode(me.extraParams,Ext.isObject(p)?Ext.urlEncode(p):p),Ext.isFunction(url)&&(url=url.call(o.scope||WINDOW,o)),form=Ext.getDom(o.form)){if(url=url||form.action,o.isUpload||/multipart\/form-data/i.test(form.getAttribute("enctype")))return me.doFormUpload.call(me,o,p,url);serForm=Ext.lib.Ajax.serializeForm(form),p=p?p+"&"+serForm:serForm}if(method=o.method||me.method||(p||o.xmlData||o.jsonData?POST:GET),method===GET&&me.disableCaching&&o.disableCaching!==!1||o.disableCaching===!0){var dcp=o.disableCachingParam||me.disableCachingParam;url=Ext.urlAppend(url,dcp+"="+(new Date).getTime())}return o.headers=Ext.applyIf(o.headers||{},me.defaultHeaders||{}),(o.autoAbort===!0||me.autoAbort)&&me.abort(),(method==GET||o.xmlData||o.jsonData)&&p&&(url=Ext.urlAppend(url,p),p=""),me.transId=Ext.lib.Ajax.request(method,url,cb,p,o)}return o.callback?o.callback.apply(o.scope,[o,UNDEFINED,UNDEFINED]):null},isLoading:function(transId){return transId?Ext.lib.Ajax.isCallInProgress(transId):!!this.transId},abort:function(transId){(transId||this.isLoading())&&Ext.lib.Ajax.abort(transId||this.transId)},handleResponse:function(response){this.transId=!1;var options=response.argument.options;response.argument=options?options.argument:null,this.fireEvent(REQUESTCOMPLETE,this,response,options),options.success&&options.success.call(options.scope,response,options),options.callback&&options.callback.call(options.scope,options,!0,response)},handleFailure:function(response,e){this.transId=!1;var options=response.argument.options;response.argument=options?options.argument:null,this.fireEvent(REQUESTEXCEPTION,this,response,options,e),options.failure&&options.failure.call(options.scope,response,options),options.callback&&options.callback.call(options.scope,options,!1,response)},doFormUpload:function(o,ps,url){function cb(){function runCallback(fn,scope,args){Ext.isFunction(fn)&&fn.apply(scope,args)}var doc,firstChild,me=this,r={responseText:"",responseXML:null,argument:o.argument};try{doc=frame.contentWindow.document||frame.contentDocument||WINDOW.frames[id].document,doc&&(doc.body&&(/textarea/i.test((firstChild=doc.body.firstChild||{}).tagName)?r.responseText=firstChild.value:r.responseText=doc.body.innerHTML),r.responseXML=doc.XMLDocument||doc)}catch(e){}Ext.EventManager.removeListener(frame,LOAD,cb,me),me.fireEvent(REQUESTCOMPLETE,me,r,o),runCallback(o.success,o.scope,[r,o]),runCallback(o.callback,o.scope,[o,!0,r]),me.debugUploads||setTimeout(function(){Ext.removeNode(frame)},100)}var hd,id=Ext.id(),doc=document,frame=doc.createElement("iframe"),form=Ext.getDom(o.form),hiddens=[],encoding="multipart/form-data",buf={target:form.target,method:form.method,encoding:form.encoding,enctype:form.enctype,action:form.action};Ext.fly(frame).set({id:id,name:id,cls:"x-hidden",src:Ext.SSL_SECURE_URL}),doc.body.appendChild(frame),Ext.isIE&&(document.frames[id].name=id),Ext.fly(form).set({target:id,method:POST,enctype:encoding,encoding:encoding,action:url||buf.action}),Ext.iterate(Ext.urlDecode(ps,!1),function(k,v){hd=doc.createElement("input"),Ext.fly(hd).set({type:"hidden",value:v,name:k}),form.appendChild(hd),hiddens.push(hd)}),Ext.EventManager.on(frame,LOAD,cb,this),form.submit(),Ext.fly(form).set(buf),Ext.each(hiddens,function(h){Ext.removeNode(h)})}})}(),Ext.Ajax=new Ext.data.Connection({autoAbort:!1,serializeForm:function(form){return Ext.lib.Ajax.serializeForm(form)}}),Ext.util.JSON=new function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var useNative=null;return function(){return null===useNative&&(useNative=Ext.USE_NATIVE_JSON&&window.JSON&&"[object JSON]"==JSON.toString()),useNative}}(),pad=function(n){return 10>n?"0"+n:n},doDecode=function(json){return json?eval("("+json+")"):""},doEncode=function(o){if(Ext.isDefined(o)&&null!==o){if(Ext.isArray(o))return encodeArray(o);if(Ext.isDate(o))return Ext.util.JSON.encodeDate(o);if(Ext.isString(o))return encodeString(o);if("number"==typeof o)return isFinite(o)?String(o):"null";if(Ext.isBoolean(o))return String(o);var b,i,v,a=["{"];for(i in o)if(!o.getElementsByTagName&&(!useHasOwn||o.hasOwnProperty(i)))switch(v=o[i],typeof v){case"undefined":case"function":case"unknown":break;default:b&&a.push(","),a.push(doEncode(i),":",null===v?"null":doEncode(v)),b=!0}return a.push("}"),a.join("")}return"null"},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(s){return/["\\\x00-\x1f]/.test(s)?'"'+s.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];return c?c:(c=b.charCodeAt(),"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16))})+'"':'"'+s+'"'},encodeArray=function(o){var b,i,v,a=["["],l=o.length;for(i=0;l>i;i+=1)switch(v=o[i],typeof v){case"undefined":case"function":case"unknown":break;default:b&&a.push(","),a.push(null===v?"null":Ext.util.JSON.encode(v)),b=!0}return a.push("]"),a.join("")};this.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'},this.encode=function(){var ec;return function(o){return ec||(ec=isNative()?JSON.stringify:doEncode),ec(o)}}(),this.decode=function(){var dc;return function(json){return dc||(dc=isNative()?JSON.parse:doDecode),dc(json)}}()},Ext.encode=Ext.util.JSON.encode,
Ext.decode=Ext.util.JSON.decode,Ext.EventManager=function(){function getId(el){var o,id=!1,i=0,len=specialElCache.length,skip=!1;if(el){if(el.getElementById||el.navigator){for(;len>i;++i)if(o=specialElCache[i],o.el===el){id=o.id;break}id||(id=Ext.id(el),specialElCache.push({id:id,el:el}),skip=!0)}else id=Ext.id(el);Ext.elCache[id]||(Ext.Element.addToCache(new Ext.Element(el),id),skip&&(Ext.elCache[id].skipGC=!0))}return id}function addListener(el,ename,fn,task,wrap,scope){el=Ext.getDom(el);var wfn,id=getId(el),es=Ext.elCache[id].events;if(wfn=E.on(el,ename,wrap),es[ename]=es[ename]||[],es[ename].push([fn,wrap,scope,wfn,task]),el.addEventListener&&"mousewheel"==ename){var args=["DOMMouseScroll",wrap,!1];el.addEventListener.apply(el,args),Ext.EventManager.addListener(WINDOW,"unload",function(){el.removeEventListener.apply(el,args)})}el==DOC&&"mousedown"==ename&&Ext.EventManager.stoppedMouseDownEvent.addListener(wrap)}function doScrollChk(){if(window!=top)return!1;try{DOC.documentElement.doScroll("left")}catch(e){return!1}return fireDocReady(),!0}function checkReadyState(e){return Ext.isIE9m&&doScrollChk()?!0:DOC.readyState==COMPLETE?(fireDocReady(),!0):(docReadyState||(docReadyProcId=setTimeout(arguments.callee,2)),!1)}function checkStyleSheets(e){return styles||(styles=Ext.query("style, link[rel=stylesheet]")),styles.length==DOC.styleSheets.length?(fireDocReady(),!0):(docReadyState||(docReadyProcId=setTimeout(arguments.callee,2)),!1)}function OperaDOMContentLoaded(e){DOC.removeEventListener(DOMCONTENTLOADED,arguments.callee,!1),checkStyleSheets()}function fireDocReady(e){docReadyState||(docReadyState=!0,docReadyProcId&&clearTimeout(docReadyProcId),DETECT_NATIVE&&DOC.removeEventListener(DOMCONTENTLOADED,fireDocReady,!1),Ext.isIE9m&&checkReadyState.bindIE&&DOC.detachEvent("onreadystatechange",checkReadyState),E.un(WINDOW,"load",arguments.callee)),docReadyEvent&&!Ext.isReady&&(Ext.isReady=!0,docReadyEvent.fire(),docReadyEvent.listeners=[])}function initDocReady(){docReadyEvent||(docReadyEvent=new Ext.util.Event),DETECT_NATIVE&&DOC.addEventListener(DOMCONTENTLOADED,fireDocReady,!1),Ext.isIE9m?checkReadyState()||(checkReadyState.bindIE=!0,DOC.attachEvent("onreadystatechange",checkReadyState)):Ext.isOpera?DOC.readyState==COMPLETE&&checkStyleSheets()||DOC.addEventListener(DOMCONTENTLOADED,OperaDOMContentLoaded,!1):Ext.isWebKit&&checkReadyState(),E.on(WINDOW,"load",fireDocReady)}function createTargeted(h,o){return function(){var args=Ext.toArray(arguments);o.target==Ext.EventObject.setEvent(args[0]).target&&h.apply(this,args)}}function createBuffered(h,o,task){return function(e){task.delay(o.buffer,h,null,[new Ext.EventObjectImpl(e)])}}function createSingle(h,el,ename,fn,scope){return function(e){Ext.EventManager.removeListener(el,ename,fn,scope),h(e)}}function createDelayed(h,o,fn){return function(e){var task=new Ext.util.DelayedTask(h);fn.tasks||(fn.tasks=[]),fn.tasks.push(task),task.delay(o.delay||10,h,null,[new Ext.EventObjectImpl(e)])}}function listen(element,ename,opt,fn,scope){function h(e){if(Ext){e=Ext.EventObject.setEvent(e);var t;if(o.delegate){if(!(t=e.getTarget(o.delegate,el)))return}else t=e.target;o.stopEvent&&e.stopEvent(),o.preventDefault&&e.preventDefault(),o.stopPropagation&&e.stopPropagation(),o.normalized===!1&&(e=e.browserEvent),fn.call(scope||el,e,t,o)}}var task,o=opt&&"boolean"!=typeof opt?opt:{},el=Ext.getDom(element);if(fn=fn||o.fn,scope=scope||o.scope,!el)throw'Error listening for "'+ename+'". Element "'+element+"\" doesn't exist.";return o.target&&(h=createTargeted(h,o)),o.delay&&(h=createDelayed(h,o,fn)),o.single&&(h=createSingle(h,el,ename,fn,scope)),o.buffer&&(task=new Ext.util.DelayedTask(h),h=createBuffered(h,o,task)),addListener(el,ename,fn,task,h,scope),h}var docReadyEvent,docReadyProcId,styles,docReadyState=!1,DETECT_NATIVE=Ext.isGecko||Ext.isWebKit||Ext.isSafari||Ext.isIE10p,E=Ext.lib.Event,DOC=(Ext.lib.Dom,document),WINDOW=window,DOMCONTENTLOADED="DOMContentLoaded",COMPLETE="complete",propRe=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,specialElCache=[],pub={addListener:function(element,eventName,fn,scope,options){if("object"==typeof eventName){var e,val,o=eventName;for(e in o)val=o[e],propRe.test(e)||(Ext.isFunction(val)?listen(element,e,o,val,o.scope):listen(element,e,val))}else listen(element,eventName,options,fn,scope)},removeListener:function(el,eventName,fn,scope){el=Ext.getDom(el);var wrap,i,k,len,fnc,id=getId(el),f=el&&Ext.elCache[id].events[eventName]||[];for(i=0,len=f.length;len>i;i++)if(Ext.isArray(fnc=f[i])&&fnc[0]==fn&&(!scope||fnc[2]==scope)){if(fnc[4]&&fnc[4].cancel(),k=fn.tasks&&fn.tasks.length){for(;k--;)fn.tasks[k].cancel();delete fn.tasks}wrap=fnc[1],E.un(el,eventName,E.extAdapter?fnc[3]:wrap),wrap&&el.addEventListener&&"mousewheel"==eventName&&el.removeEventListener("DOMMouseScroll",wrap,!1),wrap&&el==DOC&&"mousedown"==eventName&&Ext.EventManager.stoppedMouseDownEvent.removeListener(wrap),f.splice(i,1),0===f.length&&delete Ext.elCache[id].events[eventName];for(k in Ext.elCache[id].events)return!1;return Ext.elCache[id].events={},!1}},removeAll:function(el){el=Ext.getDom(el);var f,i,len,ename,fn,k,wrap,id=getId(el),ec=Ext.elCache[id]||{},es=ec.events||{};for(ename in es)if(es.hasOwnProperty(ename))for(f=es[ename],i=0,len=f.length;len>i;i++){if(fn=f[i],fn[4]&&fn[4].cancel(),fn[0].tasks&&(k=fn[0].tasks.length)){for(;k--;)fn[0].tasks[k].cancel();delete fn.tasks}wrap=fn[1],E.un(el,ename,E.extAdapter?fn[3]:wrap),el.addEventListener&&wrap&&"mousewheel"==ename&&el.removeEventListener("DOMMouseScroll",wrap,!1),wrap&&el==DOC&&"mousedown"==ename&&Ext.EventManager.stoppedMouseDownEvent.removeListener(wrap)}Ext.elCache[id]&&(Ext.elCache[id].events={})},getListeners:function(el,eventName){el=Ext.getDom(el);var id=getId(el),ec=Ext.elCache[id]||{},es=ec.events||{};return es&&es[eventName]?es[eventName]:null},removeFromSpecialCache:function(o){for(var i=0,len=specialElCache.length;len>i;++i)specialElCache[i].el==o&&specialElCache.splice(i,1)},purgeElement:function(el,recurse,eventName){el=Ext.getDom(el);var i,f,len,id=getId(el),ec=Ext.elCache[id]||{},es=ec.events||{};if(eventName){if(es&&es.hasOwnProperty(eventName))for(f=es[eventName],i=0,len=f.length;len>i;i++)Ext.EventManager.removeListener(el,eventName,f[i][0])}else Ext.EventManager.removeAll(el);if(recurse&&el&&el.childNodes)for(i=0,len=el.childNodes.length;len>i;i++)Ext.EventManager.purgeElement(el.childNodes[i],recurse,eventName)},_unload:function(){var el;for(el in Ext.elCache)Ext.EventManager.removeAll(el);delete Ext.elCache,delete Ext.Element._flyweights;var c,conn,tid,ajax=Ext.lib.Ajax;conn="object"==typeof ajax.conn?ajax.conn:{};for(tid in conn)c=conn[tid],c&&ajax.abort({conn:c,tId:tid})},onDocumentReady:function(fn,scope,options){Ext.isReady?(docReadyEvent||(docReadyEvent=new Ext.util.Event),docReadyEvent.addListener(fn,scope,options),docReadyEvent.fire(),docReadyEvent.listeners=[]):(docReadyEvent||initDocReady(),options=options||{},options.delay=options.delay||1,docReadyEvent.addListener(fn,scope,options))},fireDocReady:fireDocReady};return pub.on=pub.addListener,pub.un=pub.removeListener,pub.stoppedMouseDownEvent=new Ext.util.Event,pub}(),Ext.onReady=Ext.EventManager.onDocumentReady,function(){var initExtCss=function(){var bd=document.body||document.getElementsByTagName("body")[0];if(!bd)return!1;var cls=[];if(Ext.isIE&&(Ext.isIE10p||cls.push("ext-ie"),Ext.isIE6?cls.push("ext-ie6"):Ext.isIE7?cls.push("ext-ie7","ext-ie7m"):Ext.isIE8?cls.push("ext-ie8","ext-ie8m"):Ext.isIE9?cls.push("ext-ie9","ext-ie9m"):Ext.isIE10&&cls.push("ext-ie10")),Ext.isGecko&&(Ext.isGecko2?cls.push("ext-gecko2"):cls.push("ext-gecko3")),Ext.isOpera&&cls.push("ext-opera"),Ext.isWebKit&&cls.push("ext-webkit"),Ext.isSafari?cls.push("ext-safari "+(Ext.isSafari2?"ext-safari2":Ext.isSafari3?"ext-safari3":"ext-safari4")):Ext.isChrome&&cls.push("ext-chrome"),Ext.isMac&&cls.push("ext-mac"),Ext.isLinux&&cls.push("ext-linux"),Ext.isStrict||Ext.isBorderBox){var p=bd.parentNode;p&&(Ext.isStrict||(Ext.fly(p,"_internal").addClass("x-quirks"),Ext.isIE9m&&!Ext.isStrict&&(Ext.isIEQuirks=!0)),Ext.fly(p,"_internal").addClass(Ext.isStrict&&Ext.isIE||!Ext.enableForcedBoxModel&&!Ext.isIE?" ext-strict":" ext-border-box"))}return Ext.enableForcedBoxModel&&!Ext.isIE&&(Ext.isForcedBorderBox=!0,cls.push("ext-forced-border-box")),Ext.fly(bd,"_internal").addClass(cls),!0};initExtCss()||Ext.onReady(initExtCss)}(),function(){var supports=Ext.apply(Ext.supports,{correctRightMargin:!0,correctTransparentColor:!0,cssFloat:!0}),supportTests=function(){var view,last,div=document.createElement("div"),doc=document;div.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="float:left;background-color:transparent;">',doc.body.appendChild(div),last=div.lastChild,(view=doc.defaultView)&&("0px"!=view.getComputedStyle(div.firstChild.firstChild,null).marginRight&&(supports.correctRightMargin=!1),"transparent"!=view.getComputedStyle(last,null).backgroundColor&&(supports.correctTransparentColor=!1)),supports.cssFloat=!!last.style.cssFloat,doc.body.removeChild(div)};Ext.isReady?supportTests():Ext.onReady(supportTests)}(),Ext.EventObject=function(){var E=Ext.lib.Event,clickRe=/(dbl)?click/,safariKeys={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},btnMap=Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2};return Ext.EventObjectImpl=function(e){e&&this.setEvent(e.browserEvent||e)},Ext.EventObjectImpl.prototype={setEvent:function(e){var me=this;return e==me||e&&e.browserEvent?e:(me.browserEvent=e,e?(me.button=e.button?btnMap[e.button]:e.which?e.which-1:-1,clickRe.test(e.type)&&-1==me.button&&(me.button=0),me.type=e.type,me.shiftKey=e.shiftKey,me.ctrlKey=e.ctrlKey||e.metaKey||!1,me.altKey=e.altKey,me.keyCode=e.keyCode,me.charCode=e.charCode,me.target=E.getTarget(e),me.xy=E.getXY(e)):(me.button=-1,me.shiftKey=!1,me.ctrlKey=!1,me.altKey=!1,me.keyCode=0,me.charCode=0,me.target=null,me.xy=[0,0]),me)},stopEvent:function(){var me=this;me.browserEvent&&("mousedown"==me.browserEvent.type&&Ext.EventManager.stoppedMouseDownEvent.fire(me),E.stopEvent(me.browserEvent))},preventDefault:function(){this.browserEvent&&E.preventDefault(this.browserEvent)},stopPropagation:function(){var me=this;me.browserEvent&&("mousedown"==me.browserEvent.type&&Ext.EventManager.stoppedMouseDownEvent.fire(me),E.stopPropagation(me.browserEvent))},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(k){return Ext.isSafari?safariKeys[k]||k:k},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(selector,maxDepth,returnEl){return selector?Ext.fly(this.target).findParent(selector,maxDepth,returnEl):returnEl?Ext.get(this.target):this.target},getRelatedTarget:function(){return this.browserEvent?E.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var e=this.browserEvent,delta=0;return e.wheelDelta?delta=e.wheelDelta/120:e.detail&&(delta=-e.detail/3),delta},within:function(el,related,allowEl){if(el){var t=this[related?"getRelatedTarget":"getTarget"]();return t&&((allowEl?t==Ext.getDom(el):!1)||Ext.fly(el).contains(t))}return!1}},new Ext.EventObjectImpl}(),Ext.Loader=Ext.apply({},{load:function(fileList,callback,scope,preserveOrder){var scope=scope||this,head=document.getElementsByTagName("head")[0],fragment=document.createDocumentFragment(),numFiles=fileList.length,loadedFiles=0,me=this,loadFileIndex=function(index){head.appendChild(me.buildScriptTag(fileList[index],onFileLoaded))},onFileLoaded=function(){loadedFiles++,numFiles==loadedFiles&&"function"==typeof callback?callback.call(scope):preserveOrder===!0&&loadFileIndex(loadedFiles)};preserveOrder===!0?loadFileIndex.call(this,0):(Ext.each(fileList,function(file,index){fragment.appendChild(this.buildScriptTag(file,onFileLoaded))},this),head.appendChild(fragment))},buildScriptTag:function(filename,callback){var script=document.createElement("script");return script.type="text/javascript",script.src=filename,script.readyState?script.onreadystatechange=function(){("loaded"==script.readyState||"complete"==script.readyState)&&(script.onreadystatechange=null,callback())}:script.onload=callback,script}}),Ext.ns("Ext.grid","Ext.list","Ext.dd","Ext.tree","Ext.form","Ext.menu","Ext.state","Ext.layout.boxOverflow","Ext.app","Ext.ux","Ext.chart","Ext.direct","Ext.slider"),Ext.apply(Ext,function(){var E=Ext,scrollWidth=null;return{emptyFn:function(){},BLANK_IMAGE_URL:Ext.isIE6||Ext.isIE7||Ext.isAir?"http://www.extjs.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",extendX:function(supr,fn){return Ext.extend(supr,fn(supr.prototype))},getDoc:function(){return Ext.get(document)},num:function(v,defaultValue){return v=Number(Ext.isEmpty(v)||Ext.isArray(v)||"boolean"==typeof v||"string"==typeof v&&0==v.trim().length?NaN:v),isNaN(v)?defaultValue:v},value:function(v,defaultValue,allowBlank){return Ext.isEmpty(v,allowBlank)?defaultValue:v},escapeRe:function(s){return s.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},sequence:function(o,name,fn,scope){o[name]=o[name].createSequence(fn,scope)},addBehaviors:function(o){if(Ext.isReady){var parts,b,s,cache={};for(b in o)(parts=b.split("@"))[1]&&(s=parts[0],cache[s]||(cache[s]=Ext.select(s)),cache[s].on(parts[1],o[b]));cache=null}else Ext.onReady(function(){Ext.addBehaviors(o)})},getScrollBarWidth:function(force){if(!Ext.isReady)return 0;if(force===!0||null===scrollWidth){var div=Ext.getBody().createChild('<div class="x-hide-offsets" style="width:100px;height:50px;overflow:hidden;"><div style="height:200px;"></div></div>'),child=div.child("div",!0),w1=child.offsetWidth;div.setStyle("overflow",Ext.isWebKit||Ext.isGecko?"auto":"scroll");var w2=child.offsetWidth;div.remove(),scrollWidth=w1-w2+2}return scrollWidth},combine:function(){for(var as=arguments,l=as.length,r=[],i=0;l>i;i++){var a=as[i];Ext.isArray(a)?r=r.concat(a):void 0===a.length||a.substr?r.push(a):r=r.concat(Array.prototype.slice.call(a,0))}return r},copyTo:function(dest,source,names){return"string"==typeof names&&(names=names.split(/[,;\s]/)),Ext.each(names,function(name){source.hasOwnProperty(name)&&(dest[name]=source[name])},this),dest},destroy:function(){Ext.each(arguments,function(arg){arg&&(Ext.isArray(arg)?this.destroy.apply(this,arg):"function"==typeof arg.destroy?arg.destroy():arg.dom&&arg.remove())},this)},destroyMembers:function(o,arg1,arg2,etc){for(var i=1,a=arguments,len=a.length;len>i;i++)Ext.destroy(o[a[i]]),delete o[a[i]]},clean:function(arr){var ret=[];return Ext.each(arr,function(v){v&&ret.push(v)}),ret},unique:function(arr){var ret=[],collect={};return Ext.each(arr,function(v){collect[v]||ret.push(v),collect[v]=!0}),ret},flatten:function(arr){function rFlatten(a){return Ext.each(a,function(v){Ext.isArray(v)?rFlatten(v):worker.push(v)}),worker}var worker=[];return rFlatten(arr)},min:function(arr,comp){var ret=arr[0];return comp=comp||function(a,b){return b>a?-1:1},Ext.each(arr,function(v){ret=-1==comp(ret,v)?ret:v}),ret},max:function(arr,comp){var ret=arr[0];return comp=comp||function(a,b){return a>b?1:-1},Ext.each(arr,function(v){ret=1==comp(ret,v)?ret:v}),ret},mean:function(arr){return arr.length>0?Ext.sum(arr)/arr.length:void 0},sum:function(arr){var ret=0;return Ext.each(arr,function(v){ret+=v}),ret},partition:function(arr,truth){var ret=[[],[]];return Ext.each(arr,function(v,i,a){ret[truth&&truth(v,i,a)||!truth&&v?0:1].push(v)}),ret},invoke:function(arr,methodName){var ret=[],args=Array.prototype.slice.call(arguments,2);return Ext.each(arr,function(v,i){v&&"function"==typeof v[methodName]?ret.push(v[methodName].apply(v,args)):ret.push(void 0)}),ret},pluck:function(arr,prop){var ret=[];return Ext.each(arr,function(v){ret.push(v[prop])}),ret},zip:function(){for(var parts=Ext.partition(arguments,function(val){return"function"!=typeof val}),arrs=parts[0],fn=parts[1][0],len=Ext.max(Ext.pluck(arrs,"length")),ret=[],i=0;len>i;i++)if(ret[i]=[],fn)ret[i]=fn.apply(fn,Ext.pluck(arrs,i));else for(var j=0,aLen=arrs.length;aLen>j;j++)ret[i].push(arrs[j][i]);return ret},getCmp:function(id){return Ext.ComponentMgr.get(id)},useShims:E.isIE6||E.isMac&&E.isGecko2,type:function(o){if(void 0===o||null===o)return!1;if(o.htmlElement)return"element";var t=typeof o;if("object"==t&&o.nodeName)switch(o.nodeType){case 1:return"element";case 3:return/\S/.test(o.nodeValue)?"textnode":"whitespace"}if("object"==t||"function"==t){switch(o.constructor){case Array:return"array";case RegExp:return"regexp";case Date:return"date"}if("number"==typeof o.length&&"function"==typeof o.item)return"nodelist"}return t},intercept:function(o,name,fn,scope){o[name]=o[name].createInterceptor(fn,scope)},callback:function(cb,scope,args,delay){"function"==typeof cb&&(delay?cb.defer(delay,scope,args||[]):cb.apply(scope,args||[]))}}}()),Ext.apply(Function.prototype,{createSequence:function(fcn,scope){var method=this;return"function"!=typeof fcn?this:function(){var retval=method.apply(this||window,arguments);return fcn.apply(scope||this||window,arguments),retval}}}),Ext.applyIf(String,{escape:function(string){return string.replace(/('|\\)/g,"\\$1")},leftPad:function(val,size,ch){var result=String(val);for(ch||(ch=" ");result.length<size;)result=ch+result;return result}}),String.prototype.toggle=function(value,other){return this==value?other:value},String.prototype.trim=function(){var re=/^\s+|\s+$/g;return function(){return this.replace(re,"")}}(),Date.prototype.getElapsed=function(date){return Math.abs((date||new Date).getTime()-this.getTime())},Ext.applyIf(Number.prototype,{constrain:function(min,max){return Math.min(Math.max(this,min),max)}}),Ext.lib.Dom.getRegion=function(el){return Ext.lib.Region.getRegion(el)},Ext.lib.Region=function(t,r,b,l){var me=this;me.top=t,me[1]=t,me.right=r,me.bottom=b,me.left=l,me[0]=l},Ext.lib.Region.prototype={contains:function(region){var me=this;return region.left>=me.left&&region.right<=me.right&&region.top>=me.top&&region.bottom<=me.bottom},getArea:function(){var me=this;return(me.bottom-me.top)*(me.right-me.left)},intersect:function(region){var me=this,t=Math.max(me.top,region.top),r=Math.min(me.right,region.right),b=Math.min(me.bottom,region.bottom),l=Math.max(me.left,region.left);return b>=t&&r>=l?new Ext.lib.Region(t,r,b,l):void 0},union:function(region){var me=this,t=Math.min(me.top,region.top),r=Math.max(me.right,region.right),b=Math.max(me.bottom,region.bottom),l=Math.min(me.left,region.left);return new Ext.lib.Region(t,r,b,l)},constrainTo:function(r){var me=this;return me.top=me.top.constrain(r.top,r.bottom),me.bottom=me.bottom.constrain(r.top,r.bottom),me.left=me.left.constrain(r.left,r.right),me.right=me.right.constrain(r.left,r.right),me},adjust:function(t,l,b,r){var me=this;return me.top+=t,me.left+=l,me.right+=r,me.bottom+=b,me}},Ext.lib.Region.getRegion=function(el){var p=Ext.lib.Dom.getXY(el),t=p[1],r=p[0]+el.offsetWidth,b=p[1]+el.offsetHeight,l=p[0];return new Ext.lib.Region(t,r,b,l)},Ext.lib.Point=function(x,y){Ext.isArray(x)&&(y=x[1],x=x[0]);var me=this;me.x=me.right=me.left=me[0]=x,me.y=me.top=me.bottom=me[1]=y},Ext.lib.Point.prototype=new Ext.lib.Region,Ext.apply(Ext.DomHelper,function(){function doInsert(el,o,returnElement,pos,sibling,append){el=Ext.getDom(el);var newNode;return pub.useDom?(newNode=createDom(o,null),append?el.appendChild(newNode):("firstChild"==sibling?el:el.parentNode).insertBefore(newNode,el[sibling]||el)):newNode=Ext.DomHelper.insertHtml(pos,el,Ext.DomHelper.createHtml(o)),returnElement?Ext.get(newNode,!0):newNode}function createDom(o,parentNode){var el,useSet,attr,val,cn,doc=document;if(Ext.isArray(o)){el=doc.createDocumentFragment();for(var i=0,l=o.length;l>i;i++)createDom(o[i],el)}else if("string"==typeof o)el=doc.createTextNode(o);else{el=doc.createElement(o.tag||"div"),useSet=!!el.setAttribute;for(var attr in o)confRe.test(attr)||(val=o[attr],"cls"==attr?el.className=val:useSet?el.setAttribute(attr,val):el[attr]=val);Ext.DomHelper.applyStyles(el,o.style),(cn=o.children||o.cn)?createDom(cn,el):o.html&&(el.innerHTML=o.html)}return parentNode&&parentNode.appendChild(el),el}var pub,afterbegin="afterbegin",afterend="afterend",beforebegin="beforebegin",beforeend="beforeend",confRe=/tag|children|cn|html$/i;return pub={createTemplate:function(o){var html=Ext.DomHelper.createHtml(o);return new Ext.Template(html)},useDom:!1,insertBefore:function(el,o,returnElement){return doInsert(el,o,returnElement,beforebegin)},insertAfter:function(el,o,returnElement){return doInsert(el,o,returnElement,afterend,"nextSibling")},insertFirst:function(el,o,returnElement){return doInsert(el,o,returnElement,afterbegin,"firstChild")},append:function(el,o,returnElement){return doInsert(el,o,returnElement,beforeend,"",!0)},createDom:createDom}}()),Ext.apply(Ext.Template.prototype,{disableFormats:!1,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,argsRe:/^\s*['"](.*)["']\s*$/,compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,applyTemplate:function(values){function fn(m,name,format,args){if(format&&useF){if("this."==format.substr(0,5))return tpl.call(format.substr(5),values[name],values);if(args){var re=me.argsRe;args=args.split(",");for(var i=0,len=args.length;len>i;i++)args[i]=args[i].replace(re,"$1");args=[values[name]].concat(args)}else args=[values[name]];return fm[format].apply(fm,args)}return void 0!==values[name]?values[name]:""}var me=this,useF=me.disableFormats!==!0,fm=Ext.util.Format,tpl=me;return me.compiled?me.compiled(values):me.html.replace(me.re,fn)},compile:function(){function fn(m,name,format,args){return format&&useF?(args=args?","+args:"","this."!=format.substr(0,5)?format="fm."+format+"(":(format='this.call("'+format.substr(5)+'", ',args=", values")):(args="",format="(values['"+name+"'] == undefined ? '' : "),"'"+sep+format+"values['"+name+"']"+args+")"+sep+"'"}var me=this,fm=Ext.util.Format,useF=me.disableFormats!==!0,sep=Ext.isGecko?"+":",",body;return Ext.isGecko?body="this.compiled = function(values){ return '"+me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)+"';};":(body=["this.compiled = function(values){ return ['"],body.push(me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)),body.push("'].join('');};"),body=body.join("")),eval(body),me},call:function(fnName,value,allValues){return this[fnName](value,allValues)}}),Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate,Ext.util.Functions={createInterceptor:function(origFn,newFn,scope){return Ext.isFunction(newFn)?function(){var me=this,args=arguments;return newFn.target=me,newFn.method=origFn,newFn.apply(scope||me||window,args)!==!1?origFn.apply(me||window,args):null}:origFn},createDelegate:function(fn,obj,args,appendArgs){return Ext.isFunction(fn)?function(){var callArgs=args||arguments;if(appendArgs===!0)callArgs=Array.prototype.slice.call(arguments,0),callArgs=callArgs.concat(args);else if(Ext.isNumber(appendArgs)){callArgs=Array.prototype.slice.call(arguments,0);var applyArgs=[appendArgs,0].concat(args);Array.prototype.splice.apply(callArgs,applyArgs)}return fn.apply(obj||window,callArgs)}:fn},defer:function(fn,millis,obj,args,appendArgs){return fn=Ext.util.Functions.createDelegate(fn,obj,args,appendArgs),millis>0?setTimeout(fn,millis):(fn(),0)},createSequence:function(origFn,newFn,scope){return Ext.isFunction(newFn)?function(){var retval=origFn.apply(this||window,arguments);return newFn.apply(scope||this||window,arguments),retval}:origFn}},Ext.defer=Ext.util.Functions.defer,Ext.createInterceptor=Ext.util.Functions.createInterceptor,Ext.createSequence=Ext.util.Functions.createSequence,Ext.createDelegate=Ext.util.Functions.createDelegate,Ext.apply(Ext.util.Observable.prototype,function(){function getMethodEvent(method){var returnValue,v,cancel,e=(this.methodEvents=this.methodEvents||{})[method],obj=this;if(!e){this.methodEvents[method]=e={},e.originalFn=this[method],e.methodName=method,e.before=[],e.after=[];var makeCall=function(fn,scope,args){void 0!==(v=fn.apply(scope||obj,args))&&("object"==typeof v?(returnValue=void 0!==v.returnValue?v.returnValue:v,cancel=!!v.cancel):v===!1?cancel=!0:returnValue=v)};this[method]=function(){var b,args=Array.prototype.slice.call(arguments,0);returnValue=v=void 0,cancel=!1;for(var i=0,len=e.before.length;len>i;i++)if(b=e.before[i],makeCall(b.fn,b.scope,args),cancel)return returnValue;void 0!==(v=e.originalFn.apply(obj,args))&&(returnValue=v);for(var i=0,len=e.after.length;len>i;i++)if(b=e.after[i],makeCall(b.fn,b.scope,args),cancel)return returnValue;return returnValue}}return e}return{beforeMethod:function(method,fn,scope){getMethodEvent.call(this,method).before.push({fn:fn,scope:scope})},afterMethod:function(method,fn,scope){getMethodEvent.call(this,method).after.push({fn:fn,scope:scope})},removeMethodListener:function(method,fn,scope){for(var e=this.getMethodEvent(method),i=0,len=e.before.length;len>i;i++)if(e.before[i].fn==fn&&e.before[i].scope==scope)return void e.before.splice(i,1);for(var i=0,len=e.after.length;len>i;i++)if(e.after[i].fn==fn&&e.after[i].scope==scope)return void e.after.splice(i,1)},relayEvents:function(o,events){function createHandler(ename){return function(){return me.fireEvent.apply(me,[ename].concat(Array.prototype.slice.call(arguments,0)))}}for(var me=this,i=0,len=events.length;len>i;i++){var ename=events[i];me.events[ename]=me.events[ename]||!0,o.on(ename,createHandler(ename),me)}},enableBubble:function(events){var me=this;if(!Ext.isEmpty(events)){events=Ext.isArray(events)?events:Array.prototype.slice.call(arguments,0);for(var i=0,len=events.length;len>i;i++){var ename=events[i];ename=ename.toLowerCase();var ce=me.events[ename]||!0;"boolean"==typeof ce&&(ce=new Ext.util.Event(me,ename),me.events[ename]=ce),ce.bubble=!0}}}}}()),Ext.util.Observable.capture=function(o,fn,scope){o.fireEvent=o.fireEvent.createInterceptor(fn,scope)},Ext.util.Observable.observeClass=function(c,listeners){return c?(c.fireEvent||(Ext.apply(c,new Ext.util.Observable),Ext.util.Observable.capture(c.prototype,c.fireEvent,c)),"object"==typeof listeners&&c.on(listeners),c):void 0},Ext.apply(Ext.EventManager,function(){var resizeEvent,resizeTask,textEvent,textSize,D=Ext.lib.Dom,unload=Ext.EventManager._unload,curWidth=0,curHeight=0,useKeydown=Ext.isWebKit?Ext.num(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1])>=525:!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera);return{_unload:function(){Ext.EventManager.un(window,"resize",this.fireWindowResize,this),unload.call(Ext.EventManager)},doResizeEvent:function(){var h=D.getViewHeight(),w=D.getViewWidth();(curHeight!=h||curWidth!=w)&&resizeEvent.fire(curWidth=w,curHeight=h)},onWindowResize:function(fn,scope,options){resizeEvent||(resizeEvent=new Ext.util.Event,resizeTask=new Ext.util.DelayedTask(this.doResizeEvent),Ext.EventManager.on(window,"resize",this.fireWindowResize,this)),resizeEvent.addListener(fn,scope,options)},fireWindowResize:function(){resizeEvent&&resizeTask.delay(100)},onTextResize:function(fn,scope,options){if(!textEvent){textEvent=new Ext.util.Event;var textEl=new Ext.Element(document.createElement("div"));textEl.dom.className="x-text-resize",textEl.dom.innerHTML="X",textEl.appendTo(document.body),textSize=textEl.dom.offsetHeight,setInterval(function(){textEl.dom.offsetHeight!=textSize&&textEvent.fire(textSize,textSize=textEl.dom.offsetHeight)},this.textResizeInterval)}textEvent.addListener(fn,scope,options)},removeResizeListener:function(fn,scope){resizeEvent&&resizeEvent.removeListener(fn,scope)},fireResize:function(){resizeEvent&&resizeEvent.fire(D.getViewWidth(),D.getViewHeight())},textResizeInterval:50,ieDeferSrc:!1,getKeyEvent:function(){return useKeydown?"keydown":"keypress"},useKeydown:useKeydown}}()),Ext.EventManager.on=Ext.EventManager.addListener,Ext.apply(Ext.EventObjectImpl.prototype,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,isNavKeyPress:function(){var me=this,k=this.normalizeKey(me.keyCode);return k>=33&&40>=k||k==me.RETURN||k==me.TAB||k==me.ESC},isSpecialKey:function(){var k=this.normalizeKey(this.keyCode);return"keypress"==this.type&&this.ctrlKey||this.isNavKeyPress()||k==this.BACKSPACE||k>=16&&20>=k||k>=44&&46>=k},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey}}),Ext.Element.addMethods({swallowEvent:function(eventName,preventDefault){function fn(e){e.stopPropagation(),preventDefault&&e.preventDefault()}var me=this;return Ext.isArray(eventName)?(Ext.each(eventName,function(e){me.on(e,fn)}),me):(me.on(eventName,fn),me)},relayEvent:function(eventName,observable){this.on(eventName,function(e){observable.fireEvent(eventName,e)})},clean:function(forceReclean){var me=this,dom=me.dom,n=dom.firstChild,ni=-1;if(Ext.Element.data(dom,"isCleaned")&&forceReclean!==!0)return me;for(;n;){var nx=n.nextSibling;3!=n.nodeType||/\S/.test(n.nodeValue)?n.nodeIndex=++ni:dom.removeChild(n),n=nx}return Ext.Element.data(dom,"isCleaned",!0),me},load:function(){var updateManager=this.getUpdater();return updateManager.update.apply(updateManager,arguments),this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this))},update:function(html,loadScripts,callback){if(!this.dom)return this;if(html=html||"",loadScripts!==!0)return this.dom.innerHTML=html,"function"==typeof callback&&callback(),this;var id=Ext.id(),dom=this.dom;return html+='<span id="'+id+'"></span>',Ext.lib.Event.onAvailable(id,function(){for(var match,attrs,srcMatch,typeMatch,el,s,DOC=document,hd=DOC.getElementsByTagName("head")[0],re=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,srcRe=/\ssrc=([\'\"])(.*?)\1/i,typeRe=/\stype=([\'\"])(.*?)\1/i;match=re.exec(html);)attrs=match[1],srcMatch=attrs?attrs.match(srcRe):!1,srcMatch&&srcMatch[2]?(s=DOC.createElement("script"),s.src=srcMatch[2],typeMatch=attrs.match(typeRe),typeMatch&&typeMatch[2]&&(s.type=typeMatch[2]),hd.appendChild(s)):match[2]&&match[2].length>0&&(window.execScript?window.execScript(match[2]):window.eval(match[2]));el=DOC.getElementById(id),el&&Ext.removeNode(el),"function"==typeof callback&&callback()}),dom.innerHTML=html.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,""),this},removeAllListeners:function(){return this.removeAnchor(),Ext.EventManager.removeAll(this.dom),this},createProxy:function(config,renderTo,matchBox){config="object"==typeof config?config:{tag:"div",cls:config};var me=this,proxy=renderTo?Ext.DomHelper.append(renderTo,config,!0):Ext.DomHelper.insertBefore(me.dom,config,!0);return matchBox&&me.setBox&&me.getBox&&proxy.setBox(me.getBox()),proxy}}),Ext.Element.prototype.getUpdateManager=Ext.Element.prototype.getUpdater,Ext.Element.addMethods({getAnchorXY:function(anchor,local,s){anchor=(anchor||"tl").toLowerCase(),s=s||{};var xy,me=this,vp=me.dom==document.body||me.dom==document,w=s.width||vp?Ext.lib.Dom.getViewWidth():me.getWidth(),h=s.height||vp?Ext.lib.Dom.getViewHeight():me.getHeight(),r=Math.round,o=me.getXY(),scroll=me.getScroll(),extraX=vp?scroll.left:local?0:o[0],extraY=vp?scroll.top:local?0:o[1],hash={
c:[r(.5*w),r(.5*h)],t:[r(.5*w),0],l:[0,r(.5*h)],r:[w,r(.5*h)],b:[r(.5*w),h],tl:[0,0],bl:[0,h],br:[w,h],tr:[w,0]};return xy=hash[anchor],[xy[0]+extraX,xy[1]+extraY]},anchorTo:function(el,alignment,offsets,animate,monitorScroll,callback){var me=this,dom=me.dom,scroll=!Ext.isEmpty(monitorScroll),action=function(){Ext.fly(dom).alignTo(el,alignment,offsets,animate),Ext.callback(callback,Ext.fly(dom))},anchor=this.getAnchor();return this.removeAnchor(),Ext.apply(anchor,{fn:action,scroll:scroll}),Ext.EventManager.onWindowResize(action,null),scroll&&Ext.EventManager.on(window,"scroll",action,null,{buffer:isNaN(monitorScroll)?50:monitorScroll}),action.call(me),me},removeAnchor:function(){var me=this,anchor=this.getAnchor();return anchor&&anchor.fn&&(Ext.EventManager.removeResizeListener(anchor.fn),anchor.scroll&&Ext.EventManager.un(window,"scroll",anchor.fn),delete anchor.fn),me},getAnchor:function(){var data=Ext.Element.data,dom=this.dom;if(dom){var anchor=data(dom,"_anchor");return anchor||(anchor=data(dom,"_anchor",{})),anchor}},getAlignToXY:function(el,p,o){if(el=Ext.get(el),!el||!el.dom)throw"Element.alignToXY with an element that doesn't exist";o=o||[0,0],p=(p&&"?"!=p?/-/.test(p)||""===p?p||"tl-bl":"tl-"+p:"tl-bl?").toLowerCase();var a1,a2,x,y,w,h,r,p1y,p1x,p2y,p2x,swapY,swapX,me=this,dw=(me.dom,Ext.lib.Dom.getViewWidth()-10),dh=Ext.lib.Dom.getViewHeight()-10,doc=document,docElement=doc.documentElement,docBody=doc.body,scrollX=(docElement.scrollLeft||docBody.scrollLeft||0)+5,scrollY=(docElement.scrollTop||docBody.scrollTop||0)+5,c=!1,p1="",p2="",m=p.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!m)throw"Element.alignTo with an invalid alignment "+p;return p1=m[1],p2=m[2],c=!!m[3],a1=me.getAnchorXY(p1,!0),a2=el.getAnchorXY(p2,!1),x=a2[0]-a1[0]+o[0],y=a2[1]-a1[1]+o[1],c&&(w=me.getWidth(),h=me.getHeight(),r=el.getRegion(),p1y=p1.charAt(0),p1x=p1.charAt(p1.length-1),p2y=p2.charAt(0),p2x=p2.charAt(p2.length-1),swapY="t"==p1y&&"b"==p2y||"b"==p1y&&"t"==p2y,swapX="r"==p1x&&"l"==p2x||"l"==p1x&&"r"==p2x,x+w>dw+scrollX&&(x=swapX?r.left-w:dw+scrollX-w),scrollX>x&&(x=swapX?r.right:scrollX),y+h>dh+scrollY&&(y=swapY?r.top-h:dh+scrollY-h),scrollY>y&&(y=swapY?r.bottom:scrollY)),[x,y]},alignTo:function(element,position,offsets,animate){var me=this;return me.setXY(me.getAlignToXY(element,position,offsets),me.preanim&&animate?me.preanim(arguments,3):!1)},adjustForConstraints:function(xy,parent,offsets){return this.getConstrainToXY(parent||document,!1,offsets,xy)||xy},getConstrainToXY:function(el,local,offsets,proposedXY){var os={top:0,left:0,bottom:0,right:0};return function(el,local,offsets,proposedXY){el=Ext.get(el),offsets=offsets?Ext.applyIf(offsets,os):os;var vw,vh,vx=0,vy=0;if(el.dom==document.body||el.dom==document)vw=Ext.lib.Dom.getViewWidth(),vh=Ext.lib.Dom.getViewHeight();else if(vw=el.dom.clientWidth,vh=el.dom.clientHeight,!local){var vxy=el.getXY();vx=vxy[0],vy=vxy[1]}var s=el.getScroll();vx+=offsets.left+s.left,vy+=offsets.top+s.top,vw-=offsets.right,vh-=offsets.bottom;var vr=vx+vw,vb=vy+vh,xy=proposedXY||(local?[this.getLeft(!0),this.getTop(!0)]:this.getXY()),x=xy[0],y=xy[1],offset=this.getConstrainOffset(),w=this.dom.offsetWidth+offset,h=this.dom.offsetHeight+offset,moved=!1;return x+w>vr&&(x=vr-w,moved=!0),y+h>vb&&(y=vb-h,moved=!0),vx>x&&(x=vx,moved=!0),vy>y&&(y=vy,moved=!0),moved?[x,y]:!1}}(),getConstrainOffset:function(){return 0},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(centerIn){return this.alignTo(centerIn||document,"c-c")}}),Ext.Element.addMethods({select:function(selector,unique){return Ext.Element.select(selector,unique,this.dom)}}),Ext.apply(Ext.Element.prototype,function(){var GETDOM=Ext.getDom,GET=Ext.get,DH=Ext.DomHelper;return{insertSibling:function(el,where,returnDom){var rt,insertEl,me=this,isAfter="after"==(where||"before").toLowerCase();return Ext.isArray(el)?(insertEl=me,Ext.each(el,function(e){rt=Ext.fly(insertEl,"_internal").insertSibling(e,where,returnDom),isAfter&&(insertEl=rt)}),rt):(el=el||{},el.nodeType||el.dom?(rt=me.dom.parentNode.insertBefore(GETDOM(el),isAfter?me.dom.nextSibling:me.dom),returnDom||(rt=GET(rt))):rt=isAfter&&!me.dom.nextSibling?DH.append(me.dom.parentNode,el,!returnDom):DH[isAfter?"insertAfter":"insertBefore"](me.dom,el,!returnDom),rt)}}}()),Ext.Element.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>',Ext.Element.addMethods(function(){var INTERNAL="_internal";return{applyStyles:function(style){return Ext.DomHelper.applyStyles(this.dom,style),this},getStyles:function(){var ret={};return Ext.each(arguments,function(v){ret[v]=this.getStyle(v)},this),ret},setOverflow:function(v){var dom=this.dom;"auto"==v&&Ext.isMac&&Ext.isGecko2?(dom.style.overflow="hidden",function(){dom.style.overflow="auto"}.defer(1)):dom.style.overflow=v},boxWrap:function(cls){cls=cls||"x-box";var el=Ext.get(this.insertHtml("beforeBegin","<div class='"+cls+"'>"+String.format(Ext.Element.boxMarkup,cls)+"</div>"));return Ext.DomQuery.selectNode("."+cls+"-mc",el.dom).appendChild(this.dom),el},setSize:function(width,height,animate){var me=this;return"object"==typeof width&&(height=width.height,width=width.width),width=me.adjustWidth(width),height=me.adjustHeight(height),animate&&me.anim?me.anim({width:{to:width},height:{to:height}},me.preanim(arguments,2)):(me.dom.style.width=me.addUnits(width),me.dom.style.height=me.addUnits(height)),me},getComputedHeight:function(){var me=this,h=Math.max(me.dom.offsetHeight,me.dom.clientHeight);return h||(h=parseFloat(me.getStyle("height"))||0,me.isBorderBox()||(h+=me.getFrameWidth("tb"))),h},getComputedWidth:function(){var w=Math.max(this.dom.offsetWidth,this.dom.clientWidth);return w||(w=parseFloat(this.getStyle("width"))||0,this.isBorderBox()||(w+=this.getFrameWidth("lr"))),w},getFrameWidth:function(sides,onlyContentBox){return onlyContentBox&&this.isBorderBox()?0:this.getPadding(sides)+this.getBorderWidth(sides)},addClassOnOver:function(className){return this.hover(function(){Ext.fly(this,INTERNAL).addClass(className)},function(){Ext.fly(this,INTERNAL).removeClass(className)}),this},addClassOnFocus:function(className){return this.on("focus",function(){Ext.fly(this,INTERNAL).addClass(className)},this.dom),this.on("blur",function(){Ext.fly(this,INTERNAL).removeClass(className)},this.dom),this},addClassOnClick:function(className){var dom=this.dom;return this.on("mousedown",function(){Ext.fly(dom,INTERNAL).addClass(className);var d=Ext.getDoc(),fn=function(){Ext.fly(dom,INTERNAL).removeClass(className),d.removeListener("mouseup",fn)};d.on("mouseup",fn)}),this},getViewSize:function(){var doc=document,d=this.dom,isDoc=d==doc||d==doc.body;if(isDoc){var extdom=Ext.lib.Dom;return{width:extdom.getViewWidth(),height:extdom.getViewHeight()}}return{width:d.clientWidth,height:d.clientHeight}},getStyleSize:function(){var w,h,me=this,doc=document,d=this.dom,isDoc=d==doc||d==doc.body,s=d.style;if(isDoc){var extdom=Ext.lib.Dom;return{width:extdom.getViewWidth(),height:extdom.getViewHeight()}}return s.width&&"auto"!=s.width&&(w=parseFloat(s.width),me.isBorderBox()&&(w-=me.getFrameWidth("lr"))),s.height&&"auto"!=s.height&&(h=parseFloat(s.height),me.isBorderBox()&&(h-=me.getFrameWidth("tb"))),{width:w||me.getWidth(!0),height:h||me.getHeight(!0)}},getSize:function(contentSize){return{width:this.getWidth(contentSize),height:this.getHeight(contentSize)}},repaint:function(){var dom=this.dom;return this.addClass("x-repaint"),setTimeout(function(){Ext.fly(dom).removeClass("x-repaint")},1),this},unselectable:function(){return this.dom.unselectable="on",this.swallowEvent("selectstart",!0).addClass("x-unselectable")},getMargins:function(side){var key,me=this,hash={t:"top",l:"left",r:"right",b:"bottom"},o={};if(side)return me.addStyles.call(me,side,me.margins);for(key in me.margins)o[hash[key]]=parseFloat(me.getStyle(me.margins[key]))||0;return o}}}()),Ext.Element.addMethods({setBox:function(box,adjust,animate){var me=this,w=box.width,h=box.height;return!adjust||me.autoBoxAdjust||me.isBorderBox()||(w-=me.getBorderWidth("lr")+me.getPadding("lr"),h-=me.getBorderWidth("tb")+me.getPadding("tb")),me.setBounds(box.x,box.y,w,h,me.animTest.call(me,arguments,animate,2)),me},getBox:function(contentBox,local){var xy,left,top,l,r,t,b,me=this,getBorderWidth=me.getBorderWidth,getPadding=me.getPadding;local?(left=parseInt(me.getStyle("left"),10)||0,top=parseInt(me.getStyle("top"),10)||0,xy=[left,top]):xy=me.getXY();var bx,el=me.dom,w=el.offsetWidth,h=el.offsetHeight;return contentBox?(l=getBorderWidth.call(me,"l")+getPadding.call(me,"l"),r=getBorderWidth.call(me,"r")+getPadding.call(me,"r"),t=getBorderWidth.call(me,"t")+getPadding.call(me,"t"),b=getBorderWidth.call(me,"b")+getPadding.call(me,"b"),bx={x:xy[0]+l,y:xy[1]+t,0:xy[0]+l,1:xy[1]+t,width:w-(l+r),height:h-(t+b)}):bx={x:xy[0],y:xy[1],0:xy[0],1:xy[1],width:w,height:h},bx.right=bx.x+bx.width,bx.bottom=bx.y+bx.height,bx},move:function(direction,distance,animate){var me=this,xy=me.getXY(),x=xy[0],y=xy[1],left=[x-distance,y],right=[x+distance,y],top=[x,y-distance],bottom=[x,y+distance],hash={l:left,left:left,r:right,right:right,t:top,top:top,up:top,b:bottom,bottom:bottom,down:bottom};direction=direction.toLowerCase(),me.moveTo(hash[direction][0],hash[direction][1],me.animTest.call(me,arguments,animate,2))},setLeftTop:function(left,top){var me=this,style=me.dom.style;return style.left=me.addUnits(left),style.top=me.addUnits(top),me},getRegion:function(){return Ext.lib.Dom.getRegion(this.dom)},setBounds:function(x,y,width,height,animate){var me=this;return animate&&me.anim?me.anim({points:{to:[x,y]},width:{to:me.adjustWidth(width)},height:{to:me.adjustHeight(height)}},me.preanim(arguments,4),"motion"):(me.setSize(width,height),me.setLocation(x,y)),me},setRegion:function(region,animate){return this.setBounds(region.left,region.top,region.right-region.left,region.bottom-region.top,this.animTest.call(this,arguments,animate,1))}}),Ext.Element.addMethods({scrollTo:function(side,value,animate){var prop,top=/top/i.test(side),me=this,dom=me.dom;return animate&&me.anim?(prop="scroll"+(top?"Left":"Top"),me.anim({scroll:{to:top?[dom[prop],value]:[value,dom[prop]]}},me.preanim(arguments,2),"scroll")):(prop="scroll"+(top?"Top":"Left"),dom[prop]=value),me},scrollIntoView:function(container,hscroll){var c=Ext.getDom(container)||Ext.getBody().dom,el=this.dom,o=this.getOffsetsTo(c),l=o[0]+c.scrollLeft,t=o[1]+c.scrollTop,b=t+el.offsetHeight,r=l+el.offsetWidth,ch=c.clientHeight,ct=parseInt(c.scrollTop,10),cl=parseInt(c.scrollLeft,10),cb=ct+ch,cr=cl+c.clientWidth;return el.offsetHeight>ch||ct>t?c.scrollTop=t:b>cb&&(c.scrollTop=b-ch),c.scrollTop=c.scrollTop,hscroll!==!1&&(el.offsetWidth>c.clientWidth||cl>l?c.scrollLeft=l:r>cr&&(c.scrollLeft=r-c.clientWidth),c.scrollLeft=c.scrollLeft),this},scrollChildIntoView:function(child,hscroll){Ext.fly(child,"_scrollChildIntoView").scrollIntoView(this,hscroll)},scroll:function(direction,distance,animate){if(!this.isScrollable())return!1;var v,el=this.dom,l=el.scrollLeft,t=el.scrollTop,w=el.scrollWidth,h=el.scrollHeight,cw=el.clientWidth,ch=el.clientHeight,scrolled=!1,hash={l:Math.min(l+distance,w-cw),r:v=Math.max(l-distance,0),t:Math.max(t-distance,0),b:Math.min(t+distance,h-ch)};return hash.d=hash.b,hash.u=hash.t,direction=direction.substr(0,1),(v=hash[direction])>-1&&(scrolled=!0,this.scrollTo("l"==direction||"r"==direction?"left":"top",v,this.preanim(arguments,2))),scrolled}}),Ext.Element.addMethods(function(){var VISIBILITY="visibility",DISPLAY="display",HIDDEN="hidden",NONE="none",XMASKED="x-masked",XMASKEDRELATIVE="x-masked-relative",data=Ext.Element.data;return{isVisible:function(deep){var vis=!this.isStyle(VISIBILITY,HIDDEN)&&!this.isStyle(DISPLAY,NONE),p=this.dom.parentNode;if(deep!==!0||!vis)return vis;for(;p&&!/^body/i.test(p.tagName);){if(!Ext.fly(p,"_isVisible").isVisible())return!1;p=p.parentNode}return!0},isDisplayed:function(){return!this.isStyle(DISPLAY,NONE)},enableDisplayMode:function(display){return this.setVisibilityMode(Ext.Element.DISPLAY),Ext.isEmpty(display)||data(this.dom,"originalDisplay",display),this},mask:function(msg,msgCls){var el,mask,me=this,dom=me.dom,dh=Ext.DomHelper,EXTELMASKMSG="ext-el-mask-msg";if(/^body/i.test(dom.tagName)||"static"!=me.getStyle("position")||me.addClass(XMASKEDRELATIVE),(el=data(dom,"maskMsg"))&&el.remove(),(el=data(dom,"mask"))&&el.remove(),mask=dh.append(dom,{cls:"ext-el-mask"},!0),data(dom,"mask",mask),me.addClass(XMASKED),mask.setDisplayed(!0),"string"==typeof msg){var mm=dh.append(dom,{cls:EXTELMASKMSG,cn:{tag:"div"}},!0);data(dom,"maskMsg",mm),mm.dom.className=msgCls?EXTELMASKMSG+" "+msgCls:EXTELMASKMSG,mm.dom.firstChild.innerHTML=msg,mm.setDisplayed(!0),mm.center(me)}return!Ext.isIE||Ext.isIE7&&Ext.isStrict||"auto"!=me.getStyle("height")||mask.setSize(void 0,me.getHeight()),mask},unmask:function(){var me=this,dom=me.dom,mask=data(dom,"mask"),maskMsg=data(dom,"maskMsg");mask&&(maskMsg&&(maskMsg.remove(),data(dom,"maskMsg",void 0)),mask.remove(),data(dom,"mask",void 0),me.removeClass([XMASKED,XMASKEDRELATIVE]))},isMasked:function(){var m=data(this.dom,"mask");return m&&m.isVisible()},createShim:function(){var shim,el=document.createElement("iframe");return el.frameBorder="0",el.className="ext-shim",el.src=Ext.SSL_SECURE_URL,shim=Ext.get(this.dom.parentNode.insertBefore(el,this.dom)),shim.autoBoxAdjust=!1,shim}}}()),Ext.Element.addMethods({addKeyListener:function(key,fn,scope){var config;return config="object"!=typeof key||Ext.isArray(key)?{key:key,fn:fn,scope:scope}:{key:key.key,shift:key.shift,ctrl:key.ctrl,alt:key.alt,fn:fn,scope:scope},new Ext.KeyMap(this,config)},addKeyMap:function(config){return new Ext.KeyMap(this,config)}}),Ext.CompositeElementLite.importElementMethods(),Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(els,root){if(!els)return this;"string"==typeof els&&(els=Ext.Element.selectorFunction(els,root));var yels=this.elements;return Ext.each(els,function(e){yels.push(Ext.get(e))}),this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(el){return-1!=this.indexOf(el)},removeElement:function(keys,removeDom){var el,me=this,els=this.elements;return Ext.each(keys,function(val){(el=els[val]||els[val=me.indexOf(val)])&&(removeDom&&(el.dom?el.remove():Ext.removeNode(el)),els.splice(val,1))}),this}}),Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(els,root){this.elements=[],this.add(els,root)},getElement:function(el){return el},transformElement:function(el){return Ext.get(el)}}),Ext.Element.select=function(selector,unique,root){var els;if("string"==typeof selector)els=Ext.Element.selectorFunction(selector,root);else{if(void 0===selector.length)throw"Invalid selector";els=selector}return unique===!0?new Ext.CompositeElement(els):new Ext.CompositeElementLite(els)},Ext.select=Ext.Element.select,Ext.UpdateManager=Ext.Updater=Ext.extend(Ext.util.Observable,function(){function processSuccess(response){var me=this;if(me.transaction=null,response.argument.form&&response.argument.reset)try{response.argument.form.reset()}catch(e){}me.loadScripts?me.renderer.render(me.el,response,me,updateComplete.createDelegate(me,[response])):(me.renderer.render(me.el,response,me),updateComplete.call(me,response))}function updateComplete(response,type,success){this.fireEvent(type||UPDATE,this.el,response),Ext.isFunction(response.argument.callback)&&response.argument.callback.call(response.argument.scope,this.el,Ext.isEmpty(success)?!0:!1,response,response.argument.options)}function processFailure(response){updateComplete.call(this,response,FAILURE,!!(this.transaction=null))}var BEFOREUPDATE="beforeupdate",UPDATE="update",FAILURE="failure";return{constructor:function(el,forceNew){var me=this;return el=Ext.get(el),!forceNew&&el.updateManager?el.updateManager:(me.el=el,me.defaultUrl=null,me.addEvents(BEFOREUPDATE,UPDATE,FAILURE),Ext.apply(me,Ext.Updater.defaults),me.transaction=null,me.refreshDelegate=me.refresh.createDelegate(me),me.updateDelegate=me.update.createDelegate(me),me.formUpdateDelegate=(me.formUpdate||function(){}).createDelegate(me),me.renderer=me.renderer||me.getDefaultRenderer(),void Ext.Updater.superclass.constructor.call(me))},setRenderer:function(renderer){this.renderer=renderer},getRenderer:function(){return this.renderer},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer},setDefaultUrl:function(defaultUrl){this.defaultUrl=defaultUrl},getEl:function(){return this.el},update:function(url,params,callback,discardUrl){var cfg,callerScope,me=this;if(me.fireEvent(BEFOREUPDATE,me.el,url,params)!==!1){Ext.isObject(url)&&(cfg=url,url=cfg.url,params=params||cfg.params,callback=callback||cfg.callback,discardUrl=discardUrl||cfg.discardUrl,callerScope=cfg.scope,Ext.isEmpty(cfg.nocache)||(me.disableCaching=cfg.nocache),Ext.isEmpty(cfg.text)||(me.indicatorText='<div class="loading-indicator">'+cfg.text+"</div>"),Ext.isEmpty(cfg.scripts)||(me.loadScripts=cfg.scripts),Ext.isEmpty(cfg.timeout)||(me.timeout=cfg.timeout)),me.showLoading(),discardUrl||(me.defaultUrl=url),Ext.isFunction(url)&&(url=url.call(me));var o=Ext.apply({},{url:url,params:Ext.isFunction(params)&&callerScope?params.createDelegate(callerScope):params,success:processSuccess,failure:processFailure,scope:me,callback:void 0,timeout:1e3*me.timeout,disableCaching:me.disableCaching,argument:{options:cfg,url:url,form:null,callback:callback,scope:callerScope||window,params:params}},cfg);me.transaction=Ext.Ajax.request(o)}},formUpdate:function(form,url,reset,callback){var me=this;me.fireEvent(BEFOREUPDATE,me.el,form,url)!==!1&&(Ext.isFunction(url)&&(url=url.call(me)),form=Ext.getDom(form),me.transaction=Ext.Ajax.request({form:form,url:url,success:processSuccess,failure:processFailure,scope:me,timeout:1e3*me.timeout,argument:{url:url,form:form,callback:callback,reset:reset}}),me.showLoading.defer(1,me))},startAutoRefresh:function(interval,url,params,callback,refreshNow){var me=this;refreshNow&&me.update(url||me.defaultUrl,params,callback,!0),me.autoRefreshProcId&&clearInterval(me.autoRefreshProcId),me.autoRefreshProcId=setInterval(me.update.createDelegate(me,[url||me.defaultUrl,params,callback,!0]),1e3*interval)},stopAutoRefresh:function(){this.autoRefreshProcId&&(clearInterval(this.autoRefreshProcId),delete this.autoRefreshProcId)},isAutoRefreshing:function(){return!!this.autoRefreshProcId},showLoading:function(){this.showLoadIndicator&&(this.el.dom.innerHTML=this.indicatorText)},abort:function(){this.transaction&&Ext.Ajax.abort(this.transaction)},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):!1},refresh:function(callback){this.defaultUrl&&this.update(this.defaultUrl,null,callback,!0)}}}()),Ext.Updater.defaults={timeout:30,disableCaching:!1,showLoadIndicator:!0,indicatorText:'<div class="loading-indicator">Loading...</div>',loadScripts:!1,sslBlankUrl:Ext.SSL_SECURE_URL},Ext.Updater.updateElement=function(el,url,params,options){var um=Ext.get(el).getUpdater();Ext.apply(um,options),um.update(url,params,options?options.callback:null)},Ext.Updater.BasicRenderer=function(){},Ext.Updater.BasicRenderer.prototype={render:function(el,response,updateManager,callback){el.update(response.responseText,updateManager.loadScripts,callback)}},function(){function xf(format){var args=Array.prototype.slice.call(arguments,1);return format.replace(/\{(\d+)\}/g,function(m,i){return args[i]})}Date.useStrict=!1,Date.formatCodeToRegex=function(character,currentGroup){var p=Date.parseCodes[character];return p&&(p="function"==typeof p?p():p,Date.parseCodes[character]=p),p?Ext.applyIf({c:p.c?xf(p.c,currentGroup||"{0}"):p.c},p):{g:0,c:null,s:Ext.escapeRe(character)}};var $f=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{M$:function(input,strict){var re=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/"),r=(input||"").match(re);return r?new Date(1*((r[1]||"")+r[2])):null}},parseRegexes:[],formatFunctions:{M$:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(month){return Date.monthNames[month].substring(0,3)},getShortDayName:function(day){return Date.dayNames[day].substring(0,3)},getMonthNumber:function(name){return Date.monthNumbers[name.substring(0,1).toUpperCase()+name.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(){var stripEscapeRe=/(\\.)/g,hourInfoRe=/([gGhHisucUOPZ]|M\$)/;return function(format){return hourInfoRe.test(format.replace(stripEscapeRe,""))}}(),formatCodes:{d:"String.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"String.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"String.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"String.leftPad(this.getHours(), 2, '0')",i:"String.leftPad(this.getMinutes(), 2, '0')",s:"String.leftPad(this.getSeconds(), 2, '0')",u:"String.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var c="Y-m-dTH:i:sP",code=[],i=0,l=c.length;l>i;++i){var e=c.charAt(i);code.push("T"==e?"'T'":Date.getFormatCode(e))}return code.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(y,m,d,h,i,s,ms){h=h||0,i=i||0,s=s||0,ms=ms||0;var dt=new Date(100>y?100:y,m-1,d,h,i,s,ms).add(Date.YEAR,100>y?y-100:0);return y==dt.getFullYear()&&m==dt.getMonth()+1&&d==dt.getDate()&&h==dt.getHours()&&i==dt.getMinutes()&&s==dt.getSeconds()&&ms==dt.getMilliseconds()},parseDate:function(input,format,strict){var p=Date.parseFunctions;return null==p[format]&&Date.createParser(format),p[format](input,Ext.isDefined(strict)?strict:Date.useStrict)},getFormatCode:function(character){var f=Date.formatCodes[character];return f&&(f="function"==typeof f?f():f,Date.formatCodes[character]=f),f||"'"+String.escape(character)+"'"},createFormat:function(format){for(var code=[],special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code.push("'"+String.escape(ch)+"'")):code.push(Date.getFormatCode(ch)):special=!0;Date.formatFunctions[format]=new Function("return "+code.join("+"))},createParser:function(){var code=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Date.defaults,","results = String(input).match(Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = (new Date()).clearTime();","y = Ext.num(y, Ext.num(def.y, dt.getFullYear()));","m = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));","d = Ext.num(d, Ext.num(def.d, dt.getDate()));","h  = Ext.num(h, Ext.num(def.h, dt.getHours()));","i  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));","s  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));","ms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);","}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = new Date(y < 100 ? 100 : y, m, d, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(format){for(var obj,last,regexNum=Date.parseRegexes.length,currentGroup=1,calc=[],regex=[],special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,regex.push(String.escape(ch))):(obj=$f(ch,currentGroup),currentGroup+=obj.g,regex.push(obj.s),obj.g&&obj.c&&(obj.calcLast?last=obj.c:calc.push(obj.c))):special=!0;last&&calc.push(last),Date.parseRegexes[regexNum]=new RegExp("^"+regex.join("")+"$","i"),Date.parseFunctions[format]=new Function("input","strict",xf(code,regexNum,calc.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var a=[],i=0;7>i;a.push(Date.getShortDayName(i)),++i);return{g:0,c:null,s:"(?:"+a.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var a=[],i=0;12>i;a.push(Date.getShortMonthName(i)),++i);return Ext.applyIf({s:"("+a.join("|")+")"},$f("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return $f("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:function(){return $f("A")},A:{calcLast:!0,g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return $f("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return $f("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){for(var calc=[],arr=[$f("Y",1),$f("m",2),$f("d",3),$f("h",4),$f("i",5),$f("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",$f("P",8).c,"}else{",$f("O",8).c,"}","}"].join("\n")}],i=0,l=arr.length;l>i;++i)calc.push(arr[i].c);return{g:1,c:calc.join(""),s:[arr[0].s,"(?:","-",arr[1].s,"(?:","-",arr[2].s,"(?:","(?:T| )?",arr[3].s,":",arr[4].s,"(?::",arr[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})}(),Ext.apply(Date.prototype,{dateFormat:function(format){return null==Date.formatFunctions[format]&&Date.createFormat(format),Date.formatFunctions[format].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(colon){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(colon?":":"")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var i,num=0,d=this.clone(),m=this.getMonth();for(i=0,d.setDate(1),d.setMonth(0);m>i;d.setMonth(++i))num+=d.getDaysInMonth();return num+this.getDate()-1},getWeekOfYear:function(){var ms1d=864e5,ms7d=7*ms1d;return function(){var DC3=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/ms1d,AWN=Math.floor(DC3/7),Wyr=new Date(AWN*ms7d).getUTCFullYear();return AWN-Math.floor(Date.UTC(Wyr,0,7)/ms7d)+1}}(),isLeapYear:function(){var year=this.getFullYear();return!(0!=(3&year)||!(year%100||year%400==0&&year))},getFirstDayOfMonth:function(){var day=(this.getDay()-(this.getDate()-1))%7;return 0>day?day+7:day},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var m=this.getMonth();return 1==m&&this.isLeapYear()?29:daysInMonth[m]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return new Date(this.getFullYear(),0,1).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(clone){if(clone)return this.clone().clearTime();var d=this.getDate();if(this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this.getDate()!=d){for(var hr=1,c=this.add(Date.HOUR,hr);c.getDate()!=d;hr++,c=this.add(Date.HOUR,hr));this.setDate(d),this.setHours(c.getHours())}return this},add:function(interval,value){var d=this.clone();if(!interval||0===value)return d;switch(interval.toLowerCase()){case Date.MILLI:d.setMilliseconds(this.getMilliseconds()+value);break;case Date.SECOND:d.setSeconds(this.getSeconds()+value);break;case Date.MINUTE:d.setMinutes(this.getMinutes()+value);break;case Date.HOUR:d.setHours(this.getHours()+value);break;case Date.DAY:d.setDate(this.getDate()+value);break;case Date.MONTH:var day=this.getDate();day>28&&(day=Math.min(day,this.getFirstDateOfMonth().add("mo",value).getLastDateOfMonth().getDate())),d.setDate(day),d.setMonth(this.getMonth()+value);break;case Date.YEAR:d.setFullYear(this.getFullYear()+value)}return d},between:function(start,end){var t=this.getTime();return start.getTime()<=t&&t<=end.getTime()}}),Date.prototype.format=Date.prototype.dateFormat,Ext.isSafari&&(navigator.userAgent.match(/WebKit\/(\d+)/)[1]||NaN)<420&&Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(num){if(-1>=num){var n=Math.ceil(-num),back_year=Math.ceil(n/12),month=n%12?12-n%12:0;return this.setFullYear(this.getFullYear()-back_year),this._xMonth(month)}return this._xMonth(num)},setDate:function(d){return this.setTime(this.getTime()-864e5*(this.getDate()-d))}}),Ext.util.MixedCollection=function(allowFunctions,keyFn){this.items=[],
this.map={},this.keys=[],this.length=0,this.addEvents("clear","add","replace","remove","sort"),this.allowFunctions=allowFunctions===!0,keyFn&&(this.getKey=keyFn),Ext.util.MixedCollection.superclass.constructor.call(this)},Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:!1,add:function(key,o){if(1==arguments.length&&(o=arguments[0],key=this.getKey(o)),"undefined"!=typeof key&&null!==key){var old=this.map[key];if("undefined"!=typeof old)return this.replace(key,o);this.map[key]=o}return this.length++,this.items.push(o),this.keys.push(key),this.fireEvent("add",this.length-1,o,key),o},getKey:function(o){return o.id},replace:function(key,o){1==arguments.length&&(o=arguments[0],key=this.getKey(o));var old=this.map[key];if("undefined"==typeof key||null===key||"undefined"==typeof old)return this.add(key,o);var index=this.indexOfKey(key);return this.items[index]=o,this.map[key]=o,this.fireEvent("replace",key,old,o),o},addAll:function(objs){if(arguments.length>1||Ext.isArray(objs))for(var args=arguments.length>1?arguments:objs,i=0,len=args.length;len>i;i++)this.add(args[i]);else for(var key in objs)(this.allowFunctions||"function"!=typeof objs[key])&&this.add(key,objs[key])},each:function(fn,scope){for(var items=[].concat(this.items),i=0,len=items.length;len>i&&fn.call(scope||items[i],items[i],i,len)!==!1;i++);},eachKey:function(fn,scope){for(var i=0,len=this.keys.length;len>i;i++)fn.call(scope||window,this.keys[i],this.items[i],i,len)},find:function(fn,scope){for(var i=0,len=this.items.length;len>i;i++)if(fn.call(scope||window,this.items[i],this.keys[i]))return this.items[i];return null},insert:function(index,key,o){return 2==arguments.length&&(o=arguments[1],key=this.getKey(o)),this.containsKey(key)&&(this.suspendEvents(),this.removeKey(key),this.resumeEvents()),index>=this.length?this.add(key,o):(this.length++,this.items.splice(index,0,o),"undefined"!=typeof key&&null!==key&&(this.map[key]=o),this.keys.splice(index,0,key),this.fireEvent("add",index,o,key),o)},remove:function(o){return this.removeAt(this.indexOf(o))},removeAt:function(index){if(index<this.length&&index>=0){this.length--;var o=this.items[index];this.items.splice(index,1);var key=this.keys[index];return"undefined"!=typeof key&&delete this.map[key],this.keys.splice(index,1),this.fireEvent("remove",o,key),o}return!1},removeKey:function(key){return this.removeAt(this.indexOfKey(key))},getCount:function(){return this.length},indexOf:function(o){return this.items.indexOf(o)},indexOfKey:function(key){return this.keys.indexOf(key)},item:function(key){var mk=this.map[key],item=void 0!==mk?mk:"number"==typeof key?this.items[key]:void 0;return"function"!=typeof item||this.allowFunctions?item:null},itemAt:function(index){return this.items[index]},key:function(key){return this.map[key]},contains:function(o){return-1!=this.indexOf(o)},containsKey:function(key){return"undefined"!=typeof this.map[key]},clear:function(){this.length=0,this.items=[],this.keys=[],this.map={},this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(property,dir,fn){var i,len,dsc="DESC"==String(dir).toUpperCase()?-1:1,c=[],keys=this.keys,items=this.items;for(fn=fn||function(a,b){return a-b},i=0,len=items.length;len>i;i++)c[c.length]={key:keys[i],value:items[i],index:i};for(c.sort(function(a,b){var v=fn(a[property],b[property])*dsc;return 0===v&&(v=a.index<b.index?-1:1),v}),i=0,len=c.length;len>i;i++)items[i]=c[i].value,keys[i]=c[i].key;this.fireEvent("sort",this)},sort:function(dir,fn){this._sort("value",dir,fn)},reorder:function(mapping){this.suspendEvents();var oldIndex,items=this.items,index=0,length=items.length,order=[],remaining=[];for(oldIndex in mapping)order[mapping[oldIndex]]=items[oldIndex];for(index=0;length>index;index++)void 0==mapping[index]&&remaining.push(items[index]);for(index=0;length>index;index++)void 0==order[index]&&(order[index]=remaining.shift());this.clear(),this.addAll(order),this.resumeEvents(),this.fireEvent("sort",this)},keySort:function(dir,fn){this._sort("key",dir,fn||function(a,b){var v1=String(a).toUpperCase(),v2=String(b).toUpperCase();return v1>v2?1:v2>v1?-1:0})},getRange:function(start,end){var items=this.items;if(items.length<1)return[];start=start||0,end=Math.min("undefined"==typeof end?this.length-1:end,this.length-1);var i,r=[];if(end>=start)for(i=start;end>=i;i++)r[r.length]=items[i];else for(i=start;i>=end;i--)r[r.length]=items[i];return r},filter:function(property,value,anyMatch,caseSensitive){return Ext.isEmpty(value,!1)?this.clone():(value=this.createValueMatcher(value,anyMatch,caseSensitive),this.filterBy(function(o){return o&&value.test(o[property])}))},filterBy:function(fn,scope){var r=new Ext.util.MixedCollection;r.getKey=this.getKey;for(var k=this.keys,it=this.items,i=0,len=it.length;len>i;i++)fn.call(scope||this,it[i],k[i])&&r.add(k[i],it[i]);return r},findIndex:function(property,value,start,anyMatch,caseSensitive){return Ext.isEmpty(value,!1)?-1:(value=this.createValueMatcher(value,anyMatch,caseSensitive),this.findIndexBy(function(o){return o&&value.test(o[property])},null,start))},findIndexBy:function(fn,scope,start){for(var k=this.keys,it=this.items,i=start||0,len=it.length;len>i;i++)if(fn.call(scope||this,it[i],k[i]))return i;return-1},createValueMatcher:function(value,anyMatch,caseSensitive,exactMatch){if(!value.exec){var er=Ext.escapeRe;value=String(value),anyMatch===!0?value=er(value):(value="^"+er(value),exactMatch===!0&&(value+="$")),value=new RegExp(value,caseSensitive?"":"i")}return value},clone:function(){for(var r=new Ext.util.MixedCollection,k=this.keys,it=this.items,i=0,len=it.length;len>i;i++)r.add(k[i],it[i]);return r.getKey=this.getKey,r}}),Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item,Ext.AbstractManager=Ext.extend(Object,{typeName:"type",constructor:function(config){Ext.apply(this,config||{}),this.all=new Ext.util.MixedCollection,this.types={}},get:function(id){return this.all.get(id)},register:function(item){this.all.add(item)},unregister:function(item){this.all.remove(item)},registerType:function(type,cls){this.types[type]=cls,cls[this.typeName]=type},isRegistered:function(type){return void 0!==this.types[type]},create:function(config,defaultType){var type=config[this.typeName]||config.type||defaultType,Constructor=this.types[type];if(void 0==Constructor)throw new Error(String.format("The '{0}' type has not been registered with this manager",type));return new Constructor(config)},onAvailable:function(id,fn,scope){var all=this.all;all.on("add",function(index,o){o.id==id&&(fn.call(scope||o,o),all.un("add",fn,scope))})}}),Ext.util.Format=function(){var trimRe=/^\s+|\s+$/g,stripTagsRE=/<\/?[^>]+>/gi,stripScriptsRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,nl2brRe=/\r?\n/g;return{ellipsis:function(value,len,word){if(value&&value.length>len){if(word){var vs=value.substr(0,len-2),index=Math.max(vs.lastIndexOf(" "),vs.lastIndexOf("."),vs.lastIndexOf("!"),vs.lastIndexOf("?"));return-1==index||len-15>index?value.substr(0,len-3)+"...":vs.substr(0,index)+"..."}return value.substr(0,len-3)+"..."}return value},undef:function(value){return void 0!==value?value:""},defaultValue:function(value,defaultValue){return defaultValue||0===defaultValue||(defaultValue=""),void 0!==value&&""!==value?value:defaultValue},htmlEncode:function(value){return value?String(value).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):value},htmlDecode:function(value){return value?String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):value},trim:function(value){return String(value).replace(trimRe,"")},substr:function(value,start,length){return String(value).substr(start,length)},lowercase:function(value){return String(value).toLowerCase()},uppercase:function(value){return String(value).toUpperCase()},capitalize:function(value){return value?value.charAt(0).toUpperCase()+value.substr(1).toLowerCase():value},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);return args.unshift(value),eval(fn).apply(window,args)}return eval(fn).call(window,value)},usMoney:function(v){v=Math.round(100*(v-0))/100,v=v==Math.floor(v)?v+".00":10*v==Math.floor(10*v)?v+"0":v,v=String(v);for(var ps=v.split("."),whole=ps[0],sub=ps[1]?"."+ps[1]:".00",r=/(\d+)(\d{3})/;r.test(whole);)whole=whole.replace(r,"$1,$2");return v=whole+sub,"-"==v.charAt(0)?"-$"+v.substr(1):"$"+v},date:function(v,format){return v?(Ext.isDate(v)||(v=new Date(Date.parse(v))),v.dateFormat(format||"m/d/Y")):""},dateRenderer:function(format){return function(v){return Ext.util.Format.date(v,format)}},stripTags:function(v){return v?String(v).replace(stripTagsRE,""):v},stripScripts:function(v){return v?String(v).replace(stripScriptsRe,""):v},fileSize:function(size){return 1024>size?size+" bytes":1048576>size?Math.round(10*size/1024)/10+" KB":Math.round(10*size/1048576)/10+" MB"},math:function(){var fns={};return function(v,a){return fns[a]||(fns[a]=new Function("v","return v "+a+";")),fns[a](v)}}(),round:function(value,precision){var result=Number(value);return"number"==typeof precision&&(precision=Math.pow(10,precision),result=Math.round(value*precision)/precision),result},number:function(v,format){if(!format)return v;if(v=Ext.num(v,NaN),isNaN(v))return"";var comma=",",dec=".",i18n=!1,neg=0>v;v=Math.abs(v),"/i"==format.substr(format.length-2)&&(format=format.substr(0,format.length-2),i18n=!0,comma=".",dec=",");var hasComma=-1!=format.indexOf(comma),psplit=(i18n?format.replace(/[^\d\,]/g,""):format.replace(/[^\d\.]/g,"")).split(dec);if(1<psplit.length)v=v.toFixed(psplit[1].length);else{if(2<psplit.length)throw"NumberFormatException: invalid format, formats should have no more than 1 period: "+format;v=v.toFixed(0)}var fnum=v.toString();if(psplit=fnum.split("."),hasComma){var i,cnum=psplit[0],parr=[],j=cnum.length,m=Math.floor(j/3),n=cnum.length%3||3;for(i=0;j>i;i+=n)0!=i&&(n=3),parr[parr.length]=cnum.substr(i,n),m-=1;fnum=parr.join(comma),psplit[1]&&(fnum+=dec+psplit[1])}else psplit[1]&&(fnum=psplit[0]+dec+psplit[1]);return(neg?"-":"")+format.replace(/[\d,?\.?]+/,fnum)},numberRenderer:function(format){return function(v){return Ext.util.Format.number(v,format)}},plural:function(v,s,p){return v+" "+(1==v?s:p?p:s+"s")},nl2br:function(v){return Ext.isEmpty(v)?"":v.replace(nl2brRe,"<br/>")}}}(),Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var m,me=this,s=me.html,re=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,nameRe=/^<tpl\b[^>]*?for="(.*?)"/,ifRe=/^<tpl\b[^>]*?if="(.*?)"/,execRe=/^<tpl\b[^>]*?exec="(.*?)"/,id=0,tpls=[],VALUES="values",PARENT="parent",XINDEX="xindex",XCOUNT="xcount",RETURN="return ",WITHVALUES="with(values){ ";for(s=["<tpl>",s,"</tpl>"].join("");m=s.match(re);){var m2=m[0].match(nameRe),m3=m[0].match(ifRe),m4=m[0].match(execRe),exp=null,fn=null,exec=null,name=m2&&m2[1]?m2[1]:"";if(m3&&(exp=m3&&m3[1]?m3[1]:null,exp&&(fn=new Function(VALUES,PARENT,XINDEX,XCOUNT,WITHVALUES+RETURN+Ext.util.Format.htmlDecode(exp)+"; }"))),m4&&(exp=m4&&m4[1]?m4[1]:null,exp&&(exec=new Function(VALUES,PARENT,XINDEX,XCOUNT,WITHVALUES+Ext.util.Format.htmlDecode(exp)+"; }"))),name)switch(name){case".":name=new Function(VALUES,PARENT,WITHVALUES+RETURN+VALUES+"; }");break;case"..":name=new Function(VALUES,PARENT,WITHVALUES+RETURN+PARENT+"; }");break;default:name=new Function(VALUES,PARENT,WITHVALUES+RETURN+name+"; }")}tpls.push({id:id,target:name,exec:exec,test:fn,body:m[1]||""}),s=s.replace(m[0],"{xtpl"+id+"}"),++id}for(var i=tpls.length-1;i>=0;--i)me.compileTpl(tpls[i]);me.master=tpls[tpls.length-1],me.tpls=tpls},Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w\-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(id,values,parent,xindex,xcount){var len,vs,me=this,t=me.tpls[id],buf=[];if(t.test&&!t.test.call(me,values,parent,xindex,xcount)||t.exec&&t.exec.call(me,values,parent,xindex,xcount))return"";if(vs=t.target?t.target.call(me,values,parent):values,len=vs.length,parent=t.target?values:parent,t.target&&Ext.isArray(vs)){for(var i=0,len=vs.length;len>i;i++)buf[buf.length]=t.compiled.call(me,vs[i],parent,i+1,len);return buf.join("")}return t.compiled.call(me,vs,parent,xindex,xcount)},compileTpl:function(tpl){function fn(m,name,format,args,math){if("xtpl"==name.substr(0,4))return"'"+sep+"this.applySubTemplate("+name.substr(4)+", values, parent, xindex, xcount)"+sep+"'";var v;return v="."===name?"values":"#"===name?"xindex":-1!=name.indexOf(".")?name:"values['"+name+"']",math&&(v="("+v+math+")"),format&&useF?(args=args?","+args:"","this."!=format.substr(0,5)?format="fm."+format+"(":(format='this.call("'+format.substr(5)+'", ',args=", values")):(args="",format="("+v+" === undefined ? '' : "),"'"+sep+format+v+args+")"+sep+"'"}function codeFn(m,code){return"'"+sep+"("+code.replace(/\\'/g,"'")+")"+sep+"'"}var fm=Ext.util.Format,useF=this.disableFormats!==!0,sep=Ext.isGecko?"+":",",body;return Ext.isGecko?body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};":(body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"],body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)),body.push("'].join('');};"),body=body.join("")),eval(body),this},applyTemplate:function(values){return this.master.compiled.call(this,values,{},1,1)},compile:function(){return this}}),Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate,Ext.XTemplate.from=function(el){return el=Ext.getDom(el),new Ext.XTemplate(el.value||el.innerHTML)},Ext.util.CSS=function(){var rules=null,doc=document,camelRe=/(-[a-z])/gi,camelFn=function(m,a){return a.charAt(1).toUpperCase()};return{createStyleSheet:function(cssText,id){var ss,head=doc.getElementsByTagName("head")[0],rules=doc.createElement("style");if(rules.setAttribute("type","text/css"),id&&rules.setAttribute("id",id),Ext.isIE)head.appendChild(rules),ss=rules.styleSheet,ss.cssText=cssText;else{try{rules.appendChild(doc.createTextNode(cssText))}catch(e){rules.cssText=cssText}head.appendChild(rules),ss=rules.styleSheet?rules.styleSheet:rules.sheet||doc.styleSheets[doc.styleSheets.length-1]}return this.cacheStyleSheet(ss),ss},removeStyleSheet:function(id){var existing=doc.getElementById(id);existing&&existing.parentNode.removeChild(existing)},swapStyleSheet:function(id,url){this.removeStyleSheet(id);var ss=doc.createElement("link");ss.setAttribute("rel","stylesheet"),ss.setAttribute("type","text/css"),ss.setAttribute("id",id),ss.setAttribute("href",url),doc.getElementsByTagName("head")[0].appendChild(ss)},refreshCache:function(){return this.getRules(!0)},cacheStyleSheet:function(ss){rules||(rules={});try{for(var ssRules=ss.cssRules||ss.rules,j=ssRules.length-1;j>=0;--j)rules[ssRules[j].selectorText.toLowerCase()]=ssRules[j]}catch(e){}},getRules:function(refreshCache){if(null===rules||refreshCache){rules={};for(var ds=doc.styleSheets,i=0,len=ds.length;len>i;i++)try{this.cacheStyleSheet(ds[i])}catch(e){}}return rules},getRule:function(selector,refreshCache){var rs=this.getRules(refreshCache);if(!Ext.isArray(selector))return rs[selector.toLowerCase()];for(var i=0;i<selector.length;i++)if(rs[selector[i]])return rs[selector[i].toLowerCase()];return null},updateRule:function(selector,property,value){if(Ext.isArray(selector)){for(var i=0;i<selector.length;i++)if(this.updateRule(selector[i],property,value))return!0}else{var rule=this.getRule(selector);if(rule)return rule.style[property.replace(camelRe,camelFn)]=value,!0}return!1}}}(),Ext.util.ClickRepeater=Ext.extend(Ext.util.Observable,{constructor:function(el,config){this.el=Ext.get(el),this.el.unselectable(),Ext.apply(this,config),this.addEvents("mousedown","click","mouseup"),this.disabled||(this.disabled=!0,this.enable()),this.handler&&this.on("click",this.handler,this.scope||this),Ext.util.ClickRepeater.superclass.constructor.call(this)},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,enable:function(){this.disabled&&(this.el.on("mousedown",this.handleMouseDown,this),Ext.isIE&&this.el.on("dblclick",this.handleDblClick,this),(this.preventDefault||this.stopDefault)&&this.el.on("click",this.eventOptions,this)),this.disabled=!1},disable:function(force){(force||!this.disabled)&&(clearTimeout(this.timer),this.pressClass&&this.el.removeClass(this.pressClass),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeAllListeners()),this.disabled=!0},setDisabled:function(disabled){this[disabled?"disable":"enable"]()},eventOptions:function(e){this.preventDefault&&e.preventDefault(),this.stopDefault&&e.stopEvent()},destroy:function(){this.disable(!0),Ext.destroy(this.el),this.purgeListeners()},handleDblClick:function(e){clearTimeout(this.timer),this.el.blur(),this.fireEvent("mousedown",this,e),this.fireEvent("click",this,e)},handleMouseDown:function(e){clearTimeout(this.timer),this.el.blur(),this.pressClass&&this.el.addClass(this.pressClass),this.mousedownTime=new Date,Ext.getDoc().on("mouseup",this.handleMouseUp,this),this.el.on("mouseout",this.handleMouseOut,this),this.fireEvent("mousedown",this,e),this.fireEvent("click",this,e),this.accelerate&&(this.delay=400),this.timer=this.click.defer(this.delay||this.interval,this,[e])},click:function(e){this.fireEvent("click",this,e),this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12e3):this.interval,this,[e])},easeOutExpo:function(t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},handleMouseOut:function(){clearTimeout(this.timer),this.pressClass&&this.el.removeClass(this.pressClass),this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this),this.pressClass&&this.el.addClass(this.pressClass),this.click()},handleMouseUp:function(e){clearTimeout(this.timer),this.el.un("mouseover",this.handleMouseReturn,this),this.el.un("mouseout",this.handleMouseOut,this),Ext.getDoc().un("mouseup",this.handleMouseUp,this),this.el.removeClass(this.pressClass),this.fireEvent("mouseup",this,e)}}),Ext.KeyNav=function(el,config){this.el=Ext.get(el),Ext.apply(this,config),this.disabled||(this.disabled=!0,this.enable())},Ext.KeyNav.prototype={disabled:!1,defaultEventAction:"stopEvent",forceKeyDown:!1,relay:function(e){var k=e.getKey(),h=this.keyToHandler[k];h&&this[h]&&this.doRelay(e,this[h],h)!==!0&&e[this.defaultEventAction]()},doRelay:function(e,h,hname){return h.call(this.scope||this,e,hname)},enter:!1,left:!1,right:!1,up:!1,down:!1,tab:!1,esc:!1,pageUp:!1,pageDown:!1,del:!1,home:!1,end:!1,space:!1,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab",32:"space"},stopKeyUp:function(e){var k=e.getKey();k>=37&&40>=k&&e.stopEvent()},destroy:function(){this.disable()},enable:function(){this.disabled&&(Ext.isSafari2&&this.el.on("keyup",this.stopKeyUp,this),this.el.on(this.isKeydown()?"keydown":"keypress",this.relay,this),this.disabled=!1)},disable:function(){this.disabled||(Ext.isSafari2&&this.el.un("keyup",this.stopKeyUp,this),this.el.un(this.isKeydown()?"keydown":"keypress",this.relay,this),this.disabled=!0)},setDisabled:function(disabled){this[disabled?"disable":"enable"]()},isKeydown:function(){return this.forceKeyDown||Ext.EventManager.useKeydown}},Ext.KeyMap=function(el,config,eventName){this.el=Ext.get(el),this.eventName=eventName||"keydown",this.bindings=[],config&&this.addBinding(config),this.enable()},Ext.KeyMap.prototype={stopEvent:!1,addBinding:function(config){if(Ext.isArray(config))return void Ext.each(config,function(c){this.addBinding(c)},this);var keyCode=config.key,fn=config.fn||config.handler,scope=config.scope;if(config.stopEvent&&(this.stopEvent=config.stopEvent),"string"==typeof keyCode){for(var ks=[],keyString=keyCode.toUpperCase(),j=0,len=keyString.length;len>j;j++)ks.push(keyString.charCodeAt(j));keyCode=ks}var keyArray=Ext.isArray(keyCode),handler=function(e){if(this.checkModifiers(config,e)){var k=e.getKey();if(keyArray){for(var i=0,len=keyCode.length;len>i;i++)if(keyCode[i]==k)return this.stopEvent&&e.stopEvent(),void fn.call(scope||window,k,e)}else k==keyCode&&(this.stopEvent&&e.stopEvent(),fn.call(scope||window,k,e))}};this.bindings.push(handler)},checkModifiers:function(config,e){for(var val,key,keys=["shift","ctrl","alt"],i=0,len=keys.length;len>i;++i)if(key=keys[i],val=config[key],void 0!==val&&val!==e[key+"Key"])return!1;return!0},on:function(key,fn,scope){var keyCode,shift,ctrl,alt;"object"!=typeof key||Ext.isArray(key)?keyCode=key:(keyCode=key.key,shift=key.shift,ctrl=key.ctrl,alt=key.alt),this.addBinding({key:keyCode,shift:shift,ctrl:ctrl,alt:alt,fn:fn,scope:scope})},handleKeyDown:function(e){if(this.enabled)for(var b=this.bindings,i=0,len=b.length;len>i;i++)b[i].call(this,e)},isEnabled:function(){return this.enabled},enable:function(){this.enabled||(this.el.on(this.eventName,this.handleKeyDown,this),this.enabled=!0)},disable:function(){this.enabled&&(this.el.removeListener(this.eventName,this.handleKeyDown,this),this.enabled=!1)},setDisabled:function(disabled){this[disabled?"disable":"enable"]()}},Ext.util.TextMetrics=function(){var shared;return{measure:function(el,text,fixedWidth){return shared||(shared=Ext.util.TextMetrics.Instance(el,fixedWidth)),shared.bind(el),shared.setFixedWidth(fixedWidth||"auto"),shared.getSize(text)},createInstance:function(el,fixedWidth){return Ext.util.TextMetrics.Instance(el,fixedWidth)}}}(),Ext.util.TextMetrics.Instance=function(bindTo,fixedWidth){var ml=new Ext.Element(document.createElement("div"));document.body.appendChild(ml.dom),ml.position("absolute"),ml.setLeftTop(-1e3,-1e3),ml.hide(),fixedWidth&&ml.setWidth(fixedWidth);var instance={getSize:function(text){ml.update(text);var s=ml.getSize();return ml.update(""),s},bind:function(el){ml.setStyle(Ext.fly(el).getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(width){ml.setWidth(width)},getWidth:function(text){return ml.dom.style.width="auto",this.getSize(text).width},getHeight:function(text){return this.getSize(text).height}};return instance.bind(bindTo),instance},Ext.Element.addMethods({getTextWidth:function(text,min,max){return Ext.util.TextMetrics.measure(this.dom,Ext.value(text,this.dom.innerHTML,!0)).width.constrain(min||0,max||1e6)}}),Ext.util.Cookies={set:function(name,value){var argv=arguments,argc=arguments.length,expires=argc>2?argv[2]:null,path=argc>3?argv[3]:"/",domain=argc>4?argv[4]:null,secure=argc>5?argv[5]:!1;document.cookie=name+"="+escape(value)+(null===expires?"":"; expires="+expires.toGMTString())+(null===path?"":"; path="+path)+(null===domain?"":"; domain="+domain)+(secure===!0?"; secure":"")},get:function(name){for(var arg=name+"=",alen=arg.length,clen=document.cookie.length,i=0,j=0;clen>i;){if(j=i+alen,document.cookie.substring(i,j)==arg)return Ext.util.Cookies.getCookieVal(j);if(i=document.cookie.indexOf(" ",i)+1,0===i)break}return null},clear:function(name){Ext.util.Cookies.get(name)&&(document.cookie=name+"=; expires=Thu, 01-Jan-70 00:00:01 GMT")},getCookieVal:function(offset){var endstr=document.cookie.indexOf(";",offset);return-1==endstr&&(endstr=document.cookie.length),unescape(document.cookie.substring(offset,endstr))}},Ext.handleError=function(e){throw e},Ext.Error=function(message){this.message=this.lang[message]?this.lang[message]:message},Ext.Error.prototype=new Error,Ext.apply(Ext.Error.prototype,{lang:{},name:"Ext.Error",getName:function(){return this.name},getMessage:function(){return this.message},toJson:function(){return Ext.encode(this)}}),Ext.ComponentMgr=function(){var all=new Ext.util.MixedCollection,types={},ptypes={};return{register:function(c){all.add(c)},unregister:function(c){all.remove(c)},get:function(id){return all.get(id)},onAvailable:function(id,fn,scope){all.on("add",function(index,o){o.id==id&&(fn.call(scope||o,o),all.un("add",fn,scope))})},all:all,types:types,ptypes:ptypes,isRegistered:function(xtype){return void 0!==types[xtype]},isPluginRegistered:function(ptype){return void 0!==ptypes[ptype]},registerType:function(xtype,cls){types[xtype]=cls,cls.xtype=xtype},create:function(config,defaultType){return config.render?config:new types[config.xtype||defaultType](config)},registerPlugin:function(ptype,cls){ptypes[ptype]=cls,cls.ptype=ptype},createPlugin:function(config,defaultType){var PluginCls=ptypes[config.ptype||defaultType];return PluginCls.init?PluginCls:new PluginCls(config)}}}(),Ext.reg=Ext.ComponentMgr.registerType,Ext.preg=Ext.ComponentMgr.registerPlugin,Ext.create=Ext.ComponentMgr.create,Ext.Component=function(config){if(config=config||{},config.initialConfig?(config.isAction&&(this.baseAction=config),config=config.initialConfig):(config.tagName||config.dom||Ext.isString(config))&&(config={applyTo:config,id:config.id||config}),this.initialConfig=config,Ext.apply(this,config),this.addEvents("added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave"),this.getId(),Ext.ComponentMgr.register(this),Ext.Component.superclass.constructor.call(this),this.baseAction&&this.baseAction.addComponent(this),this.initComponent(),this.plugins)if(Ext.isArray(this.plugins))for(var i=0,len=this.plugins.length;len>i;i++)this.plugins[i]=this.initPlugin(this.plugins[i]);else this.plugins=this.initPlugin(this.plugins);this.stateful!==!1&&this.initState(),this.applyTo?(this.applyToMarkup(this.applyTo),delete this.applyTo):this.renderTo&&(this.render(this.renderTo),delete this.renderTo)},Ext.Component.AUTO_ID=1e3,Ext.extend(Ext.Component,Ext.util.Observable,{disabled:!1,hidden:!1,autoEl:"div",disabledClass:"x-item-disabled",allowDomMove:!0,autoShow:!1,hideMode:"display",hideParent:!1,rendered:!1,tplWriteMode:"overwrite",bubbleEvents:[],ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initPlugin:function(p){return p.ptype&&!Ext.isFunction(p.init)?p=Ext.ComponentMgr.createPlugin(p):Ext.isString(p)&&(p=Ext.ComponentMgr.createPlugin({ptype:p})),p.init(this),p},initComponent:function(){this.listeners&&(this.on(this.listeners),delete this.listeners),this.enableBubble(this.bubbleEvents)},render:function(container,position){if(!this.rendered&&this.fireEvent("beforerender",this)!==!1){!container&&this.el&&(this.el=Ext.get(this.el),container=this.el.dom.parentNode,this.allowDomMove=!1),this.container=Ext.get(container),this.ctCls&&this.container.addClass(this.ctCls),this.rendered=!0,void 0!==position&&(position=Ext.isNumber(position)?this.container.dom.childNodes[position]:Ext.getDom(position)),this.onRender(this.container,position||null),this.autoShow&&this.el.removeClass(["x-hidden","x-hide-"+this.hideMode]),this.cls&&(this.el.addClass(this.cls),delete this.cls),this.style&&(this.el.applyStyles(this.style),delete this.style),this.overCls&&this.el.addClassOnOver(this.overCls),this.fireEvent("render",this);var contentTarget=this.getContentTarget();if(this.html&&(contentTarget.update(Ext.DomHelper.markup(this.html)),delete this.html),this.contentEl){var ce=Ext.getDom(this.contentEl);Ext.fly(ce).removeClass(["x-hidden","x-hide-display"]),contentTarget.appendChild(ce)}this.tpl&&(this.tpl.compile||(this.tpl=new Ext.XTemplate(this.tpl)),this.data&&(this.tpl[this.tplWriteMode](contentTarget,this.data),delete this.data)),this.afterRender(this.container),this.hidden&&this.doHide(),this.disabled&&this.disable(!0),this.stateful!==!1&&this.initStateEvents(),this.fireEvent("afterrender",this)}return this},update:function(htmlOrData,loadScripts,cb){var contentTarget=this.getContentTarget();if(this.tpl&&"string"!=typeof htmlOrData)this.tpl[this.tplWriteMode](contentTarget,htmlOrData||{});else{var html=Ext.isObject(htmlOrData)?Ext.DomHelper.markup(htmlOrData):htmlOrData;contentTarget.update(html,loadScripts,cb)}},onAdded:function(container,pos){this.ownerCt=container,this.initRef(),this.fireEvent("added",this,container,pos)},onRemoved:function(){this.removeRef(),this.fireEvent("removed",this,this.ownerCt),delete this.ownerCt},initRef:function(){if(this.ref&&!this.refOwner){for(var levels=this.ref.split("/"),last=levels.length,i=0,t=this;t&&last>i;)t=t.ownerCt,++i;t&&(t[this.refName=levels[--i]]=this,this.refOwner=t)}},removeRef:function(){this.refOwner&&this.refName&&(delete this.refOwner[this.refName],delete this.refOwner)},initState:function(){if(Ext.state.Manager){var id=this.getStateId();if(id){var state=Ext.state.Manager.get(id);state&&this.fireEvent("beforestaterestore",this,state)!==!1&&(this.applyState(Ext.apply({},state)),this.fireEvent("staterestore",this,state))}}},getStateId:function(){return this.stateId||(/^(ext-comp-|ext-gen)/.test(String(this.id))?null:this.id)},initStateEvents:function(){if(this.stateEvents)for(var e,i=0;e=this.stateEvents[i];i++)this.on(e,this.saveState,this,{delay:100})},applyState:function(state){state&&Ext.apply(this,state)},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==!1){var id=this.getStateId();if(id){var state=this.getState();this.fireEvent("beforestatesave",this,state)!==!1&&(Ext.state.Manager.set(id,state),this.fireEvent("statesave",this,state))}}},applyToMarkup:function(el){this.allowDomMove=!1,this.el=Ext.get(el),this.render(this.el.dom.parentNode)},addClass:function(cls){return this.el?this.el.addClass(cls):this.cls=this.cls?this.cls+" "+cls:cls,this},removeClass:function(cls){return this.el?this.el.removeClass(cls):this.cls&&(this.cls=this.cls.split(" ").remove(cls).join(" ")),this},onRender:function(ct,position){if(!this.el&&this.autoEl){if(Ext.isString(this.autoEl))this.el=document.createElement(this.autoEl);else{var div=document.createElement("div");Ext.DomHelper.overwrite(div,this.autoEl),this.el=div.firstChild}this.el.id||(this.el.id=this.getId())}this.el&&(this.el=Ext.get(this.el),this.allowDomMove!==!1&&(ct.dom.insertBefore(this.el.dom,position),div&&(Ext.removeNode(div),div=null)))},getAutoCreate:function(){var cfg=Ext.isObject(this.autoCreate)?this.autoCreate:Ext.apply({},this.defaultAutoCreate);return this.id&&!cfg.id&&(cfg.id=this.id),cfg},afterRender:Ext.emptyFn,destroy:function(){this.isDestroyed||this.fireEvent("beforedestroy",this)!==!1&&(this.destroying=!0,this.beforeDestroy(),this.ownerCt&&this.ownerCt.remove&&this.ownerCt.remove(this,!1),this.rendered&&(this.el.remove(),("container"==this.actionMode||"container"==this.removeMode)&&this.container.remove()),this.focusTask&&this.focusTask.cancel&&this.focusTask.cancel(),this.onDestroy(),Ext.ComponentMgr.unregister(this),this.fireEvent("destroy",this),this.purgeListeners(),this.destroying=!1,this.isDestroyed=!0)},deleteMembers:function(){for(var args=arguments,i=0,len=args.length;len>i;++i)delete this[args[i]]},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getContentTarget:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+ ++Ext.Component.AUTO_ID)},getItemId:function(){return this.itemId||this.getId()},focus:function(selectText,delay){return delay?(this.focusTask=new Ext.util.DelayedTask(this.focus,this,[selectText,!1]),this.focusTask.delay(Ext.isNumber(delay)?delay:10),this):(this.rendered&&!this.isDestroyed&&(this.el.focus(),selectText===!0&&this.el.dom.select()),this)},blur:function(){return this.rendered&&this.el.blur(),this},disable:function(silent){return this.rendered&&this.onDisable(),this.disabled=!0,silent!==!0&&this.fireEvent("disable",this),this},onDisable:function(){this.getActionEl().addClass(this.disabledClass),this.el.dom.disabled=!0},enable:function(){return this.rendered&&this.onEnable(),
this.disabled=!1,this.fireEvent("enable",this),this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass),this.el.dom.disabled=!1},setDisabled:function(disabled){return this[disabled?"disable":"enable"]()},show:function(){return this.fireEvent("beforeshow",this)!==!1&&(this.hidden=!1,this.autoRender&&this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender),this.rendered&&this.onShow(),this.fireEvent("show",this)),this},onShow:function(){this.getVisibilityEl().removeClass("x-hide-"+this.hideMode)},hide:function(){return this.fireEvent("beforehide",this)!==!1&&(this.doHide(),this.fireEvent("hide",this)),this},doHide:function(){this.hidden=!0,this.rendered&&this.onHide()},onHide:function(){this.getVisibilityEl().addClass("x-hide-"+this.hideMode)},getVisibilityEl:function(){return this.hideParent?this.container:this.getActionEl()},setVisible:function(visible){return this[visible?"show":"hide"]()},isVisible:function(){return this.rendered&&this.getVisibilityEl().isVisible()},cloneConfig:function(overrides){overrides=overrides||{};var id=overrides.id||Ext.id(),cfg=Ext.applyIf(overrides,this.initialConfig);return cfg.id=id,new this.constructor(cfg)},getXType:function(){return this.constructor.xtype},isXType:function(xtype,shallow){return Ext.isFunction(xtype)?xtype=xtype.xtype:Ext.isObject(xtype)&&(xtype=xtype.constructor.xtype),shallow?this.constructor.xtype==xtype:-1!=("/"+this.getXTypes()+"/").indexOf("/"+xtype+"/")},getXTypes:function(){var tc=this.constructor;if(!tc.xtypes){for(var c=[],sc=this;sc&&sc.constructor.xtype;)c.unshift(sc.constructor.xtype),sc=sc.constructor.superclass;tc.xtypeChain=c,tc.xtypes=c.join("/")}return tc.xtypes},findParentBy:function(fn){for(var p=this.ownerCt;null!=p&&!fn(p,this);p=p.ownerCt);return p||null},findParentByType:function(xtype,shallow){return this.findParentBy(function(c){return c.isXType(xtype,shallow)})},bubble:function(fn,scope,args){for(var p=this;p&&fn.apply(scope||p,args||[p])!==!1;)p=p.ownerCt;return this},getPositionEl:function(){return this.positionEl||this.el},purgeListeners:function(){Ext.Component.superclass.purgeListeners.call(this),this.mons&&this.on("beforedestroy",this.clearMons,this,{single:!0})},clearMons:function(){Ext.each(this.mons,function(m){m.item.un(m.ename,m.fn,m.scope)},this),this.mons=[]},createMons:function(){this.mons||(this.mons=[],this.on("beforedestroy",this.clearMons,this,{single:!0}))},mon:function(item,ename,fn,scope,opt){if(this.createMons(),Ext.isObject(ename)){var propRe=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,o=ename;for(var e in o)propRe.test(e)||(Ext.isFunction(o[e])?(this.mons.push({item:item,ename:e,fn:o[e],scope:o.scope}),item.on(e,o[e],o.scope,o)):(this.mons.push({item:item,ename:e,fn:o[e],scope:o.scope}),item.on(e,o[e])))}else this.mons.push({item:item,ename:ename,fn:fn,scope:scope}),item.on(ename,fn,scope,opt)},mun:function(item,ename,fn,scope){var found,mon;this.createMons();for(var i=0,len=this.mons.length;len>i;++i)if(mon=this.mons[i],item===mon.item&&ename==mon.ename&&fn===mon.fn&&scope===mon.scope){this.mons.splice(i,1),item.un(ename,fn,scope),found=!0;break}return found},nextSibling:function(){if(this.ownerCt){var index=this.ownerCt.items.indexOf(this);if(-1!=index&&index+1<this.ownerCt.items.getCount())return this.ownerCt.items.itemAt(index+1)}return null},previousSibling:function(){if(this.ownerCt){var index=this.ownerCt.items.indexOf(this);if(index>0)return this.ownerCt.items.itemAt(index-1)}return null},getBubbleTarget:function(){return this.ownerCt}}),Ext.reg("component",Ext.Component),Ext.Action=Ext.extend(Object,{constructor:function(config){this.initialConfig=config,this.itemId=config.itemId=config.itemId||config.id||Ext.id(),this.items=[]},isAction:!0,setText:function(text){this.initialConfig.text=text,this.callEach("setText",[text])},getText:function(){return this.initialConfig.text},setIconClass:function(cls){this.initialConfig.iconCls=cls,this.callEach("setIconClass",[cls])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(v){this.initialConfig.disabled=v,this.callEach("setDisabled",[v])},enable:function(){this.setDisabled(!1)},disable:function(){this.setDisabled(!0)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(v){this.initialConfig.hidden=v,this.callEach("setVisible",[!v])},show:function(){this.setHidden(!1)},hide:function(){this.setHidden(!0)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(fn,scope){this.initialConfig.handler=fn,this.initialConfig.scope=scope,this.callEach("setHandler",[fn,scope])},each:function(fn,scope){Ext.each(this.items,fn,scope)},callEach:function(fnName,args){for(var cs=this.items,i=0,len=cs.length;len>i;i++)cs[i][fnName].apply(cs[i],args)},addComponent:function(comp){this.items.push(comp),comp.on("destroy",this.removeComponent,this)},removeComponent:function(comp){this.items.remove(comp)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}}),function(){Ext.Layer=function(config,existingEl){config=config||{};var dh=Ext.DomHelper,cp=config.parentEl,pel=cp?Ext.getDom(cp):document.body;if(existingEl&&(this.dom=Ext.getDom(existingEl)),!this.dom){var o=config.dh||{tag:"div",cls:"x-layer"};this.dom=dh.append(pel,o)}config.cls&&this.addClass(config.cls),this.constrain=config.constrain!==!1,this.setVisibilityMode(Ext.Element.VISIBILITY),config.id?this.id=this.dom.id=config.id:this.id=Ext.id(this.dom),this.zindex=config.zindex||this.getZIndex(),this.position("absolute",this.zindex),config.shadow?(this.shadowOffset=config.shadowOffset||4,this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:config.shadow})):this.shadowOffset=0,this.useShim=config.shim!==!1&&Ext.useShims,this.useDisplay=config.useDisplay,this.hide()};var supr=Ext.Element.prototype,shims=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle("z-index"),10)||11e3},getShim:function(){if(!this.useShim)return null;if(this.shim)return this.shim;var shim=shims.shift();shim||(shim=this.createShim(),shim.enableDisplayMode("block"),shim.dom.style.display="none",shim.dom.style.visibility="visible");var pn=this.dom.parentNode;return shim.dom.parentNode!=pn&&pn.insertBefore(shim.dom,this.dom),shim.setStyle("z-index",this.getZIndex()-2),this.shim=shim,shim},hideShim:function(){this.shim&&(this.shim.setDisplayed(!1),shims.push(this.shim),delete this.shim)},disableShadow:function(){this.shadow&&(this.shadowDisabled=!0,this.shadow.hide(),this.lastShadowOffset=this.shadowOffset,this.shadowOffset=0)},enableShadow:function(show){this.shadow&&(this.shadowDisabled=!1,Ext.isDefined(this.lastShadowOffset)&&(this.shadowOffset=this.lastShadowOffset,delete this.lastShadowOffset),show&&this.sync(!0))},sync:function(doShow){var shadow=this.shadow;if(!this.updating&&this.isVisible()&&(shadow||this.useShim)){var shim=this.getShim(),w=this.getWidth(),h=this.getHeight(),l=this.getLeft(!0),t=this.getTop(!0);if(shadow&&!this.shadowDisabled){if(doShow&&!shadow.isVisible()?shadow.show(this):shadow.realign(l,t,w,h),shim){doShow&&shim.show();var shadowAdj=shadow.el.getXY(),shimStyle=shim.dom.style,shadowSize=shadow.el.getSize();shimStyle.left=shadowAdj[0]+"px",shimStyle.top=shadowAdj[1]+"px",shimStyle.width=shadowSize.width+"px",shimStyle.height=shadowSize.height+"px"}}else shim&&(doShow&&shim.show(),shim.setSize(w,h),shim.setLeftTop(l,t))}},destroy:function(){this.hideShim(),this.shadow&&this.shadow.hide(),this.removeAllListeners(),Ext.removeNode(this.dom),delete this.dom},remove:function(){this.destroy()},beginUpdate:function(){this.updating=!0},endUpdate:function(){this.updating=!1,this.sync(!0)},hideUnders:function(negOffset){this.shadow&&this.shadow.hide(),this.hideShim()},constrainXY:function(){if(this.constrain){var vw=Ext.lib.Dom.getViewWidth(),vh=Ext.lib.Dom.getViewHeight(),s=Ext.getDoc().getScroll(),xy=this.getXY(),x=xy[0],y=xy[1],so=this.shadowOffset,w=this.dom.offsetWidth+so,h=this.dom.offsetHeight+so,moved=!1;if(x+w>vw+s.left&&(x=vw-w-so,moved=!0),y+h>vh+s.top&&(y=vh-h-so,moved=!0),x<s.left&&(x=s.left,moved=!0),y<s.top&&(y=s.top,moved=!0),moved){if(this.avoidY){var ay=this.avoidY;ay>=y&&y+h>=ay&&(y=ay-h-5)}xy=[x,y],this.storeXY(xy),supr.setXY.call(this,xy),this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},isVisible:function(){return this.visible},showAction:function(){this.visible=!0,this.useDisplay===!0?this.setDisplayed(""):this.lastXY?supr.setXY.call(this,this.lastXY):this.lastLT&&supr.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])},hideAction:function(){this.visible=!1,this.useDisplay===!0?this.setDisplayed(!1):this.setLeftTop(-1e4,-1e4)},setVisible:function(v,a,d,c,e){if(v&&this.showAction(),a&&v){var cb=function(){this.sync(!0),c&&c()}.createDelegate(this);supr.setVisible.call(this,!0,!0,d,cb,e)}else{v||this.hideUnders(!0);var cb=c;a&&(cb=function(){this.hideAction(),c&&c()}.createDelegate(this)),supr.setVisible.call(this,v,a,d,cb,e),v?this.sync(!0):a||this.hideAction()}return this},storeXY:function(xy){delete this.lastLT,this.lastXY=xy},storeLeftTop:function(left,top){delete this.lastXY,this.lastLT=[left,top]},beforeFx:function(){return this.beforeAction(),Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments),this.sync(this.isVisible())},beforeAction:function(){!this.updating&&this.shadow&&this.shadow.hide()},setLeft:function(left){return this.storeLeftTop(left,this.getTop(!0)),supr.setLeft.apply(this,arguments),this.sync(),this},setTop:function(top){return this.storeLeftTop(this.getLeft(!0),top),supr.setTop.apply(this,arguments),this.sync(),this},setLeftTop:function(left,top){return this.storeLeftTop(left,top),supr.setLeftTop.apply(this,arguments),this.sync(),this},setXY:function(xy,a,d,c,e){this.fixDisplay(),this.beforeAction(),this.storeXY(xy);var cb=this.createCB(c);return supr.setXY.call(this,xy,a,d,cb,e),a||cb(),this},createCB:function(c){var el=this;return function(){el.constrainXY(),el.sync(!0),c&&c()}},setX:function(x,a,d,c,e){return this.setXY([x,this.getY()],a,d,c,e),this},setY:function(y,a,d,c,e){return this.setXY([this.getX(),y],a,d,c,e),this},setSize:function(w,h,a,d,c,e){this.beforeAction();var cb=this.createCB(c);return supr.setSize.call(this,w,h,a,d,cb,e),a||cb(),this},setWidth:function(w,a,d,c,e){this.beforeAction();var cb=this.createCB(c);return supr.setWidth.call(this,w,a,d,cb,e),a||cb(),this},setHeight:function(h,a,d,c,e){this.beforeAction();var cb=this.createCB(c);return supr.setHeight.call(this,h,a,d,cb,e),a||cb(),this},setBounds:function(x,y,w,h,a,d,c,e){this.beforeAction();var cb=this.createCB(c);return a?supr.setBounds.call(this,x,y,w,h,a,d,cb,e):(this.storeXY([x,y]),supr.setXY.call(this,[x,y]),supr.setSize.call(this,w,h,a,d,cb,e),cb()),this},setZIndex:function(zindex){return this.zindex=zindex,this.setStyle("z-index",zindex+2),this.shadow&&this.shadow.setZIndex(zindex+1),this.shim&&this.shim.setStyle("z-index",zindex),this}})}(),Ext.Shadow=function(config){Ext.apply(this,config),"string"!=typeof this.mode&&(this.mode=this.defaultMode);var o=this.offset,a={h:0},rad=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":a.w=0,a.l=a.t=o,a.t-=1,Ext.isIE9m&&(a.l-=this.offset+rad,a.t-=this.offset+rad,a.w-=rad,a.h-=rad,a.t+=1);break;case"sides":a.w=2*o,a.l=-o,a.t=o-1,Ext.isIE9m&&(a.l-=this.offset-rad,a.t-=this.offset+rad,a.l+=1,a.w-=2*(this.offset-rad),a.w-=rad+1,a.h-=1);break;case"frame":a.w=a.h=2*o,a.l=a.t=-o,a.t+=1,a.h-=2,Ext.isIE9m&&(a.l-=this.offset-rad,a.t-=this.offset-rad,a.l+=1,a.w-=this.offset+rad+1,a.h-=this.offset+rad,a.h+=1)}this.adjusts=a},Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(target){target=Ext.get(target),this.el||(this.el=Ext.Shadow.Pool.pull(),this.el.dom.nextSibling!=target.dom&&this.el.insertBefore(target)),this.el.setStyle("z-index",this.zIndex||parseInt(target.getStyle("z-index"),10)-1),Ext.isIE9m&&(this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"),this.realign(target.getLeft(!0),target.getTop(!0),target.getWidth(),target.getHeight()),this.el.dom.style.display="block"},isVisible:function(){return this.el?!0:!1},realign:function(l,t,w,h){if(this.el){var cn,sww,a=this.adjusts,d=this.el.dom,s=d.style,sw=w+a.w,sh=h+a.h,sws=sw+"px",shs=sh+"px";s.left=l+a.l+"px",s.top=t+a.t+"px",(s.width!=sws||s.height!=shs)&&(s.width=sws,s.height=shs,Ext.isIE9m||(cn=d.childNodes,sww=Math.max(0,sw-12)+"px",cn[0].childNodes[1].style.width=sww,cn[1].childNodes[1].style.width=sww,cn[2].childNodes[1].style.width=sww,cn[1].style.height=Math.max(0,sh-12)+"px"))}},hide:function(){this.el&&(this.el.dom.style.display="none",Ext.Shadow.Pool.push(this.el),delete this.el)},setZIndex:function(z){this.zIndex=z,this.el&&this.el.setStyle("z-index",z)}},Ext.Shadow.Pool=function(){var p=[],markup=Ext.isIE9m?'<div class="x-ie-shadow"></div>':'<div class="x-shadow"><div class="xst"><div class="xstl"></div><div class="xstc"></div><div class="xstr"></div></div><div class="xsc"><div class="xsml"></div><div class="xsmc"></div><div class="xsmr"></div></div><div class="xsb"><div class="xsbl"></div><div class="xsbc"></div><div class="xsbr"></div></div></div>';return{pull:function(){var sh=p.shift();return sh||(sh=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,markup)),sh.autoBoxAdjust=!1),sh},push:function(sh){p.push(sh)}}}(),Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this),this.addEvents("resize","move")},boxReady:!1,deferHeight:!1,setSize:function(w,h){if("object"==typeof w&&(h=w.height,w=w.width),Ext.isDefined(w)&&Ext.isDefined(this.boxMinWidth)&&w<this.boxMinWidth&&(w=this.boxMinWidth),Ext.isDefined(h)&&Ext.isDefined(this.boxMinHeight)&&h<this.boxMinHeight&&(h=this.boxMinHeight),Ext.isDefined(w)&&Ext.isDefined(this.boxMaxWidth)&&w>this.boxMaxWidth&&(w=this.boxMaxWidth),Ext.isDefined(h)&&Ext.isDefined(this.boxMaxHeight)&&h>this.boxMaxHeight&&(h=this.boxMaxHeight),!this.boxReady)return this.width=w,this.height=h,this;if(this.cacheSizes!==!1&&this.lastSize&&this.lastSize.width==w&&this.lastSize.height==h)return this;this.lastSize={width:w,height:h};var rz,adj=this.adjustSize(w,h),aw=adj.width,ah=adj.height;return(void 0!==aw||void 0!==ah)&&(rz=this.getResizeEl(),this.deferHeight||void 0===aw||void 0===ah?this.deferHeight||void 0===ah?void 0!==aw&&rz.setWidth(aw):rz.setHeight(ah):rz.setSize(aw,ah),this.onResize(aw,ah,w,h),this.fireEvent("resize",this,aw,ah,w,h)),this},setWidth:function(width){return this.setSize(width)},setHeight:function(height){return this.setSize(void 0,height)},getSize:function(){return this.getResizeEl().getSize()},getWidth:function(){return this.getResizeEl().getWidth()},getHeight:function(){return this.getResizeEl().getHeight()},getOuterSize:function(){var el=this.getResizeEl();return{width:el.getWidth()+el.getMargins("lr"),height:el.getHeight()+el.getMargins("tb")}},getPosition:function(local){var el=this.getPositionEl();return local===!0?[el.getLeft(!0),el.getTop(!0)]:this.xy||el.getXY()},getBox:function(local){var pos=this.getPosition(local),s=this.getSize();return s.x=pos[0],s.y=pos[1],s},updateBox:function(box){return this.setSize(box.width,box.height),this.setPagePosition(box.x,box.y),this},getResizeEl:function(){return this.resizeEl||this.el},setAutoScroll:function(scroll){return this.rendered&&this.getContentTarget().setOverflow(scroll?"auto":""),this.autoScroll=scroll,this},setPosition:function(x,y){if(x&&"number"==typeof x[1]&&(y=x[1],x=x[0]),this.x=x,this.y=y,!this.boxReady)return this;var adj=this.adjustPosition(x,y),ax=adj.x,ay=adj.y,el=this.getPositionEl();return(void 0!==ax||void 0!==ay)&&(void 0!==ax&&void 0!==ay?el.setLeftTop(ax,ay):void 0!==ax?el.setLeft(ax):void 0!==ay&&el.setTop(ay),this.onPosition(ax,ay),this.fireEvent("move",this,ax,ay)),this},setPagePosition:function(x,y){if(x&&"number"==typeof x[1]&&(y=x[1],x=x[0]),this.pageX=x,this.pageY=y,this.boxReady&&void 0!==x&&void 0!==y){var p=this.getPositionEl().translatePoints(x,y);return this.setPosition(p.left,p.top),this}},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this),this.resizeEl&&(this.resizeEl=Ext.get(this.resizeEl)),this.positionEl&&(this.positionEl=Ext.get(this.positionEl)),this.boxReady=!0,Ext.isDefined(this.autoScroll)&&this.setAutoScroll(this.autoScroll),this.setSize(this.width,this.height),this.x||this.y?this.setPosition(this.x,this.y):(this.pageX||this.pageY)&&this.setPagePosition(this.pageX,this.pageY)},syncSize:function(){return delete this.lastSize,this.setSize(this.autoWidth?void 0:this.getResizeEl().getWidth(),this.autoHeight?void 0:this.getResizeEl().getHeight()),this},onResize:function(adjWidth,adjHeight,rawWidth,rawHeight){},onPosition:function(x,y){},adjustSize:function(w,h){return this.autoWidth&&(w="auto"),this.autoHeight&&(h="auto"),{width:w,height:h}},adjustPosition:function(x,y){return{x:x,y:y}}}),Ext.reg("box",Ext.BoxComponent),Ext.Spacer=Ext.extend(Ext.BoxComponent,{autoEl:"div"}),Ext.reg("spacer",Ext.Spacer),Ext.SplitBar=function(dragElement,resizingElement,orientation,placement,existingProxy){this.el=Ext.get(dragElement,!0),this.el.unselectable(),this.resizingEl=Ext.get(resizingElement,!0),this.orientation=orientation||Ext.SplitBar.HORIZONTAL,this.minSize=0,this.maxSize=2e3,this.animate=!1,this.useShim=!1,this.shim=null,existingProxy?this.proxy=Ext.get(existingProxy).dom:this.proxy=Ext.SplitBar.createProxy(this.orientation),this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id}),this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this),this.dd.endDrag=this.onEndProxyDrag.createDelegate(this),this.dragSpecs={},this.adapter=new Ext.SplitBar.BasicLayoutAdapter,this.adapter.init(this),this.orientation==Ext.SplitBar.HORIZONTAL?(this.placement=placement||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT),this.el.addClass("x-splitbar-h")):(this.placement=placement||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM),this.el.addClass("x-splitbar-v")),this.addEvents("resize","moved","beforeresize","beforeapply"),Ext.SplitBar.superclass.constructor.call(this)},Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(x,y){this.fireEvent("beforeresize",this),this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},!0),this.overlay.unselectable(),this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),Ext.get(this.proxy).setDisplayed("block");var size=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize(),this.activeMaxSize=this.getMaximumSize();var c1=size-this.activeMinSize,c2=Math.max(this.activeMaxSize-size,0);this.orientation==Ext.SplitBar.HORIZONTAL?(this.dd.resetConstraints(),this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?c1:c2,this.placement==Ext.SplitBar.LEFT?c2:c1,this.tickSize),this.dd.setYConstraint(0,0)):(this.dd.resetConstraints(),this.dd.setXConstraint(0,0),this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?c1:c2,this.placement==Ext.SplitBar.TOP?c2:c1,this.tickSize)),this.dragSpecs.startSize=size,this.dragSpecs.startPoint=[x,y],Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,x,y)},onEndProxyDrag:function(e){Ext.get(this.proxy).setDisplayed(!1);var endPoint=Ext.lib.Event.getXY(e);this.overlay&&(Ext.destroy(this.overlay),delete this.overlay);var newSize;newSize=this.orientation==Ext.SplitBar.HORIZONTAL?this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?endPoint[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-endPoint[0]):this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?endPoint[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-endPoint[1]),newSize=Math.min(Math.max(newSize,this.activeMinSize),this.activeMaxSize),newSize!=this.dragSpecs.startSize&&this.fireEvent("beforeapply",this,newSize)!==!1&&(this.adapter.setElementSize(this,newSize),this.fireEvent("moved",this,newSize),this.fireEvent("resize",this,newSize))},getAdapter:function(){return this.adapter},setAdapter:function(adapter){this.adapter=adapter,this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(minSize){this.minSize=minSize},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(maxSize){this.maxSize=maxSize},setCurrentSize:function(size){var oldAnimate=this.animate;this.animate=!1,this.adapter.setElementSize(this,size),this.animate=oldAnimate},destroy:function(removeEl){Ext.destroy(this.shim,Ext.get(this.proxy)),this.dd.unreg(),removeEl&&this.el.remove(),this.purgeListeners()}}),Ext.SplitBar.createProxy=function(dir){var proxy=new Ext.Element(document.createElement("div"));document.body.appendChild(proxy.dom),proxy.unselectable();var cls="x-splitbar-proxy";return proxy.addClass(cls+" "+(dir==Ext.SplitBar.HORIZONTAL?cls+"-h":cls+"-v")),proxy.dom},Ext.SplitBar.BasicLayoutAdapter=function(){},Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(s){},getElementSize:function(s){return s.orientation==Ext.SplitBar.HORIZONTAL?s.resizingEl.getWidth():s.resizingEl.getHeight()},setElementSize:function(s,newSize,onComplete){s.orientation==Ext.SplitBar.HORIZONTAL?s.animate?s.resizingEl.setWidth(newSize,!0,.1,onComplete,"easeOut"):(s.resizingEl.setWidth(newSize),onComplete&&onComplete(s,newSize)):s.animate?s.resizingEl.setHeight(newSize,!0,.1,onComplete,"easeOut"):(s.resizingEl.setHeight(newSize),onComplete&&onComplete(s,newSize))}},Ext.SplitBar.AbsoluteLayoutAdapter=function(container){this.basic=new Ext.SplitBar.BasicLayoutAdapter,this.container=Ext.get(container)},Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(s){this.basic.init(s)},getElementSize:function(s){return this.basic.getElementSize(s)},setElementSize:function(s,newSize,onComplete){this.basic.setElementSize(s,newSize,this.moveSplitter.createDelegate(this,[s]))},moveSplitter:function(s){var yes=Ext.SplitBar;switch(s.placement){case yes.LEFT:s.el.setX(s.resizingEl.getRight());break;case yes.RIGHT:s.el.setStyle("right",this.container.getWidth()-s.resizingEl.getLeft()+"px");break;case yes.TOP:s.el.setY(s.resizingEl.getBottom());break;case yes.BOTTOM:s.el.setY(s.resizingEl.getTop()-s.el.getHeight())}}},Ext.SplitBar.VERTICAL=1,Ext.SplitBar.HORIZONTAL=2,Ext.SplitBar.LEFT=1,Ext.SplitBar.RIGHT=2,Ext.SplitBar.TOP=3,Ext.SplitBar.BOTTOM=4,Ext.Container=Ext.extend(Ext.BoxComponent,{bufferResize:50,autoDestroy:!0,forceLayout:!1,defaultType:"panel",resizeEvent:"resize",bubbleEvents:["add","remove"],initComponent:function(){Ext.Container.superclass.initComponent.call(this),this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var items=this.items;items&&(delete this.items,this.add(items))},initItems:function(){this.items||(this.items=new Ext.util.MixedCollection(!1,this.getComponentId),this.getLayout())},setLayout:function(layout){this.layout&&this.layout!=layout&&this.layout.setContainer(null),this.layout=layout,this.initItems(),layout.setContainer(this)},afterRender:function(){if(Ext.Container.superclass.afterRender.call(this),this.layout||(this.layout="auto"),Ext.isObject(this.layout)&&!this.layout.layout&&(this.layoutConfig=this.layout,this.layout=this.layoutConfig.type),Ext.isString(this.layout)&&(this.layout=new(Ext.Container.LAYOUTS[this.layout.toLowerCase()])(this.layoutConfig)),this.setLayout(this.layout),void 0!==this.activeItem&&this.layout.setActiveItem){var item=this.activeItem;delete this.activeItem,this.layout.setActiveItem(item)}this.ownerCt||this.doLayout(!1,!0),this.monitorResize===!0&&Ext.EventManager.onWindowResize(this.doLayout,this,[!1])},getLayoutTarget:function(){return this.el},getComponentId:function(comp){return comp.getItemId()},add:function(comp){this.initItems();var args=arguments.length>1;if(args||Ext.isArray(comp)){var result=[];return Ext.each(args?arguments:comp,function(c){result.push(this.add(c))},this),result}var c=this.lookupComponent(this.applyDefaults(comp)),index=this.items.length;return this.fireEvent("beforeadd",this,c,index)!==!1&&this.onBeforeAdd(c)!==!1&&(this.items.add(c),c.onAdded(this,index),this.onAdd(c),this.fireEvent("add",this,c,index)),c},onAdd:function(c){},onAdded:function(container,pos){this.ownerCt=container,this.initRef(),this.cascade(function(c){c.initRef()}),this.fireEvent("added",this,container,pos)},insert:function(index,comp){var i,c,args=arguments,length=args.length,result=[];if(this.initItems(),length>2){for(i=length-1;i>=1;--i)result.push(this.insert(index,args[i]));return result}return c=this.lookupComponent(this.applyDefaults(comp)),index=Math.min(index,this.items.length),this.fireEvent("beforeadd",this,c,index)!==!1&&this.onBeforeAdd(c)!==!1&&(c.ownerCt==this&&this.items.remove(c),this.items.insert(index,c),c.onAdded(this,index),this.onAdd(c),this.fireEvent("add",this,c,index)),c},applyDefaults:function(c){var d=this.defaults;return d&&(Ext.isFunction(d)&&(d=d.call(this,c)),Ext.isString(c)?(c=Ext.ComponentMgr.get(c),Ext.apply(c,d)):c.events?Ext.apply(c,d):Ext.applyIf(c.isAction?c.initialConfig:c,d)),c},onBeforeAdd:function(item){item.ownerCt&&item.ownerCt.remove(item,!1),this.hideBorders===!0&&(item.border=item.border===!0)},remove:function(comp,autoDestroy){this.initItems();var c=this.getComponent(comp);return c&&this.fireEvent("beforeremove",this,c)!==!1&&(this.doRemove(c,autoDestroy),this.fireEvent("remove",this,c)),c},onRemove:function(c){},doRemove:function(c,autoDestroy){var l=this.layout,hasLayout=l&&this.rendered;hasLayout&&l.onRemove(c),this.items.remove(c),c.onRemoved(),this.onRemove(c),(autoDestroy===!0||autoDestroy!==!1&&this.autoDestroy)&&c.destroy(),hasLayout&&l.afterRemove(c)},removeAll:function(autoDestroy){this.initItems();var item,rem=[],items=[];this.items.each(function(i){rem.push(i)});for(var i=0,len=rem.length;len>i;++i)item=rem[i],this.remove(item,autoDestroy),item.ownerCt!==this&&items.push(item);return items},getComponent:function(comp){return Ext.isObject(comp)&&(comp=comp.getItemId()),this.items.get(comp)},lookupComponent:function(comp){return Ext.isString(comp)?Ext.ComponentMgr.get(comp):comp.events?comp:this.createComponent(comp)},createComponent:function(config,defaultType){if(config.render)return config;var c=Ext.create(Ext.apply({ownerCt:this},config),defaultType||this.defaultType);return delete c.initialConfig.ownerCt,delete c.ownerCt,c},canLayout:function(){var el=this.getVisibilityEl();return el&&el.dom&&!el.isStyle("display","none")},doLayout:function(shallow,force){var rendered=this.rendered,forceLayout=force||this.forceLayout;if(this.collapsed||!this.canLayout()){if(this.deferLayout=this.deferLayout||!shallow,!forceLayout)return;shallow=shallow&&!this.deferLayout}else delete this.deferLayout;if(rendered&&this.layout&&this.layout.layout(),shallow!==!0&&this.items)for(var cs=this.items.items,i=0,len=cs.length;len>i;i++){var c=cs[i];c.doLayout&&c.doLayout(!1,forceLayout)}rendered&&this.onLayout(shallow,forceLayout),this.hasLayout=!0,delete this.forceLayout},onLayout:Ext.emptyFn,shouldBufferLayout:function(){var hl=this.hasLayout;return this.ownerCt?hl?!this.hasLayoutPending():!1:hl},hasLayoutPending:function(){var pending=!1;return this.ownerCt.bubble(function(c){return c.layoutPending?(pending=!0,!1):void 0}),pending},onShow:function(){Ext.Container.superclass.onShow.call(this),Ext.isDefined(this.deferLayout)&&(delete this.deferLayout,this.doLayout(!0))},getLayout:function(){if(!this.layout){var layout=new Ext.layout.AutoLayout(this.layoutConfig);this.setLayout(layout)}return this.layout},beforeDestroy:function(){var c;if(this.items)for(;c=this.items.first();)this.doRemove(c,!0);this.monitorResize&&Ext.EventManager.removeResizeListener(this.doLayout,this),Ext.destroy(this.layout),Ext.Container.superclass.beforeDestroy.call(this)},cascade:function(fn,scope,args){if(fn.apply(scope||this,args||[this])!==!1&&this.items)for(var cs=this.items.items,i=0,len=cs.length;len>i;i++)cs[i].cascade?cs[i].cascade(fn,scope,args):fn.apply(scope||cs[i],args||[cs[i]]);return this},findById:function(id){var m=null,ct=this;return this.cascade(function(c){return ct!=c&&c.id===id?(m=c,!1):void 0}),m},findByType:function(xtype,shallow){return this.findBy(function(c){return c.isXType(xtype,shallow)})},find:function(prop,value){return this.findBy(function(c){return c[prop]===value})},findBy:function(fn,scope){var m=[],ct=this;return this.cascade(function(c){ct!=c&&fn.call(scope||c,c,ct)===!0&&m.push(c)}),m},get:function(key){return this.getComponent(key)}}),Ext.Container.LAYOUTS={},Ext.reg("container",Ext.Container),Ext.layout.ContainerLayout=Ext.extend(Object,{monitorResize:!1,activeItem:null,constructor:function(config){this.id=Ext.id(null,"ext-layout-"),Ext.apply(this,config)},type:"container",IEMeasureHack:function(target,viewFlag){var c,e,i,ret,tChildren=target.dom.childNodes,tLen=tChildren.length,d=[];for(i=0;tLen>i;i++)c=tChildren[i],e=Ext.get(c),e&&(d[i]=e.getStyle("display"),e.setStyle({display:"none"}));for(ret=target?target.getViewSize(viewFlag):{},i=0;tLen>i;i++)c=tChildren[i],e=Ext.get(c),e&&e.setStyle({display:d[i]});return ret},getLayoutTargetSize:Ext.EmptyFn,layout:function(){var ct=this.container,target=ct.getLayoutTarget();this.hasLayout||Ext.isEmpty(this.targetCls)||target.addClass(this.targetCls),this.onLayout(ct,target),ct.fireEvent("afterlayout",ct,this)},onLayout:function(ct,target){this.renderAll(ct,target)},isValidParent:function(c,target){return target&&c.getPositionEl().dom.parentNode==(target.dom||target)},renderAll:function(ct,target){var i,c,items=ct.items.items,len=items.length;for(i=0;len>i;i++)c=items[i],!c||c.rendered&&this.isValidParent(c,target)||this.renderItem(c,i,target)},renderItem:function(c,position,target){c&&(c.rendered?this.isValidParent(c,target)||(Ext.isNumber(position)&&(position=target.dom.childNodes[position]),target.dom.insertBefore(c.getPositionEl().dom,position||null),c.container=target,this.configureItem(c)):(c.render(target,position),this.configureItem(c)))},getRenderedItems:function(ct){var i,c,t=ct.getLayoutTarget(),cti=ct.items.items,len=cti.length,items=[];for(i=0;len>i;i++)(c=cti[i]).rendered&&this.isValidParent(c,t)&&c.shouldLayout!==!1&&items.push(c);return items},configureItem:function(c){if(this.extraCls){var t=c.getPositionEl?c.getPositionEl():c;t.addClass(this.extraCls)}c.doLayout&&this.forceLayout&&c.doLayout(),this.renderHidden&&c!=this.activeItem&&c.hide()},onRemove:function(c){if(this.activeItem==c&&delete this.activeItem,c.rendered&&this.extraCls){var t=c.getPositionEl?c.getPositionEl():c;t.removeClass(this.extraCls)}},afterRemove:function(c){c.removeRestore&&(c.removeMode="container",delete c.removeRestore)},onResize:function(){var b,ct=this.container;ct.collapsed||((b=ct.bufferResize&&ct.shouldBufferLayout())?(this.resizeTask||(this.resizeTask=new Ext.util.DelayedTask(this.runLayout,this),this.resizeBuffer=Ext.isNumber(b)?b:50),ct.layoutPending=!0,this.resizeTask.delay(this.resizeBuffer)):this.runLayout())},runLayout:function(){var ct=this.container;this.layout(),ct.onLayout(),delete ct.layoutPending},setContainer:function(ct){if(this.monitorResize&&ct!=this.container){var old=this.container;old&&old.un(old.resizeEvent,this.onResize,this),ct&&ct.on(ct.resizeEvent,this.onResize,this)}this.container=ct},parseMargins:function(v){Ext.isNumber(v)&&(v=v.toString());var ms=v.split(" "),len=ms.length;return 1==len?ms[1]=ms[2]=ms[3]=ms[0]:2==len?(ms[2]=ms[0],ms[3]=ms[1]):3==len&&(ms[3]=ms[1]),{top:parseInt(ms[0],10)||0,right:parseInt(ms[1],10)||0,bottom:parseInt(ms[2],10)||0,left:parseInt(ms[3],10)||0}},fieldTpl:function(){var t=new Ext.Template('<div class="x-form-item {itemCls}" tabIndex="-1">','<label for="{id}" style="{labelStyle}" class="x-form-item-label">{label}{labelSeparator}</label>','<div class="x-form-element" id="x-form-el-{id}" style="{elementStyle}">','</div><div class="{clearCls}"></div>',"</div>");
return t.disableFormats=!0,t.compile()}(),destroy:function(){if(this.resizeTask&&this.resizeTask.cancel&&this.resizeTask.cancel(),this.container&&this.container.un(this.container.resizeEvent,this.onResize,this),!Ext.isEmpty(this.targetCls)){var target=this.container.getLayoutTarget();target&&target.removeClass(this.targetCls)}}}),Ext.layout.AutoLayout=Ext.extend(Ext.layout.ContainerLayout,{type:"auto",monitorResize:!0,onLayout:function(ct,target){Ext.layout.AutoLayout.superclass.onLayout.call(this,ct,target);var i,c,cs=this.getRenderedItems(ct),len=cs.length;for(i=0;len>i;i++)c=cs[i],c.doLayout&&c.doLayout(!0)}}),Ext.Container.LAYOUTS.auto=Ext.layout.AutoLayout,Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"fit",getLayoutTargetSize:function(){var target=this.container.getLayoutTarget();return target?target.getStyleSize():{}},onLayout:function(ct,target){Ext.layout.FitLayout.superclass.onLayout.call(this,ct,target),ct.collapsed||this.setItemSize(this.activeItem||ct.items.itemAt(0),this.getLayoutTargetSize())},setItemSize:function(item,size){item&&size.height>0&&item.setSize(size)}}),Ext.Container.LAYOUTS.fit=Ext.layout.FitLayout,Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:!1,layoutOnCardChange:!1,renderHidden:!0,type:"card",setActiveItem:function(item){var ai=this.activeItem,ct=this.container;if(item=ct.getComponent(item),item&&ai!=item){if(ai){if(ai.hide(),ai.hidden!==!0)return!1;ai.fireEvent("deactivate",ai)}var layout=item.doLayout&&(this.layoutOnCardChange||!item.rendered);this.activeItem=item,delete item.deferLayout,item.show(),this.layout(),layout&&item.doLayout(),item.fireEvent("activate",item)}},renderAll:function(ct,target){this.deferredRender?this.renderItem(this.activeItem,void 0,target):Ext.layout.CardLayout.superclass.renderAll.call(this,ct,target)}}),Ext.Container.LAYOUTS.card=Ext.layout.CardLayout,Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,getLayoutTargetSize:function(){var target=this.container.getLayoutTarget(),ret={};return target&&(ret=target.getViewSize(),Ext.isIE9m&&Ext.isStrict&&0==ret.width&&(ret=target.getStyleSize()),ret.width-=target.getPadding("lr"),ret.height-=target.getPadding("tb")),ret},onLayout:function(container,target){Ext.layout.AnchorLayout.superclass.onLayout.call(this,container,target);var box,anchorWidth,anchorHeight,component,anchorSpec,calcWidth,calcHeight,anchorsArray,i,el,size=this.getLayoutTargetSize(),containerWidth=size.width,containerHeight=size.height,overflow=target.getStyle("overflow"),components=this.getRenderedItems(container),len=components.length,boxes=[];if(!(20>containerWidth&&20>containerHeight)){for(container.anchorSize?"number"==typeof container.anchorSize?anchorWidth=container.anchorSize:(anchorWidth=container.anchorSize.width,anchorHeight=container.anchorSize.height):(anchorWidth=container.initialConfig.width,anchorHeight=container.initialConfig.height),i=0;len>i;i++)component=components[i],el=component.getPositionEl(),component.anchor||!component.items||Ext.isNumber(component.width)||Ext.isIE6&&Ext.isStrict||(component.anchor=this.defaultAnchor),component.anchor&&(anchorSpec=component.anchorSpec,anchorSpec||(anchorsArray=component.anchor.split(" "),component.anchorSpec=anchorSpec={right:this.parseAnchor(anchorsArray[0],component.initialConfig.width,anchorWidth),bottom:this.parseAnchor(anchorsArray[1],component.initialConfig.height,anchorHeight)}),calcWidth=anchorSpec.right?this.adjustWidthAnchor(anchorSpec.right(containerWidth)-el.getMargins("lr"),component):void 0,calcHeight=anchorSpec.bottom?this.adjustHeightAnchor(anchorSpec.bottom(containerHeight)-el.getMargins("tb"),component):void 0,(calcWidth||calcHeight)&&boxes.push({component:component,width:calcWidth||void 0,height:calcHeight||void 0}));for(i=0,len=boxes.length;len>i;i++)box=boxes[i],box.component.setSize(box.width,box.height);if(overflow&&"hidden"!=overflow&&!this.adjustmentPass){var newTargetSize=this.getLayoutTargetSize();(newTargetSize.width!=size.width||newTargetSize.height!=size.height)&&(this.adjustmentPass=!0,this.onLayout(container,target))}delete this.adjustmentPass}},parseAnchor:function(a,start,cstart){if(a&&"none"!=a){var last;if(this.parseAnchorRE.test(a)){var diff=cstart-start;return function(v){return v!==last?(last=v,v-diff):void 0}}if(-1!=a.indexOf("%")){var ratio=.01*parseFloat(a.replace("%",""));return function(v){return v!==last?(last=v,Math.floor(v*ratio)):void 0}}if(a=parseInt(a,10),!isNaN(a))return function(v){return v!==last?(last=v,v+a):void 0}}return!1},adjustWidthAnchor:function(value,comp){return value},adjustHeightAnchor:function(value,comp){return value}}),Ext.Container.LAYOUTS.anchor=Ext.layout.AnchorLayout,Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"column",extraCls:"x-column",scrollOffset:0,targetCls:"x-column-layout-ct",isValidParent:function(c,target){return this.innerCt&&c.getPositionEl().dom.parentNode==this.innerCt.dom},getLayoutTargetSize:function(){var ret,target=this.container.getLayoutTarget();return target&&(ret=target.getViewSize(),Ext.isIE9m&&Ext.isStrict&&0==ret.width&&(ret=target.getStyleSize()),ret.width-=target.getPadding("lr"),ret.height-=target.getPadding("tb")),ret},renderAll:function(ct,target){this.innerCt||(this.innerCt=target.createChild({cls:"x-column-inner"}),this.innerCt.createChild({cls:"x-clear"})),Ext.layout.ColumnLayout.superclass.renderAll.call(this,ct,this.innerCt)},onLayout:function(ct,target){var c,i,m,cs=ct.items.items,len=cs.length,margins=[];this.renderAll(ct,target);var size=this.getLayoutTargetSize();if(!(Ext.isIE9m&&size.width<1&&size.height<1)){var w=size.width-this.scrollOffset,pw=(size.height,w);for(this.innerCt.setWidth(w),i=0;len>i;i++)c=cs[i],m=c.getPositionEl().getMargins("lr"),margins[i]=m,c.columnWidth||(pw-=c.getWidth()+m);for(pw=0>pw?0:pw,i=0;len>i;i++)c=cs[i],m=margins[i],c.columnWidth&&c.setSize(Math.floor(c.columnWidth*pw)-m);if(Ext.isIE9m&&(i=target.getStyle("overflow")&&"hidden"!=i&&!this.adjustmentPass)){var ts=this.getLayoutTargetSize();ts.width!=size.width&&(this.adjustmentPass=!0,this.onLayout(ct,target))}delete this.adjustmentPass}}}),Ext.Container.LAYOUTS.column=Ext.layout.ColumnLayout,Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,rendered:!1,type:"border",targetCls:"x-border-layout-ct",getLayoutTargetSize:function(){var target=this.container.getLayoutTarget();return target?target.getViewSize():{}},onLayout:function(ct,target){var collapsed,i,c,pos,items=ct.items.items,len=items.length;if(!this.rendered){for(collapsed=[],i=0;len>i;i++)c=items[i],pos=c.region,c.collapsed&&collapsed.push(c),c.collapsed=!1,c.rendered||(c.render(target,i),c.getPositionEl().addClass("x-border-panel")),this[pos]="center"!=pos&&c.split?new Ext.layout.BorderLayout.SplitRegion(this,c.initialConfig,pos):new Ext.layout.BorderLayout.Region(this,c.initialConfig,pos),this[pos].render(target,c);this.rendered=!0}var size=this.getLayoutTargetSize();if(size.width<20||size.height<20)return void(collapsed&&(this.restoreCollapsed=collapsed));this.restoreCollapsed&&(collapsed=this.restoreCollapsed,delete this.restoreCollapsed);var b,m,totalWidth,totalHeight,w=size.width,h=size.height,centerW=w,centerH=h,centerY=0,centerX=0,n=this.north,s=this.south,west=this.west,e=this.east,c=this.center;if(!c&&Ext.layout.BorderLayout.WARN!==!1)throw"No center region defined in BorderLayout "+ct.id;if(n&&n.isVisible()&&(b=n.getSize(),m=n.getMargins(),b.width=w-(m.left+m.right),b.x=m.left,b.y=m.top,centerY=b.height+b.y+m.bottom,centerH-=centerY,n.applyLayout(b)),s&&s.isVisible()&&(b=s.getSize(),m=s.getMargins(),b.width=w-(m.left+m.right),b.x=m.left,totalHeight=b.height+m.top+m.bottom,b.y=h-totalHeight+m.top,centerH-=totalHeight,s.applyLayout(b)),west&&west.isVisible()&&(b=west.getSize(),m=west.getMargins(),b.height=centerH-(m.top+m.bottom),b.x=m.left,b.y=centerY+m.top,totalWidth=b.width+m.left+m.right,centerX+=totalWidth,centerW-=totalWidth,west.applyLayout(b)),e&&e.isVisible()&&(b=e.getSize(),m=e.getMargins(),b.height=centerH-(m.top+m.bottom),totalWidth=b.width+m.left+m.right,b.x=w-totalWidth+m.left,b.y=centerY+m.top,centerW-=totalWidth,e.applyLayout(b)),c){m=c.getMargins();var centerBox={x:centerX+m.left,y:centerY+m.top,width:centerW-(m.left+m.right),height:centerH-(m.top+m.bottom)};c.applyLayout(centerBox)}if(collapsed)for(i=0,len=collapsed.length;len>i;i++)collapsed[i].collapse(!1);if(Ext.isIE9m&&Ext.isStrict&&target.repaint(),i=target.getStyle("overflow")&&"hidden"!=i&&!this.adjustmentPass){var ts=this.getLayoutTargetSize();(ts.width!=size.width||ts.height!=size.height)&&(this.adjustmentPass=!0,this.onLayout(ct,target))}delete this.adjustmentPass},destroy:function(){var i,region,r=["north","south","east","west"];for(i=0;i<r.length;i++)region=this[r[i]],region&&(region.destroy?region.destroy():region.split&&region.split.destroy(!0));Ext.layout.BorderLayout.superclass.destroy.call(this)}}),Ext.layout.BorderLayout.Region=function(layout,config,pos){Ext.apply(this,config),this.layout=layout,this.position=pos,this.state={},"string"==typeof this.margins&&(this.margins=this.layout.parseMargins(this.margins)),this.margins=Ext.applyIf(this.margins||{},this.defaultMargins),this.collapsible&&("string"==typeof this.cmargins&&(this.cmargins=this.layout.parseMargins(this.cmargins)),"mini"!=this.collapseMode||this.cmargins?this.cmargins=Ext.applyIf(this.cmargins||{},"north"==pos||"south"==pos?this.defaultNSCMargins:this.defaultEWCMargins):this.cmargins={left:0,top:0,right:0,bottom:0})},Ext.layout.BorderLayout.Region.prototype={collapsible:!1,split:!1,floatable:!0,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},floatingZIndex:100,isCollapsed:!1,render:function(ct,p){this.panel=p,p.el.enableDisplayMode(),this.targetEl=ct,this.el=p.el;var gs=p.getState,ps=this.position;p.getState=function(){return Ext.apply(gs.call(p)||{},this.state)}.createDelegate(this),"center"!=ps&&(p.allowQueuedExpand=!1,p.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this}),(this.collapsible||this.floatable)&&(p.collapseEl="el",p.slideAnchor=this.getSlideAnchor()),p.tools&&p.tools.toggle&&(p.tools.toggle.addClass("x-tool-collapse-"+ps),p.tools.toggle.addClassOnOver("x-tool-collapse-"+ps+"-over")))},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var tt=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');tt.disableFormats=!0,tt.compile(),Ext.layout.BorderLayout.Region.prototype.toolTemplate=tt}if(this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"}),this.collapsedEl.enableDisplayMode("block"),"mini"==this.collapseMode)this.collapsedEl.addClass("x-layout-cmini-"+this.position),this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"}),this.miniCollapsedEl.addClassOnOver("x-layout-mini-over"),this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:!0});else{if(this.collapsible!==!1&&!this.hideCollapseTool){var t=this.expandToolEl=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},!0);t.addClassOnOver("x-tool-expand-"+this.position+"-over"),t.on("click",this.onExpandClick,this,{stopEvent:!0})}(this.floatable!==!1||this.titleCollapse)&&(this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this))}}return this.collapsedEl},onExpandClick:function(e){this.isSlid?this.panel.expand(!1):this.panel.expand()},onCollapseClick:function(e){this.panel.collapse()},beforeCollapse:function(p,animate){this.lastAnim=animate,this.splitEl&&this.splitEl.hide(),this.getCollapsedEl().show();var el=this.panel.getEl();this.originalZIndex=el.getStyle("z-index"),el.setStyle("z-index",100),this.isCollapsed=!0,this.layout.layout()},onCollapse:function(animate){this.panel.el.setStyle("z-index",1),this.lastAnim===!1||this.panel.animCollapse===!1?this.getCollapsedEl().dom.style.visibility="visible":this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:.2}),this.state.collapsed=!0,this.panel.saveState()},beforeExpand:function(animate){this.isSlid&&this.afterSlideIn();var c=this.getCollapsedEl();this.el.show(),"east"==this.position||"west"==this.position?this.panel.setSize(void 0,c.getHeight()):this.panel.setSize(c.getWidth(),void 0),c.hide(),c.dom.style.visibility="hidden",this.panel.el.setStyle("z-index",this.floatingZIndex)},onExpand:function(){this.isCollapsed=!1,this.splitEl&&this.splitEl.show(),this.layout.layout(),this.panel.el.setStyle("z-index",this.originalZIndex),this.state.collapsed=!1,this.panel.saveState()},collapseClick:function(e){this.isSlid?(e.stopPropagation(),this.slideIn()):(e.stopPropagation(),this.slideOut())},onHide:function(){this.isCollapsed?this.getCollapsedEl().hide():this.splitEl&&this.splitEl.hide()},onShow:function(){this.isCollapsed?this.getCollapsedEl().show():this.splitEl&&this.splitEl.show()},isVisible:function(){return!this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(panel){this.panel=panel},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(box){var ce=this.getCollapsedEl();ce.setLeftTop(box.x,box.y),ce.setSize(box.width,box.height)},applyLayout:function(box){this.isCollapsed?this.applyLayoutCollapsed(box):(this.panel.setPosition(box.x,box.y),this.panel.setSize(box.width,box.height))},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){this.autoHide!==!1&&(this.autoHideHd||(this.autoHideSlideTask=new Ext.util.DelayedTask(this.slideIn,this),this.autoHideHd={mouseout:function(e){e.within(this.el,!0)||this.autoHideSlideTask.delay(500)},mouseover:function(e){this.autoHideSlideTask.cancel()},scope:this}),this.el.on(this.autoHideHd),this.collapsedEl.on(this.autoHideHd))},clearAutoHide:function(){this.autoHide!==!1&&(this.el.un("mouseout",this.autoHideHd.mouseout),this.el.un("mouseover",this.autoHideHd.mouseover),this.collapsedEl.un("mouseout",this.autoHideHd.mouseout),this.collapsedEl.un("mouseover",this.autoHideHd.mouseover))},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){if(!this.isSlid&&!this.el.hasActiveFx()){this.isSlid=!0;var dh,pc,ts=this.panel.tools;ts&&ts.toggle&&ts.toggle.hide(),this.el.show(),pc=this.panel.collapsed,this.panel.collapsed=!1,"east"==this.position||"west"==this.position?(dh=this.panel.deferHeight,this.panel.deferHeight=!1,this.panel.setSize(void 0,this.collapsedEl.getHeight()),this.panel.deferHeight=dh):this.panel.setSize(this.collapsedEl.getWidth(),void 0),this.panel.collapsed=pc,this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top],this.el.alignTo(this.collapsedEl,this.getCollapseAnchor()),this.el.setStyle("z-index",this.floatingZIndex+2),this.panel.el.replaceClass("x-panel-collapsed","x-panel-floating"),this.animFloat!==!1?(this.beforeSlide(),this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide(),this.initAutoHide(),Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:!0})):(this.initAutoHide(),Ext.getDoc().on("click",this.slideInIf,this))}},afterSlideIn:function(){this.clearAutoHide(),this.isSlid=!1,this.clearMonitor(),this.el.setStyle("z-index",""),this.panel.el.replaceClass("x-panel-floating","x-panel-collapsed"),this.el.dom.style.left=this.restoreLT[0],this.el.dom.style.top=this.restoreLT[1];var ts=this.panel.tools;ts&&ts.toggle&&ts.toggle.show()},slideIn:function(cb){return!this.isSlid||this.el.hasActiveFx()?void Ext.callback(cb):(this.isSlid=!1,void(this.animFloat!==!1?(this.beforeSlide(),this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide(),this.afterSlide(),this.afterSlideIn(),Ext.callback(cb)},scope:this,block:!0})):(this.el.hide(),this.afterSlideIn())))},slideInIf:function(e){e.within(this.el)||this.slideIn()},anchors:{west:"left",east:"right",north:"top",south:"bottom"},sanchors:{west:"l",east:"r",north:"t",south:"b"},canchors:{west:"tl-tr",east:"tr-tl",north:"tl-bl",south:"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){this.cmargins;switch(this.position){case"west":return[0,0];case"east":return[0,0];case"north":return[0,0];case"south":return[0,0]}},getExpandAdj:function(){var c=this.collapsedEl,cm=this.cmargins;switch(this.position){case"west":return[-(cm.right+c.getWidth()+cm.left),0];case"east":return[cm.right+c.getWidth()+cm.left,0];case"north":return[0,-(cm.top+cm.bottom+c.getHeight())];case"south":return[0,cm.top+cm.bottom+c.getHeight()]}},destroy:function(){this.autoHideSlideTask&&this.autoHideSlideTask.cancel&&this.autoHideSlideTask.cancel(),Ext.destroyMembers(this,"miniCollapsedEl","collapsedEl","expandToolEl")}},Ext.layout.BorderLayout.SplitRegion=function(layout,config,pos){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,layout,config,pos),this.applyLayout=this.applyFns[pos]},Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:!1,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(box){if(this.isCollapsed)return this.applyLayoutCollapsed(box);var sd=this.splitEl.dom,s=sd.style;this.panel.setPosition(box.x,box.y);var sw=sd.offsetWidth;s.left=box.x+box.width-sw+"px",s.top=box.y+"px",s.height=Math.max(0,box.height)+"px",this.panel.setSize(box.width-sw,box.height)},east:function(box){if(this.isCollapsed)return this.applyLayoutCollapsed(box);var sd=this.splitEl.dom,s=sd.style,sw=sd.offsetWidth;this.panel.setPosition(box.x+sw,box.y),s.left=box.x+"px",s.top=box.y+"px",s.height=Math.max(0,box.height)+"px",this.panel.setSize(box.width-sw,box.height)},north:function(box){if(this.isCollapsed)return this.applyLayoutCollapsed(box);var sd=this.splitEl.dom,s=sd.style,sh=sd.offsetHeight;this.panel.setPosition(box.x,box.y),s.left=box.x+"px",s.top=box.y+box.height-sh+"px",s.width=Math.max(0,box.width)+"px",this.panel.setSize(box.width,box.height-sh)},south:function(box){if(this.isCollapsed)return this.applyLayoutCollapsed(box);var sd=this.splitEl.dom,s=sd.style,sh=sd.offsetHeight;this.panel.setPosition(box.x,box.y+sh),s.left=box.x+"px",s.top=box.y+"px",s.width=Math.max(0,box.width)+"px",this.panel.setSize(box.width,box.height-sh)}},render:function(ct,p){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,ct,p);var ps=this.position;this.splitEl=ct.createChild({cls:"x-layout-split x-layout-split-"+ps,html:"&#160;",id:this.panel.id+"-xsplit"}),"mini"==this.collapseMode&&(this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+ps,html:"&#160;"}),this.miniSplitEl.addClassOnOver("x-layout-mini-over"),this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:!0}));var s=this.splitSettings[ps];this.split=new Ext.SplitBar(this.splitEl.dom,p.el,s.orientation),this.split.tickSize=this.tickSize,this.split.placement=s.placement,this.split.getMaximumSize=this[s.maxFn].createDelegate(this),this.split.minSize=this.minSize||this[s.minProp],this.split.on("beforeapply",this.onSplitMove,this),this.split.useShim=this.useShim===!0,this.maxSize=this.maxSize||this[s.maxProp],p.hidden&&this.splitEl.hide(),this.useSplitTips&&(this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip),this.collapsible&&this.splitEl.on("dblclick",this.onCollapseClick,this)},getSize:function(){if(this.isCollapsed)return this.collapsedEl.getSize();var s=this.panel.getSize();return"north"==this.position||"south"==this.position?s.height+=this.splitEl.dom.offsetHeight:s.width+=this.splitEl.dom.offsetWidth,s},getHMaxSize:function(){var cmax=this.maxSize||1e4,center=this.layout.center;return Math.min(cmax,this.el.getWidth()+center.el.getWidth()-center.getMinWidth())},getVMaxSize:function(){var cmax=this.maxSize||1e4,center=this.layout.center;return Math.min(cmax,this.el.getHeight()+center.el.getHeight()-center.getMinHeight())},onSplitMove:function(split,newSize){var s=this.panel.getSize();return this.lastSplitSize=newSize,"north"==this.position||"south"==this.position?(this.panel.setSize(s.width,newSize),this.state.height=newSize):(this.panel.setSize(newSize,s.height),this.state.width=newSize),this.layout.layout(),this.panel.saveState(),!1},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl),Ext.layout.BorderLayout.SplitRegion.superclass.destroy.call(this)}}),Ext.Container.LAYOUTS.border=Ext.layout.BorderLayout,Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",trackLabels:!0,type:"form",onRemove:function(c){Ext.layout.FormLayout.superclass.onRemove.call(this,c),this.trackLabels&&(c.un("show",this.onFieldShow,this),c.un("hide",this.onFieldHide,this));var el=c.getPositionEl(),ct=c.getItemCt&&c.getItemCt();c.rendered&&ct&&(el&&el.dom&&el.insertAfter(ct),Ext.destroy(ct),Ext.destroyMembers(c,"label","itemCt"),c.customItemCt&&Ext.destroyMembers(c,"getItemCt","customItemCt"))},setContainer:function(ct){if(Ext.layout.FormLayout.superclass.setContainer.call(this,ct),ct.labelAlign=ct.labelAlign||this.labelAlign,ct.labelAlign&&ct.addClass("x-form-label-"+ct.labelAlign),ct.hideLabels||this.hideLabels)Ext.apply(this,{labelStyle:"display:none",elementStyle:"padding-left:0;",labelAdjust:0});else{if(this.labelSeparator=Ext.isDefined(ct.labelSeparator)?ct.labelSeparator:this.labelSeparator,ct.labelWidth=ct.labelWidth||this.labelWidth||100,Ext.isNumber(ct.labelWidth)){var pad=ct.labelPad||this.labelPad;pad=Ext.isNumber(pad)?pad:5,Ext.apply(this,{labelAdjust:ct.labelWidth+pad,labelStyle:"width:"+ct.labelWidth+"px;",elementStyle:"padding-left:"+(ct.labelWidth+pad)+"px"})}"top"==ct.labelAlign&&Ext.apply(this,{labelStyle:"width:auto;",labelAdjust:0,elementStyle:"padding-left:0;"})}},isHide:function(c){return c.hideLabel||this.container.hideLabels},onFieldShow:function(c){c.getItemCt().removeClass("x-hide-"+c.hideMode),c.isComposite&&c.doLayout()},onFieldHide:function(c){c.getItemCt().addClass("x-hide-"+c.hideMode)},getLabelStyle:function(s){for(var ls="",items=[this.labelStyle,s],i=0,len=items.length;len>i;++i)items[i]&&(ls+=items[i],";"!=ls.substr(-1,1)&&(ls+=";"));return ls},renderItem:function(c,position,target){if(c&&(c.isFormField||c.fieldLabel)&&"hidden"!=c.inputType){var args=this.getTemplateArgs(c);Ext.isNumber(position)&&(position=target.dom.childNodes[position]||null),position?c.itemCt=this.fieldTpl.insertBefore(position,args,!0):c.itemCt=this.fieldTpl.append(target,args,!0),c.getItemCt||Ext.apply(c,{getItemCt:function(){return c.itemCt},customItemCt:!0}),c.label=c.getItemCt().child("label.x-form-item-label"),c.rendered?this.isValidParent(c,target)||Ext.fly("x-form-el-"+c.id).appendChild(c.getPositionEl()):c.render("x-form-el-"+c.id),this.trackLabels&&(c.hidden&&this.onFieldHide(c),c.on({scope:this,show:this.onFieldShow,hide:this.onFieldHide})),this.configureItem(c)}else Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)},getTemplateArgs:function(field){var noLabelSep=!field.fieldLabel||field.hideLabel,itemCls=(field.itemCls||this.container.itemCls||"")+(field.hideLabel?" x-hide-label":"");return Ext.isIE9&&Ext.isIEQuirks&&field instanceof Ext.form.TextField&&(itemCls+=" x-input-wrapper"),{id:field.id,label:field.fieldLabel,itemCls:itemCls,clearCls:field.clearCls||"x-form-clear-left",labelStyle:this.getLabelStyle(field.labelStyle),elementStyle:this.elementStyle||"",labelSeparator:noLabelSep?"":Ext.isDefined(field.labelSeparator)?field.labelSeparator:this.labelSeparator}},adjustWidthAnchor:function(value,c){if(c.label&&!this.isHide(c)&&"top"!=this.container.labelAlign){var adjust=Ext.isIE6||Ext.isIEQuirks;return value-this.labelAdjust+(adjust?-3:0)}return value},adjustHeightAnchor:function(value,c){return c.label&&!this.isHide(c)&&"top"==this.container.labelAlign?value-c.label.getHeight():value},isValidParent:function(c,target){return target&&this.container.getEl().contains(c.getPositionEl())}}),Ext.Container.LAYOUTS.form=Ext.layout.FormLayout,Ext.layout.AccordionLayout=Ext.extend(Ext.layout.FitLayout,{fill:!0,autoWidth:!0,titleCollapse:!0,hideCollapseTool:!1,collapseFirst:!1,animate:!1,sequence:!1,activeOnTop:!1,type:"accordion",renderItem:function(c){this.animate===!1&&(c.animCollapse=!1),c.collapsible=!0,this.autoWidth&&(c.autoWidth=!0),this.titleCollapse&&(c.titleCollapse=!0),this.hideCollapseTool&&(c.hideCollapseTool=!0),void 0!==this.collapseFirst&&(c.collapseFirst=this.collapseFirst),this.activeItem||c.collapsed?this.activeItem&&this.activeItem!=c&&(c.collapsed=!0):this.setActiveItem(c,!0),Ext.layout.AccordionLayout.superclass.renderItem.apply(this,arguments),c.header.addClass("x-accordion-hd"),c.on("beforeexpand",this.beforeExpand,this)},onRemove:function(c){Ext.layout.AccordionLayout.superclass.onRemove.call(this,c),c.rendered&&c.header.removeClass("x-accordion-hd"),c.un("beforeexpand",this.beforeExpand,this)},beforeExpand:function(p,anim){var ai=this.activeItem;if(ai)if(this.sequence){if(delete this.activeItem,!ai.collapsed)return ai.collapse({callback:function(){p.expand(anim||!0)},scope:this}),!1}else ai.collapse(this.animate);this.setActive(p),this.activeOnTop&&p.el.dom.parentNode.insertBefore(p.el.dom,p.el.dom.parentNode.firstChild),this.layout()},setItemSize:function(item,size){if(this.fill&&item){var i,p,hh=0,ct=this.getRenderedItems(this.container),len=ct.length;for(i=0;len>i;i++)(p=ct[i])==item||p.hidden||(hh+=p.header.getHeight());size.height-=hh,item.setSize(size)}},setActiveItem:function(item){this.setActive(item,!0)},setActive:function(item,expand){var ai=this.activeItem;item=this.container.getComponent(item),ai!=item&&(item.rendered&&item.collapsed&&expand?item.expand():(ai&&ai.fireEvent("deactivate",ai),this.activeItem=item,item.fireEvent("activate",item)))}}),Ext.Container.LAYOUTS.accordion=Ext.layout.AccordionLayout,Ext.layout.Accordion=Ext.layout.AccordionLayout,Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!1,type:"table",targetCls:"x-table-layout-ct",tableAttrs:null,setContainer:function(ct){Ext.layout.TableLayout.superclass.setContainer.call(this,ct),this.currentRow=0,this.currentColumn=0,this.cells=[]},onLayout:function(ct,target){var cs=ct.items.items;cs.length;this.table||(target.addClass("x-table-layout-ct"),this.table=target.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,!0)),this.renderAll(ct,target)},getRow:function(index){var row=this.table.tBodies[0].childNodes[index];return row||(row=document.createElement("tr"),this.table.tBodies[0].appendChild(row)),row},getNextCell:function(c){for(var cell=this.getNextNonSpan(this.currentColumn,this.currentRow),curCol=this.currentColumn=cell[0],curRow=this.currentRow=cell[1],rowIndex=curRow;rowIndex<curRow+(c.rowspan||1);rowIndex++){this.cells[rowIndex]||(this.cells[rowIndex]=[]);for(var colIndex=curCol;colIndex<curCol+(c.colspan||1);colIndex++)this.cells[rowIndex][colIndex]=!0}var td=document.createElement("td");c.cellId&&(td.id=c.cellId);var cls="x-table-layout-cell";return c.cellCls&&(cls+=" "+c.cellCls),td.className=cls,c.colspan&&(td.colSpan=c.colspan),c.rowspan&&(td.rowSpan=c.rowspan),this.getRow(curRow).appendChild(td),td},getNextNonSpan:function(colIndex,rowIndex){for(var cols=this.columns;cols&&colIndex>=cols||this.cells[rowIndex]&&this.cells[rowIndex][colIndex];)cols&&colIndex>=cols?(rowIndex++,colIndex=0):colIndex++;return[colIndex,rowIndex]},renderItem:function(c,position,target){if(this.table||(this.table=target.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,!0)),c&&!c.rendered)c.render(this.getNextCell(c)),this.configureItem(c);else if(c&&!this.isValidParent(c,target)){var container=this.getNextCell(c);container.insertBefore(c.getPositionEl().dom,null),c.container=Ext.get(container),this.configureItem(c)}},isValidParent:function(c,target){return c.getPositionEl().up("table",5).dom.parentNode===(target.dom||target)},destroy:function(){delete this.table,Ext.layout.TableLayout.superclass.destroy.call(this)}}),Ext.Container.LAYOUTS.table=Ext.layout.TableLayout,Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",type:"absolute",onLayout:function(ct,target){target.position(),this.paddingLeft=target.getPadding("l"),this.paddingTop=target.getPadding("t"),Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,ct,target)},adjustWidthAnchor:function(value,comp){return value?value-comp.getPosition(!0)[0]+this.paddingLeft:value},adjustHeightAnchor:function(value,comp){return value?value-comp.getPosition(!0)[1]+this.paddingTop:value}}),Ext.Container.LAYOUTS.absolute=Ext.layout.AbsoluteLayout,Ext.layout.BoxLayout=Ext.extend(Ext.layout.ContainerLayout,{defaultMargins:{left:0,top:0,right:0,bottom:0},padding:"0",pack:"start",monitorResize:!0,type:"box",scrollOffset:0,extraCls:"x-box-item",targetCls:"x-box-layout-ct",innerCls:"x-box-inner",constructor:function(config){Ext.layout.BoxLayout.superclass.constructor.call(this,config),Ext.isString(this.defaultMargins)&&(this.defaultMargins=this.parseMargins(this.defaultMargins));var handler=this.overflowHandler;"string"==typeof handler&&(handler={type:handler});var handlerType="none";handler&&void 0!=handler.type&&(handlerType=handler.type);var constructor=Ext.layout.boxOverflow[handlerType];constructor[this.type]&&(constructor=constructor[this.type]),this.overflowHandler=new constructor(this,handler)},onLayout:function(container,target){Ext.layout.BoxLayout.superclass.onLayout.call(this,container,target);var tSize=this.getLayoutTargetSize(),items=this.getVisibleItems(container),calcs=this.calculateChildBoxes(items,tSize),boxes=calcs.boxes,meta=calcs.meta;if(tSize.width>0){var handler=this.overflowHandler,method=meta.tooNarrow?"handleOverflow":"clearOverflow",results=handler[method](calcs,tSize);results&&(results.targetSize&&(tSize=results.targetSize),results.recalculate&&(items=this.getVisibleItems(container),calcs=this.calculateChildBoxes(items,tSize),boxes=calcs.boxes))}this.layoutTargetLastSize=tSize,this.childBoxCache=calcs,this.updateInnerCtSize(tSize,calcs),this.updateChildBoxes(boxes),this.handleTargetOverflow(tSize,container,target)},updateChildBoxes:function(boxes){for(var i=0,length=boxes.length;length>i;i++){var box=boxes[i],comp=box.component;box.dirtySize&&comp.setSize(box.width,box.height),isNaN(box.left)||isNaN(box.top)||comp.setPosition(box.left,box.top)}},updateInnerCtSize:function(tSize,calcs){var align=this.align,padding=this.padding,width=tSize.width,height=tSize.height;if("hbox"==this.type){var innerCtWidth=width,innerCtHeight=calcs.meta.maxHeight+padding.top+padding.bottom;
"stretch"==align?innerCtHeight=height:"middle"==align&&(innerCtHeight=Math.max(height,innerCtHeight))}else{var innerCtHeight=height,innerCtWidth=calcs.meta.maxWidth+padding.left+padding.right;"stretch"==align?innerCtWidth=width:"center"==align&&(innerCtWidth=Math.max(width,innerCtWidth))}this.innerCt.setSize(innerCtWidth||void 0,innerCtHeight||void 0)},handleTargetOverflow:function(previousTargetSize,container,target){var overflow=target.getStyle("overflow");if(overflow&&"hidden"!=overflow&&!this.adjustmentPass){var newTargetSize=this.getLayoutTargetSize();(newTargetSize.width!=previousTargetSize.width||newTargetSize.height!=previousTargetSize.height)&&(this.adjustmentPass=!0,this.onLayout(container,target))}delete this.adjustmentPass},isValidParent:function(c,target){return this.innerCt&&c.getPositionEl().dom.parentNode==this.innerCt.dom},getVisibleItems:function(ct){var i,c,ct=ct||this.container,t=ct.getLayoutTarget(),cti=ct.items.items,len=cti.length,items=[];for(i=0;len>i;i++)(c=cti[i]).rendered&&this.isValidParent(c,t)&&c.hidden!==!0&&c.collapsed!==!0&&c.shouldLayout!==!1&&items.push(c);return items},renderAll:function(ct,target){this.innerCt||(this.innerCt=target.createChild({cls:this.innerCls}),this.padding=this.parseMargins(this.padding)),Ext.layout.BoxLayout.superclass.renderAll.call(this,ct,this.innerCt)},getLayoutTargetSize:function(){var ret,target=this.container.getLayoutTarget();return target&&(ret=target.getViewSize(),Ext.isIE9m&&Ext.isStrict&&0==ret.width&&(ret=target.getStyleSize()),ret.width-=target.getPadding("lr"),ret.height-=target.getPadding("tb")),ret},renderItem:function(c){Ext.isString(c.margins)?c.margins=this.parseMargins(c.margins):c.margins||(c.margins=this.defaultMargins),Ext.layout.BoxLayout.superclass.renderItem.apply(this,arguments)},destroy:function(){Ext.destroy(this.overflowHandler),Ext.layout.BoxLayout.superclass.destroy.apply(this,arguments)}}),Ext.layout.boxOverflow.None=Ext.extend(Object,{constructor:function(layout,config){this.layout=layout,Ext.apply(this,config||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn}),Ext.layout.boxOverflow.none=Ext.layout.boxOverflow.None,Ext.layout.boxOverflow.Menu=Ext.extend(Ext.layout.boxOverflow.None,{afterCls:"x-strip-right",noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',constructor:function(layout){Ext.layout.boxOverflow.Menu.superclass.constructor.apply(this,arguments),this.menuItems=[]},createInnerElements:function(){this.afterCt||(this.afterCt=this.layout.innerCt.insertSibling({cls:this.afterCls},"before"))},clearOverflow:function(calculations,targetSize){var newWidth=targetSize.width+(this.afterCt?this.afterCt.getWidth():0),items=this.menuItems;this.hideTrigger();for(var index=0,length=items.length;length>index;index++)items.pop().component.show();return{targetSize:{height:targetSize.height,width:newWidth}}},showTrigger:function(){this.createMenu(),this.menuTrigger.show()},hideTrigger:function(){void 0!=this.menuTrigger&&this.menuTrigger.hide()},beforeMenuShow:function(menu){var item,prev,items=this.menuItems,len=items.length,needsSep=function(group,item){return group.isXType("buttongroup")&&!(item instanceof Ext.Toolbar.Separator)};this.clearMenu(),menu.removeAll();for(var i=0;len>i;i++)item=items[i].component,prev&&(needsSep(item,prev)||needsSep(prev,item))&&menu.add("-"),this.addComponentToMenu(menu,item),prev=item;menu.items.length<1&&menu.add(this.noItemsMenuText)},createMenuConfig:function(component,hideOnClick){var config=Ext.apply({},component.initialConfig),group=component.toggleGroup;return Ext.copyTo(config,component,["iconCls","icon","itemId","disabled","handler","scope","menu"]),Ext.apply(config,{text:component.overflowText||component.text,hideOnClick:hideOnClick}),(group||component.enableToggle)&&Ext.apply(config,{group:group,checked:component.pressed,listeners:{checkchange:function(item,checked){component.toggle(checked)}}}),delete config.ownerCt,delete config.xtype,delete config.id,config},addComponentToMenu:function(menu,component){component instanceof Ext.Toolbar.Separator?menu.add("-"):Ext.isFunction(component.isXType)&&(component.isXType("splitbutton")?menu.add(this.createMenuConfig(component,!0)):component.isXType("button")?menu.add(this.createMenuConfig(component,!component.menu)):component.isXType("buttongroup")&&component.items.each(function(item){this.addComponentToMenu(menu,item)},this))},clearMenu:function(){var menu=this.moreMenu;menu&&menu.items&&menu.items.each(function(item){delete item.menu})},createMenu:function(){this.menuTrigger||(this.createInnerElements(),this.menu=new Ext.menu.Menu({ownerCt:this.layout.container,listeners:{scope:this,beforeshow:this.beforeMenuShow}}),this.menuTrigger=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.menu,renderTo:this.afterCt}))},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}}),Ext.layout.boxOverflow.menu=Ext.layout.boxOverflow.Menu,Ext.layout.boxOverflow.HorizontalMenu=Ext.extend(Ext.layout.boxOverflow.Menu,{constructor:function(){Ext.layout.boxOverflow.HorizontalMenu.superclass.constructor.apply(this,arguments);var me=this,layout=me.layout,origFunction=layout.calculateChildBoxes;layout.calculateChildBoxes=function(visibleItems,targetSize){for(var calcs=origFunction.apply(layout,arguments),meta=calcs.meta,items=me.menuItems,hiddenWidth=0,index=0,length=items.length;length>index;index++)hiddenWidth+=items[index].width;return meta.minimumWidth+=hiddenWidth,meta.tooNarrow=meta.minimumWidth>targetSize.width,calcs}},handleOverflow:function(calculations,targetSize){this.showTrigger();for(var newWidth=targetSize.width-this.afterCt.getWidth(),boxes=calculations.boxes,usedWidth=0,recalculate=!1,index=0,length=boxes.length;length>index;index++)usedWidth+=boxes[index].width;for(var spareWidth=newWidth-usedWidth,showCount=0,index=0,length=this.menuItems.length;length>index;index++){var hidden=this.menuItems[index],comp=hidden.component,width=hidden.width;if(!(spareWidth>width))break;comp.show(),spareWidth-=width,showCount++,recalculate=!0}if(recalculate)this.menuItems=this.menuItems.slice(showCount);else for(var i=boxes.length-1;i>=0;i--){var item=boxes[i].component,right=boxes[i].left+boxes[i].width;if(!(right>=newWidth))break;this.menuItems.unshift({component:item,width:boxes[i].width}),item.hide()}return 0==this.menuItems.length&&this.hideTrigger(),{targetSize:{height:targetSize.height,width:newWidth},recalculate:recalculate}}}),Ext.layout.boxOverflow.menu.hbox=Ext.layout.boxOverflow.HorizontalMenu,Ext.layout.boxOverflow.Scroller=Ext.extend(Ext.layout.boxOverflow.None,{animateScroll:!0,scrollIncrement:100,wheelIncrement:3,scrollRepeatInterval:400,scrollDuration:.4,beforeCls:"x-strip-left",afterCls:"x-strip-right",scrollerCls:"x-strip-scroller",beforeScrollerCls:"x-strip-scroller-left",afterScrollerCls:"x-strip-scroller-right",createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(e){e.stopEvent(),this.scrollBy(e.getWheelDelta()*this.wheelIncrement*-1,!1)}})},handleOverflow:function(calculations,targetSize){this.createInnerElements(),this.showScrollers()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers(),this.beforeScroller.show(),this.afterScroller.show(),this.updateScrollButtons()},hideScrollers:function(){void 0!=this.beforeScroller&&(this.beforeScroller.hide(),this.afterScroller.hide())},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var before=this.beforeCt.createChild({cls:String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)}),after=this.afterCt.createChild({cls:String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)});before.addClassOnOver(this.beforeScrollerCls+"-hover"),after.addClassOnOver(this.afterScrollerCls+"-hover"),before.setVisibilityMode(Ext.Element.DISPLAY),after.setVisibilityMode(Ext.Element.DISPLAY),this.beforeRepeater=new Ext.util.ClickRepeater(before,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this}),this.afterRepeater=new Ext.util.ClickRepeater(after,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this}),this.beforeScroller=before,this.afterScroller=after}},destroy:function(){Ext.destroy(this.beforeScroller,this.afterScroller,this.beforeRepeater,this.afterRepeater,this.beforeCt,this.afterCt)},scrollBy:function(delta,animate){this.scrollTo(this.getScrollPosition()+delta,animate)},getItem:function(item){return Ext.isString(item)?item=Ext.getCmp(item):Ext.isNumber(item)&&(item=this.items[item]),item},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(void 0!=this.beforeScroller&&void 0!=this.afterScroller){var beforeMeth=this.atExtremeBefore()?"addClass":"removeClass",afterMeth=this.atExtremeAfter()?"addClass":"removeClass",beforeCls=this.beforeScrollerCls+"-disabled",afterCls=this.afterScrollerCls+"-disabled";this.beforeScroller[beforeMeth](beforeCls),this.afterScroller[afterMeth](afterCls),this.scrolling=!1}},atExtremeBefore:function(){return 0===this.getScrollPosition()},scrollLeft:function(animate){this.scrollBy(-this.scrollIncrement,animate)},scrollRight:function(animate){this.scrollBy(this.scrollIncrement,animate)},scrollToItem:function(item,animate){if(item=this.getItem(item),void 0!=item){var visibility=this.getItemVisibility(item);if(!visibility.fullyVisible){var box=item.getBox(!0,!0),newX=box.x;visibility.hiddenRight&&(newX-=this.layout.innerCt.getWidth()-box.width),this.scrollTo(newX,animate)}}},getItemVisibility:function(item){var box=this.getItem(item).getBox(!0,!0),itemLeft=box.x,itemRight=box.x+box.width,scrollLeft=this.getScrollPosition(),scrollRight=this.layout.innerCt.getWidth()+scrollLeft;return{hiddenLeft:scrollLeft>itemLeft,hiddenRight:itemRight>scrollRight,fullyVisible:itemLeft>scrollLeft&&scrollRight>itemRight}}}),Ext.layout.boxOverflow.scroller=Ext.layout.boxOverflow.Scroller,Ext.layout.boxOverflow.VerticalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{scrollIncrement:75,wheelIncrement:2,handleOverflow:function(calculations,targetSize){return Ext.layout.boxOverflow.VerticalScroller.superclass.handleOverflow.apply(this,arguments),{targetSize:{height:targetSize.height-(this.beforeCt.getHeight()+this.afterCt.getHeight()),width:targetSize.width}}},createInnerElements:function(){var target=this.layout.innerCt;this.beforeCt||(this.beforeCt=target.insertSibling({cls:this.beforeCls},"before"),this.afterCt=target.insertSibling({cls:this.afterCls},"after"),this.createWheelListener())},scrollTo:function(position,animate){var oldPosition=this.getScrollPosition(),newPosition=position.constrain(0,this.getMaxScrollBottom());newPosition==oldPosition||this.scrolling||(void 0==animate&&(animate=this.animateScroll),this.layout.innerCt.scrollTo("top",newPosition,animate?this.getScrollAnim():!1),animate?this.scrolling=!0:(this.scrolling=!1,this.updateScrollButtons()))},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollTop,10)||0},getMaxScrollBottom:function(){return this.layout.innerCt.dom.scrollHeight-this.layout.innerCt.getHeight()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollBottom()}}),Ext.layout.boxOverflow.scroller.vbox=Ext.layout.boxOverflow.VerticalScroller,Ext.layout.boxOverflow.HorizontalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{handleOverflow:function(calculations,targetSize){return Ext.layout.boxOverflow.HorizontalScroller.superclass.handleOverflow.apply(this,arguments),{targetSize:{height:targetSize.height,width:targetSize.width-(this.beforeCt.getWidth()+this.afterCt.getWidth())}}},createInnerElements:function(){var target=this.layout.innerCt;this.beforeCt||(this.afterCt=target.insertSibling({cls:this.afterCls},"before"),this.beforeCt=target.insertSibling({cls:this.beforeCls},"before"),this.createWheelListener())},scrollTo:function(position,animate){var oldPosition=this.getScrollPosition(),newPosition=position.constrain(0,this.getMaxScrollRight());newPosition==oldPosition||this.scrolling||(void 0==animate&&(animate=this.animateScroll),this.layout.innerCt.scrollTo("left",newPosition,animate?this.getScrollAnim():!1),animate?this.scrolling=!0:(this.scrolling=!1,this.updateScrollButtons()))},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollLeft,10)||0},getMaxScrollRight:function(){return this.layout.innerCt.dom.scrollWidth-this.layout.innerCt.getWidth()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollRight()}}),Ext.layout.boxOverflow.scroller.hbox=Ext.layout.boxOverflow.HorizontalScroller,Ext.layout.HBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"top",type:"hbox",calculateChildBoxes:function(visibleItems,targetSize){var child,childWidth,childHeight,childSize,childMargins,canLayout,i,calcs,flexedWidth,horizMargins,vertMargins,stretchHeight,visibleCount=visibleItems.length,padding=this.padding,topOffset=padding.top,leftOffset=padding.left,paddingVert=topOffset+padding.bottom,paddingHoriz=leftOffset+padding.right,width=targetSize.width-this.scrollOffset,height=targetSize.height,availHeight=Math.max(0,height-paddingVert),isStart="start"==this.pack,isCenter="center"==this.pack,isEnd="end"==this.pack,nonFlexWidth=0,maxHeight=0,totalFlex=0,desiredWidth=0,minimumWidth=0,boxes=[];for(i=0;visibleCount>i;i++)child=visibleItems[i],childHeight=child.height,childWidth=child.width,canLayout=!child.hasLayout&&"function"==typeof child.doLayout,"number"!=typeof childWidth&&(child.flex&&!childWidth?totalFlex+=child.flex:(!childWidth&&canLayout&&child.doLayout(),childSize=child.getSize(),childWidth=childSize.width,childHeight=childSize.height)),childMargins=child.margins,horizMargins=childMargins.left+childMargins.right,nonFlexWidth+=horizMargins+(childWidth||0),desiredWidth+=horizMargins+(child.flex?child.minWidth||0:childWidth),minimumWidth+=horizMargins+(child.minWidth||childWidth||0),"number"!=typeof childHeight&&(canLayout&&child.doLayout(),childHeight=child.getHeight()),maxHeight=Math.max(maxHeight,childHeight+childMargins.top+childMargins.bottom),boxes.push({component:child,height:childHeight||void 0,width:childWidth||void 0});var shortfall=desiredWidth-width,tooNarrow=minimumWidth>width,availableWidth=Math.max(0,width-nonFlexWidth-paddingHoriz);if(tooNarrow)for(i=0;visibleCount>i;i++)boxes[i].width=visibleItems[i].minWidth||visibleItems[i].width||boxes[i].width;else if(shortfall>0){for(var minWidths=[],index=0,length=visibleCount;length>index;index++){var item=visibleItems[index],minWidth=item.minWidth||0;item.flex?boxes[index].width=minWidth:minWidths.push({minWidth:minWidth,available:boxes[index].width-minWidth,index:index})}minWidths.sort(function(a,b){return a.available>b.available?1:-1});for(var i=0,length=minWidths.length;length>i;i++){var itemIndex=minWidths[i].index;if(void 0!=itemIndex){var item=visibleItems[itemIndex],box=boxes[itemIndex],oldWidth=box.width,minWidth=item.minWidth,newWidth=Math.max(minWidth,oldWidth-Math.ceil(shortfall/(length-i))),reduction=oldWidth-newWidth;boxes[itemIndex].width=newWidth,shortfall-=reduction}}}else{var remainingWidth=availableWidth,remainingFlex=totalFlex;for(i=0;visibleCount>i;i++)child=visibleItems[i],calcs=boxes[i],childMargins=child.margins,vertMargins=childMargins.top+childMargins.bottom,isStart&&child.flex&&!child.width&&(flexedWidth=Math.ceil(child.flex/remainingFlex*remainingWidth),remainingWidth-=flexedWidth,remainingFlex-=child.flex,calcs.width=flexedWidth,calcs.dirtySize=!0)}for(isCenter?leftOffset+=availableWidth/2:isEnd&&(leftOffset+=availableWidth),i=0;visibleCount>i;i++){switch(child=visibleItems[i],calcs=boxes[i],childMargins=child.margins,leftOffset+=childMargins.left,vertMargins=childMargins.top+childMargins.bottom,calcs.left=leftOffset,calcs.top=topOffset+childMargins.top,this.align){case"stretch":stretchHeight=availHeight-vertMargins,calcs.height=stretchHeight.constrain(child.minHeight||0,child.maxHeight||1e6),calcs.dirtySize=!0;break;case"stretchmax":stretchHeight=maxHeight-vertMargins,calcs.height=stretchHeight.constrain(child.minHeight||0,child.maxHeight||1e6),calcs.dirtySize=!0;break;case"middle":var diff=availHeight-calcs.height-vertMargins;diff>0&&(calcs.top=topOffset+vertMargins+diff/2)}leftOffset+=calcs.width+childMargins.right}return{boxes:boxes,meta:{maxHeight:maxHeight,nonFlexWidth:nonFlexWidth,desiredWidth:desiredWidth,minimumWidth:minimumWidth,shortfall:desiredWidth-width,tooNarrow:tooNarrow}}}}),Ext.Container.LAYOUTS.hbox=Ext.layout.HBoxLayout,Ext.layout.VBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"left",type:"vbox",calculateChildBoxes:function(visibleItems,targetSize){var child,childWidth,childHeight,childSize,childMargins,canLayout,i,calcs,flexedHeight,horizMargins,vertMargins,stretchWidth,length,visibleCount=visibleItems.length,padding=this.padding,topOffset=padding.top,leftOffset=padding.left,paddingVert=topOffset+padding.bottom,paddingHoriz=leftOffset+padding.right,width=targetSize.width-this.scrollOffset,height=targetSize.height,availWidth=Math.max(0,width-paddingHoriz),isStart="start"==this.pack,isCenter="center"==this.pack,isEnd="end"==this.pack,nonFlexHeight=0,maxWidth=0,totalFlex=0,desiredHeight=0,minimumHeight=0,boxes=[];for(i=0;visibleCount>i;i++)child=visibleItems[i],childHeight=child.height,childWidth=child.width,canLayout=!child.hasLayout&&"function"==typeof child.doLayout,"number"!=typeof childHeight&&(child.flex&&!childHeight?totalFlex+=child.flex:(!childHeight&&canLayout&&child.doLayout(),childSize=child.getSize(),childWidth=childSize.width,childHeight=childSize.height)),childMargins=child.margins,vertMargins=childMargins.top+childMargins.bottom,nonFlexHeight+=vertMargins+(childHeight||0),desiredHeight+=vertMargins+(child.flex?child.minHeight||0:childHeight),minimumHeight+=vertMargins+(child.minHeight||childHeight||0),"number"!=typeof childWidth&&(canLayout&&child.doLayout(),childWidth=child.getWidth()),maxWidth=Math.max(maxWidth,childWidth+childMargins.left+childMargins.right),boxes.push({component:child,height:childHeight||void 0,width:childWidth||void 0});var shortfall=desiredHeight-height,tooNarrow=minimumHeight>height,availableHeight=Math.max(0,height-nonFlexHeight-paddingVert);if(tooNarrow)for(i=0,length=visibleCount;length>i;i++)boxes[i].height=visibleItems[i].minHeight||visibleItems[i].height||boxes[i].height;else if(shortfall>0){for(var minHeights=[],index=0,length=visibleCount;length>index;index++){var item=visibleItems[index],minHeight=item.minHeight||0;item.flex?boxes[index].height=minHeight:minHeights.push({minHeight:minHeight,available:boxes[index].height-minHeight,index:index})}minHeights.sort(function(a,b){return a.available>b.available?1:-1});for(var i=0,length=minHeights.length;length>i;i++){var itemIndex=minHeights[i].index;if(void 0!=itemIndex){var item=visibleItems[itemIndex],box=boxes[itemIndex],oldHeight=box.height,minHeight=item.minHeight,newHeight=Math.max(minHeight,oldHeight-Math.ceil(shortfall/(length-i))),reduction=oldHeight-newHeight;boxes[itemIndex].height=newHeight,shortfall-=reduction}}}else{var remainingHeight=availableHeight,remainingFlex=totalFlex;for(i=0;visibleCount>i;i++)child=visibleItems[i],calcs=boxes[i],childMargins=child.margins,horizMargins=childMargins.left+childMargins.right,isStart&&child.flex&&!child.height&&(flexedHeight=Math.ceil(child.flex/remainingFlex*remainingHeight),remainingHeight-=flexedHeight,remainingFlex-=child.flex,calcs.height=flexedHeight,calcs.dirtySize=!0)}for(isCenter?topOffset+=availableHeight/2:isEnd&&(topOffset+=availableHeight),i=0;visibleCount>i;i++){switch(child=visibleItems[i],calcs=boxes[i],childMargins=child.margins,topOffset+=childMargins.top,horizMargins=childMargins.left+childMargins.right,calcs.left=leftOffset+childMargins.left,calcs.top=topOffset,this.align){case"stretch":stretchWidth=availWidth-horizMargins,calcs.width=stretchWidth.constrain(child.minWidth||0,child.maxWidth||1e6),calcs.dirtySize=!0;break;case"stretchmax":stretchWidth=maxWidth-horizMargins,calcs.width=stretchWidth.constrain(child.minWidth||0,child.maxWidth||1e6),calcs.dirtySize=!0;break;case"center":var diff=availWidth-calcs.width-horizMargins;diff>0&&(calcs.left=leftOffset+horizMargins+diff/2)}topOffset+=calcs.height+childMargins.bottom}return{boxes:boxes,meta:{maxWidth:maxWidth,nonFlexHeight:nonFlexHeight,desiredHeight:desiredHeight,minimumHeight:minimumHeight,shortfall:desiredHeight-height,tooNarrow:tooNarrow}}}}),Ext.Container.LAYOUTS.vbox=Ext.layout.VBoxLayout,Ext.layout.ToolbarLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"toolbar",triggerWidth:18,noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',lastOverflow:!1,tableHTML:['<table cellspacing="0" class="x-toolbar-ct">',"<tbody>","<tr>",'<td class="x-toolbar-left" align="{0}">','<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-left-row"></tr>',"</tbody>","</table>","</td>",'<td class="x-toolbar-right" align="right">','<table cellspacing="0" class="x-toolbar-right-ct">',"<tbody>","<tr>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-right-row"></tr>',"</tbody>","</table>","</td>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-extras-row"></tr>',"</tbody>","</table>","</td>","</tr>","</tbody>","</table>","</td>","</tr>","</tbody>","</table>"].join(""),onLayout:function(ct,target){if(!this.leftTr){var align="center"==ct.buttonAlign?"center":"left";target.addClass("x-toolbar-layout-ct"),target.insertHtml("beforeEnd",String.format(this.tableHTML,align)),this.leftTr=target.child("tr.x-toolbar-left-row",!0),this.rightTr=target.child("tr.x-toolbar-right-row",!0),this.extrasTr=target.child("tr.x-toolbar-extras-row",!0),void 0==this.hiddenItem&&(this.hiddenItems=[])}for(var c,side="right"==ct.buttonAlign?this.rightTr:this.leftTr,items=ct.items.items,position=0,i=0,len=items.length;len>i;i++,position++)if(c=items[i],c.isFill)side=this.rightTr,position=-1;else if(c.rendered){if(!c.xtbHidden&&!this.isValidParent(c,side.childNodes[position])){var td=this.insertCell(c,side,position);td.appendChild(c.getPositionEl().dom),c.container=Ext.get(td)}}else c.render(this.insertCell(c,side,position)),this.configureItem(c);this.cleanup(this.leftTr),this.cleanup(this.rightTr),this.cleanup(this.extrasTr),this.fitToSize(target)},cleanup:function(el){var i,c,cn=el.childNodes;for(i=cn.length-1;i>=0&&(c=cn[i]);i--)c.firstChild||el.removeChild(c)},insertCell:function(c,target,position){var td=document.createElement("td");return td.className="x-toolbar-cell",target.insertBefore(td,target.childNodes[position]||null),td},hideItem:function(item){this.hiddenItems.push(item),item.xtbHidden=!0,item.xtbWidth=item.getPositionEl().dom.parentNode.offsetWidth,item.hide()},unhideItem:function(item){item.show(),item.xtbHidden=!1,this.hiddenItems.remove(item)},getItemWidth:function(c){return c.hidden?c.xtbWidth||0:c.getPositionEl().dom.parentNode.offsetWidth},fitToSize:function(target){if(this.container.enableOverflow!==!1){var width=target.dom.clientWidth,tableWidth=target.dom.firstChild.offsetWidth,clipWidth=width-this.triggerWidth,lastWidth=this.lastWidth||0,hiddenItems=this.hiddenItems,hasHiddens=0!=hiddenItems.length,isLarger=width>=lastWidth;if(this.lastWidth=width,tableWidth>width||hasHiddens&&isLarger)for(var item,items=this.container.items.items,len=items.length,loopWidth=0,i=0;len>i;i++)item=items[i],item.isFill||(loopWidth+=this.getItemWidth(item),loopWidth>clipWidth?item.hidden||item.xtbHidden||this.hideItem(item):item.xtbHidden&&this.unhideItem(item));hasHiddens=0!=hiddenItems.length,hasHiddens?(this.initMore(),this.lastOverflow||(this.container.fireEvent("overflowchange",this.container,!0),this.lastOverflow=!0)):this.more&&(this.clearMenu(),this.more.destroy(),delete this.more,this.lastOverflow&&(this.container.fireEvent("overflowchange",this.container,!1),this.lastOverflow=!1))}},createMenuConfig:function(component,hideOnClick){var config=Ext.apply({},component.initialConfig),group=component.toggleGroup;return Ext.copyTo(config,component,["iconCls","icon","itemId","disabled","handler","scope","menu"]),Ext.apply(config,{text:component.overflowText||component.text,hideOnClick:hideOnClick}),(group||component.enableToggle)&&Ext.apply(config,{group:group,checked:component.pressed,listeners:{checkchange:function(item,checked){component.toggle(checked)}}}),delete config.ownerCt,delete config.xtype,delete config.id,config},addComponentToMenu:function(menu,component){component instanceof Ext.Toolbar.Separator?menu.add("-"):Ext.isFunction(component.isXType)&&(component.isXType("splitbutton")?menu.add(this.createMenuConfig(component,!0)):component.isXType("button")?menu.add(this.createMenuConfig(component,!component.menu)):component.isXType("buttongroup")&&component.items.each(function(item){this.addComponentToMenu(menu,item)},this))},clearMenu:function(){var menu=this.moreMenu;menu&&menu.items&&menu.items.each(function(item){delete item.menu})},beforeMoreShow:function(menu){var item,prev,items=this.container.items.items,len=items.length,needsSep=function(group,item){return group.isXType("buttongroup")&&!(item instanceof Ext.Toolbar.Separator)};this.clearMenu(),menu.removeAll();for(var i=0;len>i;i++)item=items[i],item.xtbHidden&&(prev&&(needsSep(item,prev)||needsSep(prev,item))&&menu.add("-"),this.addComponentToMenu(menu,item),prev=item);menu.items.length<1&&menu.add(this.noItemsMenuText)},initMore:function(){if(!this.more){this.moreMenu=new Ext.menu.Menu({ownerCt:this.container,listeners:{beforeshow:this.beforeMoreShow,scope:this}}),this.more=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.moreMenu,ownerCt:this.container});var td=this.insertCell(this.more,this.extrasTr,100);this.more.render(td)}},destroy:function(){Ext.destroy(this.more,this.moreMenu),delete this.leftTr,delete this.rightTr,delete this.extrasTr,Ext.layout.ToolbarLayout.superclass.destroy.call(this)}}),Ext.Container.LAYOUTS.toolbar=Ext.layout.ToolbarLayout,Ext.layout.MenuLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:!0,type:"menu",setContainer:function(ct){this.monitorResize=!ct.floating,ct.on("autosize",this.doAutoSize,this),Ext.layout.MenuLayout.superclass.setContainer.call(this,ct)},renderItem:function(c,position,target){if(this.itemTpl||(this.itemTpl=Ext.layout.MenuLayout.prototype.itemTpl=new Ext.XTemplate('<li id="{itemId}" class="{itemCls}">','<tpl if="needsIcon">','<img alt="{altText}" src="{icon}" class="{iconCls}"/>',"</tpl>","</li>")),c&&!c.rendered){Ext.isNumber(position)&&(position=target.dom.childNodes[position]);var a=this.getItemArgs(c);c.render(c.positionEl=position?this.itemTpl.insertBefore(position,a,!0):this.itemTpl.append(target,a,!0)),c.positionEl.menuItemId=c.getItemId(),!a.isMenuItem&&a.needsIcon&&c.positionEl.addClass("x-menu-list-item-indent"),this.configureItem(c)}else c&&!this.isValidParent(c,target)&&(Ext.isNumber(position)&&(position=target.dom.childNodes[position]),target.dom.insertBefore(c.getActionEl().dom,position||null))},getItemArgs:function(c){var isMenuItem=c instanceof Ext.menu.Item,canHaveIcon=!(isMenuItem||c instanceof Ext.menu.Separator);return{isMenuItem:isMenuItem,needsIcon:canHaveIcon&&(c.icon||c.iconCls),icon:c.icon||Ext.BLANK_IMAGE_URL,iconCls:"x-menu-item-icon "+(c.iconCls||""),itemId:"x-menu-el-"+c.id,itemCls:"x-menu-list-item ",altText:c.altText||""}},isValidParent:function(c,target){return c.el.up("li.x-menu-list-item",5).dom.parentNode===(target.dom||target)},onLayout:function(ct,target){Ext.layout.MenuLayout.superclass.onLayout.call(this,ct,target),this.doAutoSize()},doAutoSize:function(){var ct=this.container,w=ct.width;if(ct.floating)if(w)ct.setWidth(w);else if(Ext.isIE9m){ct.setWidth(Ext.isStrict&&(Ext.isIE7||Ext.isIE8||Ext.isIE9)?"auto":ct.minWidth);var el=ct.getEl();el.dom.offsetWidth;ct.setWidth(ct.getLayoutTarget().getWidth()+el.getFrameWidth("lr"))}}}),Ext.Container.LAYOUTS.menu=Ext.layout.MenuLayout,Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this),document.getElementsByTagName("html")[0].className+=" x-viewport",this.el=Ext.getBody(),this.el.setHeight=Ext.emptyFn,this.el.setWidth=Ext.emptyFn,this.el.setSize=Ext.emptyFn,this.el.dom.scroll="no",this.allowDomMove=!1,this.autoWidth=!0,this.autoHeight=!0,Ext.EventManager.onWindowResize(this.fireResize,this),this.renderTo=this.el},fireResize:function(w,h){this.fireEvent("resize",this,w,h,w,h)}}),Ext.reg("viewport",Ext.Viewport),Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:!0,animCollapse:Ext.enableFx,headerAsText:!0,buttonAlign:"right",collapsed:!1,collapseFirst:!0,minButtonWidth:75,elements:"body",preventBodyReset:!1,padding:void 0,resizeEvent:"bodyresize",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",deferHeight:!0,expandDefaults:{duration:.25},collapseDefaults:{duration:.25},initComponent:function(){Ext.Panel.superclass.initComponent.call(this),this.addEvents("bodyresize","titlechange","iconchange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate"),this.unstyled&&(this.baseCls="x-plain"),this.toolbars=[],this.tbar&&(this.elements+=",tbar",this.topToolbar=this.createToolbar(this.tbar),this.tbar=null),this.bbar&&(this.elements+=",bbar",this.bottomToolbar=this.createToolbar(this.bbar),this.bbar=null),this.header===!0?(this.elements+=",header",this.header=null):(this.headerCfg||this.title&&this.header!==!1)&&(this.elements+=",header"),(this.footerCfg||this.footer===!0)&&(this.elements+=",footer",this.footer=null),this.buttons&&(this.fbar=this.buttons,this.buttons=null),this.fbar&&this.createFbar(this.fbar),this.autoLoad&&this.on("render",this.doAutoLoad,this,{delay:10})},createFbar:function(fbar){var min=this.minButtonWidth;this.elements+=",footer",this.fbar=this.createToolbar(fbar,{buttonAlign:this.buttonAlign,toolbarCls:"x-panel-fbar",enableOverflow:!1,defaults:function(c){return{minWidth:c.minWidth||min}}}),this.fbar.items.each(function(c){c.minWidth=c.minWidth||this.minButtonWidth},this),this.buttons=this.fbar.items.items},createToolbar:function(tb,options){var result;return Ext.isArray(tb)&&(tb={items:tb}),result=tb.events?Ext.apply(tb,options):this.createComponent(Ext.apply({},tb,options),"toolbar"),this.toolbars.push(result),result},createElement:function(name,pnode){if(this[name])return void pnode.appendChild(this[name].dom);if("bwrap"===name||-1!=this.elements.indexOf(name)){if(this[name+"Cfg"])this[name]=Ext.fly(pnode).createChild(this[name+"Cfg"]);else{var el=document.createElement("div");el.className=this[name+"Cls"],this[name]=Ext.get(pnode.appendChild(el))}this[name+"CssClass"]&&this[name].addClass(this[name+"CssClass"]),this[name+"Style"]&&this[name].applyStyles(this[name+"Style"])}},onRender:function(ct,position){Ext.Panel.superclass.onRender.call(this,ct,position),this.createClasses();var bw,ts,el=this.el,d=el.dom;if(this.collapsible&&!this.hideCollapseTool&&(this.tools=this.tools?this.tools.slice(0):[],this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this})),this.tools&&(ts=this.tools,this.elements+=this.header!==!1?",header":""),this.tools={},el.addClass(this.baseCls),d.firstChild){this.header=el.down("."+this.headerCls),this.bwrap=el.down("."+this.bwrapCls);var cp=this.bwrap?this.bwrap:el;this.tbar=cp.down("."+this.tbarCls),this.body=cp.down("."+this.bodyCls),this.bbar=cp.down("."+this.bbarCls),this.footer=cp.down("."+this.footerCls),this.fromMarkup=!0}if(this.preventBodyReset===!0&&el.addClass("x-panel-reset"),this.cls&&el.addClass(this.cls),this.buttons&&(this.elements+=",footer"),this.frame){el.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls)),this.createElement("header",d.firstChild.firstChild.firstChild),this.createElement("bwrap",d),bw=this.bwrap.dom;var ml=d.childNodes[1],bl=d.childNodes[2];bw.appendChild(ml),bw.appendChild(bl);var mc=bw.firstChild.firstChild.firstChild;
this.createElement("tbar",mc),this.createElement("body",mc),this.createElement("bbar",mc),this.createElement("footer",bw.lastChild.firstChild.firstChild),this.footer||(this.bwrap.dom.lastChild.className+=" x-panel-nofooter"),this.ft=Ext.get(this.bwrap.dom.lastChild),this.mc=Ext.get(mc)}else this.createElement("header",d),this.createElement("bwrap",d),bw=this.bwrap.dom,this.createElement("tbar",bw),this.createElement("body",bw),this.createElement("bbar",bw),this.createElement("footer",bw),this.header||(this.body.addClass(this.bodyCls+"-noheader"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noheader"));Ext.isDefined(this.padding)&&this.body.setStyle("padding",this.body.addUnits(this.padding)),this.border===!1&&(this.el.addClass(this.baseCls+"-noborder"),this.body.addClass(this.bodyCls+"-noborder"),this.header&&this.header.addClass(this.headerCls+"-noborder"),this.footer&&this.footer.addClass(this.footerCls+"-noborder"),this.tbar&&this.tbar.addClass(this.tbarCls+"-noborder"),this.bbar&&this.bbar.addClass(this.bbarCls+"-noborder")),this.bodyBorder===!1&&this.body.addClass(this.bodyCls+"-noborder"),this.bwrap.enableDisplayMode("block"),this.header&&(this.header.unselectable(),this.headerAsText&&(this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</span>",this.iconCls&&this.setIconClass(this.iconCls))),this.floating&&this.makeFloating(this.floating),this.collapsible&&this.titleCollapse&&this.header&&(this.mon(this.header,"click",this.toggleCollapse,this),this.header.setStyle("cursor","pointer")),ts&&this.addTool.apply(this,ts),this.fbar&&(this.footer.addClass("x-panel-btns"),this.fbar.ownerCt=this,this.fbar.render(this.footer),this.footer.createChild({cls:"x-clear"})),this.tbar&&this.topToolbar&&(this.topToolbar.ownerCt=this,this.topToolbar.render(this.tbar)),this.bbar&&this.bottomToolbar&&(this.bottomToolbar.ownerCt=this,this.bottomToolbar.render(this.bbar))},setIconClass:function(cls){var old=this.iconCls;if(this.iconCls=cls,this.rendered&&this.header)if(this.frame)this.header.addClass("x-panel-icon"),this.header.replaceClass(old,this.iconCls);else{var hd=this.header,img=hd.child("img.x-panel-inline-icon");if(img)Ext.fly(img).replaceClass(old,this.iconCls);else{var hdspan=hd.child("span."+this.headerTextCls);hdspan&&Ext.DomHelper.insertBefore(hdspan.dom,{tag:"img",alt:"",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})}}this.fireEvent("iconchange",this,cls,old)},makeFloating:function(cfg){this.floating=!0,this.el=new Ext.Layer(Ext.apply({},cfg,{shadow:Ext.isDefined(this.shadow)?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:!1,shim:this.shim===!1?!1:void 0}),this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},getFooterToolbar:function(){return this.fbar},addButton:function(config,handler,scope){return this.fbar||this.createFbar([]),handler&&(Ext.isString(config)&&(config={text:config}),config=Ext.apply({handler:handler,scope:scope},config)),this.fbar.add(config)},addTool:function(){if(!this.rendered)return this.tools||(this.tools=[]),void Ext.each(arguments,function(arg){this.tools.push(arg)},this);if(this[this.toolTarget]){if(!this.toolTemplate){var tt=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');tt.disableFormats=!0,tt.compile(),Ext.Panel.prototype.toolTemplate=tt}for(var i=0,a=arguments,len=a.length;len>i;i++){var tc=a[i];if(!this.tools[tc.id]){var overCls="x-tool-"+tc.id+"-over",t=this.toolTemplate.insertFirst(this[this.toolTarget],tc,!0);this.tools[tc.id]=t,t.enableDisplayMode("block"),this.mon(t,"click",this.createToolHandler(t,tc,overCls,this)),tc.on&&this.mon(t,tc.on),tc.hidden&&t.hide(),tc.qtip&&(Ext.isObject(tc.qtip)?Ext.QuickTips.register(Ext.apply({target:t.id},tc.qtip)):t.dom.qtip=tc.qtip),t.addClassOnOver(overCls)}}}},onLayout:function(shallow,force){Ext.Panel.superclass.onLayout.apply(this,arguments),this.hasLayout&&this.toolbars.length>0&&(Ext.each(this.toolbars,function(tb){tb.doLayout(void 0,force)}),this.syncHeight())},syncHeight:function(){var sz,h=this.toolbarHeight,bd=this.body,lsh=this.lastSize.height;!this.autoHeight&&Ext.isDefined(lsh)&&"auto"!=lsh&&h!=this.getToolbarHeight()&&(h=Math.max(0,lsh-this.getFrameHeight()),bd.setHeight(h),sz=bd.getSize(),this.toolbarHeight=this.getToolbarHeight(),this.onBodyResize(sz.width,sz.height))},onShow:function(){return this.floating?this.el.show():void Ext.Panel.superclass.onShow.call(this)},onHide:function(){return this.floating?this.el.hide():void Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(t,tc,overCls,panel){return function(e){t.removeClass(overCls),tc.stopEvent!==!1&&e.stopEvent(),tc.handler&&tc.handler.call(tc.scope||t,e,t,panel,tc)}},afterRender:function(){this.floating&&!this.hidden&&this.el.show(),this.title&&this.setTitle(this.title),Ext.Panel.superclass.afterRender.call(this),this.collapsed&&(this.collapsed=!1,this.collapse(!1)),this.initEvents()},getKeyMap:function(){return this.keyMap||(this.keyMap=new Ext.KeyMap(this.el,this.keys)),this.keyMap},initEvents:function(){this.keys&&this.getKeyMap(),this.draggable&&this.initDraggable(),this.toolbars.length>0&&(Ext.each(this.toolbars,function(tb){tb.doLayout(),tb.on({scope:this,afterlayout:this.syncHeight,remove:this.syncHeight})},this),this.syncHeight())},initDraggable:function(){this.dd=new Ext.Panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},beforeEffect:function(anim){this.floating&&this.el.beforeAction(),anim!==!1&&this.el.addClass("x-panel-animated")},afterEffect:function(anim){this.syncShadow(),this.el.removeClass("x-panel-animated")},createEffect:function(a,cb,scope){var o={scope:scope,block:!0};return a===!0?(o.callback=cb,o):(a.callback?o.callback=function(){cb.call(scope),Ext.callback(a.callback,a.scope)}:o.callback=cb,Ext.applyIf(o,a))},collapse:function(animate){if(!this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforecollapse",this,animate)!==!1){var doAnim=animate===!0||animate!==!1&&this.animCollapse;return this.beforeEffect(doAnim),this.onCollapse(doAnim,animate),this}},onCollapse:function(doAnim,animArg){doAnim?this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(animArg||!0,this.afterCollapse,this),this.collapseDefaults)):(this[this.collapseEl].hide(this.hideMode),this.afterCollapse(!1))},afterCollapse:function(anim){this.collapsed=!0,this.el.addClass(this.collapsedCls),anim!==!1&&this[this.collapseEl].hide(this.hideMode),this.afterEffect(anim),this.cascade(function(c){c.lastSize&&(c.lastSize={width:void 0,height:void 0})}),this.fireEvent("collapse",this)},expand:function(animate){if(this.collapsed&&!this.el.hasFxBlock()&&this.fireEvent("beforeexpand",this,animate)!==!1){var doAnim=animate===!0||animate!==!1&&this.animCollapse;return this.el.removeClass(this.collapsedCls),this.beforeEffect(doAnim),this.onExpand(doAnim,animate),this}},onExpand:function(doAnim,animArg){doAnim?this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(animArg||!0,this.afterExpand,this),this.expandDefaults)):(this[this.collapseEl].show(this.hideMode),this.afterExpand(!1))},afterExpand:function(anim){this.collapsed=!1,anim!==!1&&this[this.collapseEl].show(this.hideMode),this.afterEffect(anim),this.deferLayout&&(delete this.deferLayout,this.doLayout(!0)),this.fireEvent("expand",this)},toggleCollapse:function(animate){return this[this.collapsed?"expand":"collapse"](animate),this},onDisable:function(){this.rendered&&this.maskDisabled&&this.el.mask(),Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){this.rendered&&this.maskDisabled&&this.el.unmask(),Ext.Panel.superclass.onEnable.call(this)},onResize:function(adjWidth,adjHeight,rawWidth,rawHeight){var w=adjWidth,h=adjHeight;(Ext.isDefined(w)||Ext.isDefined(h))&&(this.collapsed?(this.queuedBodySize={width:w,height:h},this.queuedExpand||this.allowQueuedExpand===!1||(this.queuedExpand=!0,this.on("expand",function(){delete this.queuedExpand,this.onResize(this.queuedBodySize.width,this.queuedBodySize.height)},this,{single:!0}))):(Ext.isNumber(w)?this.body.setWidth(w=this.adjustBodyWidth(w-this.getFrameWidth())):w="auto"==w?this.body.setWidth("auto").dom.offsetWidth:this.body.dom.offsetWidth,this.tbar&&(this.tbar.setWidth(w),this.topToolbar&&this.topToolbar.setSize(w)),this.bbar&&(this.bbar.setWidth(w),this.bottomToolbar&&(this.bottomToolbar.setSize(w),Ext.isIE9m&&(this.bbar.setStyle("position","static"),this.bbar.setStyle("position","")))),this.footer&&(this.footer.setWidth(w),this.fbar&&this.fbar.setSize(Ext.isIE9m?w-this.footer.getFrameWidth("lr"):"auto")),Ext.isNumber(h)?(h=Math.max(0,h-this.getFrameHeight()),this.body.setHeight(h)):"auto"==h&&this.body.setHeight(h),this.disabled&&this.el._mask&&this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())),this.onBodyResize(w,h)),this.syncShadow(),Ext.Panel.superclass.onResize.call(this,adjWidth,adjHeight,rawWidth,rawHeight)},onBodyResize:function(w,h){this.fireEvent("bodyresize",this,w,h)},getToolbarHeight:function(){var h=0;return this.rendered&&Ext.each(this.toolbars,function(tb){h+=tb.getHeight()},this),h},adjustBodyHeight:function(h){return h},adjustBodyWidth:function(w){return w},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var w=this.el.getFrameWidth("lr")+this.bwrap.getFrameWidth("lr");if(this.frame){var l=this.bwrap.dom.firstChild;w+=Ext.fly(l).getFrameWidth("l")+Ext.fly(l.firstChild).getFrameWidth("r"),w+=this.mc.getFrameWidth("lr")}return w},getFrameHeight:function(){var h=this.el.getFrameWidth("tb")+this.bwrap.getFrameWidth("tb");return h+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0),h+=this.frame?this.el.dom.firstChild.offsetHeight+this.ft.dom.offsetHeight+this.mc.getFrameWidth("tb"):(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0)},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.body.getHeight()},syncShadow:function(){this.floating&&this.el.sync(!0)},getLayoutTarget:function(){return this.body},getContentTarget:function(){return this.body},setTitle:function(title,iconCls){return this.title=title,this.header&&this.headerAsText&&this.header.child("span").update(title),iconCls&&this.setIconClass(iconCls),this.fireEvent("titlechange",this,title),this},getUpdater:function(){return this.body.getUpdater()},load:function(){var um=this.body.getUpdater();return um.update.apply(um,arguments),this},beforeDestroy:function(){if(Ext.Panel.superclass.beforeDestroy.call(this),this.header&&this.header.removeAllListeners(),this.tools)for(var k in this.tools)Ext.destroy(this.tools[k]);if(this.toolbars.length>0&&Ext.each(this.toolbars,function(tb){tb.un("afterlayout",this.syncHeight,this),tb.un("remove",this.syncHeight,this)},this),Ext.isArray(this.buttons))for(;this.buttons.length;)Ext.destroy(this.buttons[0]);this.rendered&&(Ext.destroy(this.ft,this.header,this.footer,this.tbar,this.bbar,this.body,this.mc,this.bwrap,this.dd),this.fbar&&Ext.destroy(this.fbar,this.fbar.el)),Ext.destroy(this.toolbars)},createClasses:function(){this.headerCls=this.baseCls+"-header",this.headerTextCls=this.baseCls+"-header-text",this.bwrapCls=this.baseCls+"-bwrap",this.tbarCls=this.baseCls+"-tbar",this.bodyCls=this.baseCls+"-body",this.bbarCls=this.baseCls+"-bbar",this.footerCls=this.baseCls+"-footer"},createGhost:function(cls,useShim,appendTo){var el=document.createElement("div");if(el.className="x-panel-ghost "+(cls?cls:""),this.header&&el.appendChild(this.el.dom.firstChild.cloneNode(!0)),Ext.fly(el.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight()),el.style.width=this.el.dom.offsetWidth+"px",appendTo?Ext.getDom(appendTo).appendChild(el):this.container.dom.appendChild(el),useShim!==!1&&this.el.useShim!==!1){var layer=new Ext.Layer({shadow:!1,useDisplay:!0,constrain:!1},el);return layer.show(),layer}return new Ext.Element(el)},doAutoLoad:function(){var u=this.body.getUpdater();this.renderer&&u.setRenderer(this.renderer),u.update(Ext.isObject(this.autoLoad)?this.autoLoad:{url:this.autoLoad})},getTool:function(id){return this.tools[id]}}),Ext.reg("panel",Ext.Panel),Ext.Editor=function(field,config){field.field?(this.field=Ext.create(field.field,"textfield"),config=Ext.apply({},field),delete config.field):this.field=field,Ext.Editor.superclass.constructor.call(this,config)},Ext.extend(Ext.Editor,Ext.Component,{allowBlur:!0,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,updateEl:!1,initComponent:function(){Ext.Editor.superclass.initComponent.call(this),this.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(ct,position){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:ct,shim:this.shim,shadowOffset:this.shadowOffset||4,id:this.id,constrain:this.constrain}),this.zIndex&&this.el.setZIndex(this.zIndex),this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden"),"title"!=this.field.msgTarget&&(this.field.msgTarget="qtip"),this.field.inEditor=!0,this.mon(this.field,{scope:this,blur:this.onBlur,specialkey:this.onSpecialKey}),this.field.grow&&this.mon(this.field,"autosize",this.el.sync,this.el,{delay:1}),this.field.render(this.el).show(),this.field.getEl().dom.name="",this.swallowKeys&&this.field.el.swallowEvent(["keypress","keydown"])},onSpecialKey:function(field,e){var key=e.getKey(),complete=this.completeOnEnter&&key==e.ENTER,cancel=this.cancelOnEsc&&key==e.ESC;(complete||cancel)&&(e.stopEvent(),complete?this.completeEdit():this.cancelEdit(),field.triggerBlur&&field.triggerBlur()),this.fireEvent("specialkey",field,e)},startEdit:function(el,value){this.editing&&this.completeEdit(),this.boundEl=Ext.get(el);var v=void 0!==value?value:this.boundEl.dom.innerHTML;this.rendered||this.render(this.parentEl||document.body),this.fireEvent("beforestartedit",this,this.boundEl,v)!==!1&&(this.startValue=v,this.field.reset(),this.field.setValue(v),this.realign(!0),this.editing=!0,this.show())},doAutoSize:function(){if(this.autoSize){var sz=this.boundEl.getSize(),fs=this.field.getSize();switch(this.autoSize){case"width":this.setSize(sz.width,fs.height);break;case"height":this.setSize(fs.width,sz.height);break;case"none":this.setSize(fs.width,fs.height);break;default:this.setSize(sz.width,sz.height)}}},setSize:function(w,h){delete this.field.lastSize,this.field.setSize(w,h),this.el&&((Ext.isGecko2||Ext.isOpera||Ext.isIE7&&Ext.isStrict)&&this.el.setSize(w,h),this.el.sync())},realign:function(autoSize){autoSize===!0&&this.doAutoSize(),this.el.alignTo(this.boundEl,this.alignment,this.offsets)},completeEdit:function(remainVisible){if(this.editing){this.field.assertValue&&this.field.assertValue();var v=this.getValue();return this.field.isValid()?String(v)===String(this.startValue)&&this.ignoreNoChange?void this.hideEdit(remainVisible):void(this.fireEvent("beforecomplete",this,v,this.startValue)!==!1&&(v=this.getValue(),this.updateEl&&this.boundEl&&this.boundEl.update(v),this.hideEdit(remainVisible),this.fireEvent("complete",this,v,this.startValue))):void(this.revertInvalid!==!1&&this.cancelEdit(remainVisible))}},onShow:function(){this.el.show(),this.hideEl!==!1&&this.boundEl.hide(),this.field.show().focus(!1,!0),this.fireEvent("startedit",this.boundEl,this.startValue)},cancelEdit:function(remainVisible){if(this.editing){var v=this.getValue();this.setValue(this.startValue),this.hideEdit(remainVisible),this.fireEvent("canceledit",this,v,this.startValue)}},hideEdit:function(remainVisible){remainVisible!==!0&&(this.editing=!1,this.hide())},onBlur:function(){this.allowBlur===!0&&this.editing&&this.selectSameEditor!==!0&&this.completeEdit()},onHide:function(){return this.editing?void this.completeEdit():(this.field.blur(),this.field.collapse&&this.field.collapse(),this.el.hide(),void(this.hideEl!==!1&&this.boundEl.show()))},setValue:function(v){this.field.setValue(v)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroyMembers(this,"field"),delete this.parentEl,delete this.boundEl}}),Ext.reg("editor",Ext.Editor),Ext.ColorPalette=Ext.extend(Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:!1,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],initComponent:function(){Ext.ColorPalette.superclass.initComponent.call(this),this.addEvents("select"),this.handler&&this.on("select",this.handler,this.scope,!0)},onRender:function(container,position){this.autoEl={tag:"div",cls:this.itemCls},Ext.ColorPalette.superclass.onRender.call(this,container,position);var t=this.tpl||new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" class="x-unselectable" unselectable="on">&#160;</span></em></a></tpl>');t.overwrite(this.el,this.colors),this.mon(this.el,this.clickEvent,this.handleClick,this,{delegate:"a"}),"click"!=this.clickEvent&&this.mon(this.el,"click",Ext.emptyFn,this,{delegate:"a",preventDefault:!0})},afterRender:function(){if(Ext.ColorPalette.superclass.afterRender.call(this),this.value){var s=this.value;this.value=null,this.select(s,!0)}},handleClick:function(e,t){if(e.preventDefault(),!this.disabled){var c=t.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(c.toUpperCase())}},select:function(color,suppressEvent){if(color=color.replace("#",""),color!=this.value||this.allowReselect){var el=this.el;this.value&&el.child("a.color-"+this.value).removeClass("x-color-palette-sel"),el.child("a.color-"+color).addClass("x-color-palette-sel"),this.value=color,suppressEvent!==!0&&this.fireEvent("select",this,color)}}}),Ext.reg("colorpalette",Ext.ColorPalette),Ext.DatePicker=Ext.extend(Ext.BoxComponent,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:!0,focusOnSelect:!0,initHour:12,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this),this.value=this.value?this.value.clearTime(!0):(new Date).clearTime(),this.addEvents("select"),this.handler&&this.on("select",this.handler,this.scope||this),this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var dd=this.disabledDates,len=dd.length-1,re="(?:";Ext.each(dd,function(d,i){re+=Ext.isDate(d)?"^"+Ext.escapeRe(d.dateFormat(this.format))+"$":dd[i],i!=len&&(re+="|")},this),this.disabledDatesRE=new RegExp(re+")")}},setDisabledDates:function(dd){Ext.isArray(dd)?(this.disabledDates=dd,this.disabledDatesRE=null):this.disabledDatesRE=dd,this.initDisabledDays(),this.update(this.value,!0)},setDisabledDays:function(dd){this.disabledDays=dd,this.update(this.value,!0)},setMinDate:function(dt){this.minDate=dt,this.update(this.value,!0)},setMaxDate:function(dt){this.maxDate=dt,this.update(this.value,!0)},setValue:function(value){this.value=value.clearTime(!0),this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(initial){Ext.DatePicker.superclass.onEnable.call(this),this.doDisabled(!1),this.update(initial?this.value:this.activeDate),Ext.isIE9m&&this.el.repaint()},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this),this.doDisabled(!0),Ext.isIE9m&&!Ext.isIE8&&Ext.each([].concat(this.textNodes,this.el.query("th span")),function(el){Ext.fly(el).repaint()})},doDisabled:function(disabled){this.keyNav.setDisabled(disabled),this.prevRepeater.setDisabled(disabled),this.nextRepeater.setDisabled(disabled),this.showToday&&(this.todayKeyListener.setDisabled(disabled),this.todayBtn.setDisabled(disabled))},onRender:function(container,position){var i,m=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;</a></td><td class="x-date-middle" align="center"></td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;</a></td></tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'],dn=this.dayNames;for(i=0;7>i;i++){var d=this.startDay+i;d>6&&(d-=7),m.push("<th><span>",dn[d].substr(0,1),"</span></th>")}for(m[m.length]="</tr></thead><tbody><tr>",i=0;42>i;i++)i%7===0&&0!==i&&(m[m.length]="</tr><tr>"),m[m.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>';m.push("</tr></tbody></table></td></tr>",this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'</table><div class="x-date-mp"></div>');var el=document.createElement("div");if(el.className="x-date-picker",el.innerHTML=m.join(""),container.dom.insertBefore(el,position),this.el=Ext.get(el),this.eventEl=Ext.get(el.firstChild),this.prevRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:!0,stopDefault:!0}),this.nextRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:!0,stopDefault:!0}),this.monthPicker=this.el.down("div.x-date-mp"),this.monthPicker.enableDisplayMode("block"),this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(e){e.ctrlKey?this.showPrevMonth():this.update(this.activeDate.add("d",-1))},right:function(e){e.ctrlKey?this.showNextMonth():this.update(this.activeDate.add("d",1))},up:function(e){e.ctrlKey?this.showNextYear():this.update(this.activeDate.add("d",-7))},down:function(e){e.ctrlKey?this.showPrevYear():this.update(this.activeDate.add("d",7))},pageUp:function(e){this.showNextMonth()},pageDown:function(e){this.showPrevMonth()},enter:function(e){return e.stopPropagation(),!0},scope:this}),this.el.unselectable(),this.cells=this.el.select("table.x-date-inner tbody td"),this.textNodes=this.el.query("table.x-date-inner tbody span"),this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",!0)}),this.mbtn.el.child("em").addClass("x-btn-arrow"),this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);var today=(new Date).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",!0),text:String.format(this.todayText,today),tooltip:String.format(this.todayTip,today),handler:this.selectToday,scope:this})}this.mon(this.eventEl,"mousewheel",this.handleMouseWheel,this),this.mon(this.eventEl,"click",this.handleDateClick,this,{delegate:"a.x-date-date"}),this.mon(this.mbtn,"click",this.showMonthPicker,this),this.onEnable(!0)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){for(var buf=['<table border="0" cellspacing="0">'],i=0;6>i;i++)buf.push('<tr><td class="x-date-mp-month"><a href="#">',Date.getShortMonthName(i),"</a></td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',Date.getShortMonthName(i+6),"</a></td>",0===i?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"></a></td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"></a></td></tr>':'<td class="x-date-mp-year"><a href="#"></a></td><td class="x-date-mp-year"><a href="#"></a></td></tr>');buf.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'</button><button type="button" class="x-date-mp-cancel">',this.cancelText,"</button></td></tr>","</table>"),this.monthPicker.update(buf.join("")),this.mon(this.monthPicker,"click",this.onMonthClick,this),this.mon(this.monthPicker,"dblclick",this.onMonthDblClick,this),this.mpMonths=this.monthPicker.select("td.x-date-mp-month"),this.mpYears=this.monthPicker.select("td.x-date-mp-year"),this.mpMonths.each(function(m,a,i){i+=1,i%2===0?m.dom.xmonth=5+Math.round(.5*i):m.dom.xmonth=Math.round(.5*(i-1))})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var size=this.el.getSize();this.monthPicker.setSize(size),this.monthPicker.child("table").setSize(size),this.mpSelMonth=(this.activeDate||this.value).getMonth(),this.updateMPMonth(this.mpSelMonth),this.mpSelYear=(this.activeDate||this.value).getFullYear(),this.updateMPYear(this.mpSelYear),this.monthPicker.slideIn("t",{duration:.2})}},updateMPYear:function(y){this.mpyear=y;for(var ys=this.mpYears.elements,i=1;10>=i;i++){var y2,td=ys[i-1];i%2===0?(y2=y+Math.round(.5*i),td.firstChild.innerHTML=y2,td.xyear=y2):(y2=y-(5-Math.round(.5*i)),td.firstChild.innerHTML=y2,td.xyear=y2),this.mpYears.item(i-1)[y2==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")}},updateMPMonth:function(sm){this.mpMonths.each(function(m,a,i){m[m.dom.xmonth==sm?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(m){},onMonthClick:function(e,t){e.stopEvent();var pn,el=new Ext.Element(t);if(el.is("button.x-date-mp-cancel"))this.hideMonthPicker();else if(el.is("button.x-date-mp-ok")){var d=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());d.getMonth()!=this.mpSelMonth&&(d=new Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth()),this.update(d),this.hideMonthPicker()}else(pn=el.up("td.x-date-mp-month",2))?(this.mpMonths.removeClass("x-date-mp-sel"),pn.addClass("x-date-mp-sel"),this.mpSelMonth=pn.dom.xmonth):(pn=el.up("td.x-date-mp-year",2))?(this.mpYears.removeClass("x-date-mp-sel"),pn.addClass("x-date-mp-sel"),this.mpSelYear=pn.dom.xyear):el.is("a.x-date-mp-prev")?this.updateMPYear(this.mpyear-10):el.is("a.x-date-mp-next")&&this.updateMPYear(this.mpyear+10)},onMonthDblClick:function(e,t){e.stopEvent();var pn,el=new Ext.Element(t);(pn=el.up("td.x-date-mp-month",2))?(this.update(new Date(this.mpSelYear,pn.dom.xmonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker()):(pn=el.up("td.x-date-mp-year",2))&&(this.update(new Date(pn.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate())),this.hideMonthPicker())},hideMonthPicker:function(disableAnim){this.monthPicker&&(disableAnim===!0?this.monthPicker.hide():this.monthPicker.slideOut("t",{duration:.2}))},showPrevMonth:function(e){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(e){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(e){if(e.stopEvent(),!this.disabled){var delta=e.getWheelDelta();delta>0?this.showPrevMonth():0>delta&&this.showNextMonth()}},handleDateClick:function(e,t){e.stopEvent(),this.disabled||!t.dateValue||Ext.fly(t.parentNode).hasClass("x-date-disabled")||(this.cancelFocus=this.focusOnSelect===!1,this.setValue(new Date(t.dateValue)),delete this.cancelFocus,this.fireEvent("select",this,this.value))},selectToday:function(){this.todayBtn&&!this.todayBtn.disabled&&(this.setValue((new Date).clearTime()),this.fireEvent("select",this,this.value))},update:function(date,forceRefresh){if(this.rendered){var vd=this.activeDate,vis=this.isVisible();if(this.activeDate=date,!forceRefresh&&vd&&this.el){var t=date.getTime();if(vd.getMonth()==date.getMonth()&&vd.getFullYear()==date.getFullYear())return this.cells.removeClass("x-date-selected"),void this.cells.each(function(c){return c.dom.firstChild.dateValue==t?(c.addClass("x-date-selected"),vis&&!this.cancelFocus&&Ext.fly(c.dom.firstChild).focus(50),!1):void 0},this)}var days=date.getDaysInMonth(),firstOfMonth=date.getFirstDateOfMonth(),startingPos=firstOfMonth.getDay()-this.startDay;0>startingPos&&(startingPos+=7),days+=startingPos;var pm=date.add("mo",-1),prevStart=pm.getDaysInMonth()-startingPos,cells=this.cells.elements,textEls=this.textNodes,d=new Date(pm.getFullYear(),pm.getMonth(),prevStart,this.initHour),today=(new Date).clearTime().getTime(),sel=date.clearTime(!0).getTime(),min=this.minDate?this.minDate.clearTime(!0):Number.NEGATIVE_INFINITY,max=this.maxDate?this.maxDate.clearTime(!0):Number.POSITIVE_INFINITY,ddMatch=this.disabledDatesRE,ddText=this.disabledDatesText,ddays=this.disabledDays?this.disabledDays.join(""):!1,ddaysText=this.disabledDaysText,format=this.format;if(this.showToday){var td=(new Date).clearTime(),disable=min>td||td>max||ddMatch&&format&&ddMatch.test(td.dateFormat(format))||ddays&&-1!=ddays.indexOf(td.getDay());this.disabled||(this.todayBtn.setDisabled(disable),this.todayKeyListener[disable?"disable":"enable"]())}for(var setCellClass=function(cal,cell){cell.title="";var t=d.clearTime(!0).getTime();if(cell.firstChild.dateValue=t,t==today&&(cell.className+=" x-date-today",cell.title=cal.todayText),t==sel&&(cell.className+=" x-date-selected",vis&&Ext.fly(cell.firstChild).focus(50)),min>t)return cell.className=" x-date-disabled",void(cell.title=cal.minText);if(t>max)return cell.className=" x-date-disabled",void(cell.title=cal.maxText);if(ddays&&-1!=ddays.indexOf(d.getDay())&&(cell.title=ddaysText,cell.className=" x-date-disabled"),ddMatch&&format){var fvalue=d.dateFormat(format);ddMatch.test(fvalue)&&(cell.title=ddText.replace("%0",fvalue),cell.className=" x-date-disabled")}},i=0;startingPos>i;i++)textEls[i].innerHTML=++prevStart,d.setDate(d.getDate()+1),cells[i].className="x-date-prevday",setCellClass(this,cells[i]);for(;days>i;i++){var intDay=i-startingPos+1;textEls[i].innerHTML=intDay,d.setDate(d.getDate()+1),cells[i].className="x-date-active",setCellClass(this,cells[i])}for(var extraDays=0;42>i;i++)textEls[i].innerHTML=++extraDays,d.setDate(d.getDate()+1),cells[i].className="x-date-nextday",setCellClass(this,cells[i]);if(this.mbtn.setText(this.monthNames[date.getMonth()]+" "+date.getFullYear()),!this.internalRender){var main=this.el.dom.firstChild,w=main.offsetWidth;this.el.setWidth(w+this.el.getBorderWidth("lr")),Ext.fly(main).setWidth(w),this.internalRender=!0,Ext.isOpera&&!this.secondPass&&(main.rows[0].cells[1].style.width=w-(main.rows[0].cells[0].offsetWidth+main.rows[0].cells[2].offsetWidth)+"px",this.secondPass=!0,this.update.defer(10,this,[date]))}}},beforeDestroy:function(){this.rendered&&(Ext.destroy(this.keyNav,this.monthPicker,this.eventEl,this.mbtn,this.nextRepeater,this.prevRepeater,this.cells.el,this.todayBtn),delete this.textNodes,delete this.cells.elements)}}),Ext.reg("datepicker",Ext.DatePicker),Ext.LoadMask=function(el,config){if(this.el=Ext.get(el),Ext.apply(this,config),this.store)this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad}),this.removeMask=Ext.value(this.removeMask,!1);else{var um=this.el.getUpdater();um.showLoadIndicator=!1,um.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad}),this.removeMask=Ext.value(this.removeMask,!0)}},Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:!1,disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){this.disabled||this.el.mask(this.msg,this.msgCls)},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store)this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.onLoad,this);else{var um=this.el.getUpdater();um.un("beforeupdate",this.onBeforeLoad,this),um.un("update",this.onLoad,this),um.un("failure",this.onLoad,this)}}},Ext.slider.Thumb=Ext.extend(Object,{dragging:!1,constructor:function(config){Ext.apply(this,config||{},{cls:"x-slider-thumb",constrain:!1}),Ext.slider.Thumb.superclass.constructor.call(this,config),
this.slider.vertical&&Ext.apply(this,Ext.slider.Thumb.Vertical)},render:function(){this.el=this.slider.innerEl.insertFirst({cls:this.cls}),this.initEvents()},enable:function(){this.disabled=!1,this.el.removeClass(this.slider.disabledClass)},disable:function(){this.disabled=!0,this.el.addClass(this.slider.disabledClass)},initEvents:function(){var el=this.el;el.addClassOnOver("x-slider-thumb-over"),this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300}),this.tracker.initEl(el)},onBeforeDragStart:function(e){return this.disabled?!1:(this.slider.promoteThumb(this),!0)},onDragStart:function(e){this.el.addClass("x-slider-thumb-drag"),this.dragging=!0,this.dragStartValue=this.value,this.slider.fireEvent("dragstart",this.slider,e,this)},onDrag:function(e){var slider=this.slider,index=this.index,newValue=this.getNewValue();if(this.constrain){var above=slider.thumbs[index+1],below=slider.thumbs[index-1];void 0!=below&&newValue<=below.value&&(newValue=below.value),void 0!=above&&newValue>=above.value&&(newValue=above.value)}slider.setValue(index,newValue,!1),slider.fireEvent("drag",slider,e,this)},getNewValue:function(){var slider=this.slider,pos=slider.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(slider.reverseValue(pos.left),slider.decimalPrecision)},onDragEnd:function(e){var slider=this.slider,value=this.value;this.el.removeClass("x-slider-thumb-drag"),this.dragging=!1,slider.fireEvent("dragend",slider,e),this.dragStartValue!=value&&slider.fireEvent("changecomplete",slider,value,this)},destroy:function(){Ext.destroyMembers(this,"tracker","el")}}),Ext.slider.MultiSlider=Ext.extend(Ext.BoxComponent,{vertical:!1,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:!0,animate:!0,constrainThumbs:!0,topThumbZIndex:1e4,initComponent:function(){Ext.isDefined(this.value)||(this.value=this.minValue),this.thumbs=[],Ext.slider.MultiSlider.superclass.initComponent.call(this),this.keyIncrement=Math.max(this.increment,this.keyIncrement),this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend"),(void 0==this.values||Ext.isEmpty(this.values))&&(this.values=[0]);for(var values=this.values,i=0;i<values.length;i++)this.addThumb(values[i]);this.vertical&&Ext.apply(this,Ext.slider.Vertical)},addThumb:function(value){var thumb=new Ext.slider.Thumb({value:value,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs});this.thumbs.push(thumb),this.rendered&&thumb.render()},promoteThumb:function(topThumb){for(var zIndex,thumb,thumbs=this.thumbs,i=0,j=thumbs.length;j>i;i++)thumb=thumbs[i],zIndex=thumb==topThumb?this.topThumbZIndex:"",thumb.el.setStyle("zIndex",zIndex)},onRender:function(){this.autoEl={cls:"x-slider "+(this.vertical?"x-slider-vert":"x-slider-horz"),cn:{cls:"x-slider-end",cn:{cls:"x-slider-inner",cn:[{tag:"a",cls:"x-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"}]}}},Ext.slider.MultiSlider.superclass.onRender.apply(this,arguments),this.endEl=this.el.first(),this.innerEl=this.endEl.first(),this.focusEl=this.innerEl.child(".x-slider-focus");for(var i=0;i<this.thumbs.length;i++)this.thumbs[i].render();var thumb=this.innerEl.child(".x-slider-thumb");this.halfThumb=(this.vertical?thumb.getHeight():thumb.getWidth())/2,this.initEvents()},initEvents:function(){this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown}),this.focusEl.swallowEvent("click",!0)},onMouseDown:function(e){if(!this.disabled){for(var thumbClicked=!1,i=0;i<this.thumbs.length;i++)thumbClicked=thumbClicked||e.target==this.thumbs[i].el.dom;if(this.clickToChange&&!thumbClicked){var local=this.innerEl.translatePoints(e.getXY());this.onClickChange(local)}this.focus()}},onClickChange:function(local){if(local.top>this.clickRange[0]&&local.top<this.clickRange[1]){var thumb=this.getNearest(local,"left"),index=thumb.index;this.setValue(index,Ext.util.Format.round(this.reverseValue(local.left),this.decimalPrecision),void 0,!0)}},getNearest:function(local,prop){for(var localValue="top"==prop?this.innerEl.getHeight()-local[prop]:local[prop],clickValue=this.reverseValue(localValue),nearestDistance=this.maxValue-this.minValue+5,index=0,nearest=null,i=0;i<this.thumbs.length;i++){var thumb=this.thumbs[i],value=thumb.value,dist=Math.abs(value-clickValue);Math.abs(nearestDistance>=dist)&&(nearest=thumb,index=i,nearestDistance=dist)}return nearest},onKeyDown:function(e){if(this.disabled||1!==this.thumbs.length)return void e.preventDefault();var val,k=e.getKey();switch(k){case e.UP:case e.RIGHT:e.stopEvent(),val=e.ctrlKey?this.maxValue:this.getValue(0)+this.keyIncrement,this.setValue(0,val,void 0,!0);break;case e.DOWN:case e.LEFT:e.stopEvent(),val=e.ctrlKey?this.minValue:this.getValue(0)-this.keyIncrement,this.setValue(0,val,void 0,!0);break;default:e.preventDefault()}},doSnap:function(value){if(!this.increment||!value)return value;var newValue=value,inc=this.increment,m=value%inc;return 0!=m&&(newValue-=m,2*m>=inc?newValue+=inc:-inc>2*m&&(newValue-=inc)),newValue.constrain(this.minValue,this.maxValue)},afterRender:function(){Ext.slider.MultiSlider.superclass.afterRender.apply(this,arguments);for(var i=0;i<this.thumbs.length;i++){var thumb=this.thumbs[i];if(void 0!==thumb.value){var v=this.normalizeValue(thumb.value);v!==thumb.value?this.setValue(i,v,!1):this.moveThumb(i,this.translateValue(v),!1)}}},getRatio:function(){var w=this.innerEl.getWidth(),v=this.maxValue-this.minValue;return 0==v?w:w/v},normalizeValue:function(v){return v=this.doSnap(v),v=Ext.util.Format.round(v,this.decimalPrecision),v=v.constrain(this.minValue,this.maxValue)},setMinValue:function(val){this.minValue=val;for(var t,i=0,thumbs=this.thumbs,len=thumbs.length;len>i;++i)t=thumbs[i],t.value=t.value<val?val:t.value;this.syncThumb()},setMaxValue:function(val){this.maxValue=val;for(var t,i=0,thumbs=this.thumbs,len=thumbs.length;len>i;++i)t=thumbs[i],t.value=t.value>val?val:t.value;this.syncThumb()},setValue:function(index,v,animate,changeComplete){var thumb=this.thumbs[index];thumb.el;v=this.normalizeValue(v),v!==thumb.value&&this.fireEvent("beforechange",this,v,thumb.value,thumb)!==!1&&(thumb.value=v,this.rendered&&(this.moveThumb(index,this.translateValue(v),animate!==!1),this.fireEvent("change",this,v,thumb),changeComplete&&this.fireEvent("changecomplete",this,v,thumb)))},translateValue:function(v){var ratio=this.getRatio();return v*ratio-this.minValue*ratio-this.halfThumb},reverseValue:function(pos){var ratio=this.getRatio();return(pos+this.minValue*ratio)/ratio},moveThumb:function(index,v,animate){var thumb=this.thumbs[index].el;animate&&this.animate!==!1?thumb.shift({left:v,stopFx:!0,duration:.35}):thumb.setLeft(v)},focus:function(){this.focusEl.focus(10)},onResize:function(w,h){for(var thumbs=this.thumbs,len=thumbs.length,i=0;len>i;++i)thumbs[i].el.stopFx();Ext.isNumber(w)&&this.innerEl.setWidth(w-(this.el.getPadding("l")+this.endEl.getPadding("r"))),this.syncThumb(),Ext.slider.MultiSlider.superclass.onResize.apply(this,arguments)},onDisable:function(){Ext.slider.MultiSlider.superclass.onDisable.call(this);for(var i=0;i<this.thumbs.length;i++){var thumb=this.thumbs[i],el=thumb.el;if(thumb.disable(),Ext.isIE){var xy=el.getXY();el.hide(),this.innerEl.addClass(this.disabledClass).dom.disabled=!0,this.thumbHolder||(this.thumbHolder=this.endEl.createChild({cls:"x-slider-thumb "+this.disabledClass})),this.thumbHolder.show().setXY(xy)}}},onEnable:function(){Ext.slider.MultiSlider.superclass.onEnable.call(this);for(var i=0;i<this.thumbs.length;i++){var thumb=this.thumbs[i],el=thumb.el;thumb.enable(),Ext.isIE&&(this.innerEl.removeClass(this.disabledClass).dom.disabled=!1,this.thumbHolder&&this.thumbHolder.hide(),el.show(),this.syncThumb())}},syncThumb:function(){if(this.rendered)for(var i=0;i<this.thumbs.length;i++)this.moveThumb(i,this.translateValue(this.thumbs[i].value))},getValue:function(index){return this.thumbs[index].value},getValues:function(){for(var values=[],i=0;i<this.thumbs.length;i++)values.push(this.thumbs[i].value);return values},beforeDestroy:function(){for(var thumbs=this.thumbs,i=0,len=thumbs.length;len>i;++i)thumbs[i].destroy(),thumbs[i]=null;Ext.destroyMembers(this,"endEl","innerEl","focusEl","thumbHolder"),Ext.slider.MultiSlider.superclass.beforeDestroy.call(this)}}),Ext.reg("multislider",Ext.slider.MultiSlider),Ext.slider.SingleSlider=Ext.extend(Ext.slider.MultiSlider,{constructor:function(config){config=config||{},Ext.applyIf(config,{values:[config.value||0]}),Ext.slider.SingleSlider.superclass.constructor.call(this,config)},getValue:function(){return Ext.slider.SingleSlider.superclass.getValue.call(this,0)},setValue:function(value,animate){var args=Ext.toArray(arguments),len=args.length;return(1==len||3>=len&&"number"!=typeof arguments[1])&&args.unshift(0),Ext.slider.SingleSlider.superclass.setValue.apply(this,args)},syncThumb:function(){return Ext.slider.SingleSlider.superclass.syncThumb.apply(this,[0].concat(arguments))},getNearest:function(){return this.thumbs[0]}}),Ext.Slider=Ext.slider.SingleSlider,Ext.reg("slider",Ext.slider.SingleSlider),Ext.slider.Vertical={onResize:function(w,h){this.innerEl.setHeight(h-(this.el.getPadding("t")+this.endEl.getPadding("b"))),this.syncThumb()},getRatio:function(){var h=this.innerEl.getHeight(),v=this.maxValue-this.minValue;return h/v},moveThumb:function(index,v,animate){var thumb=this.thumbs[index],el=thumb.el;animate&&this.animate!==!1?el.shift({bottom:v,stopFx:!0,duration:.35}):el.setBottom(v)},onClickChange:function(local){if(local.left>this.clickRange[0]&&local.left<this.clickRange[1]){var thumb=this.getNearest(local,"top"),index=thumb.index,value=this.minValue+this.reverseValue(this.innerEl.getHeight()-local.top);this.setValue(index,Ext.util.Format.round(value,this.decimalPrecision),void 0,!0)}}},Ext.slider.Thumb.Vertical={getNewValue:function(){var slider=this.slider,innerEl=slider.innerEl,pos=innerEl.translatePoints(this.tracker.getXY()),bottom=innerEl.getHeight()-pos.top;return slider.minValue+Ext.util.Format.round(bottom/slider.getRatio(),slider.decimalPrecision)}},Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",animate:!1,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this),this.addEvents("update")},onRender:function(ct,position){var tpl=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;</div>","</div>","</div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;</div>","</div>","</div>","</div>");this.el=position?tpl.insertBefore(position,{cls:this.baseCls},!0):tpl.append(ct,{cls:this.baseCls},!0),this.id&&(this.el.dom.id=this.id);var inner=this.el.dom.firstChild;if(this.progressBar=Ext.get(inner.firstChild),this.textEl)this.textEl=Ext.get(this.textEl),delete this.textTopEl;else{this.textTopEl=Ext.get(this.progressBar.dom.firstChild);var textBackEl=Ext.get(inner.childNodes[1]);this.textTopEl.setStyle("z-index",99).addClass("x-hidden"),this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,textBackEl.dom.firstChild]),this.textEl.setWidth(inner.offsetWidth)}this.progressBar.setHeight(inner.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this),this.value?this.updateProgress(this.value,this.text):this.updateText(this.text)},updateProgress:function(value,text,animate){if(this.value=value||0,text&&this.updateText(text),this.rendered&&!this.isDestroyed){var w=Math.floor(value*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(w,animate===!0||animate!==!1&&this.animate),this.textTopEl&&this.textTopEl.removeClass("x-hidden").setWidth(w)}return this.fireEvent("update",this,value,text),this},wait:function(o){if(!this.waitTimer){var scope=this;o=o||{},this.updateText(o.text),this.waitTimer=Ext.TaskMgr.start({run:function(i){var inc=o.increment||10;i-=1,this.updateProgress(((i+inc)%inc+1)*(100/inc)*.01,null,o.animate)},interval:o.interval||1e3,duration:o.duration,onStop:function(){o.fn&&o.fn.apply(o.scope||this),this.reset()},scope:scope})}return this},isWaiting:function(){return null!==this.waitTimer},updateText:function(text){return this.text=text||"&#160;",this.rendered&&this.textEl.update(this.text),this},syncProgressBar:function(){return this.value&&this.updateProgress(this.value,this.text),this},setSize:function(w,h){if(Ext.ProgressBar.superclass.setSize.call(this,w,h),this.textTopEl){var inner=this.el.dom.firstChild;this.textEl.setSize(inner.offsetWidth,inner.offsetHeight)}return this.syncProgressBar(),this},reset:function(hide){return this.updateProgress(0),this.textTopEl&&this.textTopEl.addClass("x-hidden"),this.clearTimer(),hide===!0&&this.hide(),this},clearTimer:function(){this.waitTimer&&(this.waitTimer.onStop=null,Ext.TaskMgr.stop(this.waitTimer),this.waitTimer=null)},onDestroy:function(){this.clearTimer(),this.rendered&&(this.textEl.isComposite&&this.textEl.clear(),Ext.destroyMembers(this,"textEl","progressBar","textTopEl")),Ext.ProgressBar.superclass.onDestroy.call(this)}}),Ext.reg("progress",Ext.ProgressBar),function(){var Event=Ext.EventManager,Dom=Ext.lib.Dom;Ext.dd.DragDrop=function(id,sGroup,config){id&&this.init(id,sGroup,config)},Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:!1,lock:function(){this.locked=!0},moveOnly:!1,unlock:function(){this.locked=!1},isTarget:!0,padding:null,_domRef:null,__ygDragDrop:!0,constrainX:!1,constrainY:!1,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:!1,xTicks:null,yTicks:null,primaryButtonOnly:!0,available:!1,hasOuterHandles:!1,b4StartDrag:function(x,y){},startDrag:function(x,y){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,id){},b4DragOver:function(e){},onDragOver:function(e,id){},b4DragOut:function(e){},onDragOut:function(e,id){},b4DragDrop:function(e){},onDragDrop:function(e,id){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(constrainTo,pad,inContent){Ext.isNumber(pad)&&(pad={left:pad,right:pad,top:pad,bottom:pad}),pad=pad||this.defaultPadding;var c,b=Ext.get(this.getEl()).getBox(),ce=Ext.get(constrainTo),s=ce.getScroll(),cd=ce.dom;if(cd==document.body)c={x:s.left,y:s.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()};else{var xy=ce.getXY();c={x:xy[0],y:xy[1],width:cd.clientWidth,height:cd.clientHeight}}var topSpace=b.y-c.y,leftSpace=b.x-c.x;this.resetConstraints(),this.setXConstraint(leftSpace-(pad.left||0),c.width-leftSpace-b.width-(pad.right||0),this.xTickSize),this.setYConstraint(topSpace-(pad.top||0),c.height-topSpace-b.height-(pad.bottom||0),this.yTickSize)},getEl:function(){return this._domRef||(this._domRef=Ext.getDom(this.id)),this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(id,sGroup,config){this.initTarget(id,sGroup,config),Event.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(id,sGroup,config){this.config=config||{},this.DDM=Ext.dd.DDM,this.groups={},"string"!=typeof id&&(id=Ext.id(id)),this.id=id,this.addToGroup(sGroup?sGroup:"default"),this.handleElId=id,this.setDragElId(id),this.invalidHandleTypes={A:"A"},this.invalidHandleIds={},this.invalidHandleClasses=[],this.applyConfig(),this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0],this.isTarget=this.config.isTarget!==!1,this.maintainOffset=this.config.maintainOffset,this.primaryButtonOnly=this.config.primaryButtonOnly!==!1},handleOnAvailable:function(){this.available=!0,this.resetConstraints(),this.onAvailable()},setPadding:function(iTop,iRight,iBot,iLeft){iRight||0===iRight?iBot||0===iBot?this.padding=[iTop,iRight,iBot,iLeft]:this.padding=[iTop,iRight,iTop,iRight]:this.padding=[iTop,iTop,iTop,iTop]},setInitPosition:function(diffX,diffY){var el=this.getEl();if(this.DDM.verifyEl(el)){var dx=diffX||0,dy=diffY||0,p=Dom.getXY(el);this.initPageX=p[0]-dx,this.initPageY=p[1]-dy,this.lastPageX=p[0],this.lastPageY=p[1],this.setStartPosition(p)}},setStartPosition:function(pos){var p=pos||Dom.getXY(this.getEl());this.deltaSetXY=null,this.startPageX=p[0],this.startPageY=p[1]},addToGroup:function(sGroup){this.groups[sGroup]=!0,this.DDM.regDragDrop(this,sGroup)},removeFromGroup:function(sGroup){this.groups[sGroup]&&delete this.groups[sGroup],this.DDM.removeDDFromGroup(this,sGroup)},setDragElId:function(id){this.dragElId=id},setHandleElId:function(id){"string"!=typeof id&&(id=Ext.id(id)),this.handleElId=id,this.DDM.regHandle(this.id,id)},setOuterHandleElId:function(id){"string"!=typeof id&&(id=Ext.id(id)),Event.on(id,"mousedown",this.handleMouseDown,this),this.setHandleElId(id),this.hasOuterHandles=!0},unreg:function(){Event.un(this.id,"mousedown",this.handleMouseDown),this._domRef=null,this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return this.DDM.isLocked()||this.locked},handleMouseDown:function(e,oDD){if(!(this.primaryButtonOnly&&0!=e.button||this.isLocked())){this.DDM.refreshCache(this.groups);var pt=new Ext.lib.Point(Ext.lib.Event.getPageX(e),Ext.lib.Event.getPageY(e));(this.hasOuterHandles||this.DDM.isOverTarget(pt,this))&&this.clickValidator(e)&&(this.setStartPosition(),this.b4MouseDown(e),this.onMouseDown(e),this.DDM.handleMouseDown(e,this),this.preventDefault||this.stopPropagation?(this.preventDefault&&e.preventDefault(),this.stopPropagation&&e.stopPropagation()):this.DDM.stopEvent(e))}},clickValidator:function(e){var target=e.getTarget();return this.isValidHandleChild(target)&&(this.id==this.handleElId||this.DDM.handleWasClicked(target,this.id))},addInvalidHandleType:function(tagName){var type=tagName.toUpperCase();this.invalidHandleTypes[type]=type},addInvalidHandleId:function(id){"string"!=typeof id&&(id=Ext.id(id)),this.invalidHandleIds[id]=id},addInvalidHandleClass:function(cssClass){this.invalidHandleClasses.push(cssClass)},removeInvalidHandleType:function(tagName){var type=tagName.toUpperCase();delete this.invalidHandleTypes[type]},removeInvalidHandleId:function(id){"string"!=typeof id&&(id=Ext.id(id)),delete this.invalidHandleIds[id]},removeInvalidHandleClass:function(cssClass){for(var i=0,len=this.invalidHandleClasses.length;len>i;++i)this.invalidHandleClasses[i]==cssClass&&delete this.invalidHandleClasses[i]},isValidHandleChild:function(node){var nodeName,valid=!0;try{nodeName=node.nodeName.toUpperCase()}catch(e){nodeName=node.nodeName}valid=valid&&!this.invalidHandleTypes[nodeName],valid=valid&&!this.invalidHandleIds[node.id];for(var i=0,len=this.invalidHandleClasses.length;valid&&len>i;++i)valid=!Ext.fly(node).hasClass(this.invalidHandleClasses[i]);return valid},setXTicks:function(iStartX,iTickSize){this.xTicks=[],this.xTickSize=iTickSize;for(var tickMap={},i=this.initPageX;i>=this.minX;i-=iTickSize)tickMap[i]||(this.xTicks[this.xTicks.length]=i,tickMap[i]=!0);for(i=this.initPageX;i<=this.maxX;i+=iTickSize)tickMap[i]||(this.xTicks[this.xTicks.length]=i,tickMap[i]=!0);this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(iStartY,iTickSize){this.yTicks=[],this.yTickSize=iTickSize;for(var tickMap={},i=this.initPageY;i>=this.minY;i-=iTickSize)tickMap[i]||(this.yTicks[this.yTicks.length]=i,tickMap[i]=!0);for(i=this.initPageY;i<=this.maxY;i+=iTickSize)tickMap[i]||(this.yTicks[this.yTicks.length]=i,tickMap[i]=!0);this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(iLeft,iRight,iTickSize){this.leftConstraint=iLeft,this.rightConstraint=iRight,this.minX=this.initPageX-iLeft,this.maxX=this.initPageX+iRight,iTickSize&&this.setXTicks(this.initPageX,iTickSize),this.constrainX=!0},clearConstraints:function(){this.constrainX=!1,this.constrainY=!1,this.clearTicks()},clearTicks:function(){this.xTicks=null,this.yTicks=null,this.xTickSize=0,this.yTickSize=0},setYConstraint:function(iUp,iDown,iTickSize){this.topConstraint=iUp,this.bottomConstraint=iDown,this.minY=this.initPageY-iUp,this.maxY=this.initPageY+iDown,iTickSize&&this.setYTicks(this.initPageY,iTickSize),this.constrainY=!0},resetConstraints:function(){if(this.initPageX||0===this.initPageX){var dx=this.maintainOffset?this.lastPageX-this.initPageX:0,dy=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(dx,dy)}else this.setInitPosition();this.constrainX&&this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize),this.constrainY&&this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)},getTick:function(val,tickArray){if(tickArray){if(tickArray[0]>=val)return tickArray[0];for(var i=0,len=tickArray.length;len>i;++i){var next=i+1;if(tickArray[next]&&tickArray[next]>=val){var diff1=val-tickArray[i],diff2=tickArray[next]-val;return diff2>diff1?tickArray[i]:tickArray[next]}}return tickArray[tickArray.length-1]}return val},toString:function(){return"DragDrop "+this.id}}}(),Ext.dd.DragDropMgr||(Ext.dd.DragDropMgr=function(){var Event=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:!0,stopPropagation:!0,initialized:!1,locked:!1,init:function(){this.initialized=!0},POINT:0,INTERSECT:1,mode:0,notifyOccluded:!1,_execOnAll:function(sMethod,args){for(var i in this.ids)for(var j in this.ids[i]){var oDD=this.ids[i][j];this.isTypeOfDD(oDD)&&oDD[sMethod].apply(oDD,args)}},_onLoad:function(){this.init(),Event.on(document,"mouseup",this.handleMouseUp,this,!0),Event.on(document,"mousemove",this.handleMouseMove,this,!0),Event.on(window,"unload",this._onUnload,this,!0),Event.on(window,"resize",this._onResize,this,!0)},_onResize:function(e){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},isLocked:function(){return this.locked},locationCache:{},useCache:!0,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:!1,clickTimeout:null,startX:0,startY:0,regDragDrop:function(oDD,sGroup){this.initialized||this.init(),this.ids[sGroup]||(this.ids[sGroup]={}),this.ids[sGroup][oDD.id]=oDD},removeDDFromGroup:function(oDD,sGroup){this.ids[sGroup]||(this.ids[sGroup]={});var obj=this.ids[sGroup];obj&&obj[oDD.id]&&delete obj[oDD.id]},_remove:function(oDD){for(var g in oDD.groups)g&&this.ids[g]&&this.ids[g][oDD.id]&&delete this.ids[g][oDD.id];delete this.handleIds[oDD.id]},regHandle:function(sDDId,sHandleId){this.handleIds[sDDId]||(this.handleIds[sDDId]={}),this.handleIds[sDDId][sHandleId]=sHandleId},isDragDrop:function(id){return this.getDDById(id)?!0:!1},getRelated:function(p_oDD,bTargetsOnly){var oDDs=[];for(var i in p_oDD.groups)for(var j in this.ids[i]){var dd=this.ids[i][j];this.isTypeOfDD(dd)&&(!bTargetsOnly||dd.isTarget)&&(oDDs[oDDs.length]=dd)}return oDDs},isLegalTarget:function(oDD,oTargetDD){for(var targets=this.getRelated(oDD,!0),i=0,len=targets.length;len>i;++i)if(targets[i].id==oTargetDD.id)return!0;return!1},isTypeOfDD:function(oDD){return oDD&&oDD.__ygDragDrop},isHandle:function(sDDId,sHandleId){return this.handleIds[sDDId]&&this.handleIds[sDDId][sHandleId]},getDDById:function(id){for(var i in this.ids)if(this.ids[i][id])return this.ids[i][id];return null},handleMouseDown:function(e,oDD){Ext.QuickTips&&Ext.QuickTips.ddDisable(),this.dragCurrent&&this.handleMouseUp(e),this.currentTarget=e.getTarget(),this.dragCurrent=oDD;var el=oDD.getEl();this.startX=e.getPageX(),this.startY=e.getPageY(),this.deltaX=this.startX-el.offsetLeft,this.deltaY=this.startY-el.offsetTop,this.dragThreshMet=!1,this.clickTimeout=setTimeout(function(){var DDM=Ext.dd.DDM;DDM.startDrag(DDM.startX,DDM.startY)},this.clickTimeThresh)},startDrag:function(x,y){clearTimeout(this.clickTimeout),this.dragCurrent&&(this.dragCurrent.b4StartDrag(x,y),this.dragCurrent.startDrag(x,y)),this.dragThreshMet=!0},handleMouseUp:function(e){Ext.QuickTips&&Ext.QuickTips.ddEnable(),this.dragCurrent&&(clearTimeout(this.clickTimeout),this.dragThreshMet&&this.fireEvents(e,!0),this.stopDrag(e),this.stopEvent(e))},stopEvent:function(e){this.stopPropagation&&e.stopPropagation(),this.preventDefault&&e.preventDefault()},stopDrag:function(e){this.dragCurrent&&(this.dragThreshMet&&(this.dragCurrent.b4EndDrag(e),this.dragCurrent.endDrag(e)),this.dragCurrent.onMouseUp(e)),this.dragCurrent=null,this.dragOvers={}},handleMouseMove:function(e){if(!this.dragCurrent)return!0;if(Ext.isIE&&0!==e.button&&1!==e.button&&2!==e.button)return this.stopEvent(e),this.handleMouseUp(e);if(!this.dragThreshMet){var diffX=Math.abs(this.startX-e.getPageX()),diffY=Math.abs(this.startY-e.getPageY());(diffX>this.clickPixelThresh||diffY>this.clickPixelThresh)&&this.startDrag(this.startX,this.startY)}return this.dragThreshMet&&(this.dragCurrent.b4Drag(e),this.dragCurrent.onDrag(e),this.dragCurrent.moveOnly||this.fireEvents(e,!1)),this.stopEvent(e),!0},fireEvents:function(e,isDrop){var overTarget,overTargetEl,needsSort,i,len,sGroup,me=this,dragCurrent=me.dragCurrent,mousePoint=e.getPoint(),allTargets=[],oldOvers=[],outEvts=[],overEvts=[],dropEvts=[],enterEvts=[];if(dragCurrent&&!dragCurrent.isLocked()){for(i in me.dragOvers)overTarget=me.dragOvers[i],me.isTypeOfDD(overTarget)&&(this.isOverTarget(mousePoint,overTarget,me.mode)||outEvts.push(overTarget),oldOvers[i]=!0,delete me.dragOvers[i]);for(sGroup in dragCurrent.groups)if("string"==typeof sGroup)for(i in me.ids[sGroup])overTarget=me.ids[sGroup][i],me.isTypeOfDD(overTarget)&&(overTargetEl=overTarget.getEl())&&overTarget.isTarget&&!overTarget.isLocked()&&(overTarget!=dragCurrent||dragCurrent.ignoreSelf===!1)&&(-1!==(overTarget.zIndex=me.getZIndex(overTargetEl))&&(needsSort=!0),allTargets.push(overTarget));for(needsSort&&allTargets.sort(me.byZIndex),i=0,len=allTargets.length;len>i&&(overTarget=allTargets[i],!me.isOverTarget(mousePoint,overTarget,me.mode)||(isDrop?dropEvts.push(overTarget):(oldOvers[overTarget.id]?overEvts.push(overTarget):enterEvts.push(overTarget),me.dragOvers[overTarget.id]=overTarget),me.notifyOccluded));i++);if(me.mode)outEvts.length&&(dragCurrent.b4DragOut(e,outEvts),dragCurrent.onDragOut(e,outEvts)),enterEvts.length&&dragCurrent.onDragEnter(e,enterEvts),overEvts.length&&(dragCurrent.b4DragOver(e,overEvts),dragCurrent.onDragOver(e,overEvts)),dropEvts.length&&(dragCurrent.b4DragDrop(e,dropEvts),dragCurrent.onDragDrop(e,dropEvts));else{for(i=0,len=outEvts.length;len>i;++i)dragCurrent.b4DragOut(e,outEvts[i].id),dragCurrent.onDragOut(e,outEvts[i].id);for(i=0,len=enterEvts.length;len>i;++i)dragCurrent.onDragEnter(e,enterEvts[i].id);for(i=0,len=overEvts.length;len>i;++i)dragCurrent.b4DragOver(e,overEvts[i].id),dragCurrent.onDragOver(e,overEvts[i].id);for(i=0,len=dropEvts.length;len>i;++i)dragCurrent.b4DragDrop(e,dropEvts[i].id),dragCurrent.onDragDrop(e,dropEvts[i].id)}isDrop&&!dropEvts.length&&dragCurrent.onInvalidDrop(e)}},getZIndex:function(element){var z,body=document.body,zIndex=-1;for(element=Ext.getDom(element);element!==body;)isNaN(z=Number(Ext.fly(element).getStyle("zIndex")))||(zIndex=z),element=element.parentNode;return zIndex},byZIndex:function(d1,d2){return d1.zIndex<d2.zIndex},getBestMatch:function(dds){var winner=null,len=dds.length;if(1==len)winner=dds[0];else for(var i=0;len>i;++i){var dd=dds[i];if(dd.cursorIsOver){winner=dd;break}(!winner||winner.overlap.getArea()<dd.overlap.getArea())&&(winner=dd)}return winner},refreshCache:function(groups){for(var sGroup in groups)if("string"==typeof sGroup)for(var i in this.ids[sGroup]){var oDD=this.ids[sGroup][i];if(this.isTypeOfDD(oDD)){var loc=this.getLocation(oDD);loc?this.locationCache[oDD.id]=loc:delete this.locationCache[oDD.id]}}},verifyEl:function(el){if(el){var parent;if(Ext.isIE)try{parent=el.offsetParent}catch(e){}else parent=el.offsetParent;if(parent)return!0}return!1},getLocation:function(oDD){if(!this.isTypeOfDD(oDD))return null;var pos,x1,x2,y1,y2,t,r,b,l,el=oDD.getEl();try{pos=Ext.lib.Dom.getXY(el)}catch(e){}return pos?(x1=pos[0],x2=x1+el.offsetWidth,y1=pos[1],y2=y1+el.offsetHeight,t=y1-oDD.padding[0],r=x2+oDD.padding[1],b=y2+oDD.padding[2],l=x1-oDD.padding[3],new Ext.lib.Region(t,r,b,l)):null},isOverTarget:function(pt,oTarget,intersect){var loc=this.locationCache[oTarget.id];if(loc&&this.useCache||(loc=this.getLocation(oTarget),this.locationCache[oTarget.id]=loc),!loc)return!1;oTarget.cursorIsOver=loc.contains(pt);var dc=this.dragCurrent;if(!dc||!dc.getTargetCoord||!intersect&&!dc.constrainX&&!dc.constrainY)return oTarget.cursorIsOver;oTarget.overlap=null;var pos=dc.getTargetCoord(pt.x,pt.y),el=dc.getDragEl(),curRegion=new Ext.lib.Region(pos.y,pos.x+el.offsetWidth,pos.y+el.offsetHeight,pos.x),overlap=curRegion.intersect(loc);return overlap?(oTarget.overlap=overlap,intersect?!0:oTarget.cursorIsOver):!1},_onUnload:function(e,me){Event.removeListener(document,"mouseup",this.handleMouseUp,this),Event.removeListener(document,"mousemove",this.handleMouseMove,this),Event.removeListener(window,"resize",this._onResize,this),Ext.dd.DragDropMgr.unregAll()},unregAll:function(){this.dragCurrent&&(this.stopDrag(),this.dragCurrent=null),this._execOnAll("unreg",[]);for(var i in this.elementCache)delete this.elementCache[i];this.elementCache={},this.ids={}},elementCache:{},getElWrapper:function(id){var oWrapper=this.elementCache[id];return oWrapper&&oWrapper.el||(oWrapper=this.elementCache[id]=new this.ElementWrapper(Ext.getDom(id))),oWrapper},getElement:function(id){return Ext.getDom(id)},getCss:function(id){var el=Ext.getDom(id);return el?el.style:null},ElementWrapper:function(el){this.el=el||null,this.id=this.el&&el.id,this.css=this.el&&el.style},getPosX:function(el){return Ext.lib.Dom.getX(el)},getPosY:function(el){return Ext.lib.Dom.getY(el)},swapNode:function(n1,n2){if(n1.swapNode)n1.swapNode(n2);else{var p=n2.parentNode,s=n2.nextSibling;s==n1?p.insertBefore(n1,n2):n2==n1.nextSibling?p.insertBefore(n2,n1):(n1.parentNode.replaceChild(n2,n1),p.insertBefore(n1,s))}},getScroll:function(){var t,l,dde=document.documentElement,db=document.body;return dde&&(dde.scrollTop||dde.scrollLeft)?(t=dde.scrollTop,l=dde.scrollLeft):db&&(t=db.scrollTop,l=db.scrollLeft),{top:t,left:l}},getStyle:function(el,styleProp){return Ext.fly(el).getStyle(styleProp)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(moveEl,targetEl){var aCoord=Ext.lib.Dom.getXY(targetEl);Ext.lib.Dom.setXY(moveEl,aCoord)},numericSort:function(a,b){return a-b},_timeoutCount:0,_addListeners:function(){var DDM=Ext.dd.DDM;Ext.lib.Event&&document?DDM._onLoad():DDM._timeoutCount>2e3||(setTimeout(DDM._addListeners,10),document&&document.body&&(DDM._timeoutCount+=1))},handleWasClicked:function(node,id){if(this.isHandle(id,node.id))return!0;for(var p=node.parentNode;p;){if(this.isHandle(id,p.id))return!0;p=p.parentNode}return!1}}}(),Ext.dd.DDM=Ext.dd.DragDropMgr,Ext.dd.DDM._addListeners()),Ext.dd.DD=function(id,sGroup,config){id&&this.init(id,sGroup,config)},Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:!0,autoOffset:function(iPageX,iPageY){var x=iPageX-this.startPageX,y=iPageY-this.startPageY;this.setDelta(x,y)},setDelta:function(iDeltaX,iDeltaY){this.deltaX=iDeltaX,this.deltaY=iDeltaY},setDragElPos:function(iPageX,iPageY){var el=this.getDragEl();this.alignElWithMouse(el,iPageX,iPageY)},alignElWithMouse:function(el,iPageX,iPageY){var oCoord=this.getTargetCoord(iPageX,iPageY),fly=el.dom?el:Ext.fly(el,"_dd");if(this.deltaSetXY)fly.setLeftTop(oCoord.x+this.deltaSetXY[0],oCoord.y+this.deltaSetXY[1]);else{var aCoord=[oCoord.x,oCoord.y];fly.setXY(aCoord);var newLeft=fly.getLeft(!0),newTop=fly.getTop(!0);this.deltaSetXY=[newLeft-oCoord.x,newTop-oCoord.y]}return this.cachePosition(oCoord.x,oCoord.y),this.autoScroll(oCoord.x,oCoord.y,el.offsetHeight,el.offsetWidth),oCoord},cachePosition:function(iPageX,iPageY){if(iPageX)this.lastPageX=iPageX,
this.lastPageY=iPageY;else{var aCoord=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=aCoord[0],this.lastPageY=aCoord[1]}},autoScroll:function(x,y,h,w){if(this.scroll){var clientH=Ext.lib.Dom.getViewHeight(),clientW=Ext.lib.Dom.getViewWidth(),st=this.DDM.getScrollTop(),sl=this.DDM.getScrollLeft(),bot=h+y,right=w+x,toBot=clientH+st-y-this.deltaY,toRight=clientW+sl-x-this.deltaX,thresh=40,scrAmt=document.all?80:30;bot>clientH&&thresh>toBot&&window.scrollTo(sl,st+scrAmt),st>y&&st>0&&thresh>y-st&&window.scrollTo(sl,st-scrAmt),right>clientW&&thresh>toRight&&window.scrollTo(sl+scrAmt,st),sl>x&&sl>0&&thresh>x-sl&&window.scrollTo(sl-scrAmt,st)}},getTargetCoord:function(iPageX,iPageY){var x=iPageX-this.deltaX,y=iPageY-this.deltaY;return this.constrainX&&(x<this.minX&&(x=this.minX),x>this.maxX&&(x=this.maxX)),this.constrainY&&(y<this.minY&&(y=this.minY),y>this.maxY&&(y=this.maxY)),x=this.getTick(x,this.xTicks),y=this.getTick(y,this.yTicks),{x:x,y:y}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this),this.scroll=this.config.scroll!==!1},b4MouseDown:function(e){this.autoOffset(e.getPageX(),e.getPageY())},b4Drag:function(e){this.setDragElPos(e.getPageX(),e.getPageY())},toString:function(){return"DD "+this.id}}),Ext.dd.DDProxy=function(id,sGroup,config){id&&(this.init(id,sGroup,config),this.initFrame())},Ext.dd.DDProxy.dragElId="ygddfdiv",Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:!0,centerFrame:!1,createFrame:function(){var self=this,body=document.body;if(!body||!body.firstChild)return void setTimeout(function(){self.createFrame()},50);var div=this.getDragEl();if(!div){div=document.createElement("div"),div.id=this.dragElId;var s=div.style;s.position="absolute",s.visibility="hidden",s.cursor="move",s.border="2px solid #aaa",s.zIndex=999,body.insertBefore(div,body.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this),this.resizeFrame=this.config.resizeFrame!==!1,this.centerFrame=this.config.centerFrame,this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(iPageX,iPageY){var dragEl=(this.getEl(),this.getDragEl()),s=dragEl.style;this._resizeProxy(),this.centerFrame&&this.setDelta(Math.round(parseInt(s.width,10)/2),Math.round(parseInt(s.height,10)/2)),this.setDragElPos(iPageX,iPageY),Ext.fly(dragEl).show()},_resizeProxy:function(){if(this.resizeFrame){var el=this.getEl();Ext.fly(this.getDragEl()).setSize(el.offsetWidth,el.offsetHeight)}},b4MouseDown:function(e){var x=e.getPageX(),y=e.getPageY();this.autoOffset(x,y),this.setDragElPos(x,y)},b4StartDrag:function(x,y){this.showFrame(x,y)},b4EndDrag:function(e){Ext.fly(this.getDragEl()).hide()},endDrag:function(e){var lel=this.getEl(),del=this.getDragEl();del.style.visibility="",this.beforeMove(),lel.style.visibility="hidden",Ext.dd.DDM.moveToEl(lel,del),del.style.visibility="hidden",lel.style.visibility="",this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}}),Ext.dd.DDTarget=function(id,sGroup,config){id&&this.initTarget(id,sGroup,config)},Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}}),Ext.dd.DragTracker=Ext.extend(Ext.util.Observable,{active:!1,tolerance:5,autoStart:!1,constructor:function(config){Ext.apply(this,config),this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag"),this.dragRegion=new Ext.lib.Region(0,0,0,0),this.el&&this.initEl(this.el),Ext.dd.DragTracker.superclass.constructor.call(this,config)},initEl:function(el){this.el=Ext.get(el),el.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:void 0)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this),delete this.el},onMouseDown:function(e,target){this.fireEvent("mousedown",this,e)!==!1&&this.onBeforeStart(e)!==!1&&(this.startXY=this.lastXY=e.getXY(),this.dragTarget=this.delegate?target:this.el.dom,this.preventDefault!==!1&&e.preventDefault(),Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect}),this.autoStart&&(this.timer=this.triggerStart.defer(this.autoStart===!0?1e3:this.autoStart,this,[e])))},onMouseMove:function(e,target){var ieCheck=Ext.isIE6||Ext.isIE7||Ext.isIE8;if(this.active&&ieCheck&&!e.browserEvent.button)return e.preventDefault(),void this.onMouseUp(e);e.preventDefault();var xy=e.getXY(),s=this.startXY;if(this.lastXY=xy,!this.active){if(!(Math.abs(s[0]-xy[0])>this.tolerance||Math.abs(s[1]-xy[1])>this.tolerance))return;this.triggerStart(e)}this.fireEvent("mousemove",this,e),this.onDrag(e),this.fireEvent("drag",this,e)},onMouseUp:function(e){var doc=Ext.getDoc(),wasActive=this.active;doc.un("mousemove",this.onMouseMove,this),doc.un("mouseup",this.onMouseUp,this),doc.un("selectstart",this.stopSelect,this),e.preventDefault(),this.clearStart(),this.active=!1,delete this.elRegion,this.fireEvent("mouseup",this,e),wasActive&&(this.onEnd(e),this.fireEvent("dragend",this,e))},triggerStart:function(e){this.clearStart(),this.active=!0,this.onStart(e),this.fireEvent("dragstart",this,e)},clearStart:function(){this.timer&&(clearTimeout(this.timer),delete this.timer)},stopSelect:function(e){return e.stopEvent(),!1},onBeforeStart:function(e){},onStart:function(xy){},onDrag:function(e){},onEnd:function(e){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(constrain){return constrain?this.constrainModes[constrain].call(this,this.lastXY):this.lastXY},getOffset:function(constrain){var xy=this.getXY(constrain),s=this.startXY;return[s[0]-xy[0],s[1]-xy[1]]},constrainModes:{point:function(xy){this.elRegion||(this.elRegion=this.getDragCt().getRegion());var dr=this.dragRegion;return dr.left=xy[0],dr.top=xy[1],dr.right=xy[0],dr.bottom=xy[1],dr.constrainTo(this.elRegion),[dr.left,dr.top]}}}),Ext.dd.ScrollManager=function(){var ddm=Ext.dd.DragDropMgr,els={},dragEl=null,proc={},onStop=function(e){dragEl=null,clearProc()},triggerRefresh=function(){ddm.dragCurrent&&ddm.refreshCache(ddm.dragCurrent.groups)},doScroll=function(){if(ddm.dragCurrent){var dds=Ext.dd.ScrollManager,inc=proc.el.ddScrollConfig?proc.el.ddScrollConfig.increment:dds.increment;dds.animate?proc.el.scroll(proc.dir,inc,!0,dds.animDuration,triggerRefresh):proc.el.scroll(proc.dir,inc)&&triggerRefresh()}},clearProc=function(){proc.id&&clearInterval(proc.id),proc.id=0,proc.el=null,proc.dir=""},startProc=function(el,dir){clearProc(),proc.el=el,proc.dir=dir;var group=el.ddScrollConfig?el.ddScrollConfig.ddGroup:void 0,freq=el.ddScrollConfig&&el.ddScrollConfig.frequency?el.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;(void 0===group||ddm.dragCurrent.ddGroup==group)&&(proc.id=setInterval(doScroll,freq))},onFire=function(e,isDrop){if(!isDrop&&ddm.dragCurrent){var dds=Ext.dd.ScrollManager;dragEl&&dragEl==ddm.dragCurrent||(dragEl=ddm.dragCurrent,dds.refreshCache());var xy=Ext.lib.Event.getXY(e),pt=new Ext.lib.Point(xy[0],xy[1]);for(var id in els){var el=els[id],r=el._region,c=el.ddScrollConfig?el.ddScrollConfig:dds;if(r&&r.contains(pt)&&el.isScrollable()){if(r.bottom-pt.y<=c.vthresh)return void(proc.el!=el&&startProc(el,"down"));if(r.right-pt.x<=c.hthresh)return void(proc.el!=el&&startProc(el,"left"));if(pt.y-r.top<=c.vthresh)return void(proc.el!=el&&startProc(el,"up"));if(pt.x-r.left<=c.hthresh)return void(proc.el!=el&&startProc(el,"right"))}}clearProc()}};return ddm.fireEvents=ddm.fireEvents.createSequence(onFire,ddm),ddm.stopDrag=ddm.stopDrag.createSequence(onStop,ddm),{register:function(el){if(Ext.isArray(el))for(var i=0,len=el.length;len>i;i++)this.register(el[i]);else el=Ext.get(el),els[el.id]=el},unregister:function(el){if(Ext.isArray(el))for(var i=0,len=el.length;len>i;i++)this.unregister(el[i]);else el=Ext.get(el),delete els[el.id]},vthresh:25,hthresh:25,increment:100,frequency:500,animate:!0,animDuration:.4,ddGroup:void 0,refreshCache:function(){for(var id in els)"object"==typeof els[id]&&(els[id]._region=els[id].getRegion())}}}(),Ext.dd.Registry=function(){var elements={},handles={},autoIdSeed=0,getId=function(el,autogen){if("string"==typeof el)return el;var id=el.id;return id||autogen===!1||(id="extdd-"+ ++autoIdSeed,el.id=id),id};return{register:function(el,data){if(data=data||{},"string"==typeof el&&(el=document.getElementById(el)),data.ddel=el,elements[getId(el)]=data,data.isHandle!==!1&&(handles[data.ddel.id]=data),data.handles)for(var hs=data.handles,i=0,len=hs.length;len>i;i++)handles[getId(hs[i])]=data},unregister:function(el){var id=getId(el,!1),data=elements[id];if(data&&(delete elements[id],data.handles))for(var hs=data.handles,i=0,len=hs.length;len>i;i++)delete handles[getId(hs[i],!1)]},getHandle:function(id){return"string"!=typeof id&&(id=id.id),handles[id]},getHandleFromEvent:function(e){var t=Ext.lib.Event.getTarget(e);return t?handles[t.id]:null},getTarget:function(id){return"string"!=typeof id&&(id=id.id),elements[id]},getTargetFromEvent:function(e){var t=Ext.lib.Event.getTarget(e);return t?elements[t.id]||handles[t.id]:null}}}(),Ext.dd.StatusProxy=function(config){Ext.apply(this,config),this.id=this.id||Ext.id(),this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!config||config.shadow!==!1}),this.ghost=Ext.get(this.el.dom.childNodes[1]),this.dropStatus=this.dropNotAllowed},Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(cssClass){cssClass=cssClass||this.dropNotAllowed,this.dropStatus!=cssClass&&(this.el.replaceClass(this.dropStatus,cssClass),this.dropStatus=cssClass)},reset:function(clearGhost){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed,this.dropStatus=this.dropNotAllowed,clearGhost&&this.ghost.update("")},update:function(html){"string"==typeof html?this.ghost.update(html):(this.ghost.update(""),html.style.margin="0",this.ghost.dom.appendChild(html));var el=this.ghost.dom.firstChild;el&&Ext.fly(el).setStyle("float","none")},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(clear){this.el.hide(),clear&&this.reset(!0)},stop:function(){this.anim&&this.anim.isAnimated&&this.anim.isAnimated()&&this.anim.stop()},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(xy,callback,scope){this.callback=callback,this.scope=scope,xy&&this.animRepair!==!1?(this.el.addClass("x-dd-drag-repair"),this.el.hideUnders(!0),this.anim=this.el.shift({duration:this.repairDuration||.5,easing:"easeOut",xy:xy,stopFx:!0,callback:this.afterRepair,scope:this})):this.afterRepair()},afterRepair:function(){this.hide(!0),"function"==typeof this.callback&&this.callback.call(this.scope||this),this.callback=null,this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}},Ext.dd.DragSource=function(el,config){this.el=Ext.get(el),this.dragData||(this.dragData={}),Ext.apply(this,config),this.proxy||(this.proxy=new Ext.dd.StatusProxy),Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:!1,isTarget:!1,scroll:this.scroll===!0}),this.dragging=!1},Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(e){return this.dragData},onDragEnter:function(e,id){var target=Ext.dd.DragDropMgr.getDDById(id);if(this.cachedTarget=target,this.beforeDragEnter(target,e,id)!==!1){if(target.isNotifyTarget){var status=target.notifyEnter(this,e,this.dragData);this.proxy.setStatus(status)}else this.proxy.setStatus(this.dropAllowed);this.afterDragEnter&&this.afterDragEnter(target,e,id)}},beforeDragEnter:function(target,e,id){return!0},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments),this.proxy.sync()},onDragOver:function(e,id){var target=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(id);if(this.beforeDragOver(target,e,id)!==!1){if(target.isNotifyTarget){var status=target.notifyOver(this,e,this.dragData);this.proxy.setStatus(status)}this.afterDragOver&&this.afterDragOver(target,e,id)}},beforeDragOver:function(target,e,id){return!0},onDragOut:function(e,id){var target=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(id);this.beforeDragOut(target,e,id)!==!1&&(target.isNotifyTarget&&target.notifyOut(this,e,this.dragData),this.proxy.reset(),this.afterDragOut&&this.afterDragOut(target,e,id)),this.cachedTarget=null},beforeDragOut:function(target,e,id){return!0},onDragDrop:function(e,id){var target=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(id);this.beforeDragDrop(target,e,id)!==!1&&(target.isNotifyTarget?target.notifyDrop(this,e,this.dragData)?this.onValidDrop(target,e,id):this.onInvalidDrop(target,e,id):this.onValidDrop(target,e,id),this.afterDragDrop&&this.afterDragDrop(target,e,id)),delete this.cachedTarget},beforeDragDrop:function(target,e,id){return!0},onValidDrop:function(target,e,id){this.hideProxy(),this.afterValidDrop&&this.afterValidDrop(target,e,id)},getRepairXY:function(e,data){return this.el.getXY()},onInvalidDrop:function(target,e,id){this.beforeInvalidDrop(target,e,id),this.cachedTarget&&(this.cachedTarget.isNotifyTarget&&this.cachedTarget.notifyOut(this,e,this.dragData),this.cacheTarget=null),this.proxy.repair(this.getRepairXY(e,this.dragData),this.afterRepair,this),this.afterInvalidDrop&&this.afterInvalidDrop(e,id)},afterRepair:function(){Ext.enableFx&&this.el.highlight(this.hlColor||"c3daf9"),this.dragging=!1},beforeInvalidDrop:function(target,e,id){return!0},handleMouseDown:function(e){if(!this.dragging){var data=this.getDragData(e);data&&this.onBeforeDrag(data,e)!==!1&&(this.dragData=data,this.proxy.stop(),Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments))}},onBeforeDrag:function(data,e){return!0},onStartDrag:Ext.emptyFn,startDrag:function(x,y){this.proxy.reset(),this.dragging=!0,this.proxy.update(""),this.onInitDrag(x,y),this.proxy.show()},onInitDrag:function(x,y){var clone=this.el.dom.cloneNode(!0);return clone.id=Ext.id(),this.proxy.update(clone),this.onStartDrag(x,y),!0},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide(),this.proxy.reset(!0),this.dragging=!1},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(e){},endDrag:function(e){this.onEndDrag(this.dragData,e)},onEndDrag:function(data,e){},autoOffset:function(x,y){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this),Ext.destroy(this.proxy)}}),Ext.dd.DropTarget=Ext.extend(Ext.dd.DDTarget,{constructor:function(el,config){this.el=Ext.get(el),Ext.apply(this,config),this.containerScroll&&Ext.dd.ScrollManager.register(this.el),Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:!0})},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:!0,isNotifyTarget:!0,notifyEnter:function(dd,e,data){return this.overClass&&this.el.addClass(this.overClass),this.dropAllowed},notifyOver:function(dd,e,data){return this.dropAllowed},notifyOut:function(dd,e,data){this.overClass&&this.el.removeClass(this.overClass)},notifyDrop:function(dd,e,data){return!1},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.dd.DragZone=Ext.extend(Ext.dd.DragSource,{constructor:function(el,config){Ext.dd.DragZone.superclass.constructor.call(this,el,config),this.containerScroll&&Ext.dd.ScrollManager.register(this.el)},getDragData:function(e){return Ext.dd.Registry.getHandleFromEvent(e)},onInitDrag:function(x,y){return this.proxy.update(this.dragData.ddel.cloneNode(!0)),this.onStartDrag(x,y),!0},afterRepair:function(){Ext.enableFx&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9"),this.dragging=!1},getRepairXY:function(e){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this),this.containerScroll&&Ext.dd.ScrollManager.unregister(this.el)}}),Ext.dd.DropZone=function(el,config){Ext.dd.DropZone.superclass.constructor.call(this,el,config)},Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(e){return Ext.dd.Registry.getTargetFromEvent(e)},onNodeEnter:function(n,dd,e,data){},onNodeOver:function(n,dd,e,data){return this.dropAllowed},onNodeOut:function(n,dd,e,data){},onNodeDrop:function(n,dd,e,data){return!1},onContainerOver:function(dd,e,data){return this.dropNotAllowed},onContainerDrop:function(dd,e,data){return!1},notifyEnter:function(dd,e,data){return this.dropNotAllowed},notifyOver:function(dd,e,data){var n=this.getTargetFromEvent(e);return n?(this.lastOverNode!=n&&(this.lastOverNode&&this.onNodeOut(this.lastOverNode,dd,e,data),this.onNodeEnter(n,dd,e,data),this.lastOverNode=n),this.onNodeOver(n,dd,e,data)):(this.lastOverNode&&(this.onNodeOut(this.lastOverNode,dd,e,data),this.lastOverNode=null),this.onContainerOver(dd,e,data))},notifyOut:function(dd,e,data){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,dd,e,data),this.lastOverNode=null)},notifyDrop:function(dd,e,data){this.lastOverNode&&(this.onNodeOut(this.lastOverNode,dd,e,data),this.lastOverNode=null);var n=this.getTargetFromEvent(e);return n?this.onNodeDrop(n,dd,e,data):this.onContainerDrop(dd,e,data)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}}),Ext.Element.addMethods({initDD:function(group,config,overrides){var dd=new Ext.dd.DD(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDProxy:function(group,config,overrides){var dd=new Ext.dd.DDProxy(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)},initDDTarget:function(group,config,overrides){var dd=new Ext.dd.DDTarget(Ext.id(this.dom),group,config);return Ext.apply(dd,overrides)}}),Ext.data.Api=function(){var validActions={};return{actions:{create:"create",read:"read",update:"update",destroy:"destroy"},restActions:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},isAction:function(action){return Ext.data.Api.actions[action]?!0:!1},getVerb:function(name){if(validActions[name])return validActions[name];for(var verb in this.actions)if(this.actions[verb]===name){validActions[name]=verb;break}return void 0!==validActions[name]?validActions[name]:null},isValid:function(api){var invalid=[],crud=this.actions;for(var action in api)action in crud||invalid.push(action);return invalid.length?invalid:!0},hasUniqueUrl:function(proxy,verb){var url=proxy.api[verb]?proxy.api[verb].url:null,unique=!0;for(var action in proxy.api)if((unique=action===verb?!0:proxy.api[action].url!=url?!0:!1)==!1)break;return unique},prepare:function(proxy){proxy.api||(proxy.api={});for(var verb in this.actions){var action=this.actions[verb];proxy.api[action]=proxy.api[action]||proxy.url||proxy.directFn,"string"==typeof proxy.api[action]&&(proxy.api[action]={url:proxy.api[action],method:proxy.restful===!0?Ext.data.Api.restActions[action]:void 0})}},restify:function(proxy){proxy.restful=!0;for(var verb in this.restActions)proxy.api[this.actions[verb]].method||(proxy.api[this.actions[verb]].method=this.restActions[verb]);proxy.onWrite=proxy.onWrite.createInterceptor(function(action,o,response,rs){var res=(o.reader,new Ext.data.Response({action:action,raw:response}));switch(response.status){case 200:return!0;case 201:if(!Ext.isEmpty(res.raw.responseText))return!0;res.success=!0;break;case 204:res.success=!0,res.data=null;break;default:return!0}return res.success===!0?this.fireEvent("write",this,action,res.data,res,rs,o.request.arg):this.fireEvent("exception",this,"remote",action,o,res,rs),o.request.callback.call(o.request.scope,res.data,res,res.success),!1},proxy)}}}(),Ext.data.Response=function(params,response){Ext.apply(this,params,{raw:response})},Ext.data.Response.prototype={message:null,success:!1,status:null,root:null,raw:null,getMessage:function(){return this.message},getSuccess:function(){return this.success},getStatus:function(){return this.status},getRoot:function(){return this.root},getRawResponse:function(){return this.raw}},Ext.data.Api.Error=Ext.extend(Ext.Error,{constructor:function(message,arg){this.arg=arg,Ext.Error.call(this,message)},name:"Ext.data.Api"}),Ext.apply(Ext.data.Api.Error.prototype,{lang:{"action-url-undefined":"No fallback url defined for this action.  When defining a DataProxy api, please be sure to define an url for each CRUD action in Ext.data.Api.actions or define a default url in addition to your api-configuration.",invalid:"received an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions defined in Ext.data.Api.actions","invalid-url":"Invalid url.  Please review your proxy configuration.",execute:'Attempted to execute an unknown action.  Valid API actions are defined in Ext.data.Api.actions"'}}),Ext.data.SortTypes={none:function(s){return s},stripTagsRE:/<\/?[^>]+>/gi,asText:function(s){return String(s).replace(this.stripTagsRE,"")},asUCText:function(s){return String(s).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(s){return String(s).toUpperCase()},asDate:function(s){return s?Ext.isDate(s)?s.getTime():Date.parse(String(s)):0},asFloat:function(s){var val=parseFloat(String(s).replace(/,/g,""));return isNaN(val)?0:val},asInt:function(s){var val=parseInt(String(s).replace(/,/g,""),10);return isNaN(val)?0:val}},Ext.data.Record=function(data,id){this.id=id||0===id?id:Ext.data.Record.id(this),this.data=data||{}},Ext.data.Record.create=function(o){var f=Ext.extend(Ext.data.Record,{}),p=f.prototype;p.fields=new Ext.util.MixedCollection(!1,function(field){return field.name});for(var i=0,len=o.length;len>i;i++)p.fields.add(new Ext.data.Field(o[i]));return f.getField=function(name){return p.fields.get(name)},f},Ext.data.Record.PREFIX="ext-record",Ext.data.Record.AUTO_ID=1,Ext.data.Record.EDIT="edit",Ext.data.Record.REJECT="reject",Ext.data.Record.COMMIT="commit",Ext.data.Record.id=function(rec){return rec.phantom=!0,[Ext.data.Record.PREFIX,"-",Ext.data.Record.AUTO_ID++].join("")},Ext.data.Record.prototype={dirty:!1,editing:!1,error:null,modified:null,phantom:!1,join:function(store){this.store=store},set:function(name,value){var encode=Ext.isPrimitive(value)?String:Ext.encode;encode(this.data[name])!=encode(value)&&(this.dirty=!0,this.modified||(this.modified={}),void 0===this.modified[name]&&(this.modified[name]=this.data[name]),this.data[name]=value,this.editing||this.afterEdit())},afterEdit:function(){void 0!=this.store&&"function"==typeof this.store.afterEdit&&this.store.afterEdit(this)},afterReject:function(){this.store&&this.store.afterReject(this)},afterCommit:function(){this.store&&this.store.afterCommit(this)},get:function(name){return this.data[name]},beginEdit:function(){this.editing=!0,this.modified=this.modified||{}},cancelEdit:function(){this.editing=!1,delete this.modified},endEdit:function(){this.editing=!1,this.dirty&&this.afterEdit()},reject:function(silent){var m=this.modified;for(var n in m)"function"!=typeof m[n]&&(this.data[n]=m[n]);this.dirty=!1,delete this.modified,this.editing=!1,silent!==!0&&this.afterReject()},commit:function(silent){this.dirty=!1,delete this.modified,this.editing=!1,silent!==!0&&this.afterCommit()},getChanges:function(){var m=this.modified,cs={};for(var n in m)m.hasOwnProperty(n)&&(cs[n]=this.data[n]);return cs},hasError:function(){return null!==this.error},clearError:function(){this.error=null},copy:function(newId){return new this.constructor(Ext.apply({},this.data),newId||this.id)},isModified:function(fieldName){return!(!this.modified||!this.modified.hasOwnProperty(fieldName))},isValid:function(){return this.fields.find(function(f){return f.allowBlank===!1&&Ext.isEmpty(this.data[f.name])?!0:!1},this)?!1:!0},markDirty:function(){this.dirty=!0,this.modified||(this.modified={}),this.fields.each(function(f){this.modified[f.name]=this.data[f.name]},this)}},Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection,{register:function(){for(var s,i=0;s=arguments[i];i++)this.add(s)},unregister:function(){for(var s,i=0;s=arguments[i];i++)this.remove(this.lookup(s))},lookup:function(id){if(Ext.isArray(id)){var fields=["field1"],expand=!Ext.isArray(id[0]);if(!expand)for(var i=2,len=id[0].length;len>=i;++i)fields.push("field"+i);return new Ext.data.ArrayStore({fields:fields,data:id,expandData:expand,autoDestroy:!0,autoCreated:!0})}return Ext.isObject(id)?id.events?id:Ext.create(id,"store"):this.get(id)},getKey:function(o){return o.storeId}}),Ext.data.Store=Ext.extend(Ext.util.Observable,{writer:void 0,remoteSort:!1,autoDestroy:!1,pruneModifiedRecords:!1,lastOptions:null,autoSave:!0,batch:!0,restful:!1,paramNames:void 0,defaultParamNames:{start:"start",limit:"limit",sort:"sort",dir:"dir"},isDestroyed:!1,hasMultiSort:!1,batchKey:"_ext_batch_",constructor:function(config){this.data=new Ext.util.MixedCollection(!1),this.data.getKey=function(o){return o.id},this.removed=[],config&&config.data&&(this.inlineData=config.data,delete config.data),Ext.apply(this,config),this.baseParams=Ext.isObject(this.baseParams)?this.baseParams:{},this.paramNames=Ext.applyIf(this.paramNames||{},this.defaultParamNames),!this.url&&!this.api||this.proxy||(this.proxy=new Ext.data.HttpProxy({url:this.url,api:this.api})),this.restful===!0&&this.proxy&&(this.batch=!1,Ext.data.Api.restify(this.proxy)),this.reader&&(this.recordType||(this.recordType=this.reader.recordType),this.reader.onMetaChange&&(this.reader.onMetaChange=this.reader.onMetaChange.createSequence(this.onMetaChange,this)),this.writer&&(this.writer instanceof Ext.data.DataWriter==!1&&(this.writer=this.buildWriter(this.writer)),this.writer.meta=this.reader.meta,this.pruneModifiedRecords=!0)),this.recordType&&(this.fields=this.recordType.prototype.fields),this.modified=[],this.addEvents("datachanged","metachange","add","remove","update","clear","exception","beforeload","load","loadexception","beforewrite","write","beforesave","save"),this.proxy&&this.relayEvents(this.proxy,["loadexception","exception"]),this.writer&&this.on({scope:this,add:this.createRecords,remove:this.destroyRecord,update:this.updateRecord,clear:this.onClear}),this.sortToggle={},this.sortField?this.setDefaultSort(this.sortField,this.sortDir):this.sortInfo&&this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction),Ext.data.Store.superclass.constructor.call(this),this.id&&(this.storeId=this.id,delete this.id),this.storeId&&Ext.StoreMgr.register(this),this.inlineData?(this.loadData(this.inlineData),delete this.inlineData):this.autoLoad&&this.load.defer(10,this,["object"==typeof this.autoLoad?this.autoLoad:void 0]),this.batchCounter=0,this.batches={}},buildWriter:function(config){var klass=void 0,type=(config.format||"json").toLowerCase();switch(type){case"json":klass=Ext.data.JsonWriter;break;case"xml":klass=Ext.data.XmlWriter;break;default:klass=Ext.data.JsonWriter}return new klass(config)},destroy:function(){this.isDestroyed||(this.storeId&&Ext.StoreMgr.unregister(this),this.clearData(),this.data=null,Ext.destroy(this.proxy),this.reader=this.writer=null,this.purgeListeners(),this.isDestroyed=!0)},add:function(records){var i,len,record,index;if(records=[].concat(records),!(records.length<1)){for(i=0,len=records.length;len>i;i++)record=records[i],record.join(this),(record.dirty||record.phantom)&&this.modified.push(record);index=this.data.length,this.data.addAll(records),this.snapshot&&this.snapshot.addAll(records),this.fireEvent("add",this,records,index)}},addSorted:function(record){var index=this.findInsertIndex(record);this.insert(index,record)},doUpdate:function(rec){var id=rec.id;this.getById(id).join(null),this.data.replace(id,rec),this.snapshot&&this.snapshot.replace(id,rec),rec.join(this),this.fireEvent("update",this,rec,Ext.data.Record.COMMIT)},remove:function(record){if(Ext.isArray(record))return void Ext.each(record,function(r){this.remove(r)},this);var index=this.data.indexOf(record);index>-1&&(record.join(null),this.data.removeAt(index)),this.pruneModifiedRecords&&this.modified.remove(record),this.snapshot&&this.snapshot.remove(record),index>-1&&this.fireEvent("remove",this,record,index)},removeAt:function(index){this.remove(this.getAt(index))},removeAll:function(silent){var items=[];this.each(function(rec){items.push(rec)}),this.clearData(),this.snapshot&&this.snapshot.clear(),this.pruneModifiedRecords&&(this.modified=[]),silent!==!0&&this.fireEvent("clear",this,items)},onClear:function(store,records){Ext.each(records,function(rec,index){this.destroyRecord(this,rec,index)},this)},insert:function(index,records){var i,len,record;for(records=[].concat(records),i=0,len=records.length;len>i;i++)record=records[i],this.data.insert(index+i,record),record.join(this),(record.dirty||record.phantom)&&this.modified.push(record);this.snapshot&&this.snapshot.addAll(records),this.fireEvent("add",this,records,index)},indexOf:function(record){return this.data.indexOf(record)},indexOfId:function(id){return this.data.indexOfKey(id)},getById:function(id){return(this.snapshot||this.data).key(id)},getAt:function(index){return this.data.itemAt(index)},getRange:function(start,end){return this.data.getRange(start,end)},storeOptions:function(o){o=Ext.apply({},o),delete o.callback,delete o.scope,this.lastOptions=o},clearData:function(){this.data.each(function(rec){rec.join(null)}),this.data.clear()},load:function(options){if(options=Ext.apply({},options),this.storeOptions(options),this.sortInfo&&this.remoteSort){var pn=this.paramNames;options.params=Ext.apply({},options.params),options.params[pn.sort]=this.sortInfo.field,options.params[pn.dir]=this.sortInfo.direction}try{return this.execute("read",null,options)}catch(e){return this.handleException(e),!1}},updateRecord:function(store,record,action){action==Ext.data.Record.EDIT&&this.autoSave===!0&&(!record.phantom||record.phantom&&record.isValid())&&this.save()},createRecords:function(store,records,index){var record,i,modified=this.modified,length=records.length;for(i=0;length>i;i++)record=records[i],record.phantom&&record.isValid()&&(record.markDirty(),-1==modified.indexOf(record)&&modified.push(record));this.autoSave===!0&&this.save()},destroyRecord:function(store,record,index){-1!=this.modified.indexOf(record)&&this.modified.remove(record),record.phantom||(this.removed.push(record),record.lastIndex=index,this.autoSave===!0&&this.save())},execute:function(action,rs,options,batch){if(!Ext.data.Api.isAction(action))throw new Ext.data.Api.Error("execute",action);options=Ext.applyIf(options||{},{params:{}}),void 0!==batch&&this.addToBatch(batch);var doRequest=!0;return"read"===action?(doRequest=this.fireEvent("beforeload",this,options),Ext.applyIf(options.params,this.baseParams)):(this.writer.listful===!0&&this.restful!==!0?rs=Ext.isArray(rs)?rs:[rs]:Ext.isArray(rs)&&1==rs.length&&(rs=rs.shift()),(doRequest=this.fireEvent("beforewrite",this,action,rs,options))!==!1&&this.writer.apply(options.params,this.baseParams,action,rs)),doRequest!==!1&&(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,action)&&(options.params.xaction=action),this.proxy.request(Ext.data.Api.actions[action],rs,options.params,this.reader,this.createCallback(action,rs,batch),this,options)),doRequest},save:function(){if(!this.writer)throw new Ext.data.Store.Error("writer-undefined");
var len,trans,batch,i,queue=[],data={};this.removed.length&&queue.push(["destroy",this.removed]);var rs=[].concat(this.getModifiedRecords());if(rs.length){var phantoms=[];for(i=rs.length-1;i>=0;i--)if(rs[i].phantom===!0){var rec=rs.splice(i,1).shift();rec.isValid()&&phantoms.push(rec)}else rs[i].isValid()||rs.splice(i,1);phantoms.length&&queue.push(["create",phantoms]),rs.length&&queue.push(["update",rs])}if(len=queue.length){for(batch=++this.batchCounter,i=0;len>i;++i)trans=queue[i],data[trans[0]]=trans[1];if(this.fireEvent("beforesave",this,data)!==!1){for(i=0;len>i;++i)trans=queue[i],this.doTransaction(trans[0],trans[1],batch);return batch}}return-1},doTransaction:function(action,rs,batch){function transaction(records){try{this.execute(action,records,void 0,batch)}catch(e){this.handleException(e)}}if(this.batch===!1)for(var i=0,len=rs.length;len>i;i++)transaction.call(this,rs[i]);else transaction.call(this,rs)},addToBatch:function(batch){var b=this.batches,key=this.batchKey+batch,o=b[key];o||(b[key]=o={id:batch,count:0,data:{}}),++o.count},removeFromBatch:function(batch,action,data){var arr,b=this.batches,key=this.batchKey+batch,o=b[key];o&&(arr=o.data[action]||[],o.data[action]=arr.concat(data),1===o.count?(data=o.data,delete b[key],this.fireEvent("save",this,batch,data)):--o.count)},createCallback:function(action,rs,batch){Ext.data.Api.actions;return"read"==action?this.loadRecords:function(data,response,success){this["on"+Ext.util.Format.capitalize(action)+"Records"](success,rs,[].concat(data)),success===!0&&this.fireEvent("write",this,action,data,response,rs),this.removeFromBatch(batch,action,data)}},clearModified:function(rs){if(Ext.isArray(rs))for(var n=rs.length-1;n>=0;n--)this.modified.splice(this.modified.indexOf(rs[n]),1);else this.modified.splice(this.modified.indexOf(rs),1)},reMap:function(record){if(Ext.isArray(record))for(var i=0,len=record.length;len>i;i++)this.reMap(record[i]);else{delete this.data.map[record._phid],this.data.map[record.id]=record;var index=this.data.keys.indexOf(record._phid);this.data.keys.splice(index,1,record.id),delete record._phid}},onCreateRecords:function(success,rs,data){if(success===!0)try{this.reader.realize(rs,data)}catch(e){this.handleException(e),Ext.isArray(rs)&&this.onCreateRecords(success,rs,data)}},onUpdateRecords:function(success,rs,data){if(success===!0)try{this.reader.update(rs,data)}catch(e){this.handleException(e),Ext.isArray(rs)&&this.onUpdateRecords(success,rs,data)}},onDestroyRecords:function(success,rs,data){rs=rs instanceof Ext.data.Record?[rs]:[].concat(rs);for(var i=0,len=rs.length;len>i;i++)this.removed.splice(this.removed.indexOf(rs[i]),1);if(success===!1)for(i=rs.length-1;i>=0;i--)this.insert(rs[i].lastIndex,rs[i])},handleException:function(e){Ext.handleError(e)},reload:function(options){this.load(Ext.applyIf(options||{},this.lastOptions))},loadRecords:function(o,options,success){var i,len;if(this.isDestroyed!==!0){if(!o||success===!1)return success!==!1&&this.fireEvent("load",this,[],options),void(options.callback&&options.callback.call(options.scope||this,[],options,!1,o));var r=o.records,t=o.totalRecords||r.length;if(options&&options.add===!0){var rec,toAdd=[],cnt=0;for(i=0,len=r.length;len>i;++i)rec=r[i],this.indexOfId(rec.id)>-1?this.doUpdate(rec):(toAdd.push(rec),++cnt);this.totalLength=Math.max(t,this.data.length+cnt),this.add(toAdd)}else{for(this.pruneModifiedRecords&&(this.modified=[]),i=0,len=r.length;len>i;i++)r[i].join(this);this.snapshot&&(this.data=this.snapshot,delete this.snapshot),this.clearData(),this.data.addAll(r),this.totalLength=t,this.applySort(),this.fireEvent("datachanged",this)}this.fireEvent("load",this,r,options),options.callback&&options.callback.call(options.scope||this,r,options,!0)}},loadData:function(o,append){var r=this.reader.readRecords(o);this.loadRecords(r,{add:append},!0)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){!this.sortInfo&&!this.multiSortInfo||this.remoteSort||this.sortData()},sortData:function(){var sortInfo=this.hasMultiSort?this.multiSortInfo:this.sortInfo,direction=sortInfo.direction||"ASC",sorters=sortInfo.sorters,sortFns=[];this.hasMultiSort||(sorters=[{direction:direction,field:sortInfo.field}]);for(var i=0,j=sorters.length;j>i;i++)sortFns.push(this.createSortFunction(sorters[i].field,sorters[i].direction));if(0!=sortFns.length){var directionModifier="DESC"==direction.toUpperCase()?-1:1,fn=function(r1,r2){var result=sortFns[0].call(this,r1,r2);if(sortFns.length>1)for(var i=1,j=sortFns.length;j>i;i++)result=result||sortFns[i].call(this,r1,r2);return directionModifier*result};this.data.sort(direction,fn),this.snapshot&&this.snapshot!=this.data&&this.snapshot.sort(direction,fn)}},createSortFunction:function(field,direction){direction=direction||"ASC";var directionModifier="DESC"==direction.toUpperCase()?-1:1,sortType=this.fields.get(field).sortType;return function(r1,r2){var v1=sortType(r1.data[field]),v2=sortType(r2.data[field]);return directionModifier*(v1>v2?1:v2>v1?-1:0)}},setDefaultSort:function(field,dir){dir=dir?dir.toUpperCase():"ASC",this.sortInfo={field:field,direction:dir},this.sortToggle[field]=dir},sort:function(fieldName,dir){return Ext.isArray(arguments[0])?this.multiSort.call(this,fieldName,dir):this.singleSort(fieldName,dir)},singleSort:function(fieldName,dir){var field=this.fields.get(fieldName);if(!field)return!1;var name=field.name,sortInfo=this.sortInfo||null,sortToggle=this.sortToggle?this.sortToggle[name]:null;return dir||(dir=sortInfo&&sortInfo.field==name?(this.sortToggle[name]||"ASC").toggle("ASC","DESC"):field.sortDir),this.sortToggle[name]=dir,this.sortInfo={field:name,direction:dir},this.hasMultiSort=!1,this.remoteSort?this.load(this.lastOptions)||(sortToggle&&(this.sortToggle[name]=sortToggle),sortInfo&&(this.sortInfo=sortInfo)):(this.applySort(),this.fireEvent("datachanged",this)),!0},multiSort:function(sorters,direction){this.hasMultiSort=!0,direction=direction||"ASC",this.multiSortInfo&&direction==this.multiSortInfo.direction&&(direction=direction.toggle("ASC","DESC")),this.multiSortInfo={sorters:sorters,direction:direction},this.remoteSort?this.singleSort(sorters[0].field,sorters[0].direction):(this.applySort(),this.fireEvent("datachanged",this))},each:function(fn,scope){this.data.each(fn,scope)},getModifiedRecords:function(){return this.modified},sum:function(property,start,end){var rs=this.data.items,v=0;start=start||0,end=end||0===end?end:rs.length-1;for(var i=start;end>=i;i++)v+=rs[i].data[property]||0;return v},createFilterFn:function(property,value,anyMatch,caseSensitive,exactMatch){return Ext.isEmpty(value,!1)?!1:(value=this.data.createValueMatcher(value,anyMatch,caseSensitive,exactMatch),function(r){return value.test(r.data[property])})},createMultipleFilterFn:function(filters){return function(record){for(var isMatch=!0,i=0,j=filters.length;j>i;i++){var filter=filters[i],fn=filter.fn,scope=filter.scope;isMatch=isMatch&&fn.call(scope,record)}return isMatch}},filter:function(property,value,anyMatch,caseSensitive,exactMatch){var fn;if(Ext.isObject(property)&&(property=[property]),Ext.isArray(property)){for(var filters=[],i=0,j=property.length;j>i;i++){var filter=property[i],func=filter.fn,scope=filter.scope||this;Ext.isFunction(func)||(func=this.createFilterFn(filter.property,filter.value,filter.anyMatch,filter.caseSensitive,filter.exactMatch)),filters.push({fn:func,scope:scope})}fn=this.createMultipleFilterFn(filters)}else fn=this.createFilterFn(property,value,anyMatch,caseSensitive,exactMatch);return fn?this.filterBy(fn):this.clearFilter()},filterBy:function(fn,scope){this.snapshot=this.snapshot||this.data,this.data=this.queryBy(fn,scope||this),this.fireEvent("datachanged",this)},clearFilter:function(suppressEvent){this.isFiltered()&&(this.data=this.snapshot,delete this.snapshot,suppressEvent!==!0&&this.fireEvent("datachanged",this))},isFiltered:function(){return!!this.snapshot&&this.snapshot!=this.data},query:function(property,value,anyMatch,caseSensitive){var fn=this.createFilterFn(property,value,anyMatch,caseSensitive);return fn?this.queryBy(fn):this.data.clone()},queryBy:function(fn,scope){var data=this.snapshot||this.data;return data.filterBy(fn,scope||this)},find:function(property,value,start,anyMatch,caseSensitive){var fn=this.createFilterFn(property,value,anyMatch,caseSensitive);return fn?this.data.findIndexBy(fn,null,start):-1},findExact:function(property,value,start){return this.data.findIndexBy(function(rec){return rec.get(property)===value},this,start)},findBy:function(fn,scope,start){return this.data.findIndexBy(fn,scope,start)},collect:function(dataIndex,allowNull,bypassFilter){for(var v,sv,d=bypassFilter===!0&&this.snapshot?this.snapshot.items:this.data.items,r=[],l={},i=0,len=d.length;len>i;i++)v=d[i].data[dataIndex],sv=String(v),!allowNull&&Ext.isEmpty(v)||l[sv]||(l[sv]=!0,r[r.length]=v);return r},afterEdit:function(record){-1==this.modified.indexOf(record)&&this.modified.push(record),this.fireEvent("update",this,record,Ext.data.Record.EDIT)},afterReject:function(record){this.modified.remove(record),this.fireEvent("update",this,record,Ext.data.Record.REJECT)},afterCommit:function(record){this.modified.remove(record),this.fireEvent("update",this,record,Ext.data.Record.COMMIT)},commitChanges:function(){var i,modified=this.modified.slice(0),length=modified.length;for(i=0;length>i;i++)modified[i].commit();this.modified=[],this.removed=[]},rejectChanges:function(){var i,modified=this.modified.slice(0),removed=this.removed.slice(0).reverse(),mLength=modified.length,rLength=removed.length;for(i=0;mLength>i;i++)modified[i].reject();for(i=0;rLength>i;i++)this.insert(removed[i].lastIndex||0,removed[i]),removed[i].reject();this.modified=[],this.removed=[]},onMetaChange:function(meta){this.recordType=this.reader.recordType,this.fields=this.recordType.prototype.fields,delete this.snapshot,this.reader.meta.sortInfo?this.sortInfo=this.reader.meta.sortInfo:this.sortInfo&&!this.fields.get(this.sortInfo.field)&&delete this.sortInfo,this.writer&&(this.writer.meta=this.reader.meta),this.modified=[],this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(record){this.suspendEvents();var data=this.data.clone();this.data.add(record),this.applySort();var index=this.data.indexOf(record);return this.data=data,this.resumeEvents(),index},setBaseParam:function(name,value){this.baseParams=this.baseParams||{},this.baseParams[name]=value}}),Ext.reg("store",Ext.data.Store),Ext.data.Store.Error=Ext.extend(Ext.Error,{name:"Ext.data.Store"}),Ext.apply(Ext.data.Store.Error.prototype,{lang:{"writer-undefined":"Attempted to execute a write-action without a DataWriter installed."}}),Ext.data.Field=Ext.extend(Object,{constructor:function(config){Ext.isString(config)&&(config={name:config}),Ext.apply(this,config);var types=Ext.data.Types,st=this.sortType;this.type?Ext.isString(this.type)&&(this.type=Ext.data.Types[this.type.toUpperCase()]||types.AUTO):this.type=types.AUTO,Ext.isString(st)?this.sortType=Ext.data.SortTypes[st]:Ext.isEmpty(st)&&(this.sortType=this.type.sortType),this.convert||(this.convert=this.type.convert)},dateFormat:null,useNull:!1,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:!0}),Ext.data.DataReader=function(meta,recordType){this.meta=meta,this.recordType=Ext.isArray(recordType)?Ext.data.Record.create(recordType):recordType,this.recordType&&this.buildExtractors()},Ext.data.DataReader.prototype={getTotal:Ext.emptyFn,getRoot:Ext.emptyFn,getMessage:Ext.emptyFn,getSuccess:Ext.emptyFn,getId:Ext.emptyFn,buildExtractors:Ext.emptyFn,extractValues:Ext.emptyFn,realize:function(rs,data){if(Ext.isArray(rs))for(var i=rs.length-1;i>=0;i--)Ext.isArray(data)?this.realize(rs.splice(i,1).shift(),data.splice(i,1).shift()):this.realize(rs.splice(i,1).shift(),data);else{if(Ext.isArray(data)&&1==data.length&&(data=data.shift()),!this.isData(data))throw new Ext.data.DataReader.Error("realize",rs);rs.phantom=!1,rs._phid=rs.id,rs.id=this.getId(data),rs.data=data,rs.commit(),rs.store.reMap(rs)}},update:function(rs,data){if(Ext.isArray(rs))for(var i=rs.length-1;i>=0;i--)Ext.isArray(data)?this.update(rs.splice(i,1).shift(),data.splice(i,1).shift()):this.update(rs.splice(i,1).shift(),data);else Ext.isArray(data)&&1==data.length&&(data=data.shift()),this.isData(data)&&(rs.data=Ext.apply(rs.data,data)),rs.commit()},extractData:function(root,returnRecords){var rawName=this instanceof Ext.data.JsonReader?"json":"node",rs=[];!this.isData(root)||this instanceof Ext.data.XmlReader||(root=[root]);var f=this.recordType.prototype.fields,fi=f.items,fl=f.length,rs=[];if(returnRecords===!0)for(var Record=this.recordType,i=0;i<root.length;i++){var n=root[i],record=new Record(this.extractValues(n,fi,fl),this.getId(n));record[rawName]=n,rs.push(record)}else for(var i=0;i<root.length;i++){var data=this.extractValues(root[i],fi,fl);data[this.meta.idProperty]=this.getId(root[i]),rs.push(data)}return rs},isData:function(data){return data&&Ext.isObject(data)&&!Ext.isEmpty(this.getId(data))?!0:!1},onMetaChange:function(meta){delete this.ef,this.meta=meta,this.recordType=Ext.data.Record.create(meta.fields),this.buildExtractors()}},Ext.data.DataReader.Error=Ext.extend(Ext.Error,{constructor:function(message,arg){this.arg=arg,Ext.Error.call(this,message)},name:"Ext.data.DataReader"}),Ext.apply(Ext.data.DataReader.Error.prototype,{lang:{update:"#update received invalid data from server.  Please see docs for DataReader#update and review your DataReader configuration.",realize:"#realize was called with invalid remote-data.  Please see the docs for DataReader#realize and review your DataReader configuration.","invalid-response":"#readResponse received an invalid response from the server."}}),Ext.data.DataWriter=function(config){Ext.apply(this,config)},Ext.data.DataWriter.prototype={writeAllFields:!1,listful:!1,apply:function(params,baseParams,action,rs){var data=[],renderer=action+"Record";Ext.isArray(rs)?Ext.each(rs,function(rec){data.push(this[renderer](rec))},this):rs instanceof Ext.data.Record&&(data=this[renderer](rs)),this.render(params,baseParams,data)},render:Ext.emptyFn,updateRecord:Ext.emptyFn,createRecord:Ext.emptyFn,destroyRecord:Ext.emptyFn,toHash:function(rec,config){var m,map=rec.fields.map,data={},raw=this.writeAllFields===!1&&rec.phantom===!1?rec.getChanges():rec.data;return Ext.iterate(raw,function(prop,value){(m=map[prop])&&(data[m.mapping?m.mapping:m.name]=value)}),rec.phantom?rec.fields.containsKey(this.meta.idProperty)&&Ext.isEmpty(rec.data[this.meta.idProperty])&&delete data[this.meta.idProperty]:data[this.meta.idProperty]=rec.id,data},toArray:function(data){var fields=[];return Ext.iterate(data,function(k,v){fields.push({name:k,value:v})},this),fields}},Ext.data.DataProxy=function(conn){conn=conn||{},this.api=conn.api,this.url=conn.url,this.restful=conn.restful,this.listeners=conn.listeners,this.prettyUrls=conn.prettyUrls,this.addEvents("exception","beforeload","load","loadexception","beforewrite","write"),Ext.data.DataProxy.superclass.constructor.call(this);try{Ext.data.Api.prepare(this)}catch(e){e instanceof Ext.data.Api.Error&&e.toConsole()}Ext.data.DataProxy.relayEvents(this,["beforewrite","write","exception"])},Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{restful:!1,setApi:function(){if(1==arguments.length){var valid=Ext.data.Api.isValid(arguments[0]);if(valid!==!0)throw new Ext.data.Api.Error("invalid",valid);this.api=arguments[0]}else if(2==arguments.length){if(!Ext.data.Api.isAction(arguments[0]))throw new Ext.data.Api.Error("invalid",arguments[0]);this.api[arguments[0]]=arguments[1]}Ext.data.Api.prepare(this)},isApiAction:function(action){return this.api[action]?!0:!1},request:function(action,rs,params,reader,callback,scope,options){if(!this.api[action]&&!this.load)throw new Ext.data.DataProxy.Error("action-undefined",action);params=params||{},(action===Ext.data.Api.actions.read?this.fireEvent("beforeload",this,params):this.fireEvent("beforewrite",this,action,rs,params)!==!1)?this.doRequest.apply(this,arguments):callback.call(scope||this,null,options,!1)},load:null,doRequest:function(action,rs,params,reader,callback,scope,options){this.load(params,reader,callback,scope,options)},onRead:Ext.emptyFn,onWrite:Ext.emptyFn,buildUrl:function(action,record){record=record||null;var url=this.conn&&this.conn.url?this.conn.url:this.api[action]?this.api[action].url:this.url;if(!url)throw new Ext.data.Api.Error("invalid-url",action);var provides=null,m=url.match(/(.*)(\.json|\.xml|\.html)$/);return m&&(provides=m[2],url=m[1]),(this.restful===!0||this.prettyUrls===!0)&&record instanceof Ext.data.Record&&!record.phantom&&(url+="/"+record.id),null===provides?url:url+provides},destroy:function(){this.purgeListeners()}}),Ext.apply(Ext.data.DataProxy,Ext.util.Observable.prototype),Ext.util.Observable.call(Ext.data.DataProxy),Ext.data.DataProxy.Error=Ext.extend(Ext.Error,{constructor:function(message,arg){this.arg=arg,Ext.Error.call(this,message)},name:"Ext.data.DataProxy"}),Ext.apply(Ext.data.DataProxy.Error.prototype,{lang:{"action-undefined":"DataProxy attempted to execute an API-action but found an undefined url / function.  Please review your Proxy url/api-configuration.","api-invalid":"Recieved an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions from Ext.data.Api.actions."}}),Ext.data.Request=function(params){Ext.apply(this,params)},Ext.data.Request.prototype={action:void 0,rs:void 0,params:void 0,callback:Ext.emptyFn,scope:void 0,reader:void 0},Ext.data.Response=function(params){Ext.apply(this,params)},Ext.data.Response.prototype={action:void 0,success:void 0,message:void 0,data:void 0,raw:void 0,records:void 0},Ext.data.ScriptTagProxy=function(config){Ext.apply(this,config),Ext.data.ScriptTagProxy.superclass.constructor.call(this,config),this.head=document.getElementsByTagName("head")[0]},Ext.data.ScriptTagProxy.TRANS_ID=1e3,Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:3e4,callbackParam:"callback",nocache:!0,doRequest:function(action,rs,params,reader,callback,scope,arg){var p=Ext.urlEncode(Ext.apply(params,this.extraParams)),url=this.buildUrl(action,rs);if(!url)throw new Ext.data.Api.Error("invalid-url",url);url=Ext.urlAppend(url,p),this.nocache&&(url=Ext.urlAppend(url,"_dc="+(new Date).getTime()));var transId=++Ext.data.ScriptTagProxy.TRANS_ID,trans={id:transId,action:action,cb:"stcCallback"+transId,scriptId:"stcScript"+transId,params:params,arg:arg,url:url,callback:callback,scope:scope,reader:reader};window[trans.cb]=this.createCallback(action,rs,trans),url+=String.format("&{0}={1}",this.callbackParam,trans.cb),this.autoAbort!==!1&&this.abort(),trans.timeoutId=this.handleFailure.defer(this.timeout,this,[trans]);var script=document.createElement("script");script.setAttribute("src",url),script.setAttribute("type","text/javascript"),script.setAttribute("id",trans.scriptId),this.head.appendChild(script),this.trans=trans},createCallback:function(action,rs,trans){var self=this;return function(res){self.trans=!1,self.destroyTrans(trans,!0),action===Ext.data.Api.actions.read?self.onRead.call(self,action,trans,res):self.onWrite.call(self,action,trans,res,rs)}},onRead:function(action,trans,res){var result;try{result=trans.reader.readRecords(res)}catch(e){return this.fireEvent("loadexception",this,trans,res,e),this.fireEvent("exception",this,"response",action,trans,res,e),void trans.callback.call(trans.scope||window,null,trans.arg,!1)}result.success===!1?(this.fireEvent("loadexception",this,trans,res),this.fireEvent("exception",this,"remote",action,trans,res,null)):this.fireEvent("load",this,res,trans.arg),trans.callback.call(trans.scope||window,result,trans.arg,result.success)},onWrite:function(action,trans,response,rs){var reader=trans.reader;try{var res=reader.readResponse(action,response)}catch(e){return this.fireEvent("exception",this,"response",action,trans,res,e),void trans.callback.call(trans.scope||window,null,res,!1)}return!res.success==!0?(this.fireEvent("exception",this,"remote",action,trans,res,rs),void trans.callback.call(trans.scope||window,null,res,!1)):(this.fireEvent("write",this,action,res.data,res,rs,trans.arg),void trans.callback.call(trans.scope||window,res.data,res,!0))},isLoading:function(){return this.trans?!0:!1},abort:function(){this.isLoading()&&this.destroyTrans(this.trans)},destroyTrans:function(trans,isLoaded){if(this.head.removeChild(document.getElementById(trans.scriptId)),clearTimeout(trans.timeoutId),isLoaded){window[trans.cb]=void 0;try{delete window[trans.cb]}catch(e){}}else window[trans.cb]=function(){window[trans.cb]=void 0;try{delete window[trans.cb]}catch(e){}}},handleFailure:function(trans){this.trans=!1,this.destroyTrans(trans,!1),trans.action===Ext.data.Api.actions.read&&this.fireEvent("loadexception",this,null,trans.arg),this.fireEvent("exception",this,"response",trans.action,{response:null,options:trans.arg}),trans.callback.call(trans.scope||window,null,trans.arg,!1)},destroy:function(){this.abort(),Ext.data.ScriptTagProxy.superclass.destroy.call(this)}}),Ext.data.HttpProxy=function(conn){Ext.data.HttpProxy.superclass.constructor.call(this,conn),this.conn=conn,this.conn.url=null,this.useAjax=!conn||!conn.events;var actions=Ext.data.Api.actions;this.activeRequest={};for(var verb in actions)this.activeRequest[actions[verb]]=void 0},Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},setUrl:function(url,makePermanent){this.conn.url=url,makePermanent===!0&&(this.url=url,this.api=null,Ext.data.Api.prepare(this))},doRequest:function(action,rs,params,reader,cb,scope,arg){var o={method:this.api[action]?this.api[action].method:void 0,request:{callback:cb,scope:scope,arg:arg},reader:reader,callback:this.createCallback(action,rs),scope:this};params.jsonData?o.jsonData=params.jsonData:params.xmlData?o.xmlData=params.xmlData:o.params=params||{},this.conn.url=this.buildUrl(action,rs),this.useAjax?(Ext.applyIf(o,this.conn),action==Ext.data.Api.actions.read&&this.activeRequest[action]&&Ext.Ajax.abort(this.activeRequest[action]),this.activeRequest[action]=Ext.Ajax.request(o)):this.conn.request(o),this.conn.url=null},createCallback:function(action,rs){return function(o,success,response){return this.activeRequest[action]=void 0,success?void(action===Ext.data.Api.actions.read?this.onRead(action,o,response):this.onWrite(action,o,response,rs)):(action===Ext.data.Api.actions.read&&this.fireEvent("loadexception",this,o,response),this.fireEvent("exception",this,"response",action,o,response),void o.request.callback.call(o.request.scope,null,o.request.arg,!1))}},onRead:function(action,o,response){var result;try{result=o.reader.read(response)}catch(e){return this.fireEvent("loadexception",this,o,response,e),this.fireEvent("exception",this,"response",action,o,response,e),void o.request.callback.call(o.request.scope,null,o.request.arg,!1)}if(result.success===!1){this.fireEvent("loadexception",this,o,response);var res=o.reader.readResponse(action,response);this.fireEvent("exception",this,"remote",action,o,res,null)}else this.fireEvent("load",this,o,o.request.arg);o.request.callback.call(o.request.scope,result,o.request.arg,result.success)},onWrite:function(action,o,response,rs){var res,reader=o.reader;try{res=reader.readResponse(action,response)}catch(e){return this.fireEvent("exception",this,"response",action,o,response,e),void o.request.callback.call(o.request.scope,null,o.request.arg,!1)}res.success===!0?this.fireEvent("write",this,action,res.data,res,rs,o.request.arg):this.fireEvent("exception",this,"remote",action,o,res,rs),o.request.callback.call(o.request.scope,res.data,res,res.success)},destroy:function(){if(this.useAjax){if(this.activeRequest){var actions=Ext.data.Api.actions;for(var verb in actions)this.activeRequest[actions[verb]]&&Ext.Ajax.abort(this.activeRequest[actions[verb]])}}else this.conn.abort();Ext.data.HttpProxy.superclass.destroy.call(this)}}),Ext.data.MemoryProxy=function(data){var api={};api[Ext.data.Api.actions.read]=!0,Ext.data.MemoryProxy.superclass.constructor.call(this,{api:api}),this.data=data},Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{doRequest:function(action,rs,params,reader,callback,scope,arg){params=params||{};var result;try{result=reader.readRecords(this.data)}catch(e){return this.fireEvent("loadexception",this,null,arg,e),this.fireEvent("exception",this,"response",action,arg,null,e),void callback.call(scope,null,arg,!1)}callback.call(scope,result,arg,!0)}}),Ext.data.Types=new function(){var st=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\$,%]/g,AUTO:{convert:function(v){return v},sortType:st.none,type:"auto"},STRING:{convert:function(v){return void 0===v||null===v?"":String(v)},sortType:st.asUCString,type:"string"},INT:{convert:function(v){return void 0!==v&&null!==v&&""!==v?parseInt(String(v).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:st.none,type:"int"},FLOAT:{convert:function(v){return void 0!==v&&null!==v&&""!==v?parseFloat(String(v).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:st.none,type:"float"},BOOL:{convert:function(v){return v===!0||"true"===v||1==v},sortType:st.none,type:"bool"},DATE:{convert:function(v){var df=this.dateFormat;if(!v)return null;if(Ext.isDate(v))return v;if(df)return"timestamp"==df?new Date(1e3*v):"time"==df?new Date(parseInt(v,10)):Date.parseDate(v,df);var parsed=Date.parse(v);return parsed?new Date(parsed):null},sortType:st.asDate,type:"date"}}),Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})},Ext.data.JsonWriter=Ext.extend(Ext.data.DataWriter,{encode:!0,encodeDelete:!1,constructor:function(config){Ext.data.JsonWriter.superclass.constructor.call(this,config)},render:function(params,baseParams,data){if(this.encode===!0)Ext.apply(params,baseParams),params[this.meta.root]=Ext.encode(data);else{var jdata=Ext.apply({},baseParams);jdata[this.meta.root]=data,params.jsonData=jdata}},createRecord:function(rec){return this.toHash(rec)},updateRecord:function(rec){return this.toHash(rec)},destroyRecord:function(rec){if(this.encodeDelete){var data={};return data[this.meta.idProperty]=rec.id,data}return rec.id}}),Ext.data.JsonReader=function(meta,recordType){meta=meta||{},Ext.applyIf(meta,{idProperty:"id",successProperty:"success",totalProperty:"total"}),Ext.data.JsonReader.superclass.constructor.call(this,meta,recordType||meta.fields)},Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(response){var json=response.responseText,o=Ext.decode(json);if(!o)throw{message:"JsonReader.read: Json object not found"};return this.readRecords(o)},readResponse:function(action,response){var o=void 0!==response.responseText?Ext.decode(response.responseText):response;if(!o)throw new Ext.data.JsonReader.Error("response");var root=this.getRoot(o),success=this.getSuccess(o);if(success&&action===Ext.data.Api.actions.create){var def=Ext.isDefined(root);if(def&&Ext.isEmpty(root))throw new Ext.data.JsonReader.Error("root-empty",this.meta.root);if(!def)throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}var res=new Ext.data.Response({action:action,success:success,data:root?this.extractData(root,!1):[],message:this.getMessage(o),raw:o});if(Ext.isEmpty(res.success))throw new Ext.data.JsonReader.Error("successProperty-response",this.meta.successProperty);return res},readRecords:function(o){this.jsonData=o,o.metaData&&this.onMetaChange(o.metaData);var v,s=this.meta,Record=this.recordType,f=Record.prototype.fields,root=(f.items,f.length,this.getRoot(o)),c=root.length,totalRecords=c,success=!0;return s.totalProperty&&(v=parseInt(this.getTotal(o),10),isNaN(v)||(totalRecords=v)),s.successProperty&&(v=this.getSuccess(o),(v===!1||"false"===v)&&(success=!1)),{success:success,records:this.extractData(root,!0),totalRecords:totalRecords}},buildExtractors:function(){if(!this.ef){var s=this.meta,Record=this.recordType,f=Record.prototype.fields,fi=f.items,fl=f.length;if(s.totalProperty&&(this.getTotal=this.createAccessor(s.totalProperty)),s.successProperty&&(this.getSuccess=this.createAccessor(s.successProperty)),s.messageProperty&&(this.getMessage=this.createAccessor(s.messageProperty)),this.getRoot=s.root?this.createAccessor(s.root):function(p){return p},s.id||s.idProperty){var g=this.createAccessor(s.id||s.idProperty);this.getId=function(rec){var r=g(rec);return void 0===r||""===r?null:r}}else this.getId=function(){return null};for(var ef=[],i=0;fl>i;i++){f=fi[i];var map=void 0!==f.mapping&&null!==f.mapping?f.mapping:f.name;ef.push(this.createAccessor(map))}this.ef=ef}},simpleAccess:function(obj,subsc){return obj[subsc]},createAccessor:function(){var re=/[\[\.]/;return function(expr){if(Ext.isEmpty(expr))return Ext.emptyFn;if(Ext.isFunction(expr))return expr;var i=String(expr).search(re);return i>=0?new Function("obj","return obj"+(i>0?".":"")+expr):function(obj){return obj[expr]}}}(),extractValues:function(data,items,len){for(var f,values={},j=0;len>j;j++){f=items[j];var v=this.ef[j](data);values[f.name]=f.convert(void 0!==v?v:f.defaultValue,data)}return values}}),Ext.data.JsonReader.Error=Ext.extend(Ext.Error,{constructor:function(message,arg){this.arg=arg,Ext.Error.call(this,message)},name:"Ext.data.JsonReader"}),Ext.apply(Ext.data.JsonReader.Error.prototype,{lang:{response:"An error occurred while json-decoding your server response","successProperty-response":'Could not locate your "successProperty" in your server response.  Please review your JsonReader config to ensure the config-property "successProperty" matches the property in your server-response.  See the JsonReader docs.',"root-undefined-config":'Your JsonReader was configured without a "root" property.  Please review your JsonReader config and make sure to define the root property.  See the JsonReader docs.',"idProperty-undefined":'Your JsonReader was configured without an "idProperty"  Please review your JsonReader configuration and ensure the "idProperty" is set (e.g.: "id").  See the JsonReader docs.',"root-empty":'Data was expected to be returned by the server in the "root" property of the response.  Please review your JsonReader configuration to ensure the "root" property matches that returned in the server-response.  See JsonReader docs.'}}),Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(o){this.arrayData=o;for(var v,s=this.meta,sid=s?Ext.num(s.idIndex,s.id):null,recordType=this.recordType,fields=recordType.prototype.fields,records=[],success=!0,root=this.getRoot(o),i=0,len=root.length;len>i;i++){for(var n=root[i],values={},id=!sid&&0!==sid||void 0===n[sid]||""===n[sid]?null:n[sid],j=0,jlen=fields.length;jlen>j;j++){var f=fields.items[j],k=void 0!==f.mapping&&null!==f.mapping?f.mapping:j;v=void 0!==n[k]?n[k]:f.defaultValue,v=f.convert(v,n),values[f.name]=v}var record=new recordType(values,id);record.json=n,records[records.length]=record}var totalRecords=records.length;return s.totalProperty&&(v=parseInt(this.getTotal(o),10),isNaN(v)||(totalRecords=v)),s.successProperty&&(v=this.getSuccess(o),(v===!1||"false"===v)&&(success=!1)),{success:success,records:records,totalRecords:totalRecords}}}),Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(config){Ext.data.ArrayStore.superclass.constructor.call(this,Ext.apply(config,{reader:new Ext.data.ArrayReader(config)}))},loadData:function(data,append){if(this.expandData===!0){for(var r=[],i=0,len=data.length;len>i;i++)r[r.length]=[data[i]];data=r}Ext.data.ArrayStore.superclass.loadData.call(this,data,append)}}),Ext.reg("arraystore",Ext.data.ArrayStore),Ext.data.SimpleStore=Ext.data.ArrayStore,Ext.reg("simplestore",Ext.data.SimpleStore),Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(config){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(config,{reader:new Ext.data.JsonReader(config)}))}}),Ext.reg("jsonstore",Ext.data.JsonStore),Ext.data.XmlWriter=function(params){
Ext.data.XmlWriter.superclass.constructor.apply(this,arguments),this.tpl="string"==typeof this.tpl?new Ext.XTemplate(this.tpl).compile():this.tpl.compile()},Ext.extend(Ext.data.XmlWriter,Ext.data.DataWriter,{documentRoot:"xrequest",forceDocumentRoot:!1,root:"records",xmlVersion:"1.0",xmlEncoding:"ISO-8859-15",tpl:'<tpl for="."><?xml version="{version}" encoding="{encoding}"?><tpl if="documentRoot"><{documentRoot}><tpl for="baseParams"><tpl for="."><{name}>{value}</{name}></tpl></tpl></tpl><tpl if="records.length&gt;1"><{root}></tpl><tpl for="records"><{parent.record}><tpl for="."><{name}>{value}</{name}></tpl></{parent.record}></tpl><tpl if="records.length&gt;1"></{root}></tpl><tpl if="documentRoot"></{documentRoot}></tpl></tpl>',render:function(params,baseParams,data){baseParams=this.toArray(baseParams),params.xmlData=this.tpl.applyTemplate({version:this.xmlVersion,encoding:this.xmlEncoding,documentRoot:baseParams.length>0||this.forceDocumentRoot===!0?this.documentRoot:!1,record:this.meta.record,root:this.root,baseParams:baseParams,records:Ext.isArray(data[0])?data:[data]})},createRecord:function(rec){return this.toArray(this.toHash(rec))},updateRecord:function(rec){return this.toArray(this.toHash(rec))},destroyRecord:function(rec){var data={};return data[this.meta.idProperty]=rec.id,this.toArray(data)}}),Ext.data.XmlReader=function(meta,recordType){meta=meta||{},Ext.applyIf(meta,{idProperty:meta.idProperty||meta.idPath||meta.id,successProperty:meta.successProperty||meta.success}),Ext.data.XmlReader.superclass.constructor.call(this,meta,recordType||meta.fields)},Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(response){var doc=response.responseXML;if(!doc)throw{message:"XmlReader.read: XML Document not available"};return this.readRecords(doc)},readRecords:function(doc){this.xmlData=doc;var root=doc.documentElement||doc,q=Ext.DomQuery,totalRecords=0,success=!0;this.meta.totalProperty&&(totalRecords=this.getTotal(root,0)),this.meta.successProperty&&(success=this.getSuccess(root));var records=this.extractData(q.select(this.meta.record,root),!0);return{success:success,records:records,totalRecords:totalRecords||records.length}},readResponse:function(action,response){var q=Ext.DomQuery,doc=response.responseXML,root=doc.documentElement||doc,res=new Ext.data.Response({action:action,success:this.getSuccess(root),message:this.getMessage(root),data:this.extractData(q.select(this.meta.record,root)||q.select(this.meta.root,root),!1),raw:doc});if(Ext.isEmpty(res.success))throw new Ext.data.DataReader.Error("successProperty-response",this.meta.successProperty);if(action===Ext.data.Api.actions.create){var def=Ext.isDefined(res.data);if(def&&Ext.isEmpty(res.data))throw new Ext.data.JsonReader.Error("root-empty",this.meta.root);if(!def)throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}return res},getSuccess:function(){return!0},buildExtractors:function(){if(!this.ef){var s=this.meta,Record=this.recordType,f=Record.prototype.fields,fi=f.items,fl=f.length;if(s.totalProperty&&(this.getTotal=this.createAccessor(s.totalProperty)),s.successProperty&&(this.getSuccess=this.createAccessor(s.successProperty)),s.messageProperty&&(this.getMessage=this.createAccessor(s.messageProperty)),this.getRoot=function(res){return Ext.isEmpty(res[this.meta.record])?res[this.meta.root]:res[this.meta.record]},s.idPath||s.idProperty){var g=this.createAccessor(s.idPath||s.idProperty);this.getId=function(rec){var id=g(rec)||rec.id;return void 0===id||""===id?null:id}}else this.getId=function(){return null};for(var ef=[],i=0;fl>i;i++){f=fi[i];var map=void 0!==f.mapping&&null!==f.mapping?f.mapping:f.name;ef.push(this.createAccessor(map))}this.ef=ef}},createAccessor:function(){var q=Ext.DomQuery;return function(key){if(Ext.isFunction(key))return key;switch(key){case this.meta.totalProperty:return function(root,def){return q.selectNumber(key,root,def)};case this.meta.successProperty:return function(root,def){var sv=q.selectValue(key,root,!0),success=sv!==!1&&"false"!==sv;return success};default:return function(root,def){return q.selectValue(key,root,def)}}}}(),extractValues:function(data,items,len){for(var f,values={},j=0;len>j;j++){f=items[j];var v=this.ef[j](data);values[f.name]=f.convert(void 0!==v?v:f.defaultValue,data)}return values}}),Ext.data.XmlStore=Ext.extend(Ext.data.Store,{constructor:function(config){Ext.data.XmlStore.superclass.constructor.call(this,Ext.apply(config,{reader:new Ext.data.XmlReader(config)}))}}),Ext.reg("xmlstore",Ext.data.XmlStore),Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(config){config=config||{},this.hasMultiSort=!0,this.multiSortInfo=this.multiSortInfo||{sorters:[]};var sorters=this.multiSortInfo.sorters,groupField=config.groupField||this.groupField,sortInfo=config.sortInfo||this.sortInfo,groupDir=config.groupDir||this.groupDir;groupField&&sorters.push({field:groupField,direction:groupDir}),sortInfo&&sorters.push(sortInfo),Ext.data.GroupingStore.superclass.constructor.call(this,config),this.addEvents("groupchange"),this.applyGroupField()},remoteGroup:!1,groupOnSort:!1,groupDir:"ASC",clearGrouping:function(){if(this.groupField=!1,this.remoteGroup){this.baseParams&&(delete this.baseParams.groupBy,delete this.baseParams.groupDir);var lo=this.lastOptions;lo&&lo.params&&(delete lo.params.groupBy,delete lo.params.groupDir),this.reload()}else this.sort(),this.fireEvent("datachanged",this)},groupBy:function(field,forceRegroup,direction){if(direction=direction?"DESC"==String(direction).toUpperCase()?"DESC":"ASC":this.groupDir,this.groupField!=field||this.groupDir!=direction||forceRegroup){var sorters=this.multiSortInfo.sorters;sorters.length>0&&sorters[0].field==this.groupField&&sorters.shift(),this.groupField=field,this.groupDir=direction,this.applyGroupField();var fireGroupEvent=function(){this.fireEvent("groupchange",this,this.getGroupState())};return this.groupOnSort?(this.sort(field,direction),void fireGroupEvent.call(this)):void(this.remoteGroup?(this.on("load",fireGroupEvent,this,{single:!0}),this.reload()):(this.sort(sorters),fireGroupEvent.call(this)))}},sort:function(fieldName,dir){if(this.remoteSort)return Ext.data.GroupingStore.superclass.sort.call(this,fieldName,dir);var sorters=[];if(Ext.isArray(arguments[0]))sorters=arguments[0];else if(void 0==fieldName)sorters=this.sortInfo?[this.sortInfo]:[];else{var field=this.fields.get(fieldName);if(!field)return!1;var name=field.name,sortInfo=this.sortInfo||null;this.sortToggle?this.sortToggle[name]:null;dir||(dir=sortInfo&&sortInfo.field==name?(this.sortToggle[name]||"ASC").toggle("ASC","DESC"):field.sortDir),this.sortToggle[name]=dir,this.sortInfo={field:name,direction:dir},sorters=[this.sortInfo]}return this.groupField&&sorters.unshift({direction:this.groupDir,field:this.groupField}),this.multiSort.call(this,sorters,dir)},applyGroupField:function(){if(this.remoteGroup){this.baseParams||(this.baseParams={}),Ext.apply(this.baseParams,{groupBy:this.groupField,groupDir:this.groupDir});var lo=this.lastOptions;lo&&lo.params&&(lo.params.groupDir=this.groupDir,delete lo.params.groupBy)}},applyGrouping:function(alwaysFireChange){return this.groupField!==!1?(this.groupBy(this.groupField,!0,this.groupDir),!0):(alwaysFireChange===!0&&this.fireEvent("datachanged",this),!1)},getGroupState:function(){return this.groupOnSort&&this.groupField!==!1?this.sortInfo?this.sortInfo.field:void 0:this.groupField}}),Ext.reg("groupingstore",Ext.data.GroupingStore),Ext.data.DirectProxy=function(config){Ext.apply(this,config),"string"==typeof this.paramOrder&&(this.paramOrder=this.paramOrder.split(/[\s,|]/)),Ext.data.DirectProxy.superclass.constructor.call(this,config)},Ext.extend(Ext.data.DirectProxy,Ext.data.DataProxy,{paramOrder:void 0,paramsAsHash:!0,directFn:void 0,doRequest:function(action,rs,params,reader,callback,scope,options){var args=[],directFn=this.api[action]||this.directFn;switch(action){case Ext.data.Api.actions.create:args.push(params.jsonData);break;case Ext.data.Api.actions.read:if(directFn.directCfg.method.len>0)if(this.paramOrder)for(var i=0,len=this.paramOrder.length;len>i;i++)args.push(params[this.paramOrder[i]]);else this.paramsAsHash&&args.push(params);break;case Ext.data.Api.actions.update:args.push(params.jsonData);break;case Ext.data.Api.actions.destroy:args.push(params.jsonData)}var trans={params:params||{},request:{callback:callback,scope:scope,arg:options},reader:reader};args.push(this.createCallback(action,rs,trans),this),directFn.apply(window,args)},createCallback:function(action,rs,trans){var me=this;return function(result,res){return res.status?void(action===Ext.data.Api.actions.read?me.onRead(action,trans,result,res):me.onWrite(action,trans,result,res,rs)):(action===Ext.data.Api.actions.read&&me.fireEvent("loadexception",me,trans,res,null),me.fireEvent("exception",me,"remote",action,trans,res,null),void trans.request.callback.call(trans.request.scope,null,trans.request.arg,!1))}},onRead:function(action,trans,result,res){var records;try{records=trans.reader.readRecords(result)}catch(ex){return this.fireEvent("loadexception",this,trans,res,ex),this.fireEvent("exception",this,"response",action,trans,res,ex),void trans.request.callback.call(trans.request.scope,null,trans.request.arg,!1)}this.fireEvent("load",this,res,trans.request.arg),trans.request.callback.call(trans.request.scope,records,trans.request.arg,!0)},onWrite:function(action,trans,result,res,rs){var data=trans.reader.extractData(trans.reader.getRoot(result),!1),success=trans.reader.getSuccess(result);success=success!==!1,success?this.fireEvent("write",this,action,data,res,rs,trans.request.arg):this.fireEvent("exception",this,"remote",action,trans,result,rs),trans.request.callback.call(trans.request.scope,data,res,success)}}),Ext.data.DirectStore=Ext.extend(Ext.data.Store,{constructor:function(config){var c=Ext.apply({},{batchTransactions:!1},config);Ext.data.DirectStore.superclass.constructor.call(this,Ext.apply(c,{proxy:Ext.isDefined(c.proxy)?c.proxy:new Ext.data.DirectProxy(Ext.copyTo({},c,"paramOrder,paramsAsHash,directFn,api")),reader:!Ext.isDefined(c.reader)&&c.fields?new Ext.data.JsonReader(Ext.copyTo({},c,"totalProperty,root,idProperty"),c.fields):c.reader}))}}),Ext.reg("directstore",Ext.data.DirectStore),Ext.Direct=Ext.extend(Ext.util.Observable,{exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"},constructor:function(){this.addEvents("event","exception"),this.transactions={},this.providers={}},addProvider:function(provider){var a=arguments;{if(!(a.length>1))return provider.events||(provider=new Ext.Direct.PROVIDERS[provider.type](provider)),provider.id=provider.id||Ext.id(),this.providers[provider.id]=provider,provider.on("data",this.onProviderData,this),provider.on("exception",this.onProviderException,this),provider.isConnected()||provider.connect(),provider;for(var i=0,len=a.length;len>i;i++)this.addProvider(a[i])}},getProvider:function(id){return this.providers[id]},removeProvider:function(id){var provider=id.id?id:this.providers[id];return provider.un("data",this.onProviderData,this),provider.un("exception",this.onProviderException,this),delete this.providers[provider.id],provider},addTransaction:function(t){return this.transactions[t.tid]=t,t},removeTransaction:function(t){return delete this.transactions[t.tid||t],t},getTransaction:function(tid){return this.transactions[tid.tid||tid]},onProviderData:function(provider,e){if(Ext.isArray(e))for(var i=0,len=e.length;len>i;i++)this.onProviderData(provider,e[i]);else e.name&&"event"!=e.name&&"exception"!=e.name?this.fireEvent(e.name,e):"exception"==e.type&&this.fireEvent("exception",e),this.fireEvent("event",e,provider)},createEvent:function(response,extraProps){return new Ext.Direct.eventTypes[response.type](Ext.apply(response,extraProps))}}),Ext.Direct=new Ext.Direct,Ext.Direct.TID=1,Ext.Direct.PROVIDERS={},Ext.Direct.Transaction=function(config){Ext.apply(this,config),this.tid=++Ext.Direct.TID,this.retryCount=0},Ext.Direct.Transaction.prototype={send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++,this.send()},getProvider:function(){return this.provider}},Ext.Direct.Event=function(config){Ext.apply(this,config)},Ext.Direct.Event.prototype={status:!0,getData:function(){return this.data}},Ext.Direct.RemotingEvent=Ext.extend(Ext.Direct.Event,{type:"rpc",getTransaction:function(){return this.transaction||Ext.Direct.getTransaction(this.tid)}}),Ext.Direct.ExceptionEvent=Ext.extend(Ext.Direct.RemotingEvent,{status:!1,type:"exception"}),Ext.Direct.eventTypes={rpc:Ext.Direct.RemotingEvent,event:Ext.Direct.Event,exception:Ext.Direct.ExceptionEvent},Ext.direct.Provider=Ext.extend(Ext.util.Observable,{priority:1,constructor:function(config){Ext.apply(this,config),this.addEvents("connect","disconnect","data","exception"),Ext.direct.Provider.superclass.constructor.call(this,config)},isConnected:function(){return!1},connect:Ext.emptyFn,disconnect:Ext.emptyFn}),Ext.direct.JsonProvider=Ext.extend(Ext.direct.Provider,{parseResponse:function(xhr){return Ext.isEmpty(xhr.responseText)?null:"object"==typeof xhr.responseText?xhr.responseText:Ext.decode(xhr.responseText)},getEvents:function(xhr){var data=null;try{data=this.parseResponse(xhr)}catch(e){var event=new Ext.Direct.ExceptionEvent({data:e,xhr:xhr,code:Ext.Direct.exceptions.PARSE,message:"Error parsing json response: \n\n "+data});return[event]}var events=[];if(Ext.isArray(data))for(var i=0,len=data.length;len>i;i++)events.push(Ext.Direct.createEvent(data[i]));else events.push(Ext.Direct.createEvent(data));return events}}),Ext.direct.PollingProvider=Ext.extend(Ext.direct.JsonProvider,{priority:3,interval:3e3,constructor:function(config){Ext.direct.PollingProvider.superclass.constructor.call(this,config),this.addEvents("beforepoll","poll")},isConnected:function(){return!!this.pollTask},connect:function(){if(this.url&&!this.pollTask)this.pollTask=Ext.TaskMgr.start({run:function(){this.fireEvent("beforepoll",this)!==!1&&("function"==typeof this.url?this.url(this.baseParams):Ext.Ajax.request({url:this.url,callback:this.onData,scope:this,params:this.baseParams}))},interval:this.interval,scope:this}),this.fireEvent("connect",this);else if(!this.url)throw"Error initializing PollingProvider, no url configured."},disconnect:function(){this.pollTask&&(Ext.TaskMgr.stop(this.pollTask),delete this.pollTask,this.fireEvent("disconnect",this))},onData:function(opt,success,xhr){if(success)for(var events=this.getEvents(xhr),i=0,len=events.length;len>i;i++){var e=events[i];this.fireEvent("data",this,e)}else{var e=new Ext.Direct.ExceptionEvent({data:e,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:xhr});this.fireEvent("data",this,e)}}}),Ext.Direct.PROVIDERS.polling=Ext.direct.PollingProvider,Ext.direct.RemotingProvider=Ext.extend(Ext.direct.JsonProvider,{enableBuffer:10,maxRetries:1,timeout:void 0,constructor:function(config){Ext.direct.RemotingProvider.superclass.constructor.call(this,config),this.addEvents("beforecall","call"),this.namespace=Ext.isString(this.namespace)?Ext.ns(this.namespace):this.namespace||window,this.transactions={},this.callBuffer=[]},initAPI:function(){var o=this.actions;for(var c in o)for(var cls=this.namespace[c]||(this.namespace[c]={}),ms=o[c],i=0,len=ms.length;len>i;i++){var m=ms[i];cls[m.name]=this.createMethod(c,m)}},isConnected:function(){return!!this.connected},connect:function(){if(this.url)this.initAPI(),this.connected=!0,this.fireEvent("connect",this);else if(!this.url)throw"Error initializing RemotingProvider, no url configured."},disconnect:function(){this.connected&&(this.connected=!1,this.fireEvent("disconnect",this))},onData:function(opt,success,xhr){if(success)for(var events=this.getEvents(xhr),i=0,len=events.length;len>i;i++){var e=events[i],t=this.getTransaction(e);this.fireEvent("data",this,e),t&&(this.doCallback(t,e,!0),Ext.Direct.removeTransaction(t))}else for(var ts=[].concat(opt.ts),i=0,len=ts.length;len>i;i++){var t=this.getTransaction(ts[i]);if(t&&t.retryCount<this.maxRetries)t.retry();else{var e=new Ext.Direct.ExceptionEvent({data:e,transaction:t,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:xhr});this.fireEvent("data",this,e),t&&(this.doCallback(t,e,!1),Ext.Direct.removeTransaction(t))}}},getCallData:function(t){return{action:t.action,method:t.method,data:t.data,type:"rpc",tid:t.tid}},doSend:function(data){var callData,o={url:this.url,callback:this.onData,scope:this,ts:data,timeout:this.timeout};if(Ext.isArray(data)){callData=[];for(var i=0,len=data.length;len>i;i++)callData.push(this.getCallData(data[i]))}else callData=this.getCallData(data);if(this.enableUrlEncode){var params={};params[Ext.isString(this.enableUrlEncode)?this.enableUrlEncode:"data"]=Ext.encode(callData),o.params=params}else o.jsonData=callData;Ext.Ajax.request(o)},combineAndSend:function(){var len=this.callBuffer.length;len>0&&(this.doSend(1==len?this.callBuffer[0]:this.callBuffer),this.callBuffer=[])},queueTransaction:function(t){return t.form?void this.processForm(t):(this.callBuffer.push(t),void(this.enableBuffer?(this.callTask||(this.callTask=new Ext.util.DelayedTask(this.combineAndSend,this)),this.callTask.delay(Ext.isNumber(this.enableBuffer)?this.enableBuffer:10)):this.combineAndSend()))},doCall:function(c,m,args){var data=null,hs=args[m.len],scope=args[m.len+1];0!==m.len&&(data=args.slice(0,m.len));var t=new Ext.Direct.Transaction({provider:this,args:args,action:c,method:m.name,data:data,cb:scope&&Ext.isFunction(hs)?hs.createDelegate(scope):hs});this.fireEvent("beforecall",this,t,m)!==!1&&(Ext.Direct.addTransaction(t),this.queueTransaction(t),this.fireEvent("call",this,t,m))},doForm:function(c,m,form,callback,scope){var t=new Ext.Direct.Transaction({provider:this,action:c,method:m.name,args:[form,callback,scope],cb:scope&&Ext.isFunction(callback)?callback.createDelegate(scope):callback,isForm:!0});if(this.fireEvent("beforecall",this,t,m)!==!1){Ext.Direct.addTransaction(t);var isUpload="multipart/form-data"==String(form.getAttribute("enctype")).toLowerCase(),params={extTID:t.tid,extAction:c,extMethod:m.name,extType:"rpc",extUpload:String(isUpload)};Ext.apply(t,{form:Ext.getDom(form),isUpload:isUpload,params:callback&&Ext.isObject(callback.params)?Ext.apply(params,callback.params):params}),this.fireEvent("call",this,t,m),this.processForm(t)}},processForm:function(t){Ext.Ajax.request({url:this.url,params:t.params,callback:this.onData,scope:this,form:t.form,isUpload:t.isUpload,ts:t})},createMethod:function(c,m){var f;return f=m.formHandler?function(form,callback,scope){this.doForm(c,m,form,callback,scope)}.createDelegate(this):function(){this.doCall(c,m,Array.prototype.slice.call(arguments,0))}.createDelegate(this),f.directCfg={action:c,method:m},f},getTransaction:function(opt){return opt&&opt.tid?Ext.Direct.getTransaction(opt.tid):null},doCallback:function(t,e){var fn=e.status?"success":"failure";if(t&&t.cb){var hs=t.cb,result=Ext.isDefined(e.result)?e.result:e.data;Ext.isFunction(hs)?hs(result,e):(Ext.callback(hs[fn],hs.scope,[result,e]),Ext.callback(hs.callback,hs.scope,[result,e]))}}}),Ext.Direct.PROVIDERS.remoting=Ext.direct.RemotingProvider,Ext.Resizable=Ext.extend(Ext.util.Observable,{constructor:function(el,config){if(this.el=Ext.get(el),config&&config.wrap){if(config.resizeChild=this.el,this.el=this.el.wrap("object"==typeof config.wrap?config.wrap:{cls:"xresizable-wrap"}),this.el.id=this.el.dom.id=config.resizeChild.id+"-rzwrap",this.el.setStyle("overflow","hidden"),this.el.setPositioning(config.resizeChild.getPositioning()),config.resizeChild.clearPositioning(),!config.width||!config.height){var csize=config.resizeChild.getSize();this.el.setSize(csize.width,csize.height)}config.pinned&&!config.adjustments&&(config.adjustments="auto")}this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody()),this.proxy.unselectable(),this.proxy.enableDisplayMode("block"),Ext.apply(this,config),this.pinned&&(this.disableTrackOver=!0,this.el.addClass("x-resizable-pinned"));var position=this.el.getStyle("position");"absolute"!=position&&"fixed"!=position&&this.el.setStyle("position","relative"),this.handles||(this.handles="s,e,se",this.multiDirectional&&(this.handles+=",n,w")),"all"==this.handles&&(this.handles="n s e w ne nw se sw");for(var hs=this.handles.split(/\s*?[,;]\s*?| /),ps=Ext.Resizable.positions,i=0,len=hs.length;len>i;i++)if(hs[i]&&ps[hs[i]]){var pos=ps[hs[i]];this[pos]=new Ext.Resizable.Handle(this,pos,this.disableTrackOver,this.transparent,this.handleCls)}if(this.corner=this.southeast,(-1!=this.handles.indexOf("n")||-1!=this.handles.indexOf("w"))&&(this.updateBox=!0),this.activeHandle=null,this.resizeChild&&("boolean"==typeof this.resizeChild?this.resizeChild=Ext.get(this.el.dom.firstChild,!0):this.resizeChild=Ext.get(this.resizeChild,!0)),"auto"==this.adjustments){var rc=this.resizeChild,hw=this.west,he=this.east,hn=this.north,hs=this.south;rc&&(hw||hn)&&(rc.position("relative"),rc.setLeft(hw?hw.el.getWidth():0),rc.setTop(hn?hn.el.getHeight():0)),this.adjustments=[(he?-he.el.getWidth():0)+(hw?-hw.el.getWidth():0),(hn?-hn.el.getHeight():0)+(hs?-hs.el.getHeight():0)-1]}this.draggable&&(this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id}),this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id),this.constrainTo&&this.dd.constrainTo(this.constrainTo)),this.addEvents("beforeresize","resize"),null!==this.width&&null!==this.height?this.resizeTo(this.width,this.height):this.updateChildSize(),Ext.isIE&&(this.el.dom.style.zoom=1),Ext.Resizable.superclass.constructor.call(this)},adjustments:[0,0],animate:!1,disableTrackOver:!1,draggable:!1,duration:.35,dynamic:!1,easing:"easeOutStrong",enabled:!0,handles:!1,multiDirectional:!1,height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:1e4,maxWidth:1e4,minX:0,minY:0,pinned:!1,preserveRatio:!1,resizeChild:!1,transparent:!1,resizeTo:function(width,height){this.el.setSize(width,height),this.updateChildSize(),this.fireEvent("resize",this,width,height,null)},startSizing:function(e,handle){if(this.fireEvent("beforeresize",this,e),this.enabled){if(this.overlay||(this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody()),this.overlay.unselectable(),this.overlay.enableDisplayMode("block"),this.overlay.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})),this.overlay.setStyle("cursor",handle.el.getStyle("cursor")),this.resizing=!0,this.startBox=this.el.getBox(),this.startPoint=e.getXY(),this.offsets=[this.startBox.x+this.startBox.width-this.startPoint[0],this.startBox.y+this.startBox.height-this.startPoint[1]],this.overlay.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.overlay.show(),this.constrainTo){var ct=Ext.get(this.constrainTo);this.resizeRegion=ct.getRegion().adjust(ct.getFrameWidth("t"),ct.getFrameWidth("l"),-ct.getFrameWidth("b"),-ct.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden"),this.proxy.show(),this.proxy.setBox(this.startBox),this.dynamic||this.proxy.setStyle("visibility","visible")}},onMouseDown:function(handle,e){this.enabled&&(e.stopEvent(),this.activeHandle=handle,this.startSizing(e,handle))},onMouseUp:function(e){this.activeHandle=null;var size=this.resizeElement();this.resizing=!1,this.handleOut(),this.overlay.hide(),this.proxy.hide(),this.fireEvent("resize",this,size.width,size.height,e)},updateChildSize:function(){if(this.resizeChild){var el=this.el,child=this.resizeChild,adj=this.adjustments;if(el.dom.offsetWidth){var b=el.getSize(!0);child.setSize(b.width+adj[0],b.height+adj[1])}Ext.isIE9m&&setTimeout(function(){if(el.dom.offsetWidth){var b=el.getSize(!0);child.setSize(b.width+adj[0],b.height+adj[1])}},10)}},snap:function(value,inc,min){if(!inc||!value)return value;var newValue=value,m=value%inc;return m>0&&(newValue=m>inc/2?value+(inc-m):value-m),Math.max(min,newValue)},resizeElement:function(){var box=this.proxy.getBox();return this.updateBox?this.el.setBox(box,!1,this.animate,this.duration,null,this.easing):this.el.setSize(box.width,box.height,this.animate,this.duration,null,this.easing),this.updateChildSize(),this.dynamic||this.proxy.hide(),this.draggable&&this.constrainTo&&(this.dd.resetConstraints(),this.dd.constrainTo(this.constrainTo)),box},constrain:function(v,diff,m,mx){return m>v-diff?diff=v-m:v-diff>mx&&(diff=v-mx),diff},onMouseMove:function(e){if(this.enabled&&this.activeHandle)try{if(this.resizeRegion&&!this.resizeRegion.contains(e.getPoint()))return;var tw,th,curSize=this.curSize||this.startBox,x=this.startBox.x,y=this.startBox.y,w=curSize.width,h=curSize.height,ow=w,oh=h,mw=this.minWidth,mh=this.minHeight,mxw=this.maxWidth,mxh=this.maxHeight,wi=this.widthIncrement,hi=this.heightIncrement,eventXY=e.getXY(),diffX=-(this.startPoint[0]-Math.max(this.minX,eventXY[0])),diffY=-(this.startPoint[1]-Math.max(this.minY,eventXY[1])),pos=this.activeHandle.position;switch(pos){case"east":w+=diffX,w=Math.min(Math.max(mw,w),mxw);break;case"south":h+=diffY,h=Math.min(Math.max(mh,h),mxh);break;case"southeast":w+=diffX,h+=diffY,w=Math.min(Math.max(mw,w),mxw),h=Math.min(Math.max(mh,h),mxh);break;case"north":diffY=this.constrain(h,diffY,mh,mxh),y+=diffY,h-=diffY;break;case"west":diffX=this.constrain(w,diffX,mw,mxw),x+=diffX,w-=diffX;break;case"northeast":w+=diffX,w=Math.min(Math.max(mw,w),mxw),diffY=this.constrain(h,diffY,mh,mxh),y+=diffY,h-=diffY;break;case"northwest":diffX=this.constrain(w,diffX,mw,mxw),diffY=this.constrain(h,diffY,mh,mxh),y+=diffY,h-=diffY,x+=diffX,w-=diffX;break;case"southwest":diffX=this.constrain(w,diffX,mw,mxw),h+=diffY,h=Math.min(Math.max(mh,h),mxh),x+=diffX,w-=diffX}var sw=this.snap(w,wi,mw),sh=this.snap(h,hi,mh);if(sw!=w||sh!=h){switch(pos){case"northeast":y-=sh-h;break;case"north":y-=sh-h;break;case"southwest":x-=sw-w;break;case"west":x-=sw-w;break;case"northwest":x-=sw-w,y-=sh-h}w=sw,h=sh}if(this.preserveRatio)switch(pos){case"southeast":case"east":h=oh*(w/ow),h=Math.min(Math.max(mh,h),mxh),w=ow*(h/oh);break;case"south":w=ow*(h/oh),w=Math.min(Math.max(mw,w),mxw),h=oh*(w/ow);break;case"northeast":w=ow*(h/oh),w=Math.min(Math.max(mw,w),mxw),h=oh*(w/ow);break;case"north":tw=w,w=ow*(h/oh),w=Math.min(Math.max(mw,w),mxw),h=oh*(w/ow),x+=(tw-w)/2;break;case"southwest":h=oh*(w/ow),h=Math.min(Math.max(mh,h),mxh),tw=w,w=ow*(h/oh),x+=tw-w;break;case"west":th=h,h=oh*(w/ow),h=Math.min(Math.max(mh,h),mxh),y+=(th-h)/2,tw=w,w=ow*(h/oh),x+=tw-w;break;case"northwest":tw=w,th=h,h=oh*(w/ow),h=Math.min(Math.max(mh,h),mxh),w=ow*(h/oh),y+=th-h,x+=tw-w}this.proxy.setBounds(x,y,w,h),this.dynamic&&this.resizeElement()}catch(ex){}},handleOver:function(){this.enabled&&this.el.addClass("x-resizable-over")},handleOut:function(){this.resizing||this.el.removeClass("x-resizable-over")},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(removeEl){Ext.destroy(this.dd,this.overlay,this.proxy),this.overlay=null,this.proxy=null;var ps=Ext.Resizable.positions;for(var k in ps)"function"!=typeof ps[k]&&this[ps[k]]&&this[ps[k]].destroy();removeEl&&(this.el.update(""),Ext.destroy(this.el),this.el=null),this.purgeListeners()},syncHandleHeight:function(){var h=this.el.getHeight(!0);this.west&&this.west.el.setHeight(h),this.east&&this.east.el.setHeight(h)}}),Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"},Ext.Resizable.Handle=Ext.extend(Object,{constructor:function(rz,pos,disableTrackOver,transparent,cls){if(!this.tpl){var tpl=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});tpl.compile(),Ext.Resizable.Handle.prototype.tpl=tpl}this.position=pos,this.rz=rz,this.el=this.tpl.append(rz.el.dom,[this.position],!0),this.el.unselectable(),transparent&&this.el.setOpacity(0),Ext.isEmpty(cls)||this.el.addClass(cls),this.el.on("mousedown",this.onMouseDown,this),disableTrackOver||this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})},afterResize:function(rz){},onMouseDown:function(e){this.rz.onMouseDown(this,e)},onMouseOver:function(e){this.rz.handleOver(this,e)},onMouseOut:function(e){this.rz.handleOut(this,e)},destroy:function(){Ext.destroy(this.el),this.el=null}}),Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:!0,draggable:!0,closable:!0,closeAction:"close",constrain:!1,constrainHeader:!1,plain:!1,minimizable:!1,maximizable:!1,minHeight:100,minWidth:200,expandOnShow:!0,showAnimDuration:.25,hideAnimDuration:.25,collapsible:!1,initHidden:void 0,hidden:!0,elements:"header,body",frame:!0,floating:!0,initComponent:function(){this.initTools(),Ext.Window.superclass.initComponent.call(this),this.addEvents("resize","maximize","minimize","restore"),Ext.isDefined(this.initHidden)&&(this.hidden=this.initHidden),this.hidden===!1&&(this.hidden=!0,this.show())},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(!0))},onRender:function(ct,position){Ext.Window.superclass.onRender.call(this,ct,position),this.plain&&this.el.addClass("x-window-plain"),this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"}),this.focusEl.swallowEvent("click",!0),this.proxy=this.el.createProxy("x-window-proxy"),this.proxy.enableDisplayMode("block"),this.modal&&(this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom),this.mask.enableDisplayMode("block"),this.mask.hide(),this.mon(this.mask,"click",this.focus,this)),this.maximizable&&this.mon(this.header,"dblclick",this.toggleMaximize,this)},initEvents:function(){if(Ext.Window.superclass.initEvents.call(this),this.animateTarget&&this.setAnimateTarget(this.animateTarget),this.resizable&&(this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:!0,resizeElement:this.resizerAction,handleCls:"x-window-handle"}),this.resizer.window=this,this.mon(this.resizer,"beforeresize",this.beforeResize,this)),this.draggable&&this.header.addClass("x-window-draggable"),this.mon(this.el,"mousedown",this.toFront,this),this.manager=this.manager||Ext.WindowMgr,this.manager.register(this),this.maximized&&(this.maximized=!1,this.maximize()),this.closable){var km=this.getKeyMap();km.on(27,this.onEsc,this),km.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(k,e){this.activeGhost&&this.unghost(),e.stopEvent(),this[this.closeAction]()},beforeDestroy:function(){this.rendered&&(this.hide(),this.clearAnchor(),Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)),Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){this.manager&&this.manager.unregister(this),Ext.Window.superclass.onDestroy.call(this)},initTools:function(){this.minimizable&&this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])}),this.maximizable&&(this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])}),this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:!0})),this.closable&&this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})},resizerAction:function(){var box=this.proxy.getBox();return this.proxy.hide(),this.window.handleResize(box),box},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40),this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40),this.resizeBox=this.el.getBox()},updateHandles:function(){Ext.isIE9m&&this.resizer&&(this.resizer.syncHandleHeight(),this.el.repaint())},handleResize:function(box){var rz=this.resizeBox;rz.x!=box.x||rz.y!=box.y?this.updateBox(box):(this.setSize(box),Ext.isIE6&&Ext.isStrict&&this.doLayout()),this.focus(),this.updateHandles(),this.saveState()},focus:function(){var el,ct,f=this.focusEl,db=this.defaultButton;Ext.isDefined(db)&&(f=Ext.isNumber(db)&&this.fbar?this.fbar.items.get(db):Ext.isString(db)?Ext.getCmp(db):db,
el=f.getEl(),ct=Ext.getDom(this.container),el&&ct&&ct!=document.body&&!Ext.lib.Region.getRegion(ct).contains(Ext.lib.Region.getRegion(el.dom)))||(f=f||this.focusEl,f.focus.defer(10,f))},setAnimateTarget:function(el){el=Ext.get(el),this.animateTarget=el},beforeShow:function(){if(delete this.el.lastXY,delete this.el.lastLT,void 0===this.x||void 0===this.y){var xy=this.el.getAlignToXY(this.container,"c-c"),pos=this.el.translatePoints(xy[0],xy[1]);this.x=void 0===this.x?pos.left:this.x,this.y=void 0===this.y?pos.top:this.y}this.el.setLeftTop(this.x,this.y),this.expandOnShow&&this.expand(!1),this.modal&&(Ext.getBody().addClass("x-body-masked"),this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0)),this.mask.show())},show:function(animateTarget,cb,scope){return this.rendered||this.render(Ext.getBody()),this.hidden===!1?(this.toFront(),this):this.fireEvent("beforeshow",this)===!1?this:(cb&&this.on("show",cb,scope,{single:!0}),this.hidden=!1,Ext.isDefined(animateTarget)&&this.setAnimateTarget(animateTarget),this.beforeShow(),this.animateTarget?this.animShow():this.afterShow(),this)},afterShow:function(isAnim){if(this.isDestroyed)return!1;if(this.proxy.hide(),this.el.setStyle("display","block"),this.el.show(),this.maximized&&this.fitContainer(),Ext.isMac&&Ext.isGecko2&&this.cascade(this.setAutoScroll),(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.onWindowResize(this.onWindowResize,this),this.doConstrain(),this.doLayout(),this.keyMap&&this.keyMap.enable(),this.toFront(),this.updateHandles(),isAnim&&(Ext.isIE||Ext.isWebKit)){var sz=this.getSize();this.onResize(sz.width,sz.height)}this.onShow(),this.fireEvent("show",this)},animShow:function(){this.proxy.show(),this.proxy.setBox(this.animateTarget.getBox()),this.proxy.setOpacity(0);var b=this.getBox();this.el.setStyle("display","none"),this.proxy.shift(Ext.apply(b,{callback:this.afterShow.createDelegate(this,[!0],!1),scope:this,easing:"easeNone",duration:this.showAnimDuration,opacity:.5}))},hide:function(animateTarget,cb,scope){return this.hidden||this.fireEvent("beforehide",this)===!1?this:(cb&&this.on("hide",cb,scope,{single:!0}),this.hidden=!0,void 0!==animateTarget&&this.setAnimateTarget(animateTarget),this.modal&&(this.mask.hide(),Ext.getBody().removeClass("x-body-masked")),this.animateTarget?this.animHide():(this.el.hide(),this.afterHide()),this)},afterHide:function(){this.proxy.hide(),(this.monitorResize||this.modal||this.constrain||this.constrainHeader)&&Ext.EventManager.removeResizeListener(this.onWindowResize,this),this.keyMap&&this.keyMap.disable(),this.onHide(),this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(.5),this.proxy.show();var tb=this.getBox(!1);this.proxy.setBox(tb),this.el.hide(),this.proxy.shift(Ext.apply(this.animateTarget.getBox(),{callback:this.afterHide,scope:this,duration:this.hideAnimDuration,easing:"easeNone",opacity:0}))},onShow:Ext.emptyFn,onHide:Ext.emptyFn,onWindowResize:function(){if(this.maximized&&this.fitContainer(),this.modal){this.mask.setSize("100%","100%");this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(!0),Ext.lib.Dom.getViewHeight(!0))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var offsets;if(this.constrain)offsets={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset};else{var s=this.getSize();offsets={right:-(s.width-100),bottom:-(s.height-25+this.el.getConstrainOffset())}}var xy=this.el.getConstrainToXY(this.container,!0,offsets);xy&&this.setPosition(xy[0],xy[1])}},ghost:function(cls){var ghost=this.createGhost(cls),box=this.getBox(!0);return ghost.setLeftTop(box.x,box.y),ghost.setWidth(box.width),this.el.hide(),this.activeGhost=ghost,ghost},unghost:function(show,matchPosition){this.activeGhost&&(show!==!1&&(this.el.show(),this.focus.defer(10,this),Ext.isMac&&Ext.isGecko2&&this.cascade(this.setAutoScroll)),matchPosition!==!1&&this.setPosition(this.activeGhost.getLeft(!0),this.activeGhost.getTop(!0)),this.activeGhost.hide(),this.activeGhost.remove(),delete this.activeGhost)},minimize:function(){return this.fireEvent("minimize",this),this},close:function(){this.fireEvent("beforeclose",this)!==!1&&(this.hidden?this.doClose():this.hide(null,this.doClose,this))},doClose:function(){this.fireEvent("close",this),this.destroy()},maximize:function(){return this.maximized||(this.expand(!1),this.restoreSize=this.getSize(),this.restorePos=this.getPosition(!0),this.maximizable&&(this.tools.maximize.hide(),this.tools.restore.show()),this.maximized=!0,this.el.disableShadow(),this.dd&&this.dd.lock(),this.collapsible&&this.tools.toggle.hide(),this.el.addClass("x-window-maximized"),this.container.addClass("x-window-maximized-ct"),this.setPosition(0,0),this.fitContainer(),this.fireEvent("maximize",this)),this},restore:function(){if(this.maximized){var t=this.tools;this.el.removeClass("x-window-maximized"),t.restore&&t.restore.hide(),t.maximize&&t.maximize.show(),this.setPosition(this.restorePos[0],this.restorePos[1]),this.setSize(this.restoreSize.width,this.restoreSize.height),delete this.restorePos,delete this.restoreSize,this.maximized=!1,this.el.enableShadow(!0),this.dd&&this.dd.unlock(),this.collapsible&&t.toggle&&t.toggle.show(),this.container.removeClass("x-window-maximized-ct"),this.doConstrain(),this.fireEvent("restore",this)}return this},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var vs=this.container.getViewSize(!1);this.setSize(vs.width,vs.height)},setZIndex:function(index){this.modal&&this.mask.setStyle("z-index",index),this.el.setZIndex(++index),index+=5,this.resizer&&this.resizer.proxy.setStyle("z-index",++index),this.lastZIndex=index},alignTo:function(element,position,offsets){var xy=this.el.getAlignToXY(element,position,offsets);return this.setPagePosition(xy[0],xy[1]),this},anchorTo:function(el,alignment,offsets,monitorScroll){this.clearAnchor(),this.anchorTarget={el:el,alignment:alignment,offsets:offsets},Ext.EventManager.onWindowResize(this.doAnchor,this);var tm=typeof monitorScroll;return"undefined"!=tm&&Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:"number"==tm?monitorScroll:50}),this.doAnchor()},doAnchor:function(){var o=this.anchorTarget;return this.alignTo(o.el,o.alignment,o.offsets),this},clearAnchor:function(){return this.anchorTarget&&(Ext.EventManager.removeResizeListener(this.doAnchor,this),Ext.EventManager.un(window,"scroll",this.doAnchor,this),delete this.anchorTarget),this},toFront:function(e){return this.manager.bringToFront(this)&&(e&&e.getTarget().focus||this.focus()),this},setActive:function(active){active?(this.maximized||this.el.enableShadow(!0),this.fireEvent("activate",this)):(this.el.disableShadow(),this.fireEvent("deactivate",this))},toBack:function(){return this.manager.sendToBack(this),this},center:function(){var xy=this.el.getAlignToXY(this.container,"c-c");return this.setPagePosition(xy[0],xy[1]),this}}),Ext.reg("window",Ext.Window),Ext.Window.DD=Ext.extend(Ext.dd.DD,{constructor:function(win){this.win=win,Ext.Window.DD.superclass.constructor.call(this,win.el.id,"WindowDD-"+win.id),this.setHandleElId(win.header.id),this.scroll=!1},moveOnly:!0,headerOffsets:[100,25],startDrag:function(){var w=this.win;if(this.proxy=w.ghost(w.initialConfig.cls),w.constrain!==!1){var so=w.el.shadowOffset;this.constrainTo(w.container,{right:so,left:so,bottom:so})}else if(w.constrainHeader!==!1){var s=this.proxy.getSize();this.constrainTo(w.container,{right:-(s.width-this.headerOffsets[0]),bottom:-(s.height-this.headerOffsets[1])})}},b4Drag:Ext.emptyFn,onDrag:function(e){this.alignElWithMouse(this.proxy,e.getPageX(),e.getPageY())},endDrag:function(e){this.win.unghost(),this.win.saveState()}}),Ext.WindowGroup=function(){var list={},accessList=[],front=null,sortWindows=function(d1,d2){return!d1._lastAccess||d1._lastAccess<d2._lastAccess?-1:1},orderWindows=function(){var a=accessList,len=a.length;if(len>0){a.sort(sortWindows);for(var seed=a[0].manager.zseed,i=0;len>i;i++){var win=a[i];win&&!win.hidden&&win.setZIndex(seed+10*i)}}activateLast()},setActiveWin=function(win){win!=front&&(front&&front.setActive(!1),front=win,win&&win.setActive(!0))},activateLast=function(){for(var i=accessList.length-1;i>=0;--i)if(!accessList[i].hidden)return void setActiveWin(accessList[i]);setActiveWin(null)};return{zseed:9e3,register:function(win){win.manager&&win.manager.unregister(win),win.manager=this,list[win.id]=win,accessList.push(win),win.on("hide",activateLast)},unregister:function(win){delete win.manager,delete list[win.id],win.un("hide",activateLast),accessList.remove(win)},get:function(id){return"object"==typeof id?id:list[id]},bringToFront:function(win){return win=this.get(win),win!=front?(win._lastAccess=(new Date).getTime(),orderWindows(),!0):!1},sendToBack:function(win){return win=this.get(win),win._lastAccess=-(new Date).getTime(),orderWindows(),win},hideAll:function(){for(var id in list)list[id]&&"function"!=typeof list[id]&&list[id].isVisible()&&list[id].hide()},getActive:function(){return front},getBy:function(fn,scope){for(var r=[],i=accessList.length-1;i>=0;--i){var win=accessList[i];fn.call(scope||win,win)!==!1&&r.push(win)}return r},each:function(fn,scope){for(var id in list)if(list[id]&&"function"!=typeof list[id]&&fn.call(scope||list[id],list[id])===!1)return}}},Ext.WindowMgr=new Ext.WindowGroup,Ext.MessageBox=function(){var dlg,opt,mask,bodyEl,msgEl,textboxEl,textareaEl,progressBar,iconEl,buttons,activeTextEl,bwidth,bufferIcon="",iconCls="",buttonNames=["ok","yes","no","cancel"],handleButton=function(button){buttons[button].blur(),dlg.isVisible()&&(dlg.hide(),handleHide(),Ext.callback(opt.fn,opt.scope||window,[button,activeTextEl.dom.value,opt],1))},handleHide=function(){opt&&opt.cls&&dlg.el.removeClass(opt.cls),progressBar.reset()},updateButtons=function(b){var cfg,width=0;return b?(dlg.footer.dom.style.display="",Ext.iterate(buttons,function(name,btn){cfg=b[name],cfg?(btn.show(),btn.setText(Ext.isString(cfg)?cfg:Ext.MessageBox.buttonText[name]),width+=btn.getEl().getWidth()+15):btn.hide()}),width):(Ext.each(buttonNames,function(name){buttons[name].hide()}),width)};return{getDialog:function(titleText){if(!dlg){var btns=[];buttons={},Ext.each(buttonNames,function(name){btns.push(buttons[name]=new Ext.Button({text:this.buttonText[name],handler:handleButton.createCallback(name),hideMode:"offsets"}))},this),dlg=new Ext.Window({autoCreate:!0,title:titleText,resizable:!1,constrain:!0,constrainHeader:!0,minimizable:!1,maximizable:!1,stateful:!1,modal:!0,shim:!0,buttonAlign:"center",width:400,height:100,minHeight:80,plain:!0,footer:!0,closable:!0,close:function(){handleButton(opt&&opt.buttons&&opt.buttons.no&&!opt.buttons.cancel?"no":"cancel")},fbar:new Ext.Toolbar({items:btns,enableOverflow:!1})}),dlg.render(document.body),dlg.getEl().addClass("x-window-dlg"),mask=dlg.mask,bodyEl=dlg.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'}),iconEl=Ext.get(bodyEl.dom.firstChild);var contentEl=bodyEl.dom.childNodes[1];msgEl=Ext.get(contentEl.firstChild),textboxEl=Ext.get(contentEl.childNodes[2].firstChild),textboxEl.enableDisplayMode(),textboxEl.addKeyListener([10,13],function(){dlg.isVisible()&&opt&&opt.buttons&&(opt.buttons.ok?handleButton("ok"):opt.buttons.yes&&handleButton("yes"))}),textareaEl=Ext.get(contentEl.childNodes[2].childNodes[1]),textareaEl.enableDisplayMode(),progressBar=new Ext.ProgressBar({renderTo:bodyEl}),bodyEl.createChild({cls:"x-clear"})}return dlg},updateText:function(text){dlg.isVisible()||opt.width||dlg.setSize(this.maxWidth,100),msgEl.update(text?text+" ":"&#160;");var w,iw=""!=iconCls?iconEl.getWidth()+iconEl.getMargins("lr"):0,mw=msgEl.getWidth()+msgEl.getMargins("lr"),fw=dlg.getFrameWidth("lr"),bw=dlg.body.getFrameWidth("lr");return w=Math.max(Math.min(opt.width||iw+mw+fw+bw,opt.maxWidth||this.maxWidth),Math.max(opt.minWidth||this.minWidth,bwidth||0)),opt.prompt===!0&&activeTextEl.setWidth(w-iw-fw-bw),(opt.progress===!0||opt.wait===!0)&&progressBar.setSize(w-iw-fw-bw),Ext.isIE9m&&w==bwidth&&(w+=4),msgEl.update(text||"&#160;"),dlg.setSize(w,"auto").center(),this},updateProgress:function(value,progressText,msg){return progressBar.updateProgress(value,progressText),msg&&this.updateText(msg),this},isVisible:function(){return dlg&&dlg.isVisible()},hide:function(){var proxy=dlg?dlg.activeGhost:null;return(this.isVisible()||proxy)&&(dlg.hide(),handleHide(),proxy&&dlg.unghost(!1,!1)),this},show:function(options){this.isVisible()&&this.hide(),opt=options;var d=this.getDialog(opt.title||"&#160;");d.setTitle(opt.title||"&#160;");var allowClose=opt.closable!==!1&&opt.progress!==!0&&opt.wait!==!0;if(d.tools.close.setDisplayed(allowClose),activeTextEl=textboxEl,opt.prompt=opt.prompt||(opt.multiline?!0:!1),opt.prompt?opt.multiline?(textboxEl.hide(),textareaEl.show(),textareaEl.setHeight(Ext.isNumber(opt.multiline)?opt.multiline:this.defaultTextHeight),activeTextEl=textareaEl):(textboxEl.show(),textareaEl.hide()):(textboxEl.hide(),textareaEl.hide()),activeTextEl.dom.value=opt.value||"",opt.prompt)d.focusEl=activeTextEl;else{var bs=opt.buttons,db=null;bs&&bs.ok?db=buttons.ok:bs&&bs.yes&&(db=buttons.yes),db&&(d.focusEl=db)}return Ext.isDefined(opt.iconCls)&&d.setIconClass(opt.iconCls),this.setIcon(Ext.isDefined(opt.icon)?opt.icon:bufferIcon),bwidth=updateButtons(opt.buttons),progressBar.setVisible(opt.progress===!0||opt.wait===!0),this.updateProgress(0,opt.progressText),this.updateText(opt.msg),opt.cls&&d.el.addClass(opt.cls),d.proxyDrag=opt.proxyDrag===!0,d.modal=opt.modal!==!1,d.mask=opt.modal!==!1?mask:!1,d.isVisible()||(document.body.appendChild(dlg.el.dom),d.setAnimateTarget(opt.animEl),d.on("show",function(){allowClose===!0?d.keyMap.enable():d.keyMap.disable()},this,{single:!0}),d.show(opt.animEl)),opt.wait===!0&&progressBar.wait(opt.waitConfig),this},setIcon:function(icon){return dlg?(bufferIcon=void 0,icon&&""!=icon?(iconEl.removeClass("x-hidden"),iconEl.replaceClass(iconCls,icon),bodyEl.addClass("x-dlg-icon"),iconCls=icon):(iconEl.replaceClass(iconCls,"x-hidden"),bodyEl.removeClass("x-dlg-icon"),iconCls=""),this):void(bufferIcon=icon)},progress:function(title,msg,progressText){return this.show({title:title,msg:msg,buttons:!1,progress:!0,closable:!1,minWidth:this.minProgressWidth,progressText:progressText}),this},wait:function(msg,title,config){return this.show({title:title,msg:msg,buttons:!1,closable:!1,wait:!0,modal:!0,minWidth:this.minProgressWidth,waitConfig:config}),this},alert:function(title,msg,fn,scope){return this.show({title:title,msg:msg,buttons:this.OK,fn:fn,scope:scope,minWidth:this.minWidth}),this},confirm:function(title,msg,fn,scope){return this.show({title:title,msg:msg,buttons:this.YESNO,fn:fn,scope:scope,icon:this.QUESTION,minWidth:this.minWidth}),this},prompt:function(title,msg,fn,scope,multiline,value){return this.show({title:title,msg:msg,buttons:this.OKCANCEL,fn:fn,minWidth:this.minPromptWidth,scope:scope,prompt:!0,multiline:multiline,value:value}),this},OK:{ok:!0},CANCEL:{cancel:!0},OKCANCEL:{ok:!0,cancel:!0},YESNO:{yes:!0,no:!0},YESNOCANCEL:{yes:!0,no:!0,cancel:!0},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}(),Ext.Msg=Ext.MessageBox,Ext.dd.PanelProxy=Ext.extend(Object,{constructor:function(panel,config){this.panel=panel,this.id=this.panel.id+"-ddproxy",Ext.apply(this,config)},insertProxy:!0,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){this.ghost&&(this.proxy&&(this.proxy.remove(),delete this.proxy),this.panel.el.dom.style.display="",this.ghost.remove(),delete this.ghost)},show:function(){this.ghost||(this.ghost=this.panel.createGhost(this.panel.initialConfig.cls,void 0,Ext.getBody()),this.ghost.setXY(this.panel.el.getXY()),this.insertProxy&&(this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"}),this.proxy.setSize(this.panel.getSize())),this.panel.el.dom.style.display="none")},repair:function(xy,callback,scope){this.hide(),"function"==typeof callback&&callback.call(scope||this)},moveProxy:function(parentNode,before){this.proxy&&parentNode.insertBefore(this.proxy.dom,before)}}),Ext.Panel.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(panel,cfg){this.panel=panel,this.dragData={panel:panel},this.proxy=new Ext.dd.PanelProxy(panel,cfg),Ext.Panel.DD.superclass.constructor.call(this,panel.el,cfg);var h=panel.header,el=panel.body;h&&(this.setHandleElId(h.id),el=panel.header),el.setStyle("cursor","move"),this.scroll=!1},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(x,y){this.proxy.show()},b4MouseDown:function(e){var x=e.getPageX(),y=e.getPageY();this.autoOffset(x,y)},onInitDrag:function(x,y){return this.onStartDrag(x,y),!0},createFrame:Ext.emptyFn,getDragEl:function(e){return this.proxy.ghost.dom},endDrag:function(e){this.proxy.hide(),this.panel.saveState()},autoOffset:function(x,y){x-=this.startPageX,y-=this.startPageY,this.setDelta(x,y)}}),Ext.state.Provider=Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents("statechange"),this.state={},Ext.state.Provider.superclass.constructor.call(this)},get:function(name,defaultValue){return"undefined"==typeof this.state[name]?defaultValue:this.state[name]},clear:function(name){delete this.state[name],this.fireEvent("statechange",this,name,null)},set:function(name,value){this.state[name]=value,this.fireEvent("statechange",this,name,value)},decodeValue:function(cookie){var all,type,v,kv,re=/^(a|n|d|b|s|o|e)\:(.*)$/,matches=re.exec(unescape(cookie));if(matches&&matches[1])switch(type=matches[1],v=matches[2],type){case"e":return null;case"n":return parseFloat(v);case"d":return new Date(Date.parse(v));case"b":return"1"==v;case"a":return all=[],""!=v&&Ext.each(v.split("^"),function(val){all.push(this.decodeValue(val))},this),all;case"o":return all={},""!=v&&Ext.each(v.split("^"),function(val){kv=val.split("="),all[kv[0]]=this.decodeValue(kv[1])},this),all;default:return v}},encodeValue:function(v){var enc,len,key,flat="",i=0;if(null==v)return"e:1";if("number"==typeof v)enc="n:"+v;else if("boolean"==typeof v)enc="b:"+(v?"1":"0");else if(Ext.isDate(v))enc="d:"+v.toGMTString();else if(Ext.isArray(v)){for(len=v.length;len>i;i++)flat+=this.encodeValue(v[i]),i!=len-1&&(flat+="^");enc="a:"+flat}else if("object"==typeof v){for(key in v)"function"!=typeof v[key]&&void 0!==v[key]&&(flat+=key+"="+this.encodeValue(v[key])+"^");enc="o:"+flat.substring(0,flat.length-1)}else enc="s:"+v;return escape(enc)}}),Ext.state.Manager=function(){var provider=new Ext.state.Provider;return{setProvider:function(stateProvider){provider=stateProvider},get:function(key,defaultValue){return provider.get(key,defaultValue)},set:function(key,value){provider.set(key,value)},clear:function(key){provider.clear(key)},getProvider:function(){return provider}}}(),Ext.state.CookieProvider=Ext.extend(Ext.state.Provider,{constructor:function(config){Ext.state.CookieProvider.superclass.constructor.call(this),this.path="/",this.expires=new Date((new Date).getTime()+6048e5),this.domain=null,this.secure=!1,Ext.apply(this,config),this.state=this.readCookies()},set:function(name,value){return"undefined"==typeof value||null===value?void this.clear(name):(this.setCookie(name,value),void Ext.state.CookieProvider.superclass.set.call(this,name,value))},clear:function(name){this.clearCookie(name),Ext.state.CookieProvider.superclass.clear.call(this,name)},readCookies:function(){for(var matches,name,value,cookies={},c=document.cookie+";",re=/\s?(.*?)=(.*?);/g;null!=(matches=re.exec(c));)name=matches[1],value=matches[2],name&&"ys-"==name.substring(0,3)&&(cookies[name.substr(3)]=this.decodeValue(value));return cookies},setCookie:function(name,value){document.cookie="ys-"+name+"="+this.encodeValue(value)+(null==this.expires?"":"; expires="+this.expires.toGMTString())+(null==this.path?"":"; path="+this.path)+(null==this.domain?"":"; domain="+this.domain)+(1==this.secure?"; secure":"")},clearCookie:function(name){document.cookie="ys-"+name+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(null==this.path?"":"; path="+this.path)+(null==this.domain?"":"; domain="+this.domain)+(1==this.secure?"; secure":"")}}),Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:!0,trackOver:!1,blockRefresh:!1,last:!1,initComponent:function(){Ext.DataView.superclass.initComponent.call(this),(Ext.isString(this.tpl)||Ext.isArray(this.tpl))&&(this.tpl=new Ext.XTemplate(this.tpl)),this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","containercontextmenu","selectionchange","beforeselect"),this.store=Ext.StoreMgr.lookup(this.store),this.all=new Ext.CompositeElementLite,this.selected=new Ext.CompositeElementLite},afterRender:function(){Ext.DataView.superclass.afterRender.call(this),this.mon(this.getTemplateTarget(),{click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this}),(this.overClass||this.trackOver)&&this.mon(this.getTemplateTarget(),{mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this}),this.store&&this.bindStore(this.store,!0)},refresh:function(){this.clearSelections(!1,!0);var el=this.getTemplateTarget(),records=this.store.getRange();el.update(""),records.length<1?((!this.deferEmptyText||this.hasSkippedEmptyText)&&el.update(this.emptyText),this.all.clear()):(this.tpl.overwrite(el,this.collectData(records,0)),this.all.fill(Ext.query(this.itemSelector,el.dom)),this.updateIndexes(0)),this.hasSkippedEmptyText=!0},getTemplateTarget:function(){return this.el},prepareData:function(data){return data},collectData:function(records,startIndex){for(var r=[],i=0,len=records.length;len>i;i++)r[r.length]=this.prepareData(records[i].data,startIndex+i,records[i]);return r},bufferRender:function(records,index){var div=document.createElement("div");return this.tpl.overwrite(div,this.collectData(records,index)),Ext.query(this.itemSelector,div)},onUpdate:function(ds,record){var index=this.store.indexOf(record);if(index>-1){var sel=this.isSelected(index),original=this.all.elements[index],node=this.bufferRender([record],index)[0];this.all.replaceElement(index,node,!0),sel&&(this.selected.replaceElement(original,node),this.all.item(index).addClass(this.selectedClass)),this.updateIndexes(index,index)}},onAdd:function(ds,records,index){if(0===this.all.getCount())return void this.refresh();var n,nodes=this.bufferRender(records,index),a=this.all.elements;index<this.all.getCount()?(n=this.all.item(index).insertSibling(nodes,"before",!0),a.splice.apply(a,[index,0].concat(nodes))):(n=this.all.last().insertSibling(nodes,"after",!0),a.push.apply(a,nodes)),this.updateIndexes(index)},onRemove:function(ds,record,index){this.deselect(index),this.all.removeElement(index,!0),this.updateIndexes(index),0===this.store.getCount()&&this.refresh()},refreshNode:function(index){this.onUpdate(this.store,this.store.getAt(index))},updateIndexes:function(startIndex,endIndex){var ns=this.all.elements;startIndex=startIndex||0,endIndex=endIndex||(0===endIndex?0:ns.length-1);for(var i=startIndex;endIndex>=i;i++)ns[i].viewIndex=i},getStore:function(){return this.store},bindStore:function(store,initial){!initial&&this.store&&(store!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("datachanged",this.onDataChanged,this),this.store.un("add",this.onAdd,this),this.store.un("remove",this.onRemove,this),this.store.un("update",this.onUpdate,this),this.store.un("clear",this.refresh,this)),store||(this.store=null)),store&&(store=Ext.StoreMgr.lookup(store),store.on({scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh})),this.store=store,store&&this.refresh()},onDataChanged:function(){this.blockRefresh!==!0&&this.refresh.apply(this,arguments)},findItemFromChild:function(node){return Ext.fly(node).findParent(this.itemSelector,this.getTemplateTarget())},onClick:function(e){var index,item=e.getTarget(this.itemSelector,this.getTemplateTarget());item?(index=this.indexOf(item),this.onItemClick(item,index,e)!==!1&&this.fireEvent("click",this,index,item,e)):this.fireEvent("containerclick",this,e)!==!1&&this.onContainerClick(e)},onContainerClick:function(e){this.clearSelections()},onContextMenu:function(e){var item=e.getTarget(this.itemSelector,this.getTemplateTarget());item?this.fireEvent("contextmenu",this,this.indexOf(item),item,e):this.fireEvent("containercontextmenu",this,e)},onDblClick:function(e){var item=e.getTarget(this.itemSelector,this.getTemplateTarget());item&&this.fireEvent("dblclick",this,this.indexOf(item),item,e)},onMouseOver:function(e){var item=e.getTarget(this.itemSelector,this.getTemplateTarget());item&&item!==this.lastItem&&(this.lastItem=item,Ext.fly(item).addClass(this.overClass),this.fireEvent("mouseenter",this,this.indexOf(item),item,e))},onMouseOut:function(e){this.lastItem&&(e.within(this.lastItem,!0,!0)||(Ext.fly(this.lastItem).removeClass(this.overClass),this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,e),delete this.lastItem))},onItemClick:function(item,index,e){return this.fireEvent("beforeclick",this,index,item,e)===!1?!1:(this.multiSelect?(this.doMultiSelection(item,index,e),e.preventDefault()):this.singleSelect&&(this.doSingleSelection(item,index,e),e.preventDefault()),!0)},doSingleSelection:function(item,index,e){e.ctrlKey&&this.isSelected(index)?this.deselect(index):this.select(index,!1)},doMultiSelection:function(item,index,e){if(e.shiftKey&&this.last!==!1){var last=this.last;this.selectRange(last,index,e.ctrlKey),this.last=last}else(e.ctrlKey||this.simpleSelect)&&this.isSelected(index)?this.deselect(index):this.select(index,e.ctrlKey||e.shiftKey||this.simpleSelect)},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){for(var indexes=[],selected=this.selected.elements,i=0,len=selected.length;len>i;i++)indexes.push(selected[i].viewIndex);return indexes},getSelectedRecords:function(){return this.getRecords(this.selected.elements)},getRecords:function(nodes){for(var records=[],i=0,len=nodes.length;len>i;i++)records[records.length]=this.store.getAt(nodes[i].viewIndex);return records},getRecord:function(node){return this.store.getAt(node.viewIndex)},clearSelections:function(suppressEvent,skipUpdate){(this.multiSelect||this.singleSelect)&&this.selected.getCount()>0&&(skipUpdate||this.selected.removeClass(this.selectedClass),this.selected.clear(),this.last=!1,suppressEvent||this.fireEvent("selectionchange",this,this.selected.elements))},isSelected:function(node){return this.selected.contains(this.getNode(node))},deselect:function(node){this.isSelected(node)&&(node=this.getNode(node),this.selected.removeElement(node),this.last==node.viewIndex&&(this.last=!1),Ext.fly(node).removeClass(this.selectedClass),this.fireEvent("selectionchange",this,this.selected.elements))},select:function(nodeInfo,keepExisting,suppressEvent){if(Ext.isArray(nodeInfo)){keepExisting||this.clearSelections(!0);for(var i=0,len=nodeInfo.length;len>i;i++)this.select(nodeInfo[i],!0,!0);suppressEvent||this.fireEvent("selectionchange",this,this.selected.elements)}else{var node=this.getNode(nodeInfo);keepExisting||this.clearSelections(!0),node&&!this.isSelected(node)&&this.fireEvent("beforeselect",this,node,this.selected.elements)!==!1&&(Ext.fly(node).addClass(this.selectedClass),this.selected.add(node),this.last=node.viewIndex,suppressEvent||this.fireEvent("selectionchange",this,this.selected.elements))}},selectRange:function(start,end,keepExisting){keepExisting||this.clearSelections(!0),this.select(this.getNodes(start,end),!0)},getNode:function(nodeInfo){if(Ext.isString(nodeInfo))return document.getElementById(nodeInfo);if(Ext.isNumber(nodeInfo))return this.all.elements[nodeInfo];if(nodeInfo instanceof Ext.data.Record){var idx=this.store.indexOf(nodeInfo);return this.all.elements[idx]}return nodeInfo},getNodes:function(start,end){var i,ns=this.all.elements,nodes=[];if(start=start||0,end=Ext.isDefined(end)?end:Math.max(ns.length-1,0),end>=start)for(i=start;end>=i&&ns[i];i++)nodes.push(ns[i]);else for(i=start;i>=end&&ns[i];i--)nodes.push(ns[i]);return nodes},indexOf:function(node){return node=this.getNode(node),Ext.isNumber(node.viewIndex)?node.viewIndex:this.all.indexOf(node)},onBeforeLoad:function(){this.loadingText&&(this.clearSelections(!1,!0),this.getTemplateTarget().update('<div class="loading-indicator">'+this.loadingText+"</div>"),this.all.clear())},onDestroy:function(){this.all.clear(),this.selected.clear(),Ext.DataView.superclass.onDestroy.call(this),this.bindStore(null)}}),Ext.DataView.prototype.setStore=Ext.DataView.prototype.bindStore,Ext.reg("dataview",Ext.DataView),Ext.list.ListView=Ext.extend(Ext.DataView,{itemSelector:"dl",selectedClass:"x-list-selected",overClass:"x-list-over",scrollOffset:void 0,columnResize:!0,columnSort:!0,maxColumnWidth:Ext.isIE9m?99:100,initComponent:function(){this.columnResize&&(this.colResizer=new Ext.list.ColumnResizer(this.colResizer),this.colResizer.init(this)),this.columnSort&&(this.colSorter=new Ext.list.Sorter(this.columnSort),this.colSorter.init(this)),this.internalTpl||(this.internalTpl=new Ext.XTemplate('<div class="x-list-header"><div class="x-list-header-inner">','<tpl for="columns">','<div style="width:{[values.width*100]}%;text-align:{align};"><em class="x-unselectable" unselectable="on" id="',this.id,'-xlhd-{#}">',"{header}","</em></div>","</tpl>",'<div class="x-clear"></div>',"</div></div>",'<div class="x-list-body"><div class="x-list-body-inner">',"</div></div>")),this.tpl||(this.tpl=new Ext.XTemplate('<tpl for="rows">',"<dl>",'<tpl for="parent.columns">','<dt style="width:{[values.width*100]}%;text-align:{align};">','<em unselectable="on"<tpl if="cls"> class="{cls}</tpl>">',"{[values.tpl.apply(parent)]}","</em></dt>","</tpl>",'<div class="x-clear"></div>',"</dl>","</tpl>"));for(var cs=this.columns,allocatedWidth=0,colsWithWidth=0,len=cs.length,columns=[],i=0;len>i;i++){var c=cs[i];c.isColumn||(c.xtype=c.xtype?/^lv/.test(c.xtype)?c.xtype:"lv"+c.xtype:"lvcolumn",c=Ext.create(c)),c.width&&(allocatedWidth+=100*c.width,allocatedWidth>this.maxColumnWidth&&(c.width-=(allocatedWidth-this.maxColumnWidth)/100),colsWithWidth++),columns.push(c)}if(cs=this.columns=columns,len>colsWithWidth){var remaining=len-colsWithWidth;if(allocatedWidth<this.maxColumnWidth)for(var perCol=(this.maxColumnWidth-allocatedWidth)/remaining/100,j=0;len>j;j++){var c=cs[j];c.width||(c.width=perCol)}}Ext.list.ListView.superclass.initComponent.call(this)},onRender:function(){this.autoEl={cls:"x-list-wrap"},Ext.list.ListView.superclass.onRender.apply(this,arguments),this.internalTpl.overwrite(this.el,{columns:this.columns}),this.innerBody=Ext.get(this.el.dom.childNodes[1].firstChild),this.innerHd=Ext.get(this.el.dom.firstChild.firstChild),this.hideHeaders&&(this.el.dom.firstChild.style.display="none")},getTemplateTarget:function(){return this.innerBody},collectData:function(){var rs=Ext.list.ListView.superclass.collectData.apply(this,arguments);return{columns:this.columns,rows:rs}},verifyInternalSize:function(){this.lastSize&&this.onResize(this.lastSize.width,this.lastSize.height)},onResize:function(w,h){var parentNode,body=this.innerBody.dom,header=this.innerHd.dom,scrollWidth=w-Ext.num(this.scrollOffset,Ext.getScrollBarWidth())+"px";body&&(parentNode=body.parentNode,Ext.isNumber(w)&&(this.reserveScrollOffset||parentNode.offsetWidth-parentNode.clientWidth>10?(body.style.width=scrollWidth,
header.style.width=scrollWidth):(body.style.width=w+"px",header.style.width=w+"px",setTimeout(function(){parentNode.offsetWidth-parentNode.clientWidth>10&&(body.style.width=scrollWidth,header.style.width=scrollWidth)},10))),Ext.isNumber(h)&&(parentNode.style.height=Math.max(0,h-header.parentNode.offsetHeight)+"px"))},updateIndexes:function(){Ext.list.ListView.superclass.updateIndexes.apply(this,arguments),this.verifyInternalSize()},findHeaderIndex:function(header){header=header.dom||header;for(var c,parentNode=header.parentNode,children=parentNode.parentNode.childNodes,i=0;c=children[i];i++)if(c==parentNode)return i;return-1},setHdWidths:function(){for(var els=this.innerHd.dom.getElementsByTagName("div"),i=0,columns=this.columns,len=columns.length;len>i;i++)els[i].style.width=100*columns[i].width+"%"}}),Ext.reg("listview",Ext.list.ListView),Ext.ListView=Ext.list.ListView,Ext.list.Column=Ext.extend(Object,{isColumn:!0,align:"left",header:"",width:null,cls:"",constructor:function(c){c.tpl?Ext.isString(c.tpl)&&(c.tpl=new Ext.XTemplate(c.tpl)):c.tpl=new Ext.XTemplate("{"+c.dataIndex+"}"),Ext.apply(this,c)}}),Ext.reg("lvcolumn",Ext.list.Column),Ext.list.NumberColumn=Ext.extend(Ext.list.Column,{format:"0,000.00",constructor:function(c){c.tpl=c.tpl||new Ext.XTemplate("{"+c.dataIndex+':number("'+(c.format||this.format)+'")}'),Ext.list.NumberColumn.superclass.constructor.call(this,c)}}),Ext.reg("lvnumbercolumn",Ext.list.NumberColumn),Ext.list.DateColumn=Ext.extend(Ext.list.Column,{format:"m/d/Y",constructor:function(c){c.tpl=c.tpl||new Ext.XTemplate("{"+c.dataIndex+':date("'+(c.format||this.format)+'")}'),Ext.list.DateColumn.superclass.constructor.call(this,c)}}),Ext.reg("lvdatecolumn",Ext.list.DateColumn),Ext.list.BooleanColumn=Ext.extend(Ext.list.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(c){c.tpl=c.tpl||new Ext.XTemplate("{"+c.dataIndex+":this.format}");var t=this.trueText,f=this.falseText,u=this.undefinedText;c.tpl.format=function(v){return void 0===v?u:v&&"false"!==v?t:f},Ext.list.DateColumn.superclass.constructor.call(this,c)}}),Ext.reg("lvbooleancolumn",Ext.list.BooleanColumn),Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:.05,constructor:function(config){Ext.apply(this,config),Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(listView){this.view=listView,listView.on("render",this.initEvents,this)},initEvents:function(view){view.mon(view.innerHd,"mousemove",this.handleHdMove,this),this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300}),this.tracker.initEl(view.innerHd),view.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(e,t){var handleWidth=5,x=e.getPageX(),header=e.getTarget("em",3,!0);if(header){var region=header.getRegion(),style=header.dom.style,parentNode=header.dom.parentNode;x-region.left<=handleWidth&&parentNode!=parentNode.parentNode.firstChild?(this.activeHd=Ext.get(parentNode.previousSibling.firstChild),style.cursor=Ext.isWebKit?"e-resize":"col-resize"):region.right-x<=handleWidth&&parentNode!=parentNode.parentNode.lastChild.previousSibling?(this.activeHd=header,style.cursor=Ext.isWebKit?"w-resize":"col-resize"):(delete this.activeHd,style.cursor="")}},onBeforeStart:function(e){return this.dragHd=this.activeHd,!!this.dragHd},onStart:function(e){var me=this,view=me.view,dragHeader=me.dragHd,x=me.tracker.getXY()[0];me.proxy=view.el.createChild({cls:"x-list-resizer"}),me.dragX=dragHeader.getX(),me.headerIndex=view.findHeaderIndex(dragHeader),me.headersDisabled=view.disableHeaders,view.disableHeaders=!0,me.proxy.setHeight(view.el.getHeight()),me.proxy.setX(me.dragX),me.proxy.setWidth(x-me.dragX),this.setBoundaries()},setBoundaries:function(relativeX){var header,view=this.view,headerIndex=this.headerIndex,width=view.innerHd.getWidth(),relativeX=view.innerHd.getX(),minWidth=Math.ceil(width*this.minPct),maxWidth=width-minWidth,numColumns=view.columns.length,headers=view.innerHd.select("em",!0),minX=minWidth+relativeX,maxX=maxWidth+relativeX;2==numColumns?(this.minX=minX,this.maxX=maxX):(header=headers.item(headerIndex+2),this.minX=headers.item(headerIndex).getX()+minWidth,this.maxX=header?header.getX()-minWidth:maxX,0==headerIndex?this.minX=minX:headerIndex==numColumns-2&&(this.maxX=maxX))},onDrag:function(e){var me=this,cursorX=me.tracker.getXY()[0].constrain(me.minX,me.maxX);me.proxy.setWidth(cursorX-this.dragX)},onEnd:function(e){var newWidth=this.proxy.getWidth(),index=this.headerIndex,view=this.view,columns=view.columns,width=view.innerHd.getWidth(),newPercent=Math.ceil(newWidth*view.maxColumnWidth/width)/100,disabled=this.headersDisabled,headerCol=columns[index],otherCol=columns[index+1],totalPercent=headerCol.width+otherCol.width;this.proxy.remove(),headerCol.width=newPercent,otherCol.width=totalPercent-newPercent,delete this.dragHd,view.setHdWidths(),view.refresh(),setTimeout(function(){view.disableHeaders=disabled},100)}}),Ext.ListView.ColumnResizer=Ext.list.ColumnResizer,Ext.list.Sorter=Ext.extend(Ext.util.Observable,{sortClasses:["sort-asc","sort-desc"],constructor:function(config){Ext.apply(this,config),Ext.list.Sorter.superclass.constructor.call(this)},init:function(listView){this.view=listView,listView.on("render",this.initEvents,this)},initEvents:function(view){view.mon(view.innerHd,"click",this.onHdClick,this),view.innerHd.setStyle("cursor","pointer"),view.mon(view.store,"datachanged",this.updateSortState,this),this.updateSortState.defer(10,this,[view.store])},updateSortState:function(store){var state=store.getSortState();if(state){this.sortState=state;for(var cs=this.view.columns,sortColumn=-1,i=0,len=cs.length;len>i;i++)if(cs[i].dataIndex==state.field){sortColumn=i;break}if(-1!=sortColumn){var sortDir=state.direction;this.updateSortIcon(sortColumn,sortDir)}}},updateSortIcon:function(col,dir){var sc=this.sortClasses,hds=this.view.innerHd.select("em").removeClass(sc);hds.item(col).addClass(sc["DESC"==dir?1:0])},onHdClick:function(e){var hd=e.getTarget("em",3);if(hd&&!this.view.disableHeaders){var index=this.view.findHeaderIndex(hd);this.view.store.sort(this.view.columns[index].dataIndex)}}}),Ext.ListView.Sorter=Ext.list.Sorter,Ext.TabPanel=Ext.extend(Ext.Panel,{deferredRender:!0,tabWidth:120,minTabWidth:30,resizeTabs:!1,enableTabScroll:!1,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:.35,animScroll:!0,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:!1,autoTabSelector:"div.x-tab",activeTab:void 0,tabMargin:2,plain:!1,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:!1,frame:!1,hideBorders:!0,initComponent:function(){this.frame=!1,Ext.TabPanel.superclass.initComponent.call(this),this.addEvents("beforetabchange","tabchange","contextmenu"),this.setLayout(new Ext.layout.CardLayout(Ext.apply({layoutOnCardChange:this.layoutOnTabChange,deferredRender:this.deferredRender},this.layoutConfig))),"top"==this.tabPosition?(this.elements+=",header",this.stripTarget="header"):(this.elements+=",footer",this.stripTarget="footer"),this.stack||(this.stack=Ext.TabPanel.AccessStack()),this.initItems()},onRender:function(ct,position){if(Ext.TabPanel.superclass.onRender.call(this,ct,position),this.plain){var pos="top"==this.tabPosition?"header":"footer";this[pos].addClass("x-tab-panel-"+pos+"-plain")}var st=this[this.stripTarget];this.stripWrap=st.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});var beforeEl="bottom"==this.tabPosition?this.stripWrap:null;if(st.createChild({cls:"x-tab-strip-spacer"},beforeEl),this.strip=new Ext.Element(this.stripWrap.dom.firstChild),this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge",cn:[{tag:"span",cls:"x-tab-strip-text",cn:"&#160;"}]}),this.strip.createChild({cls:"x-clear"}),this.body.addClass("x-tab-panel-body-"+this.tabPosition),!this.itemTpl){var tt=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close"></a>','<a class="x-tab-right" href="#"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>");tt.disableFormats=!0,tt.compile(),Ext.TabPanel.prototype.itemTpl=tt}this.items.each(this.initTab,this)},afterRender:function(){if(Ext.TabPanel.superclass.afterRender.call(this),this.autoTabs&&this.readTabs(!1),void 0!==this.activeTab){var item=Ext.isObject(this.activeTab)?this.activeTab:this.items.get(this.activeTab);delete this.activeTab,this.setActiveTab(item)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this),this.mon(this.strip,{scope:this,mousedown:this.onStripMouseDown,contextmenu:this.onStripContextMenu}),this.enableTabScroll&&this.mon(this.strip,"mousewheel",this.onWheel,this)},findTargets:function(e){var item=null,itemEl=e.getTarget("li:not(.x-tab-edge)",this.strip);return itemEl&&(item=this.getComponent(itemEl.id.split(this.idDelimiter)[1]),item.disabled)?{close:null,item:null,el:null}:{close:e.getTarget(".x-tab-strip-close",this.strip),item:item,el:itemEl}},onStripMouseDown:function(e){if(0===e.button){e.preventDefault();var t=this.findTargets(e);return t.close?void(t.item.fireEvent("beforeclose",t.item)!==!1&&(t.item.fireEvent("close",t.item),this.remove(t.item))):void(t.item&&t.item!=this.activeTab&&this.setActiveTab(t.item))}},onStripContextMenu:function(e){e.preventDefault();var t=this.findTargets(e);t.item&&this.fireEvent("contextmenu",this,t.item,e)},readTabs:function(removeExisting){removeExisting===!0&&this.items.each(function(item){this.remove(item)},this);for(var tabs=this.el.query(this.autoTabSelector),i=0,len=tabs.length;len>i;i++){var tab=tabs[i],title=tab.getAttribute("title");tab.removeAttribute("title"),this.add({title:title,contentEl:tab})}},initTab:function(item,index){var before=this.strip.dom.childNodes[index],p=this.getTemplateArgs(item),el=before?this.itemTpl.insertBefore(before,p):this.itemTpl.append(this.strip,p),cls="x-tab-strip-over",tabEl=Ext.get(el);tabEl.hover(function(){item.disabled||tabEl.addClass(cls)},function(){tabEl.removeClass(cls)}),item.tabTip&&(tabEl.child("span.x-tab-strip-text",!0).qtip=item.tabTip),item.tabEl=el,tabEl.select("a").on("click",function(e){e.getPageX()||this.onStripMouseDown(e)},this,{preventDefault:!0}),item.on({scope:this,disable:this.onItemDisabled,enable:this.onItemEnabled,titlechange:this.onItemTitleChanged,iconchange:this.onItemIconChanged,beforeshow:this.onBeforeShowItem})},getTemplateArgs:function(item){var cls=item.closable?"x-tab-strip-closable":"";return item.disabled&&(cls+=" x-item-disabled"),item.iconCls&&(cls+=" x-tab-with-icon"),item.tabCls&&(cls+=" "+item.tabCls),{id:this.id+this.idDelimiter+item.getItemId(),text:item.title,cls:cls,iconCls:item.iconCls||""}},onAdd:function(c){if(Ext.TabPanel.superclass.onAdd.call(this,c),this.rendered){var items=this.items;this.initTab(c,items.indexOf(c)),this.delegateUpdates()}},onBeforeAdd:function(item){var existing=item.events?this.items.containsKey(item.getItemId())?item:null:this.items.get(item);if(existing)return this.setActiveTab(item),!1;Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var es=item.elements;item.elements=es?es.replace(",header",""):es,item.border=item.border===!0},onRemove:function(c){var te=Ext.get(c.tabEl);if(te&&(te.select("a").removeAllListeners(),Ext.destroy(te)),Ext.TabPanel.superclass.onRemove.call(this,c),this.stack.remove(c),delete c.tabEl,c.un("disable",this.onItemDisabled,this),c.un("enable",this.onItemEnabled,this),c.un("titlechange",this.onItemTitleChanged,this),c.un("iconchange",this.onItemIconChanged,this),c.un("beforeshow",this.onBeforeShowItem,this),c==this.activeTab){var next=this.stack.next();next?this.setActiveTab(next):this.items.getCount()>0?this.setActiveTab(0):this.setActiveTab(null)}this.destroying||this.delegateUpdates()},onBeforeShowItem:function(item){return item!=this.activeTab?(this.setActiveTab(item),!1):void 0},onItemDisabled:function(item){var el=this.getTabEl(item);el&&Ext.fly(el).addClass("x-item-disabled"),this.stack.remove(item)},onItemEnabled:function(item){var el=this.getTabEl(item);el&&Ext.fly(el).removeClass("x-item-disabled")},onItemTitleChanged:function(item){var el=this.getTabEl(item);el&&(Ext.fly(el).child("span.x-tab-strip-text",!0).innerHTML=item.title,this.delegateUpdates())},onItemIconChanged:function(item,iconCls,oldCls){var el=this.getTabEl(item);el&&(el=Ext.get(el),el.child("span.x-tab-strip-text").replaceClass(oldCls,iconCls),el[Ext.isEmpty(iconCls)?"removeClass":"addClass"]("x-tab-with-icon"),this.delegateUpdates())},getTabEl:function(item){var c=this.getComponent(item);return c?c.tabEl:null},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments),this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=!0},endUpdate:function(){this.suspendUpdates=!1,this.delegateUpdates()},hideTabStripItem:function(item){item=this.getComponent(item);var el=this.getTabEl(item);el&&(el.style.display="none",this.delegateUpdates()),this.stack.remove(item)},unhideTabStripItem:function(item){item=this.getComponent(item);var el=this.getTabEl(item);el&&(el.style.display="",this.delegateUpdates())},delegateUpdates:function(){var rendered=this.rendered;this.suspendUpdates||(this.resizeTabs&&rendered&&this.autoSizeTabs(),this.enableTabScroll&&rendered&&this.autoScrollTabs())},autoSizeTabs:function(){var count=this.items.length,ce="bottom"!=this.tabPosition?"header":"footer",aw=(this[ce].dom.offsetWidth,this[ce].dom.clientWidth);if(this.resizeTabs&&!(1>count)&&aw){var each=Math.max(Math.min(Math.floor((aw-4)/count)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=each;for(var lis=this.strip.query("li:not(.x-tab-edge)"),i=0,len=lis.length;len>i;i++){var li=lis[i],inner=Ext.fly(li).child(".x-tab-strip-inner",!0),tw=li.offsetWidth,iw=inner.offsetWidth;inner.style.width=each-(tw-iw)+"px"}}},adjustBodyWidth:function(w){return this.header&&this.header.setWidth(w),this.footer&&this.footer.setWidth(w),w},setActiveTab:function(item){if(item=this.getComponent(item),this.fireEvent("beforetabchange",this,item,this.activeTab)!==!1){if(!this.rendered)return void(this.activeTab=item);if(this.activeTab!=item){if(this.activeTab){var oldEl=this.getTabEl(this.activeTab);oldEl&&Ext.fly(oldEl).removeClass("x-tab-strip-active")}if(this.activeTab=item,item){var el=this.getTabEl(item);Ext.fly(el).addClass("x-tab-strip-active"),this.stack.add(item),this.layout.setActiveItem(item),this.delegateUpdates(),this.scrolling&&this.scrollToTab(item,this.animScroll)}this.fireEvent("tabchange",this,item)}}},getActiveTab:function(){return this.activeTab||null},getItem:function(item){return this.getComponent(item)},autoScrollTabs:function(){this.pos="bottom"==this.tabPosition?this.footer:this.header;var count=this.items.length,tw=(this.pos.dom.offsetWidth,this.pos.dom.clientWidth),wrap=this.stripWrap,wd=wrap.dom,cw=wd.offsetWidth,pos=this.getScrollPos(),l=this.edge.getOffsetsTo(this.stripWrap)[0]+pos;!this.enableTabScroll||20>cw||(0==count||tw>=l?(wd.scrollLeft=0,wrap.setWidth(tw),this.scrolling&&(this.scrolling=!1,this.pos.removeClass("x-tab-scrolling"),this.scrollLeft.hide(),this.scrollRight.hide(),(Ext.isAir||Ext.isWebKit)&&(wd.style.marginLeft="",wd.style.marginRight=""))):(this.scrolling||(this.pos.addClass("x-tab-scrolling"),(Ext.isAir||Ext.isWebKit)&&(wd.style.marginLeft="18px",wd.style.marginRight="18px")),tw-=wrap.getMargins("lr"),wrap.setWidth(tw>20?tw:20),this.scrolling||(this.scrollLeft?(this.scrollLeft.show(),this.scrollRight.show()):this.createScrollers()),this.scrolling=!0,pos>l-tw?wd.scrollLeft=l-tw:this.scrollToTab(this.activeTab,!1),this.updateScrollButtons()))},createScrollers:function(){this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var h=this.stripWrap.dom.offsetHeight,sl=this.pos.insertFirst({cls:"x-tab-scroller-left"});sl.setHeight(h),sl.addClassOnOver("x-tab-scroller-left-over"),this.leftRepeater=new Ext.util.ClickRepeater(sl,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this}),this.scrollLeft=sl;var sr=this.pos.insertFirst({cls:"x-tab-scroller-right"});sr.setHeight(h),sr.addClassOnOver("x-tab-scroller-right-over"),this.rightRepeater=new Ext.util.ClickRepeater(sr,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this}),this.scrollRight=sr},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(item,animate){if(item){var el=this.getTabEl(item),pos=this.getScrollPos(),area=this.getScrollArea(),left=Ext.fly(el).getOffsetsTo(this.stripWrap)[0]+pos,right=left+el.offsetWidth;pos>left?this.scrollTo(left,animate):right>pos+area&&this.scrollTo(right-area,animate)}},scrollTo:function(pos,animate){this.stripWrap.scrollTo("left",pos,animate?this.getScrollAnim():!1),animate||this.updateScrollButtons()},onWheel:function(e){var d=e.getWheelDelta()*this.wheelIncrement*-1;e.stopEvent();var pos=this.getScrollPos(),newpos=pos+d,sw=this.getScrollWidth()-this.getScrollArea(),s=Math.max(0,Math.min(sw,newpos));s!=pos&&this.scrollTo(s,!1)},onScrollRight:function(){var sw=this.getScrollWidth()-this.getScrollArea(),pos=this.getScrollPos(),s=Math.min(sw,pos+this.getScrollIncrement());s!=pos&&this.scrollTo(s,this.animScroll)},onScrollLeft:function(){var pos=this.getScrollPos(),s=Math.max(0,pos-this.getScrollIncrement());s!=pos&&this.scrollTo(s,this.animScroll)},updateScrollButtons:function(){var pos=this.getScrollPos();this.scrollLeft[0===pos?"addClass":"removeClass"]("x-tab-scroller-left-disabled"),this.scrollRight[pos>=this.getScrollWidth()-this.getScrollArea()?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){Ext.destroy(this.leftRepeater,this.rightRepeater),this.deleteMembers("strip","edge","scrollLeft","scrollRight","stripWrap"),this.activeTab=null,Ext.TabPanel.superclass.beforeDestroy.apply(this)}}),Ext.reg("tabpanel",Ext.TabPanel),Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab,Ext.TabPanel.AccessStack=function(){var items=[];return{add:function(item){items.push(item),items.length>10&&items.shift()},remove:function(item){for(var s=[],i=0,len=items.length;len>i;i++)items[i]!=item&&s.push(items[i]);items=s},next:function(){return items.pop()}}},Ext.Button=Ext.extend(Ext.BoxComponent,{hidden:!1,disabled:!1,pressed:!1,enableToggle:!1,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr:nth(2)",clickEvent:"click",handleMouseEvents:!0,tooltipType:"qtip",buttonSelector:"button:first-child",scale:"small",iconAlign:"left",arrowAlign:"right",initComponent:function(){this.menu&&(Ext.isArray(this.menu)&&(this.menu={items:this.menu}),Ext.isObject(this.menu)&&(this.menu.ownerCt=this),this.menu=Ext.menu.MenuMgr.get(this.menu),this.menu.ownerCt=void 0),Ext.Button.superclass.initComponent.call(this),this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout"),Ext.isString(this.toggleGroup)&&(this.enableToggle=!0)},getTemplateArgs:function(){return[this.type,"x-btn-"+this.scale+" x-btn-icon-"+this.scale+"-"+this.iconAlign,this.getMenuClass(),this.cls,this.id]},setButtonClass:function(){this.useSetClass&&(Ext.isEmpty(this.oldCls)||this.el.removeClass([this.oldCls,"x-btn-pressed"]),this.oldCls=this.iconCls||this.icon?this.text?"x-btn-text-icon":"x-btn-icon":"x-btn-noicon",this.el.addClass([this.oldCls,this.pressed?"x-btn-pressed":null]))},getMenuClass:function(){return this.menu?"bottom"!=this.arrowAlign?"x-btn-arrow":"x-btn-arrow-bottom":""},onRender:function(ct,position){this.template||(Ext.Button.buttonTemplate||(Ext.Button.buttonTemplate=new Ext.Template('<table id="{4}" cellspacing="0" class="x-btn {3}"><tbody class="{1}">','<tr><td class="x-btn-tl"><i>&#160;</i></td><td class="x-btn-tc"></td><td class="x-btn-tr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-ml"><i>&#160;</i></td><td class="x-btn-mc"><em class="{2} x-unselectable" unselectable="on"><button type="{0}"></button></em></td><td class="x-btn-mr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-bl"><i>&#160;</i></td><td class="x-btn-bc"></td><td class="x-btn-br"><i>&#160;</i></td></tr>',"</tbody></table>"),Ext.Button.buttonTemplate.compile()),this.template=Ext.Button.buttonTemplate);var btn,targs=this.getTemplateArgs();btn=position?this.template.insertBefore(position,targs,!0):this.template.append(ct,targs,!0),this.btnEl=btn.child(this.buttonSelector),this.mon(this.btnEl,{scope:this,focus:this.onFocus,blur:this.onBlur}),this.initButtonEl(btn,this.btnEl),Ext.ButtonToggleMgr.register(this)},initButtonEl:function(btn,btnEl){if(this.el=btn,this.setIcon(this.icon),this.setText(this.text),this.setIconClass(this.iconCls),Ext.isDefined(this.tabIndex)&&(btnEl.dom.tabIndex=this.tabIndex),this.tooltip&&this.setTooltip(this.tooltip,!0),this.handleMouseEvents&&this.mon(btn,{scope:this,mouseover:this.onMouseOver,mousedown:this.onMouseDown}),this.menu&&this.mon(this.menu,{scope:this,show:this.onMenuShow,hide:this.onMenuHide}),this.repeat){var repeater=new Ext.util.ClickRepeater(btn,Ext.isObject(this.repeat)?this.repeat:{});this.mon(repeater,"click",this.onRepeatClick,this)}else this.mon(btn,this.clickEvent,this.onClick,this)},afterRender:function(){Ext.Button.superclass.afterRender.call(this),this.useSetClass=!0,this.setButtonClass(),this.doc=Ext.getDoc(),this.doAutoWidth()},setIconClass:function(cls){return this.iconCls=cls,this.el&&(this.btnEl.dom.className="",this.btnEl.addClass(["x-btn-text",cls||""]),this.setButtonClass()),this},setTooltip:function(tooltip,initial){return this.rendered?(initial||this.clearTip(),Ext.isObject(tooltip)?(Ext.QuickTips.register(Ext.apply({target:this.btnEl.id},tooltip)),this.tooltip=tooltip):this.btnEl.dom[this.tooltipType]=tooltip):this.tooltip=tooltip,this},clearTip:function(){Ext.isObject(this.tooltip)&&Ext.QuickTips.unregister(this.btnEl)},beforeDestroy:function(){this.rendered&&this.clearTip(),this.menu&&this.destroyMenu!==!1&&Ext.destroy(this.btnEl,this.menu),Ext.destroy(this.repeater)},onDestroy:function(){this.rendered&&(this.doc.un("mouseover",this.monitorMouseOver,this),this.doc.un("mouseup",this.onMouseUp,this),delete this.doc,delete this.btnEl,Ext.ButtonToggleMgr.unregister(this)),Ext.Button.superclass.onDestroy.call(this)},doAutoWidth:function(){if(this.autoWidth!==!1&&this.el&&this.text&&void 0===this.width){if(this.el.setWidth("auto"),Ext.isIE7&&Ext.isStrict){var ib=this.btnEl;ib&&ib.getWidth()>20&&(ib.clip(),ib.setWidth(Ext.util.TextMetrics.measure(ib,this.text).width+ib.getFrameWidth("lr")))}this.minWidth&&this.el.getWidth()<this.minWidth&&this.el.setWidth(this.minWidth)}},setHandler:function(handler,scope){return this.handler=handler,this.scope=scope,this},setText:function(text){return this.text=text,this.el&&(this.btnEl.update(text||"&#160;"),this.setButtonClass()),this.doAutoWidth(),this},setIcon:function(icon){return this.icon=icon,this.el&&(this.btnEl.setStyle("background-image",icon?"url("+icon+")":""),this.setButtonClass()),this},getText:function(){return this.text},toggle:function(state,suppressEvent){return state=void 0===state?!this.pressed:!!state,state!=this.pressed&&(this.rendered&&this.el[state?"addClass":"removeClass"]("x-btn-pressed"),this.pressed=state,suppressEvent||(this.fireEvent("toggle",this,state),this.toggleHandler&&this.toggleHandler.call(this.scope||this,this,state))),this},onDisable:function(){this.onDisableChange(!0)},onEnable:function(){this.onDisableChange(!1)},onDisableChange:function(disabled){this.el&&(Ext.isIE6&&this.text||this.el[disabled?"addClass":"removeClass"](this.disabledClass),this.el.dom.disabled=disabled),this.disabled=disabled},showMenu:function(){return this.rendered&&this.menu&&(this.tooltip&&Ext.QuickTips.getQuickTip().cancelShow(this.btnEl),this.menu.isVisible()&&this.menu.hide(),this.menu.ownerCt=this,this.menu.show(this.el,this.menuAlign)),this},hideMenu:function(){return this.hasVisibleMenu()&&this.menu.hide(),this},hasVisibleMenu:function(){return this.menu&&this.menu.ownerCt==this&&this.menu.isVisible()},onRepeatClick:function(repeat,e){this.onClick(e)},onClick:function(e){e&&e.preventDefault(),0===e.button&&(this.disabled||(this.doToggle(),!this.menu||this.hasVisibleMenu()||this.ignoreNextClick||this.showMenu(),this.fireEvent("click",this,e),this.handler&&this.handler.call(this.scope||this,this,e)))},doToggle:function(){!this.enableToggle||this.allowDepress===!1&&this.pressed||this.toggle()},isMenuTriggerOver:function(e,internal){return this.menu&&!internal},isMenuTriggerOut:function(e,internal){return this.menu&&!internal},onMouseOver:function(e){if(!this.disabled){var internal=e.within(this.el,!0);internal||(this.el.addClass("x-btn-over"),this.monitoringMouseOver||(this.doc.on("mouseover",this.monitorMouseOver,this),this.monitoringMouseOver=!0),this.fireEvent("mouseover",this,e)),this.isMenuTriggerOver(e,internal)&&this.fireEvent("menutriggerover",this,this.menu,e)}},monitorMouseOver:function(e){e.target==this.el.dom||e.within(this.el)||(this.monitoringMouseOver&&(this.doc.un("mouseover",this.monitorMouseOver,this),this.monitoringMouseOver=!1),this.onMouseOut(e))},onMouseOut:function(e){var internal=e.within(this.el)&&e.target!=this.el.dom;this.el.removeClass("x-btn-over"),this.fireEvent("mouseout",this,e),this.isMenuTriggerOut(e,internal)&&this.fireEvent("menutriggerout",this,this.menu,e)},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(e){this.disabled||this.el.addClass("x-btn-focus")},onBlur:function(e){this.el.removeClass("x-btn-focus")},getClickEl:function(e,isUp){return this.el},onMouseDown:function(e){this.disabled||0!==e.button||(this.getClickEl(e).addClass("x-btn-click"),this.doc.on("mouseup",this.onMouseUp,this))},onMouseUp:function(e){0===e.button&&(this.getClickEl(e,!0).removeClass("x-btn-click"),this.doc.un("mouseup",this.onMouseUp,this))},onMenuShow:function(e){this.menu.ownerCt==this&&(this.menu.ownerCt=this,this.ignoreNextClick=0,this.el.addClass("x-btn-menu-active"),this.fireEvent("menushow",this,this.menu))},onMenuHide:function(e){this.menu.ownerCt==this&&(this.el.removeClass("x-btn-menu-active"),this.ignoreNextClick=this.restoreClick.defer(250,this),this.fireEvent("menuhide",this,this.menu),delete this.menu.ownerCt)},restoreClick:function(){this.ignoreNextClick=0}}),Ext.reg("button",Ext.Button),Ext.ButtonToggleMgr=function(){function toggleGroup(btn,state){if(state)for(var g=groups[btn.toggleGroup],i=0,l=g.length;l>i;i++)g[i]!=btn&&g[i].toggle(!1)}var groups={};return{register:function(btn){if(btn.toggleGroup){var g=groups[btn.toggleGroup];g||(g=groups[btn.toggleGroup]=[]),g.push(btn),btn.on("toggle",toggleGroup)}},unregister:function(btn){if(btn.toggleGroup){var g=groups[btn.toggleGroup];g&&(g.remove(btn),btn.un("toggle",toggleGroup))}},getPressed:function(group){var g=groups[group];if(g)for(var i=0,len=g.length;len>i;i++)if(g[i].pressed===!0)return g[i];return null}}}(),Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"em",split:!0,initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this),this.addEvents("arrowclick")},onRender:function(){Ext.SplitButton.superclass.onRender.apply(this,arguments),this.arrowTooltip&&(this.el.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip)},setArrowHandler:function(handler,scope){this.arrowHandler=handler,this.scope=scope},getMenuClass:function(){return"x-btn-split"+("bottom"==this.arrowAlign?"-bottom":"")},isClickOnArrow:function(e){if("bottom"!=this.arrowAlign){var visBtn=this.el.child("em.x-btn-split"),right=visBtn.getRegion().right-visBtn.getPadding("r");return e.getPageX()>right}return e.getPageY()>this.btnEl.getRegion().bottom},onClick:function(e,t){e.preventDefault(),this.disabled||(this.isClickOnArrow(e)?(!this.menu||this.menu.isVisible()||this.ignoreNextClick||this.showMenu(),this.fireEvent("arrowclick",this,e),this.arrowHandler&&this.arrowHandler.call(this.scope||this,this,e)):(this.doToggle(),this.fireEvent("click",this,e),this.handler&&this.handler.call(this.scope||this,this,e)))},isMenuTriggerOver:function(e){return this.menu&&e.target.tagName==this.arrowSelector},isMenuTriggerOut:function(e,internal){return this.menu&&e.target.tagName!=this.arrowSelector}}),Ext.reg("splitbutton",Ext.SplitButton),Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(item){if(item&&this.showText===!0){var text="";return this.prependText&&(text+=this.prependText),text+=item.text}},setActiveItem:function(item,suppressEvent){if(Ext.isObject(item)||(item=this.menu.getComponent(item)),item){if(this.rendered){var t=this.getItemText(item);t&&this.setText(t),this.setIconClass(item.iconCls)}else this.text=this.getItemText(item),this.iconCls=item.iconCls;this.activeItem=item,item.checked||item.setChecked(!0,suppressEvent),this.forceIcon&&this.setIconClass(this.forceIcon),suppressEvent||this.fireEvent("change",this,item)}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents("change"),this.changeHandler&&(this.on("change",this.changeHandler,this.scope||this),delete this.changeHandler),this.itemCount=this.items.length,this.menu={cls:"x-cycle-menu",items:[]};var checked=0;Ext.each(this.items,function(item,i){Ext.apply(item,{group:item.group||this.id,itemIndex:i,checkHandler:this.checkHandler,scope:this,checked:item.checked||!1}),this.menu.items.push(item),item.checked&&(checked=i)},this),Ext.CycleButton.superclass.initComponent.call(this),this.on("click",this.toggleSelected,this),this.setActiveItem(checked,!0)},checkHandler:function(item,pressed){pressed&&this.setActiveItem(item)},toggleSelected:function(){var m=this.menu;m.render(),m.hasLayout||m.doLayout();for(var nextIdx,checkItem,i=1;i<this.itemCount;i++)if(nextIdx=(this.activeItem.itemIndex+i)%this.itemCount,checkItem=m.items.itemAt(nextIdx),!checkItem.disabled){checkItem.setChecked(!0);break}}}),Ext.reg("cycle",Ext.CycleButton),Ext.Toolbar=function(config){Ext.isArray(config)?config={items:config,layout:"toolbar"}:(config=Ext.apply({layout:"toolbar"},config),config.buttons&&(config.items=config.buttons)),Ext.Toolbar.superclass.constructor.call(this,config)},function(){var T=Ext.Toolbar;Ext.extend(T,Ext.Container,{defaultType:"button",enableOverflow:!1,trackMenus:!0,internalDefaults:{removeMode:"container",hideParent:!0},toolbarCls:"x-toolbar",initComponent:function(){T.superclass.initComponent.call(this),this.addEvents("overflowchange")},onRender:function(ct,position){this.el||(this.autoCreate||(this.autoCreate={cls:this.toolbarCls+" x-small-editor"}),this.el=ct.createChild(Ext.apply({id:this.id},this.autoCreate),position),Ext.Toolbar.superclass.onRender.apply(this,arguments))},lookupComponent:function(c){return Ext.isString(c)?(c="-"==c?new T.Separator:" "==c?new T.Spacer:"->"==c?new T.Fill:new T.TextItem(c),this.applyDefaults(c)):c.isFormField||c.render?c=this.createComponent(c):c.tag?c=new T.Item({autoEl:c}):c.tagName?c=new T.Item({el:c}):Ext.isObject(c)&&(c=c.xtype?this.createComponent(c):this.constructButton(c)),c},applyDefaults:function(c){if(!Ext.isString(c)){c=Ext.Toolbar.superclass.applyDefaults.call(this,c);var d=this.internalDefaults;c.events?(Ext.applyIf(c.initialConfig,d),Ext.apply(c,d)):Ext.applyIf(c,d)}return c},addSeparator:function(){return this.add(new T.Separator)},addSpacer:function(){return this.add(new T.Spacer)},addFill:function(){this.add(new T.Fill)},addElement:function(el){return this.addItem(new T.Item({el:el}))},addItem:function(item){return this.add.apply(this,arguments)},addButton:function(config){if(Ext.isArray(config)){
for(var buttons=[],i=0,len=config.length;len>i;i++)buttons.push(this.addButton(config[i]));return buttons}return this.add(this.constructButton(config))},addText:function(text){return this.addItem(new T.TextItem(text))},addDom:function(config){return this.add(new T.Item({autoEl:config}))},addField:function(field){return this.add(field)},insertButton:function(index,item){if(Ext.isArray(item)){for(var buttons=[],i=0,len=item.length;len>i;i++)buttons.push(this.insertButton(index+i,item[i]));return buttons}return Ext.Toolbar.superclass.insert.call(this,index,item)},trackMenu:function(item,remove){if(this.trackMenus&&item.menu){var method=remove?"mun":"mon";this[method](item,"menutriggerover",this.onButtonTriggerOver,this),this[method](item,"menushow",this.onButtonMenuShow,this),this[method](item,"menuhide",this.onButtonMenuHide,this)}},constructButton:function(item){var b=item.events?item:this.createComponent(item,item.split?"splitbutton":this.defaultType);return b},onAdd:function(c){Ext.Toolbar.superclass.onAdd.call(this),this.trackMenu(c),this.disabled&&c.disable()},onRemove:function(c){Ext.Toolbar.superclass.onRemove.call(this),c==this.activeMenuBtn&&delete this.activeMenuBtn,this.trackMenu(c,!0)},onDisable:function(){this.items.each(function(item){item.disable&&item.disable()})},onEnable:function(){this.items.each(function(item){item.enable&&item.enable()})},onButtonTriggerOver:function(btn){this.activeMenuBtn&&this.activeMenuBtn!=btn&&(this.activeMenuBtn.hideMenu(),btn.showMenu(),this.activeMenuBtn=btn)},onButtonMenuShow:function(btn){this.activeMenuBtn=btn},onButtonMenuHide:function(btn){delete this.activeMenuBtn}}),Ext.reg("toolbar",Ext.Toolbar),T.Item=Ext.extend(Ext.BoxComponent,{hideParent:!0,enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn}),Ext.reg("tbitem",T.Item),T.Separator=Ext.extend(T.Item,{onRender:function(ct,position){this.el=ct.createChild({tag:"span",cls:"xtb-sep"},position)}}),Ext.reg("tbseparator",T.Separator),T.Spacer=Ext.extend(T.Item,{onRender:function(ct,position){this.el=ct.createChild({tag:"div",cls:"xtb-spacer",style:this.width?"width:"+this.width+"px":""},position)}}),Ext.reg("tbspacer",T.Spacer),T.Fill=Ext.extend(T.Item,{render:Ext.emptyFn,isFill:!0}),Ext.reg("tbfill",T.Fill),T.TextItem=Ext.extend(T.Item,{constructor:function(config){T.TextItem.superclass.constructor.call(this,Ext.isString(config)?{text:config}:config)},onRender:function(ct,position){this.autoEl={cls:"xtb-text",html:this.text||""},T.TextItem.superclass.onRender.call(this,ct,position)},setText:function(t){this.rendered?this.el.update(t):this.text=t}}),Ext.reg("tbtext",T.TextItem),T.Button=Ext.extend(Ext.Button,{}),T.SplitButton=Ext.extend(Ext.SplitButton,{}),Ext.reg("tbbutton",T.Button),Ext.reg("tbsplit",T.SplitButton)}(),Ext.ButtonGroup=Ext.extend(Ext.Panel,{baseCls:"x-btn-group",layout:"table",defaultType:"button",frame:!0,internalDefaults:{removeMode:"container",hideParent:!0},initComponent:function(){this.layoutConfig=this.layoutConfig||{},Ext.applyIf(this.layoutConfig,{columns:this.columns}),this.title||this.addClass("x-btn-group-notitle"),this.on("afterlayout",this.onAfterLayout,this),Ext.ButtonGroup.superclass.initComponent.call(this)},applyDefaults:function(c){c=Ext.ButtonGroup.superclass.applyDefaults.call(this,c);var d=this.internalDefaults;return c.events?(Ext.applyIf(c.initialConfig,d),Ext.apply(c,d)):Ext.applyIf(c,d),c},onAfterLayout:function(){var bodyWidth=this.body.getFrameWidth("lr")+this.body.dom.firstChild.offsetWidth;this.body.setWidth(bodyWidth),this.el.setWidth(bodyWidth+this.getFrameWidth())}}),Ext.reg("buttongroup",Ext.ButtonGroup),function(){var T=Ext.Toolbar;Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",initComponent:function(){var pagingItems=[this.first=new T.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:"x-tbar-page-first",disabled:!0,handler:this.moveFirst,scope:this}),this.prev=new T.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:"x-tbar-page-prev",disabled:!0,handler:this.movePrevious,scope:this}),"-",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:"x-tbar-page-number",allowDecimals:!1,allowNegative:!1,enableKeyEvents:!0,selectOnFocus:!0,submitValue:!1,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new T.TextItem({text:String.format(this.afterPageText,1)}),"-",this.next=new T.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:"x-tbar-page-next",disabled:!0,handler:this.moveNext,scope:this}),this.last=new T.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:"x-tbar-page-last",disabled:!0,handler:this.moveLast,scope:this}),"-",this.refresh=new T.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:"x-tbar-loading",handler:this.doRefresh,scope:this})],userItems=this.items||this.buttons||[];this.prependButtons?this.items=userItems.concat(pagingItems):this.items=pagingItems.concat(userItems),delete this.buttons,this.displayInfo&&(this.items.push("->"),this.items.push(this.displayItem=new T.TextItem({}))),Ext.PagingToolbar.superclass.initComponent.call(this),this.addEvents("change","beforechange"),this.on("afterlayout",this.onFirstLayout,this,{single:!0}),this.cursor=0,this.bindStore(this.store,!0)},onFirstLayout:function(){this.dsLoaded&&this.onLoad.apply(this,this.dsLoaded)},updateInfo:function(){if(this.displayItem){var count=this.store.getCount(),msg=0==count?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+count,this.store.getTotalCount());this.displayItem.setText(msg)}},onLoad:function(store,r,o){if(!this.rendered)return void(this.dsLoaded=[store,r,o]);var p=this.getParams();this.cursor=o.params&&o.params[p.start]?o.params[p.start]:0;var d=this.getPageData(),ap=d.activePage,ps=d.pages;this.afterTextItem.setText(String.format(this.afterPageText,d.pages)),this.inputItem.setValue(ap),this.first.setDisabled(1==ap),this.prev.setDisabled(1==ap),this.next.setDisabled(ap==ps),this.last.setDisabled(ap==ps),this.refresh.enable(),this.updateInfo(),this.fireEvent("change",this,d)},getPageData:function(){var total=this.store.getTotalCount();return{total:total,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:total<this.pageSize?1:Math.ceil(total/this.pageSize)}},changePage:function(page){this.doLoad(((page-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onLoadError:function(){this.rendered&&this.refresh.enable()},readPage:function(d){var pageNum,v=this.inputItem.getValue();return!v||isNaN(pageNum=parseInt(v,10))?(this.inputItem.setValue(d.activePage),!1):pageNum},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(e){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(field,e){var pageNum,k=e.getKey(),d=this.getPageData();if(k==e.RETURN)e.stopEvent(),pageNum=this.readPage(d),pageNum!==!1&&(pageNum=Math.min(Math.max(1,pageNum),d.pages)-1,this.doLoad(pageNum*this.pageSize));else if(k==e.HOME||k==e.END)e.stopEvent(),pageNum=k==e.HOME?1:d.pages,field.setValue(pageNum);else if((k==e.UP||k==e.PAGEUP||k==e.DOWN||k==e.PAGEDOWN)&&(e.stopEvent(),pageNum=this.readPage(d))){var increment=e.shiftKey?10:1;(k==e.DOWN||k==e.PAGEDOWN)&&(increment*=-1),pageNum+=increment,pageNum>=1&pageNum<=d.pages&&field.setValue(pageNum)}},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){this.rendered&&this.refresh&&this.refresh.disable()},doLoad:function(start){var o={},pn=this.getParams();o[pn.start]=start,o[pn.limit]=this.pageSize,this.fireEvent("beforechange",this,o)!==!1&&this.store.load({params:o})},moveFirst:function(){this.doLoad(0)},movePrevious:function(){this.doLoad(Math.max(0,this.cursor-this.pageSize))},moveNext:function(){this.doLoad(this.cursor+this.pageSize)},moveLast:function(){var total=this.store.getTotalCount(),extra=total%this.pageSize;this.doLoad(extra?total-extra:total-this.pageSize)},doRefresh:function(){this.doLoad(this.cursor)},bindStore:function(store,initial){var doLoad;!initial&&this.store&&(store!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.beforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.onLoadError,this)),store||(this.store=null)),store&&(store=Ext.StoreMgr.lookup(store),store.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError}),doLoad=!0),this.store=store,doLoad&&this.onLoad(store,null,{})},unbind:function(store){this.bindStore(null)},bind:function(store){this.bindStore(store)},onDestroy:function(){this.bindStore(null),Ext.PagingToolbar.superclass.onDestroy.call(this)}})}(),Ext.reg("paging",Ext.PagingToolbar),Ext.History=function(){function getHash(){var href=location.href,i=href.indexOf("#"),hash=i>=0?href.substr(i+1):null;return Ext.isGecko&&(hash=decodeURIComponent(hash)),hash}function doSave(){hiddenField.value=currentToken}function handleStateChange(token){currentToken=token,Ext.History.fireEvent("change",token)}function updateIFrame(token){var html=['<html><body><div id="state">',Ext.util.Format.htmlEncode(token),"</div></body></html>"].join("");try{var doc=iframe.contentWindow.document;return doc.open(),doc.write(html),doc.close(),!0}catch(e){return!1}}function checkIFrame(){if(!iframe.contentWindow||!iframe.contentWindow.document)return void setTimeout(checkIFrame,10);var doc=iframe.contentWindow.document,elem=doc.getElementById("state"),token=elem?elem.innerText:null,hash=getHash();setInterval(function(){doc=iframe.contentWindow.document,elem=doc.getElementById("state");var newtoken=elem?elem.innerText:null,newHash=getHash();newtoken!==token?(token=newtoken,handleStateChange(token),location.hash=token,hash=token,doSave()):newHash!==hash&&(hash=newHash,updateIFrame(newHash))},50),ready=!0,Ext.History.fireEvent("ready",Ext.History)}function startUp(){if(currentToken=hiddenField.value?hiddenField.value:getHash(),Ext.isIE)checkIFrame();else{var hash=getHash();setInterval(function(){var newHash=getHash();newHash!==hash&&(hash=newHash,handleStateChange(hash),doSave())},50),ready=!0,Ext.History.fireEvent("ready",Ext.History)}}var iframe,hiddenField,currentToken,ready=!1;return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(onReady,scope){return ready?void Ext.callback(onReady,scope,[this]):Ext.isReady?(hiddenField=Ext.getDom(Ext.History.fieldId),Ext.isIE&&(iframe=Ext.getDom(Ext.History.iframeId)),this.addEvents("ready","change"),onReady&&this.on("ready",onReady,scope,{single:!0}),void startUp()):void Ext.onReady(function(){Ext.History.init(onReady,scope)})},add:function(token,preventDup){return preventDup!==!1&&this.getToken()==token?!0:Ext.isIE?updateIFrame(token):(location.hash=token,!0)},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return ready?currentToken:getHash()}}}(),Ext.apply(Ext.History,new Ext.util.Observable),Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:!0,quickShowInterval:250,frame:!0,hidden:!0,baseCls:"x-tip",floating:{shadow:!0,shim:!0,useDisplay:!0,constrain:!1},autoHeight:!0,closeAction:"hide",initComponent:function(){Ext.Tip.superclass.initComponent.call(this),this.closable&&!this.title&&(this.elements+=",header")},afterRender:function(){Ext.Tip.superclass.afterRender.call(this),this.closable&&this.addTool({id:"close",handler:this[this.closeAction],scope:this})},showAt:function(xy){Ext.Tip.superclass.show.call(this),this.measureWidth===!1||this.initialConfig&&"number"==typeof this.initialConfig.width||this.doAutoWidth(),this.constrainPosition&&(xy=this.el.adjustForConstraints(xy)),this.setPagePosition(xy[0],xy[1])},doAutoWidth:function(adjust){adjust=adjust||0;var bw=this.body.getTextWidth();this.title&&(bw=Math.max(bw,this.header.child("span").getTextWidth(this.title))),bw+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr")+adjust,this.setWidth(bw.constrain(this.minWidth,this.maxWidth)),Ext.isIE7&&!this.repainted&&(this.el.repaint(),this.repainted=!0)},showBy:function(el,pos){this.rendered||this.render(Ext.getBody()),this.showAt(this.el.getAlignToXY(el,pos||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,"boolean"==typeof this.draggable?null:this.draggable),this.header.addClass("x-tip-draggable")}}),Ext.reg("tip",Ext.Tip),Ext.Tip.DD=function(tip,config){Ext.apply(this,config),this.tip=tip,Ext.Tip.DD.superclass.constructor.call(this,tip.el.id,"WindowDD-"+tip.id),this.setHandleElId(tip.header.id),this.scroll=!1},Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:!0,scroll:!1,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(e){this.tip.el.enableShadow(!0)}}),Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:!1,anchorToTarget:!0,anchorOffset:0,targetCounter:0,constrainPosition:!1,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this),this.lastActive=new Date,this.initTarget(this.target),this.origAnchor=this.anchor},onRender:function(ct,position){Ext.ToolTip.superclass.onRender.call(this,ct,position),this.anchorCls="x-tip-anchor-"+this.getAnchorPosition(),this.anchorEl=this.el.createChild({cls:"x-tip-anchor "+this.anchorCls})},afterRender:function(){Ext.ToolTip.superclass.afterRender.call(this),this.anchorEl.setStyle("z-index",this.el.getZIndex()+1).setVisibilityMode(Ext.Element.DISPLAY)},initTarget:function(target){var t;if(t=Ext.get(target)){if(this.target){var tg=Ext.get(this.target);this.mun(tg,"mouseover",this.onTargetOver,this),this.mun(tg,"mouseout",this.onTargetOut,this),this.mun(tg,"mousemove",this.onMouseMove,this)}this.mon(t,{mouseover:this.onTargetOver,mouseout:this.onTargetOut,mousemove:this.onMouseMove,scope:this}),this.target=t}this.anchor&&(this.anchorTarget=this.target)},onMouseMove:function(e){var t=this.delegate?e.getTarget(this.delegate):this.triggerElement=!0;t?(this.targetXY=e.getXY(),t===this.triggerElement?!this.hidden&&this.trackMouse&&this.setPagePosition(this.getTargetXY()):(this.hide(),this.lastActive=new Date(0),this.onTargetOver(e))):!this.closable&&this.isVisible()&&this.hide()},getTargetXY:function(){if(this.delegate&&(this.anchorTarget=this.triggerElement),this.anchor){this.targetCounter++;var offsets=this.getOffsets(),xy=this.anchorToTarget&&!this.trackMouse?this.el.getAlignToXY(this.anchorTarget,this.getAnchorAlign()):this.targetXY,dw=Ext.lib.Dom.getViewWidth()-5,dh=Ext.lib.Dom.getViewHeight()-5,de=document.documentElement,bd=document.body,scrollX=(de.scrollLeft||bd.scrollLeft||0)+5,scrollY=(de.scrollTop||bd.scrollTop||0)+5,axy=[xy[0]+offsets[0],xy[1]+offsets[1]],sz=this.getSize();if(this.anchorEl.removeClass(this.anchorCls),this.targetCounter<2){if(axy[0]<scrollX)return this.anchorToTarget&&(this.defaultAlign="l-r",this.mouseOffset&&(this.mouseOffset[0]*=-1)),this.anchor="left",this.getTargetXY();if(axy[0]+sz.width>dw)return this.anchorToTarget&&(this.defaultAlign="r-l",this.mouseOffset&&(this.mouseOffset[0]*=-1)),this.anchor="right",this.getTargetXY();if(axy[1]<scrollY)return this.anchorToTarget&&(this.defaultAlign="t-b",this.mouseOffset&&(this.mouseOffset[1]*=-1)),this.anchor="top",this.getTargetXY();if(axy[1]+sz.height>dh)return this.anchorToTarget&&(this.defaultAlign="b-t",this.mouseOffset&&(this.mouseOffset[1]*=-1)),this.anchor="bottom",this.getTargetXY()}return this.anchorCls="x-tip-anchor-"+this.getAnchorPosition(),this.anchorEl.addClass(this.anchorCls),this.targetCounter=0,axy}var mouseOffset=this.getMouseOffset();return[this.targetXY[0]+mouseOffset[0],this.targetXY[1]+mouseOffset[1]]},getMouseOffset:function(){var offset=this.anchor?[0,0]:[15,18];return this.mouseOffset&&(offset[0]+=this.mouseOffset[0],offset[1]+=this.mouseOffset[1]),offset},getAnchorPosition:function(){if(this.anchor)this.tipAnchor=this.anchor.charAt(0);else{var m=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!m)throw"AnchorTip.defaultAlign is invalid";this.tipAnchor=m[1].charAt(0)}switch(this.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var offsets,ap=this.getAnchorPosition().charAt(0);if(this.anchorToTarget&&!this.trackMouse)switch(ap){case"t":offsets=[0,9];break;case"b":offsets=[0,-13];break;case"r":offsets=[-13,0];break;default:offsets=[9,0]}else switch(ap){case"t":offsets=[-15-this.anchorOffset,30];break;case"b":offsets=[-19-this.anchorOffset,-13-this.el.dom.offsetHeight];break;case"r":offsets=[-15-this.el.dom.offsetWidth,-13-this.anchorOffset];break;default:offsets=[25,-13-this.anchorOffset]}var mouseOffset=this.getMouseOffset();return offsets[0]+=mouseOffset[0],offsets[1]+=mouseOffset[1],offsets},onTargetOver:function(e){if(!this.disabled&&!e.within(this.target.dom,!0)){var t=e.getTarget(this.delegate);t&&(this.triggerElement=t,this.clearTimer("hide"),this.targetXY=e.getXY(),this.delayShow())}},delayShow:function(){this.hidden&&!this.showTimer?this.lastActive.getElapsed()<this.quickShowInterval?this.show():this.showTimer=this.show.defer(this.showDelay,this):this.hidden||this.autoHide===!1||this.show()},onTargetOut:function(e){this.disabled||e.within(this.target.dom,!0)||(this.clearTimer("show"),this.autoHide!==!1&&this.delayHide())},delayHide:function(){this.hidden||this.hideTimer||(this.hideTimer=this.hide.defer(this.hideDelay,this))},hide:function(){this.clearTimer("dismiss"),this.lastActive=new Date,this.anchorEl&&this.anchorEl.hide(),Ext.ToolTip.superclass.hide.call(this),delete this.triggerElement},show:function(){this.anchor&&(this.showAt([-1e3,-1e3]),this.origConstrainPosition=this.constrainPosition,this.constrainPosition=!1,this.anchor=this.origAnchor),this.showAt(this.getTargetXY()),this.anchor?(this.anchorEl.show(),this.syncAnchor(),this.constrainPosition=this.origConstrainPosition):this.anchorEl.hide()},showAt:function(xy){this.lastActive=new Date,this.clearTimers(),Ext.ToolTip.superclass.showAt.call(this,xy),this.dismissDelay&&this.autoHide!==!1&&(this.dismissTimer=this.hide.defer(this.dismissDelay,this)),this.anchor&&!this.anchorEl.isVisible()?(this.syncAnchor(),this.anchorEl.show()):this.anchorEl.hide()},syncAnchor:function(){var anchorPos,targetPos,offset;switch(this.tipAnchor.charAt(0)){case"t":anchorPos="b",targetPos="tl",offset=[20+this.anchorOffset,2];break;case"r":anchorPos="l",targetPos="tr",offset=[-2,11+this.anchorOffset];break;case"b":anchorPos="t",targetPos="bl",offset=[20+this.anchorOffset,-2];break;default:anchorPos="r",targetPos="tl",offset=[2,11+this.anchorOffset]}this.anchorEl.alignTo(this.el,anchorPos+"-"+targetPos,offset)},setPagePosition:function(x,y){Ext.ToolTip.superclass.setPagePosition.call(this,x,y),this.anchor&&this.syncAnchor()},clearTimer:function(name){name+="Timer",clearTimeout(this[name]),delete this[name]},clearTimers:function(){this.clearTimer("show"),this.clearTimer("dismiss"),this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this),Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this),Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(e){this.autoHide===!0||this.closable||e.within(this.el.dom)||(this.disable(),this.doEnable.defer(100,this))},doEnable:function(){this.isDestroyed||this.enable()},onDisable:function(){this.clearTimers(),this.hide()},adjustPosition:function(x,y){if(this.constrainPosition){var ay=this.targetXY[1],h=this.getSize().height;ay>=y&&y+h>=ay&&(y=ay-h-5)}return{x:x,y:y}},beforeDestroy:function(){this.clearTimers(),Ext.destroy(this.anchorEl),delete this.anchorEl,delete this.target,delete this.anchorTarget,delete this.triggerElement,Ext.ToolTip.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this),Ext.ToolTip.superclass.onDestroy.call(this)}}),Ext.reg("tooltip",Ext.ToolTip),Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:!1,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){this.target=this.target||Ext.getDoc(),this.targets=this.targets||{},Ext.QuickTip.superclass.initComponent.call(this)},register:function(config){for(var cs=Ext.isArray(config)?config:arguments,i=0,len=cs.length;len>i;i++){var c=cs[i],target=c.target;if(target)if(Ext.isArray(target))for(var j=0,jlen=target.length;jlen>j;j++)this.targets[Ext.id(target[j])]=c;else this.targets[Ext.id(target)]=c}},unregister:function(el){delete this.targets[Ext.id(el)]},cancelShow:function(el){var at=this.activeTarget;el=Ext.get(el).dom,this.isVisible()?at&&at.el==el&&this.hide():at&&at.el==el&&this.clearTimer("show")},getTipCfg:function(e){var ttp,cfg,t=e.getTarget();return this.interceptTitles&&t.title&&Ext.isString(t.title)?(ttp=t.title,t.qtip=ttp,t.removeAttribute("title"),e.preventDefault()):(cfg=this.tagConfig,ttp=t.qtip||Ext.fly(t).getAttribute(cfg.attribute,cfg.namespace)),ttp},onTargetOver:function(e){if(!this.disabled){this.targetXY=e.getXY();var t=e.getTarget();if(t&&1===t.nodeType&&t!=document&&t!=document.body){if(this.activeTarget&&(t==this.activeTarget.el||Ext.fly(this.activeTarget.el).contains(t)))return this.clearTimer("hide"),void this.show();if(t&&this.targets[t.id])return this.activeTarget=this.targets[t.id],this.activeTarget.el=t,this.anchor=this.activeTarget.anchor,this.anchor&&(this.anchorTarget=t),void this.delayShow();var ttp,et=Ext.fly(t),cfg=this.tagConfig,ns=cfg.namespace;if(ttp=this.getTipCfg(e)){var autoHide=et.getAttribute(cfg.hide,ns);this.activeTarget={el:t,text:ttp,width:et.getAttribute(cfg.width,ns),autoHide:"user"!=autoHide&&"false"!==autoHide,title:et.getAttribute(cfg.title,ns),cls:et.getAttribute(cfg.cls,ns),align:et.getAttribute(cfg.align,ns)},this.anchor=et.getAttribute(cfg.anchor,ns),this.anchor&&(this.anchorTarget=t),this.delayShow()}}}},onTargetOut:function(e){this.activeTarget&&e.within(this.activeTarget.el)&&!this.getTipCfg(e)||(this.clearTimer("show"),this.autoHide!==!1&&this.delayHide())},showAt:function(xy){var t=this.activeTarget;t&&(this.rendered||(this.render(Ext.getBody()),this.activeTarget=t),t.width?(this.setWidth(t.width),this.body.setWidth(this.adjustBodyWidth(t.width-this.getFrameWidth())),this.measureWidth=!1):this.measureWidth=!0,this.setTitle(t.title||""),this.body.update(t.text),this.autoHide=t.autoHide,this.dismissDelay=t.dismissDelay||this.dismissDelay,this.lastCls&&(this.el.removeClass(this.lastCls),delete this.lastCls),t.cls&&(this.el.addClass(t.cls),this.lastCls=t.cls),this.anchor?this.constrainPosition=!1:t.align?(xy=this.el.getAlignToXY(t.el,t.align),this.constrainPosition=!1):this.constrainPosition=!0),Ext.QuickTip.superclass.showAt.call(this,xy)},hide:function(){delete this.activeTarget,Ext.QuickTip.superclass.hide.call(this)}}),Ext.reg("quicktip",Ext.QuickTip),Ext.QuickTips=function(){var tip,disabled=!1;return{init:function(autoRender){if(!tip){if(!Ext.isReady)return void Ext.onReady(function(){Ext.QuickTips.init(autoRender)});tip=new Ext.QuickTip({elements:"header,body",disabled:disabled}),autoRender!==!1&&tip.render(Ext.getBody())}},ddDisable:function(){tip&&!disabled&&tip.disable()},ddEnable:function(){tip&&!disabled&&tip.enable()},enable:function(){tip&&tip.enable(),disabled=!1},disable:function(){tip&&tip.disable(),disabled=!0},isEnabled:function(){return void 0!==tip&&!tip.disabled},getQuickTip:function(){return tip},register:function(){tip.register.apply(tip,arguments)},unregister:function(){tip.unregister.apply(tip,arguments)},tips:function(){tip.register.apply(tip,arguments)}}}(),Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(slider){slider.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(slider,e,thumb){this.show(),this.body.update(this.getText(thumb)),this.doAutoWidth(),this.el.alignTo(thumb.el,"b-t?",this.offsets)},getText:function(thumb){return String(thumb.value)}}),Ext.ux.SliderTip=Ext.slider.Tip,Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:!0,animate:Ext.enableFx,lines:!0,enableDD:!1,hlDrop:Ext.enableFx,pathSeparator:"/",bubbleEvents:[],initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this),this.eventModel||(this.eventModel=new Ext.tree.TreeEventModel(this));var l=this.loader;if(l?Ext.isObject(l)&&!l.load&&(l=new Ext.tree.TreeLoader(l)):l=new Ext.tree.TreeLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod}),this.loader=l,this.nodeHash={},this.root){var r=this.root;delete this.root,this.setRootNode(r)}this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","containerclick","checkchange","beforedblclick","dblclick","containerdblclick","contextmenu","containercontextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover"),this.singleExpand&&this.on("beforeexpandnode",this.restrictExpand,this)},proxyNodeEvent:function(ename,a1,a2,a3,a4,a5,a6){return("collapse"==ename||"expand"==ename||"beforecollapse"==ename||"beforeexpand"==ename||"move"==ename||"beforemove"==ename)&&(ename+="node"),this.fireEvent(ename,a1,a2,a3,a4,a5,a6)},getRootNode:function(){return this.root},setRootNode:function(node){if(this.destroyRoot(),node.render||(node=this.loader.createNode(node)),this.root=node,node.ownerTree=this,node.isRoot=!0,this.registerNode(node),!this.rootVisible){var uiP=node.attributes.uiProvider;node.ui=uiP?new uiP(node):new Ext.tree.RootTreeNodeUI(node)}return this.innerCt&&(this.clearInnerCt(),this.renderRoot()),node},clearInnerCt:function(){this.innerCt.update("")},renderRoot:function(){this.root.render(),this.rootVisible||this.root.renderChildren()},getNodeById:function(id){return this.nodeHash[id]},registerNode:function(node){this.nodeHash[node.id]=node},unregisterNode:function(node){delete this.nodeHash[node.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(node){var p=node.parentNode;p&&(p.expandedChild&&p.expandedChild.parentNode==p&&p.expandedChild.collapse(),p.expandedChild=node)},getChecked:function(a,startNode){startNode=startNode||this.root;var r=[],f=function(){this.attributes.checked&&r.push(a?"id"==a?this.id:this.attributes[a]:this)};return startNode.cascade(f),r},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(!0)},collapseAll:function(){this.root.collapse(!0)},getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.tree.DefaultSelectionModel),this.selModel},expandPath:function(path,attr,callback){if(Ext.isEmpty(path))return void(callback&&callback(!1,void 0));attr=attr||"id";var keys=path.split(this.pathSeparator),curNode=this.root;if(curNode.attributes[attr]!=keys[1])return void(callback&&callback(!1,null));var index=1,f=function(){if(++index==keys.length)return void(callback&&callback(!0,curNode));var c=curNode.findChild(attr,keys[index]);return c?(curNode=c,void c.expand(!1,!1,f)):void(callback&&callback(!1,curNode))};curNode.expand(!1,!1,f)},selectPath:function(path,attr,callback){if(Ext.isEmpty(path))return void(callback&&callback(!1,void 0));attr=attr||"id";var keys=path.split(this.pathSeparator),v=keys.pop();if(keys.length>1){var f=function(success,node){if(success&&node){var n=node.findChild(attr,v);n?(n.select(),callback&&callback(!0,n)):callback&&callback(!1,n)}else callback&&callback(!1,n)};this.expandPath(keys.join(this.pathSeparator),attr,f)}else this.root.select(),callback&&callback(!0,this.root)},getTreeEl:function(){return this.body},onRender:function(ct,position){Ext.tree.TreePanel.superclass.onRender.call(this,ct,position),this.el.addClass("x-tree"),this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this),this.containerScroll&&Ext.dd.ScrollManager.register(this.body),!this.enableDD&&!this.enableDrop||this.dropZone||(this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===!0})),!this.enableDD&&!this.enableDrag||this.dragZone||(this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll})),this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this),this.renderRoot()},beforeDestroy:function(){this.rendered&&(Ext.dd.ScrollManager.unregister(this.body),Ext.destroy(this.dropZone,this.dragZone)),this.destroyRoot(),Ext.destroy(this.loader),this.nodeHash=this.root=this.loader=null,Ext.tree.TreePanel.superclass.beforeDestroy.call(this)},destroyRoot:function(){this.root&&this.root.destroy&&this.root.destroy(!0)}}),Ext.tree.TreePanel.nodeTypes={},Ext.reg("treepanel",Ext.tree.TreePanel),Ext.tree.TreeEventModel=function(tree){this.tree=tree,this.tree.on("render",this.initEvents,this)},Ext.tree.TreeEventModel.prototype={initEvents:function(){var t=this.tree;t.trackMouseOver!==!1&&t.mon(t.innerCt,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut}),t.mon(t.getTreeEl(),{scope:this,click:this.delegateClick,dblclick:this.delegateDblClick,contextmenu:this.delegateContextMenu})},getNode:function(e){var t;if(t=e.getTarget(".x-tree-node-el",10)){var id=Ext.fly(t,"_treeEvents").getAttribute("tree-node-id","ext");if(id)return this.tree.getNodeById(id)}return null},getNodeTarget:function(e){var t=e.getTarget(".x-tree-node-icon",1);return t||(t=e.getTarget(".x-tree-node-el",6)),t},delegateOut:function(e,t){if(this.beforeEvent(e)){if(e.getTarget(".x-tree-ec-icon",1)){var n=this.getNode(e);this.onIconOut(e,n),n==this.lastEcOver&&delete this.lastEcOver}(t=this.getNodeTarget(e))&&!e.within(t,!0)&&this.onNodeOut(e,this.getNode(e))}},delegateOver:function(e,t){this.beforeEvent(e)&&(Ext.isGecko&&!this.trackingDoc&&(Ext.getBody().on("mouseover",this.trackExit,this),this.trackingDoc=!0),this.lastEcOver&&(this.onIconOut(e,this.lastEcOver),delete this.lastEcOver),e.getTarget(".x-tree-ec-icon",1)&&(this.lastEcOver=this.getNode(e),this.onIconOver(e,this.lastEcOver)),(t=this.getNodeTarget(e))&&this.onNodeOver(e,this.getNode(e)))},trackExit:function(e){this.lastOverNode&&(this.lastOverNode.ui&&!e.within(this.lastOverNode.ui.getEl())&&this.onNodeOut(e,this.lastOverNode),delete this.lastOverNode,Ext.getBody().un("mouseover",this.trackExit,this),this.trackingDoc=!1)},delegateClick:function(e,t){this.beforeEvent(e)?e.getTarget("input[type=checkbox]",1)?this.onCheckboxClick(e,this.getNode(e)):e.getTarget(".x-tree-ec-icon",1)?this.onIconClick(e,this.getNode(e)):this.getNodeTarget(e)&&this.onNodeClick(e,this.getNode(e)):this.checkContainerEvent(e,"click")},delegateDblClick:function(e,t){this.beforeEvent(e)?this.getNodeTarget(e)&&this.onNodeDblClick(e,this.getNode(e)):this.checkContainerEvent(e,"dblclick")},delegateContextMenu:function(e,t){this.beforeEvent(e)?this.getNodeTarget(e)&&this.onNodeContextMenu(e,this.getNode(e)):this.checkContainerEvent(e,"contextmenu")},checkContainerEvent:function(e,type){return this.disabled?(e.stopEvent(),!1):void this.onContainerEvent(e,type)},onContainerEvent:function(e,type){this.tree.fireEvent("container"+type,this.tree,e)},onNodeClick:function(e,node){node.ui.onClick(e)},onNodeOver:function(e,node){this.lastOverNode=node,node.ui.onOver(e)},onNodeOut:function(e,node){node.ui.onOut(e)},onIconOver:function(e,node){
node.ui.addClass("x-tree-ec-over")},onIconOut:function(e,node){node.ui.removeClass("x-tree-ec-over")},onIconClick:function(e,node){node.ui.ecClick(e)},onCheckboxClick:function(e,node){node.ui.onCheckChange(e)},onNodeDblClick:function(e,node){node.ui.onDblClick(e)},onNodeContextMenu:function(e,node){node.ui.onContextMenu(e)},beforeEvent:function(e){var node=this.getNode(e);return!this.disabled&&node&&node.ui?!0:(e.stopEvent(),!1)},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1}},Ext.tree.DefaultSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(config){this.selNode=null,this.addEvents("selectionchange","beforeselect"),Ext.apply(this,config),Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},init:function(tree){this.tree=tree,tree.mon(tree.getTreeEl(),"keydown",this.onKeyDown,this),tree.on("click",this.onNodeClick,this)},onNodeClick:function(node,e){this.select(node)},select:function(node,selectNextNode){if(!Ext.fly(node.ui.wrap).isVisible()&&selectNextNode)return selectNextNode.call(this,node);var last=this.selNode;return node==last?node.ui.onSelectedChange(!0):this.fireEvent("beforeselect",this,node,last)!==!1&&(last&&last.ui&&last.ui.onSelectedChange(!1),this.selNode=node,node.ui.onSelectedChange(!0),this.fireEvent("selectionchange",this,node,last)),node},unselect:function(node,silent){this.selNode==node&&this.clearSelections(silent)},clearSelections:function(silent){var n=this.selNode;return n&&(n.ui.onSelectedChange(!1),this.selNode=null,silent!==!0&&this.fireEvent("selectionchange",this,null)),n},getSelectedNode:function(){return this.selNode},isSelected:function(node){return this.selNode==node},selectPrevious:function(s){if(!(s=s||this.selNode||this.lastSelNode))return null;var ps=s.previousSibling;if(ps){if(!ps.isExpanded()||ps.childNodes.length<1)return this.select(ps,this.selectPrevious);for(var lc=ps.lastChild;lc&&lc.isExpanded()&&Ext.fly(lc.ui.wrap).isVisible()&&lc.childNodes.length>0;)lc=lc.lastChild;return this.select(lc,this.selectPrevious)}return!s.parentNode||!this.tree.rootVisible&&s.parentNode.isRoot?null:this.select(s.parentNode,this.selectPrevious)},selectNext:function(s){if(!(s=s||this.selNode||this.lastSelNode))return null;if(s.firstChild&&s.isExpanded()&&Ext.fly(s.ui.wrap).isVisible())return this.select(s.firstChild,this.selectNext);if(s.nextSibling)return this.select(s.nextSibling,this.selectNext);if(s.parentNode){var newS=null;return s.parentNode.bubble(function(){return this.nextSibling?(newS=this.getOwnerTree().selModel.select(this.nextSibling,this.selectNext),!1):void 0}),newS}return null},onKeyDown:function(e){var s=this.selNode||this.lastSelNode;if(s){var k=e.getKey();switch(k){case e.DOWN:e.stopEvent(),this.selectNext();break;case e.UP:e.stopEvent(),this.selectPrevious();break;case e.RIGHT:e.preventDefault(),s.hasChildNodes()&&(s.isExpanded()?s.firstChild&&this.select(s.firstChild,e):s.expand());break;case e.LEFT:e.preventDefault(),s.hasChildNodes()&&s.isExpanded()?s.collapse():s.parentNode&&(this.tree.rootVisible||s.parentNode!=this.tree.getRootNode())&&this.select(s.parentNode,e)}}}}),Ext.tree.MultiSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(config){this.selNodes=[],this.selMap={},this.addEvents("selectionchange"),Ext.apply(this,config),Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},init:function(tree){this.tree=tree,tree.mon(tree.getTreeEl(),"keydown",this.onKeyDown,this),tree.on("click",this.onNodeClick,this)},onNodeClick:function(node,e){e.ctrlKey&&this.isSelected(node)?this.unselect(node):this.select(node,e,e.ctrlKey)},select:function(node,e,keepExisting){return keepExisting!==!0&&this.clearSelections(!0),this.isSelected(node)?(this.lastSelNode=node,node):(this.selNodes.push(node),this.selMap[node.id]=node,this.lastSelNode=node,node.ui.onSelectedChange(!0),this.fireEvent("selectionchange",this,this.selNodes),node)},unselect:function(node){if(this.selMap[node.id]){node.ui.onSelectedChange(!1);var sn=this.selNodes,index=sn.indexOf(node);-1!=index&&this.selNodes.splice(index,1),delete this.selMap[node.id],this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(suppressEvent){var sn=this.selNodes;if(sn.length>0){for(var i=0,len=sn.length;len>i;i++)sn[i].ui.onSelectedChange(!1);this.selNodes=[],this.selMap={},suppressEvent!==!0&&this.fireEvent("selectionchange",this,this.selNodes)}},isSelected:function(node){return this.selMap[node.id]?!0:!1},getSelectedNodes:function(){return this.selNodes.concat([])},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious}),Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(root){this.nodeHash={},this.root=null,root&&this.setRootNode(root),this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert"),Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(node){return this.root=node,node.ownerTree=this,node.isRoot=!0,this.registerNode(node),node},getNodeById:function(id){return this.nodeHash[id]},registerNode:function(node){this.nodeHash[node.id]=node},unregisterNode:function(node){delete this.nodeHash[node.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}}),Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(attributes){this.attributes=attributes||{},this.leaf=this.attributes.leaf,this.id=this.attributes.id,this.id||(this.id=Ext.id(null,"xnode-"),this.attributes.id=this.id),this.childNodes=[],this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.addEvents({append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0}),this.listeners=this.attributes.listeners,Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(evtName){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===!1)return!1;var ot=this.getOwnerTree();return ot&&ot.proxyNodeEvent.apply(ot,arguments)===!1?!1:!0},isLeaf:function(){return this.leaf===!0},setFirstChild:function(node){this.firstChild=node},setLastChild:function(node){this.lastChild=node},isLast:function(){return this.parentNode?this.parentNode.lastChild==this:!0},isFirst:function(){return this.parentNode?this.parentNode.firstChild==this:!0},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(node){var multi=!1;if(Ext.isArray(node)?multi=node:arguments.length>1&&(multi=arguments),!multi){if(this.fireEvent("beforeappend",this.ownerTree,this,node)===!1)return!1;var index=this.childNodes.length,oldParent=node.parentNode;if(oldParent){if(node.fireEvent("beforemove",node.getOwnerTree(),node,oldParent,this,index)===!1)return!1;oldParent.removeChild(node)}index=this.childNodes.length,0===index&&this.setFirstChild(node),this.childNodes.push(node),node.parentNode=this;var ps=this.childNodes[index-1];return ps?(node.previousSibling=ps,ps.nextSibling=node):node.previousSibling=null,node.nextSibling=null,this.setLastChild(node),node.setOwnerTree(this.getOwnerTree()),this.fireEvent("append",this.ownerTree,this,node,index),oldParent&&node.fireEvent("move",this.ownerTree,node,oldParent,this,index),node}for(var i=0,len=multi.length;len>i;i++)this.appendChild(multi[i])},removeChild:function(node,destroy){var index=this.childNodes.indexOf(node);return-1==index?!1:this.fireEvent("beforeremove",this.ownerTree,this,node)===!1?!1:(this.childNodes.splice(index,1),node.previousSibling&&(node.previousSibling.nextSibling=node.nextSibling),node.nextSibling&&(node.nextSibling.previousSibling=node.previousSibling),this.firstChild==node&&this.setFirstChild(node.nextSibling),this.lastChild==node&&this.setLastChild(node.previousSibling),this.fireEvent("remove",this.ownerTree,this,node),destroy?node.destroy(!0):node.clear(),node)},clear:function(destroy){this.setOwnerTree(null,destroy),this.parentNode=this.previousSibling=this.nextSibling=null,destroy&&(this.firstChild=this.lastChild=null)},destroy:function(silent){silent===!0?(this.purgeListeners(),this.clear(!0),Ext.each(this.childNodes,function(n){n.destroy(!0)}),this.childNodes=null):this.remove(!0)},insertBefore:function(node,refNode){if(!refNode)return this.appendChild(node);if(node==refNode)return!1;if(this.fireEvent("beforeinsert",this.ownerTree,this,node,refNode)===!1)return!1;var index=this.childNodes.indexOf(refNode),oldParent=node.parentNode,refIndex=index;if(oldParent==this&&this.childNodes.indexOf(node)<index&&refIndex--,oldParent){if(node.fireEvent("beforemove",node.getOwnerTree(),node,oldParent,this,index,refNode)===!1)return!1;oldParent.removeChild(node)}0===refIndex&&this.setFirstChild(node),this.childNodes.splice(refIndex,0,node),node.parentNode=this;var ps=this.childNodes[refIndex-1];return ps?(node.previousSibling=ps,ps.nextSibling=node):node.previousSibling=null,node.nextSibling=refNode,refNode.previousSibling=node,node.setOwnerTree(this.getOwnerTree()),this.fireEvent("insert",this.ownerTree,this,node,refNode),oldParent&&node.fireEvent("move",this.ownerTree,node,oldParent,this,refIndex,refNode),node},remove:function(destroy){return this.parentNode&&this.parentNode.removeChild(this,destroy),this},removeAll:function(destroy){for(var n,cn=this.childNodes;n=cn[0];)this.removeChild(n,destroy);return this},item:function(index){return this.childNodes[index]},replaceChild:function(newChild,oldChild){var s=oldChild?oldChild.nextSibling:null;return this.removeChild(oldChild),this.insertBefore(newChild,s),oldChild},indexOf:function(child){return this.childNodes.indexOf(child)},getOwnerTree:function(){if(!this.ownerTree)for(var p=this;p;){if(p.ownerTree){this.ownerTree=p.ownerTree;break}p=p.parentNode}return this.ownerTree},getDepth:function(){for(var depth=0,p=this;p.parentNode;)++depth,p=p.parentNode;return depth},setOwnerTree:function(tree,destroy){tree!=this.ownerTree&&(this.ownerTree&&this.ownerTree.unregisterNode(this),this.ownerTree=tree,destroy!==!0&&Ext.each(this.childNodes,function(n){n.setOwnerTree(tree)}),tree&&tree.registerNode(this))},setId:function(id){if(id!==this.id){var t=this.ownerTree;t&&t.unregisterNode(this),this.id=this.attributes.id=id,t&&t.registerNode(this),this.onIdChange(id)}},onIdChange:Ext.emptyFn,getPath:function(attr){attr=attr||"id";for(var p=this.parentNode,b=[this.attributes[attr]];p;)b.unshift(p.attributes[attr]),p=p.parentNode;var sep=this.getOwnerTree().pathSeparator;return sep+b.join(sep)},bubble:function(fn,scope,args){for(var p=this;p&&fn.apply(scope||p,args||[p])!==!1;)p=p.parentNode},cascade:function(fn,scope,args){if(fn.apply(scope||this,args||[this])!==!1)for(var cs=this.childNodes,i=0,len=cs.length;len>i;i++)cs[i].cascade(fn,scope,args)},eachChild:function(fn,scope,args){for(var cs=this.childNodes,i=0,len=cs.length;len>i&&fn.apply(scope||cs[i],args||[cs[i]])!==!1;i++);},findChild:function(attribute,value,deep){return this.findChildBy(function(){return this.attributes[attribute]==value},null,deep)},findChildBy:function(fn,scope,deep){for(var n,res,cs=this.childNodes,len=cs.length,i=0;len>i;i++){if(n=cs[i],fn.call(scope||n,n)===!0)return n;if(deep&&(res=n.findChildBy(fn,scope,deep),null!=res))return res}return null},sort:function(fn,scope){var cs=this.childNodes,len=cs.length;if(len>0){var sortFn=scope?function(){fn.apply(scope,arguments)}:fn;cs.sort(sortFn);for(var i=0;len>i;i++){var n=cs[i];n.previousSibling=cs[i-1],n.nextSibling=cs[i+1],0===i&&this.setFirstChild(n),i==len-1&&this.setLastChild(n)}}},contains:function(node){return node.isAncestor(this)},isAncestor:function(node){for(var p=this.parentNode;p;){if(p==node)return!0;p=p.parentNode}return!1},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}}),Ext.tree.TreeNode=Ext.extend(Ext.data.Node,{constructor:function(attributes){attributes=attributes||{},Ext.isString(attributes)&&(attributes={text:attributes}),this.childrenRendered=!1,this.rendered=!1,Ext.tree.TreeNode.superclass.constructor.call(this,attributes),this.expanded=attributes.expanded===!0,this.isTarget=attributes.isTarget!==!1,this.draggable=attributes.draggable!==!1&&attributes.allowDrag!==!1,this.allowChildren=attributes.allowChildren!==!1&&attributes.allowDrop!==!1,this.text=attributes.text,this.disabled=attributes.disabled===!0,this.hidden=attributes.hidden===!0,this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","beforedblclick","dblclick","contextmenu","beforechildrenrendered");var uiClass=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new uiClass(this)},preventHScroll:!0,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var owner;return this.loader||((owner=this.getOwnerTree())&&owner.loader?owner.loader:this.loader=new Ext.tree.TreeLoader)},setFirstChild:function(node){var of=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,node),this.childrenRendered&&of&&node!=of&&of.renderIndent(!0,!0),this.rendered&&this.renderIndent(!0,!0)},setLastChild:function(node){var ol=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,node),this.childrenRendered&&ol&&node!=ol&&ol.renderIndent(!0,!0),this.rendered&&this.renderIndent(!0,!0)},appendChild:function(n){n.render||Ext.isArray(n)||(n=this.getLoader().createNode(n));var node=Ext.tree.TreeNode.superclass.appendChild.call(this,n);return node&&this.childrenRendered&&node.render(),this.ui.updateExpandIcon(),node},removeChild:function(node,destroy){if(this.ownerTree.getSelectionModel().unselect(node),Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments),!destroy){var rendered=node.ui.rendered;rendered&&node.ui.remove(),rendered&&this.childNodes.length<1?this.collapse(!1,!1):this.ui.updateExpandIcon(),this.firstChild||this.isHiddenRoot()||(this.childrenRendered=!1)}return node},insertBefore:function(node,refNode){node.render||(node=this.getLoader().createNode(node));var newNode=Ext.tree.TreeNode.superclass.insertBefore.call(this,node,refNode);return newNode&&refNode&&this.childrenRendered&&node.render(),this.ui.updateExpandIcon(),newNode},setText:function(text){var oldText=this.text;this.text=this.attributes.text=text,this.rendered&&this.ui.onTextChange(this,text,oldText),this.fireEvent("textchange",this,text,oldText)},setIconCls:function(cls){var old=this.attributes.iconCls;this.attributes.iconCls=cls,this.rendered&&this.ui.onIconClsChange(this,cls,old)},setTooltip:function(tip,title){this.attributes.qtip=tip,this.attributes.qtipTitle=title,this.rendered&&this.ui.onTipChange(this,tip,title)},setIcon:function(icon){this.attributes.icon=icon,this.rendered&&this.ui.onIconChange(this,icon)},setHref:function(href,target){this.attributes.href=href,this.attributes.hrefTarget=target,this.rendered&&this.ui.onHrefChange(this,href,target)},setCls:function(cls){var old=this.attributes.cls;this.attributes.cls=cls,this.rendered&&this.ui.onClsChange(this,cls,old)},select:function(){var t=this.getOwnerTree();t&&t.getSelectionModel().select(this)},unselect:function(silent){var t=this.getOwnerTree();t&&t.getSelectionModel().unselect(this,silent)},isSelected:function(){var t=this.getOwnerTree();return t?t.getSelectionModel().isSelected(this):!1},expand:function(deep,anim,callback,scope){if(this.expanded)this.runCallback(callback,scope||this,[this]);else{if(this.fireEvent("beforeexpand",this,deep,anim)===!1)return;if(this.childrenRendered||this.renderChildren(),this.expanded=!0,!this.isHiddenRoot()&&this.getOwnerTree().animate&&anim!==!1||anim)return void this.ui.animExpand(function(){this.fireEvent("expand",this),this.runCallback(callback,scope||this,[this]),deep===!0&&this.expandChildNodes(!0,!0)}.createDelegate(this));this.ui.expand(),this.fireEvent("expand",this),this.runCallback(callback,scope||this,[this])}deep===!0&&this.expandChildNodes(!0)},runCallback:function(cb,scope,args){Ext.isFunction(cb)&&cb.apply(scope,args)},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(deep,anim,callback,scope){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,deep,anim)===!1)return;if(this.expanded=!1,this.getOwnerTree().animate&&anim!==!1||anim)return void this.ui.animCollapse(function(){this.fireEvent("collapse",this),this.runCallback(callback,scope||this,[this]),deep===!0&&this.collapseChildNodes(!0)}.createDelegate(this));this.ui.collapse(),this.fireEvent("collapse",this),this.runCallback(callback,scope||this,[this])}else this.expanded||this.runCallback(callback,scope||this,[this]);if(deep===!0)for(var cs=this.childNodes,i=0,len=cs.length;len>i;i++)cs[i].collapse(!0,!1)},delayedExpand:function(delay){this.expandProcId||(this.expandProcId=this.expand.defer(delay,this))},cancelExpand:function(){this.expandProcId&&clearTimeout(this.expandProcId),this.expandProcId=!1},toggle:function(){this.expanded?this.collapse():this.expand()},ensureVisible:function(callback,scope){var tree=this.getOwnerTree();tree.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),!1,function(){var node=tree.getNodeById(this.id);tree.getTreeEl().scrollChildIntoView(node.ui.anchor),this.runCallback(callback,scope||this,[this])}.createDelegate(this))},expandChildNodes:function(deep,anim){var i,cs=this.childNodes,len=cs.length;for(i=0;len>i;i++)cs[i].expand(deep,anim)},collapseChildNodes:function(deep){for(var cs=this.childNodes,i=0,len=cs.length;len>i;i++)cs[i].collapse(deep)},disable:function(){this.disabled=!0,this.unselect(),this.rendered&&this.ui.onDisableChange&&this.ui.onDisableChange(this,!0),this.fireEvent("disabledchange",this,!0)},enable:function(){this.disabled=!1,this.rendered&&this.ui.onDisableChange&&this.ui.onDisableChange(this,!1),this.fireEvent("disabledchange",this,!1)},renderChildren:function(suppressEvent){suppressEvent!==!1&&this.fireEvent("beforechildrenrendered",this);for(var cs=this.childNodes,i=0,len=cs.length;len>i;i++)cs[i].render(!0);this.childrenRendered=!0},sort:function(fn,scope){if(Ext.tree.TreeNode.superclass.sort.apply(this,arguments),this.childrenRendered)for(var cs=this.childNodes,i=0,len=cs.length;len>i;i++)cs[i].render(!0)},render:function(bulkRender){this.ui.render(bulkRender),this.rendered||(this.getOwnerTree().registerNode(this),this.rendered=!0,this.expanded&&(this.expanded=!1,this.expand(!1,!1)))},renderIndent:function(deep,refresh){if(refresh&&(this.ui.childIndent=null),this.ui.renderIndent(),deep===!0&&this.childrenRendered)for(var cs=this.childNodes,i=0,len=cs.length;len>i;i++)cs[i].renderIndent(!0,refresh)},beginUpdate:function(){this.childrenRendered=!1},endUpdate:function(){this.expanded&&this.rendered&&this.renderChildren()},destroy:function(silent){silent===!0&&this.unselect(!0),Ext.tree.TreeNode.superclass.destroy.call(this,silent),Ext.destroy(this.ui,this.loader),this.ui=this.loader=null},onIdChange:function(id){this.ui.onIdChange(id)}}),Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode,Ext.tree.AsyncTreeNode=function(config){this.loaded=config&&config.loaded===!0,this.loading=!1,Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments),this.addEvents("beforeload","load")},Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(deep,anim,callback,scope){if(this.loading){var timer,f=function(){this.loading||(clearInterval(timer),this.expand(deep,anim,callback,scope))}.createDelegate(this);return void(timer=setInterval(f,200))}if(!this.loaded){if(this.fireEvent("beforeload",this)===!1)return;this.loading=!0,this.ui.beforeLoad(this);var loader=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(loader)return void loader.load(this,this.loadComplete.createDelegate(this,[deep,anim,callback,scope]),this)}Ext.tree.AsyncTreeNode.superclass.expand.call(this,deep,anim,callback,scope)},isLoading:function(){return this.loading},loadComplete:function(deep,anim,callback,scope){this.loading=!1,this.loaded=!0,this.ui.afterLoad(this),this.fireEvent("load",this),this.expand(deep,anim,callback,scope)},isLoaded:function(){return this.loaded},hasChildNodes:function(){return this.isLeaf()||this.loaded?Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this):!0},reload:function(callback,scope){for(this.collapse(!1,!1);this.firstChild;)this.removeChild(this.firstChild).destroy();this.childrenRendered=!1,this.loaded=!1,this.isHiddenRoot()&&(this.expanded=!1),this.expand(!1,!1,callback,scope)}}),Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode,Ext.tree.TreeNodeUI=Ext.extend(Object,{constructor:function(node){Ext.apply(this,{node:node,rendered:!1,animating:!1,wasLeaf:!0,ecc:"x-tree-ec-icon x-tree-elbow",emptyIcon:Ext.BLANK_IMAGE_URL})},removeChild:function(node){this.rendered&&this.ctNode.removeChild(node.ui.getEl())},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(node,text,oldText){this.rendered&&(this.textNode.innerHTML=text)},onIconClsChange:function(node,cls,oldCls){this.rendered&&Ext.fly(this.iconNode).replaceClass(oldCls,cls)},onIconChange:function(node,icon){if(this.rendered){var empty=Ext.isEmpty(icon);this.iconNode.src=empty?this.emptyIcon:icon,Ext.fly(this.iconNode)[empty?"removeClass":"addClass"]("x-tree-node-inline-icon")}},onTipChange:function(node,tip,title){if(this.rendered){var hasTitle=Ext.isDefined(title);this.textNode.setAttributeNS?(this.textNode.setAttributeNS("ext","qtip",tip),hasTitle&&this.textNode.setAttributeNS("ext","qtitle",title)):(this.textNode.setAttribute("ext:qtip",tip),hasTitle&&this.textNode.setAttribute("ext:qtitle",title))}},onHrefChange:function(node,href,target){this.rendered&&(this.anchor.href=this.getHref(href),Ext.isDefined(target)&&(this.anchor.target=target))},onClsChange:function(node,cls,oldCls){this.rendered&&Ext.fly(this.elNode).replaceClass(oldCls,cls)},onDisableChange:function(node,state){this.disabled=state,this.checkbox&&(this.checkbox.disabled=state),this[state?"addClass":"removeClass"]("x-tree-node-disabled")},onSelectedChange:function(state){state?(this.focus(),this.addClass("x-tree-selected")):this.removeClass("x-tree-selected")},onMove:function(tree,node,oldParent,newParent,index,refNode){if(this.childIndent=null,this.rendered){var targetNode=newParent.ui.getContainer();if(!targetNode)return this.holder=document.createElement("div"),void this.holder.appendChild(this.wrap);var insertBefore=refNode?refNode.ui.getEl():null;insertBefore?targetNode.insertBefore(this.wrap,insertBefore):targetNode.appendChild(this.wrap),this.node.renderIndent(!0,oldParent!=newParent)}},addClass:function(cls){this.elNode&&Ext.fly(this.elNode).addClass(cls)},removeClass:function(cls){this.elNode&&Ext.fly(this.elNode).removeClass(cls)},remove:function(){this.rendered&&(this.holder=document.createElement("div"),this.holder.appendChild(this.wrap))},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this),this.node.disabled&&this.onDisableChange(this.node,!0),this.node.hidden&&this.hide();var ot=this.node.getOwnerTree(),dd=ot.enableDD||ot.enableDrag||ot.enableDrop;!dd||this.node.isRoot&&!ot.rootVisible||Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:!1})},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=!0,this.wrap&&(this.wrap.style.display="none")},show:function(){this.node.hidden=!1,this.wrap&&(this.wrap.style.display="")},onContextMenu:function(e){(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu"))&&(e.preventDefault(),this.focus(),this.fireEvent("contextmenu",this.node,e))},onClick:function(e){if(this.dropping)return void e.stopEvent();if(this.fireEvent("beforeclick",this.node,e)!==!1){var a=e.getTarget("a");if(!this.disabled&&this.node.attributes.href&&a)return void this.fireEvent("click",this.node,e);if(a&&e.ctrlKey&&e.stopEvent(),e.preventDefault(),this.disabled)return;this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()&&this.node.toggle(),this.fireEvent("click",this.node,e)}else e.stopEvent()},onDblClick:function(e){e.preventDefault(),this.disabled||this.fireEvent("beforedblclick",this.node,e)!==!1&&(this.checkbox&&this.toggleCheck(),!this.animating&&this.node.isExpandable()&&this.node.toggle(),this.fireEvent("dblclick",this.node,e))},onOver:function(e){this.addClass("x-tree-node-over")},onOut:function(e){this.removeClass("x-tree-node-over")},onCheckChange:function(){var checked=this.checkbox.checked;this.checkbox.defaultChecked=checked,this.node.attributes.checked=checked,this.fireEvent("checkchange",this.node,checked)},ecClick:function(e){!this.animating&&this.node.isExpandable()&&this.node.toggle()},startDrop:function(){this.dropping=!0},endDrop:function(){setTimeout(function(){this.dropping=!1}.createDelegate(this),50)},expand:function(){this.updateExpandIcon(),this.ctNode.style.display=""},focus:function(){if(this.node.preventHScroll)try{var noscroll=this.node.getOwnerTree().getTreeEl().dom,l=noscroll.scrollLeft;this.anchor.focus(),noscroll.scrollLeft=l}catch(e){}else try{this.anchor.focus()}catch(e){}},toggleCheck:function(value){var cb=this.checkbox;cb&&(cb.checked=void 0===value?!cb.checked:value,this.onCheckChange())},blur:function(){try{this.anchor.blur()}catch(e){}},animExpand:function(callback){var ct=Ext.get(this.ctNode);return ct.stopFx(),this.node.isExpandable()?(this.animating=!0,this.updateExpandIcon(),void ct.slideIn("t",{callback:function(){this.animating=!1,Ext.callback(callback)},scope:this,duration:this.node.ownerTree.duration||.25})):(this.updateExpandIcon(),this.ctNode.style.display="",void Ext.callback(callback))},highlight:function(){var tree=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(tree.hlColor||"C3DAF9",{endColor:tree.hlBaseColor})},collapse:function(){this.updateExpandIcon(),this.ctNode.style.display="none"},animCollapse:function(callback){var ct=Ext.get(this.ctNode);ct.enableDisplayMode("block"),ct.stopFx(),this.animating=!0,this.updateExpandIcon(),ct.slideOut("t",{callback:function(){this.animating=!1,Ext.callback(callback)},scope:this,duration:this.node.ownerTree.duration||.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(ghostNode){ghostNode.appendChild(this.elNode.cloneNode(!0))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(bulkRender){var n=this.node,a=n.attributes,targetNode=n.parentNode?n.parentNode.ui.getContainer():n.ownerTree.innerCt.dom;this.rendered?bulkRender===!0&&targetNode.appendChild(this.wrap):(this.rendered=!0,this.renderElements(n,a,targetNode,bulkRender),a.qtip?this.onTipChange(n,a.qtip,a.qtipTitle):a.qtipCfg&&(a.qtipCfg.target=Ext.id(this.textNode),Ext.QuickTips.register(a.qtipCfg)),this.initEvents(),this.node.expanded||this.updateExpandIcon(!0))},renderElements:function(n,a,targetNode,bulkRender){this.indentMarkup=n.parentNode?n.parentNode.ui.getChildIndent():"";var nel,cb=Ext.isBoolean(a.checked),href=this.getHref(a.href),buf=['<li class="x-tree-node"><div ext:tree-node-id="',n.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',a.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',a.icon||this.emptyIcon,'" class="x-tree-node-icon',a.icon?" x-tree-node-inline-icon":"",a.iconCls?" "+a.iconCls:"",'" unselectable="on" />',cb?'<input class="x-tree-node-cb" type="checkbox" '+(a.checked?'checked="checked" />':"/>"):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',href,'" tabIndex="1" ',a.hrefTarget?' target="'+a.hrefTarget+'"':"",'><span unselectable="on">',n.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");bulkRender!==!0&&n.nextSibling&&(nel=n.nextSibling.ui.getEl())?this.wrap=Ext.DomHelper.insertHtml("beforeBegin",nel,buf):this.wrap=Ext.DomHelper.insertHtml("beforeEnd",targetNode,buf),this.elNode=this.wrap.childNodes[0],this.ctNode=this.wrap.childNodes[1];var cs=this.elNode.childNodes;this.indentNode=cs[0],this.ecNode=cs[1],this.iconNode=cs[2];var index=3;cb&&(this.checkbox=cs[3],this.checkbox.defaultChecked=this.checkbox.checked,index++),this.anchor=cs[index],this.textNode=cs[index].firstChild},getHref:function(href){return Ext.isEmpty(href)?Ext.isGecko?"":"#":href},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:!1},updateExpandIcon:function(){if(this.rendered){var c1,c2,n=this.node,cls=n.isLast()?"x-tree-elbow-end":"x-tree-elbow",hasChild=n.hasChildNodes();hasChild||n.attributes.expandable?(n.expanded?(cls+="-minus",c1="x-tree-node-collapsed",c2="x-tree-node-expanded"):(cls+="-plus",c1="x-tree-node-expanded",c2="x-tree-node-collapsed"),this.wasLeaf&&(this.removeClass("x-tree-node-leaf"),this.wasLeaf=!1),(this.c1!=c1||this.c2!=c2)&&(Ext.fly(this.elNode).replaceClass(c1,c2),this.c1=c1,this.c2=c2)):this.wasLeaf||(Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-collapsed"),delete this.c1,delete this.c2,this.wasLeaf=!0);var ecc="x-tree-ec-icon "+cls;this.ecc!=ecc&&(this.ecNode.className=ecc,this.ecc=ecc)}},onIdChange:function(id){this.rendered&&this.elNode.setAttribute("ext:tree-node-id",id)},getChildIndent:function(){if(!this.childIndent){for(var buf=[],p=this.node;p;)(!p.isRoot||p.isRoot&&p.ownerTree.rootVisible)&&(p.isLast()?buf.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-icon" />'):buf.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')),p=p.parentNode;this.childIndent=buf.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var indent="",p=this.node.parentNode;p&&(indent=p.ui.getChildIndent()),this.indentMarkup!=indent&&(this.indentNode.innerHTML=indent,this.indentMarkup=indent),this.updateExpandIcon()}},destroy:function(){this.elNode&&Ext.dd.Registry.unregister(this.elNode.id),Ext.each(["textnode","anchor","checkbox","indentNode","ecNode","iconNode","elNode","ctNode","wrap","holder"],function(el){this[el]&&(Ext.fly(this[el]).remove(),delete this[el])},this),delete this.node}}),Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var targetNode=this.node.ownerTree.innerCt.dom;this.node.expanded=!0,targetNode.innerHTML='<div class="x-tree-root-node"></div>',this.wrap=this.ctNode=targetNode.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn}),Ext.tree.TreeLoader=function(config){this.baseParams={},Ext.apply(this,config),this.addEvents("beforeload","load","loadexception"),Ext.tree.TreeLoader.superclass.constructor.call(this),Ext.isString(this.paramOrder)&&(this.paramOrder=this.paramOrder.split(/[\s,|]/))},Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:!0,paramOrder:void 0,paramsAsHash:!1,nodeParameter:"node",directFn:void 0,load:function(node,callback,scope){if(this.clearOnLoad)for(;node.firstChild;)node.removeChild(node.firstChild);this.doPreload(node)?this.runCallback(callback,scope||node,[node]):(this.directFn||this.dataUrl||this.url)&&this.requestData(node,callback,scope||node)},doPreload:function(node){if(node.attributes.children){if(node.childNodes.length<1){var cs=node.attributes.children;node.beginUpdate();for(var i=0,len=cs.length;len>i;i++){var cn=node.appendChild(this.createNode(cs[i]));this.preloadChildren&&this.doPreload(cn)}node.endUpdate();
}return!0}return!1},getParams:function(node){var bp=Ext.apply({},this.baseParams),np=this.nodeParameter,po=this.paramOrder;if(np&&(bp[np]=node.id),this.directFn){var buf=[node.id];if(po){np&&po.indexOf(np)>-1&&(buf=[]);for(var i=0,len=po.length;len>i;i++)buf.push(bp[po[i]])}else this.paramsAsHash&&(buf=[bp]);return buf}return bp},requestData:function(node,callback,scope){if(this.fireEvent("beforeload",this,node,callback)!==!1)if(this.directFn){var args=this.getParams(node);args.push(this.processDirectResponse.createDelegate(this,[{callback:callback,node:node,scope:scope}],!0)),this.directFn.apply(window,args)}else this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:callback,node:node,scope:scope},params:this.getParams(node)});else this.runCallback(callback,scope||node,[])},processDirectResponse:function(result,response,args){response.status?this.handleResponse({responseData:Ext.isArray(result)?result:null,responseText:result,argument:args}):this.handleFailure({argument:args})},runCallback:function(cb,scope,args){Ext.isFunction(cb)&&cb.apply(scope,args)},isLoading:function(){return!!this.transId},abort:function(){this.isLoading()&&Ext.Ajax.abort(this.transId)},createNode:function(attr){return this.baseAttrs&&Ext.applyIf(attr,this.baseAttrs),this.applyLoader===!1||attr.loader||(attr.loader=this),Ext.isString(attr.uiProvider)&&(attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)),attr.nodeType?new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr):attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)},processResponse:function(response,node,callback,scope){var json=response.responseText;try{var o=response.responseData||Ext.decode(json);node.beginUpdate();for(var i=0,len=o.length;len>i;i++){var n=this.createNode(o[i]);n&&node.appendChild(n)}node.endUpdate(),this.runCallback(callback,scope||node,[node])}catch(e){this.handleFailure(response)}},handleResponse:function(response){this.transId=!1;var a=response.argument;this.processResponse(response,a.node,a.callback,a.scope),this.fireEvent("load",this,a.node,response)},handleFailure:function(response){this.transId=!1;var a=response.argument;this.fireEvent("loadexception",this,a.node,response),this.runCallback(a.callback,a.scope||a.node,[a.node])},destroy:function(){this.abort(),this.purgeListeners()}}),Ext.tree.TreeFilter=function(tree,config){this.tree=tree,this.filtered={},Ext.apply(this,config)},Ext.tree.TreeFilter.prototype={clearBlank:!1,reverse:!1,autoClear:!1,remove:!1,filter:function(value,attr,startNode){attr=attr||"text";var f;if("string"==typeof value){var vlen=value.length;if(0==vlen&&this.clearBlank)return void this.clear();value=value.toLowerCase(),f=function(n){return n.attributes[attr].substr(0,vlen).toLowerCase()==value}}else{if(!value.exec)throw"Illegal filter type, must be string or regex";f=function(n){return value.test(n.attributes[attr])}}this.filterBy(f,null,startNode)},filterBy:function(fn,scope,startNode){startNode=startNode||this.tree.root,this.autoClear&&this.clear();var af=this.filtered,rv=this.reverse,f=function(n){if(n==startNode)return!0;if(af[n.id])return!1;var m=fn.call(scope||n,n);return!m||rv?(af[n.id]=n,n.ui.hide(),!1):!0};if(startNode.cascade(f),this.remove)for(var id in af)if("function"!=typeof id){var n=af[id];n&&n.parentNode&&n.parentNode.removeChild(n)}},clear:function(){var af=(this.tree,this.filtered);for(var id in af)if("function"!=typeof id){var n=af[id];n&&n.ui.show()}this.filtered={}}},Ext.tree.TreeSorter=Ext.extend(Object,{constructor:function(tree,config){Ext.apply(this,config),tree.on({scope:this,beforechildrenrendered:this.doSort,append:this.updateSort,insert:this.updateSort,textchange:this.updateSortParent});var desc=this.dir&&"desc"==this.dir.toLowerCase(),prop=this.property||"text",sortType=this.sortType,folderSort=this.folderSort,caseSensitive=this.caseSensitive===!0,leafAttr=this.leafAttr||"leaf";Ext.isString(sortType)&&(sortType=Ext.data.SortTypes[sortType]),this.sortFn=function(n1,n2){var attr1=n1.attributes,attr2=n2.attributes;if(folderSort){if(attr1[leafAttr]&&!attr2[leafAttr])return 1;if(!attr1[leafAttr]&&attr2[leafAttr])return-1}var prop1=attr1[prop],prop2=attr2[prop],v1=sortType?sortType(prop1,n1):caseSensitive?prop1:prop1.toUpperCase(),v2=sortType?sortType(prop2,n2):caseSensitive?prop2:prop2.toUpperCase();return v2>v1?desc?1:-1:v1>v2?desc?-1:1:0}},doSort:function(node){node.sort(this.sortFn)},updateSort:function(tree,node){node.childrenRendered&&this.doSort.defer(1,this,[node])},updateSortParent:function(node){var p=node.parentNode;p&&p.childrenRendered&&this.doSort.defer(1,this,[p])}}),Ext.dd.DropZone&&(Ext.tree.TreeDropZone=function(tree,config){this.allowParentInsert=config.allowParentInsert||!1,this.allowContainerDrop=config.allowContainerDrop||!1,this.appendOnly=config.appendOnly||!1,Ext.tree.TreeDropZone.superclass.constructor.call(this,tree.getTreeEl(),config),this.tree=tree,this.dragOverData={},this.lastInsertClass="x-tree-no-status"},Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1e3,expandNode:function(node){node.hasChildNodes()&&!node.isExpanded()&&node.expand(!1,null,this.triggerCacheRefresh.createDelegate(this))},queueExpand:function(node){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[node])},cancelExpand:function(){this.expandProcId&&(clearTimeout(this.expandProcId),this.expandProcId=!1)},isValidDropPoint:function(n,pt,dd,e,data){if(!n||!data)return!1;var targetNode=n.node,dropNode=data.node;if(!(targetNode&&targetNode.isTarget&&pt))return!1;if("append"==pt&&targetNode.allowChildren===!1)return!1;if(("above"==pt||"below"==pt)&&targetNode.parentNode&&targetNode.parentNode.allowChildren===!1)return!1;if(dropNode&&(targetNode==dropNode||dropNode.contains(targetNode)))return!1;var overEvent=this.dragOverData;overEvent.tree=this.tree,overEvent.target=targetNode,overEvent.data=data,overEvent.point=pt,overEvent.source=dd,overEvent.rawEvent=e,overEvent.dropNode=dropNode,overEvent.cancel=!1;var result=this.tree.fireEvent("nodedragover",overEvent);return overEvent.cancel===!1&&result!==!1},getDropPoint:function(e,n,dd){var tn=n.node;if(tn.isRoot)return tn.allowChildren!==!1?"append":!1;var dragEl=n.ddel,t=Ext.lib.Dom.getY(dragEl),b=t+dragEl.offsetHeight,y=Ext.lib.Event.getPageY(e),noAppend=tn.allowChildren===!1||tn.isLeaf();if(this.appendOnly||tn.parentNode.allowChildren===!1)return noAppend?!1:"append";var noBelow=!1;this.allowParentInsert||(noBelow=tn.hasChildNodes()&&tn.isExpanded());var q=(b-t)/(noAppend?2:3);return y>=t&&t+q>y?"above":!noBelow&&(noAppend||y>=b-q&&b>=y)?"below":"append"},onNodeEnter:function(n,dd,e,data){this.cancelExpand()},onContainerOver:function(dd,e,data){return this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",dd,e,data)?this.dropAllowed:this.dropNotAllowed},onNodeOver:function(n,dd,e,data){var pt=this.getDropPoint(e,n,dd),node=n.node;this.expandProcId||"append"!=pt||!node.hasChildNodes()||n.node.isExpanded()?"append"!=pt&&this.cancelExpand():this.queueExpand(node);var returnCls=this.dropNotAllowed;if(this.isValidDropPoint(n,pt,dd,e,data)&&pt){var cls,el=n.ddel;"above"==pt?(returnCls=n.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between",cls="x-tree-drag-insert-above"):"below"==pt?(returnCls=n.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between",cls="x-tree-drag-insert-below"):(returnCls="x-tree-drop-ok-append",cls="x-tree-drag-append"),this.lastInsertClass!=cls&&(Ext.fly(el).replaceClass(this.lastInsertClass,cls),this.lastInsertClass=cls)}return returnCls},onNodeOut:function(n,dd,e,data){this.cancelExpand(),this.removeDropIndicators(n)},onNodeDrop:function(n,dd,e,data){var point=this.getDropPoint(e,n,dd),targetNode=n.node;if(targetNode.ui.startDrop(),!this.isValidDropPoint(n,point,dd,e,data))return targetNode.ui.endDrop(),!1;var dropNode=data.node||(dd.getTreeNode?dd.getTreeNode(data,targetNode,point,e):null);return this.processDrop(targetNode,data,point,dd,e,dropNode)},onContainerDrop:function(dd,e,data){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",dd,e,data)){var targetNode=this.tree.getRootNode();targetNode.ui.startDrop();var dropNode=data.node||(dd.getTreeNode?dd.getTreeNode(data,targetNode,"append",e):null);return this.processDrop(targetNode,data,"append",dd,e,dropNode)}return!1},processDrop:function(target,data,point,dd,e,dropNode){var dropEvent={tree:this.tree,target:target,data:data,point:point,source:dd,rawEvent:e,dropNode:dropNode,cancel:!dropNode,dropStatus:!1},retval=this.tree.fireEvent("beforenodedrop",dropEvent);return retval!==!1&&dropEvent.cancel!==!0&&dropEvent.dropNode?(target=dropEvent.target,"append"!=point||target.isExpanded()?this.completeDrop(dropEvent):target.expand(!1,null,function(){this.completeDrop(dropEvent)}.createDelegate(this)),!0):(target.ui.endDrop(),dropEvent.dropStatus)},completeDrop:function(de){var ns=de.dropNode,p=de.point,t=de.target;Ext.isArray(ns)||(ns=[ns]);for(var n,i=0,len=ns.length;len>i;i++)n=ns[i],"above"==p?t.parentNode.insertBefore(n,t):"below"==p?t.parentNode.insertBefore(n,t.nextSibling):t.appendChild(n);n.ui.focus(),Ext.enableFx&&this.tree.hlDrop&&n.ui.highlight(),t.ui.endDrop(),this.tree.fireEvent("nodedrop",de)},afterNodeMoved:function(dd,data,e,targetNode,dropNode){Ext.enableFx&&this.tree.hlDrop&&(dropNode.ui.focus(),dropNode.ui.highlight()),this.tree.fireEvent("nodedrop",this.tree,targetNode,data,dd,e)},getTree:function(){return this.tree},removeDropIndicators:function(n){if(n&&n.ddel){var el=n.ddel;Ext.fly(el).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]),this.lastInsertClass="_noclass"}},beforeDragDrop:function(target,e,id){return this.cancelExpand(),!0},afterRepair:function(data){data&&Ext.enableFx&&data.node.ui.highlight(),this.hideProxy()}})),Ext.dd.DragZone&&(Ext.tree.TreeDragZone=function(tree,config){Ext.tree.TreeDragZone.superclass.constructor.call(this,tree.innerCt,config),this.tree=tree},Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(data,e){var n=data.node;return n&&n.draggable&&!n.disabled},onInitDrag:function(e){var data=this.dragData;this.tree.getSelectionModel().select(data.node),this.tree.eventModel.disable(),this.proxy.update(""),data.node.ui.appendDDGhost(this.proxy.ghost.dom),this.tree.fireEvent("startdrag",this.tree,data.node,e)},getRepairXY:function(e,data){return data.node.ui.getDDRepairXY()},onEndDrag:function(data,e){this.tree.eventModel.enable.defer(100,this.tree.eventModel),this.tree.fireEvent("enddrag",this.tree,data.node,e)},onValidDrop:function(dd,e,id){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,dd,e),this.hideProxy()},beforeInvalidDrop:function(e,id){var sm=this.tree.getSelectionModel();sm.clearSelections(),sm.select(this.dragData.node)},afterRepair:function(){Ext.enableFx&&this.tree.hlDrop&&Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9"),this.dragging=!1}})),Ext.tree.TreeEditor=function(tree,fc,config){fc=fc||{};var field=fc.events?fc:new Ext.form.TextField(fc);Ext.tree.TreeEditor.superclass.constructor.call(this,field,config),this.tree=tree,tree.rendered?this.initEditor(tree):tree.on("render",this.initEditor,this)},Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:!1,hideEl:!1,cls:"x-small-editor x-tree-editor",shim:!1,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(tree){tree.on({scope:this,beforeclick:this.beforeNodeClick,dblclick:this.onNodeDblClick}),this.on({scope:this,complete:this.updateNode,beforestartedit:this.fitToTree,specialkey:this.onSpecialKey}),this.on("startedit",this.bindScroll,this,{delay:10})},fitToTree:function(ed,el){var td=this.tree.getTreeEl().dom,nd=el.dom;td.scrollLeft>nd.offsetLeft&&(td.scrollLeft=nd.offsetLeft);var w=Math.min(this.maxWidth,(td.clientWidth>20?td.clientWidth:td.offsetWidth)-Math.max(0,nd.offsetLeft-td.scrollLeft)-5);this.setSize(w,"")},triggerEdit:function(node,defer){if(this.completeEdit(),node.attributes.editable!==!1){this.editNode=node,this.tree.autoScroll&&Ext.fly(node.ui.getEl()).scrollIntoView(this.tree.body);var value=node.text||"";return!Ext.isGecko&&Ext.isEmpty(node.text)&&node.setText("&#160;"),this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[node.ui.textNode,value]),!1}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(node,e){return clearTimeout(this.autoEditTimer),this.tree.getSelectionModel().isSelected(node)?(e.stopEvent(),this.triggerEdit(node)):void 0},onNodeDblClick:function(node,e){clearTimeout(this.autoEditTimer)},updateNode:function(ed,value){this.tree.getTreeEl().un("scroll",this.cancelEdit,this),this.editNode.setText(value)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this),this.editNode&&this.editNode.ui.focus.defer(50,this.editNode.ui)},onSpecialKey:function(field,e){var k=e.getKey();k==e.ESC?(e.stopEvent(),this.cancelEdit()):k!=e.ENTER||e.hasModifier()||(e.stopEvent(),this.completeEdit())},onDestroy:function(){clearTimeout(this.autoEditTimer),Ext.tree.TreeEditor.superclass.onDestroy.call(this);var tree=this.tree;tree.un("beforeclick",this.beforeNodeClick,this),tree.un("dblclick",this.onNodeDblClick,this)}});var swfobject=function(){function callDomLoadFunctions(){if(!isDomLoaded){try{var t=doc.getElementsByTagName("body")[0].appendChild(createElement("span"));t.parentNode.removeChild(t)}catch(e){return}isDomLoaded=!0;for(var dl=domLoadFnArr.length,i=0;dl>i;i++)domLoadFnArr[i]()}}function addDomLoadEvent(fn){isDomLoaded?fn():domLoadFnArr[domLoadFnArr.length]=fn}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF)win.addEventListener("load",fn,!1);else if(typeof doc.addEventListener!=UNDEF)doc.addEventListener("load",fn,!1);else if(typeof win.attachEvent!=UNDEF)addListener(win,"onload",fn);else if("function"==typeof win.onload){var fnOld=win.onload;win.onload=function(){fnOld(),fn()}}else win.onload=fn}function main(){matchVersions()}function matchVersions(){var rl=regObjArr.length;if(rl>0)for(var i=0;rl>i;i++){var id=regObjArr[i].id,cb=regObjArr[i].callbackFn,cbObj={success:!1,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj)if(!hasPlayerVersion(regObjArr[i].swfVersion)||ua.wk&&ua.wk<312)if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall,att.width=obj.getAttribute("width")||"0",att.height=obj.getAttribute("height")||"0",obj.getAttribute("class")&&(att.styleclass=obj.getAttribute("class")),obj.getAttribute("align")&&(att.align=obj.getAttribute("align"));for(var par={},p=obj.getElementsByTagName("param"),pl=p.length,j=0;pl>j;j++)"movie"!=p[j].getAttribute("name").toLowerCase()&&(par[p[j].getAttribute("name")]=p[j].getAttribute("value"));showExpressInstall(att,par,id,cb)}else displayAltContent(obj),cb&&cb(cbObj);else setVisibility(id,!0),cb&&(cbObj.success=!0,cbObj.ref=getObjectById(id),cb(cbObj))}else if(setVisibility(id,!0),cb){var o=getObjectById(id);o&&typeof o.SetVariable!=UNDEF&&(cbObj.success=!0,cbObj.ref=o),cb(cbObj)}}}function getObjectById(objectIdStr){var r=null,o=getElementById(objectIdStr);if(o&&"OBJECT"==o.nodeName)if(typeof o.SetVariable!=UNDEF)r=o;else{var n=o.getElementsByTagName(OBJECT)[0];n&&(r=n)}return r}function canExpressInstall(){return!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)&&!(ua.wk&&ua.wk<312)}function showExpressInstall(att,par,replaceElemIdStr,callbackFn){isExpressInstallActive=!0,storedCallbackFn=callbackFn||null,storedCallbackObj={success:!1,id:replaceElemIdStr};var obj=getElementById(replaceElemIdStr);if(obj){"OBJECT"==obj.nodeName?(storedAltContent=abstractAltContent(obj),storedAltContentId=null):(storedAltContent=obj,storedAltContentId=replaceElemIdStr),att.id=EXPRESS_INSTALL_ID,(typeof att.width==UNDEF||!/%$/.test(att.width)&&parseInt(att.width,10)<310)&&(att.width="310"),(typeof att.height==UNDEF||!/%$/.test(att.height)&&parseInt(att.height,10)<137)&&(att.height="137"),doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",fv="MMredirectURL="+win.location.toString().replace(/&/g,"%26")+"&MMplayerType="+pt+"&MMdoctitle="+doc.title;if(typeof par.flashvars!=UNDEF?par.flashvars+="&"+fv:par.flashvars=fv,ua.ie&&ua.win&&4!=obj.readyState){var newObj=createElement("div");replaceElemIdStr+="SWFObjectNew",newObj.setAttribute("id",replaceElemIdStr),obj.parentNode.insertBefore(newObj,obj),obj.style.display="none",function(){4==obj.readyState?obj.parentNode.removeChild(obj):setTimeout(arguments.callee,10)}()}createSWF(att,par,replaceElemIdStr)}}function displayAltContent(obj){if(ua.ie&&ua.win&&4!=obj.readyState){var el=createElement("div");obj.parentNode.insertBefore(el,obj),el.parentNode.replaceChild(abstractAltContent(obj),el),obj.style.display="none",function(){4==obj.readyState?obj.parentNode.removeChild(obj):setTimeout(arguments.callee,10)}()}else obj.parentNode.replaceChild(abstractAltContent(obj),obj)}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie)ac.innerHTML=obj.innerHTML;else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c)for(var cl=c.length,i=0;cl>i;i++)1==c[i].nodeType&&"PARAM"==c[i].nodeName||8==c[i].nodeType||ac.appendChild(c[i].cloneNode(!0))}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(ua.wk&&ua.wk<312)return r;if(el)if(typeof attObj.id==UNDEF&&(attObj.id=id),ua.ie&&ua.win){var att="";for(var i in attObj)attObj[i]!=Object.prototype[i]&&("data"==i.toLowerCase()?parObj.movie=attObj[i]:"styleclass"==i.toLowerCase()?att+=' class="'+attObj[i]+'"':"classid"!=i.toLowerCase()&&(att+=" "+i+'="'+attObj[i]+'"'));var par="";for(var j in parObj)parObj[j]!=Object.prototype[j]&&(par+='<param name="'+j+'" value="'+parObj[j]+'" />');el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>",objIdArr[objIdArr.length]=attObj.id,r=getElementById(attObj.id)}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj)attObj[m]!=Object.prototype[m]&&("styleclass"==m.toLowerCase()?o.setAttribute("class",attObj[m]):"classid"!=m.toLowerCase()&&o.setAttribute(m,attObj[m]));for(var n in parObj)parObj[n]!=Object.prototype[n]&&"movie"!=n.toLowerCase()&&createObjParam(o,n,parObj[n]);el.parentNode.replaceChild(o,el),r=o}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName),p.setAttribute("value",pValue),el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);obj&&"OBJECT"==obj.nodeName&&(ua.ie&&ua.win?(obj.style.display="none",function(){4==obj.readyState?removeObjectInIE(id):setTimeout(arguments.callee,10)}()):obj.parentNode.removeChild(obj))}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj)"function"==typeof obj[i]&&(obj[i]=null);obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn),listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");return v[0]=parseInt(v[0],10),v[1]=parseInt(v[1],10)||0,v[2]=parseInt(v[2],10)||0,pv[0]>v[0]||pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]?!0:!1}function createCSS(sel,decl,media,newStyle){if(!ua.ie||!ua.mac){var h=doc.getElementsByTagName("head")[0];if(h){var m=media&&"string"==typeof media?media:"screen";if(newStyle&&(dynamicStylesheet=null,dynamicStylesheetMedia=null),!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");s.setAttribute("type","text/css"),s.setAttribute("media",m),dynamicStylesheet=h.appendChild(s),ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0&&(dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1]),dynamicStylesheetMedia=m}ua.ie&&ua.win?dynamicStylesheet&&typeof dynamicStylesheet.addRule==OBJECT&&dynamicStylesheet.addRule(sel,decl):dynamicStylesheet&&typeof doc.createTextNode!=UNDEF&&dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}}}function setVisibility(id,isVisible){if(autoHideShow){var v=isVisible?"visible":"hidden";isDomLoaded&&getElementById(id)?getElementById(id).style.visibility=v:createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/,hasBadChars=null!=regex.exec(s);return hasBadChars&&typeof encodeURIComponent!=UNDEF?encodeURIComponent(s):s}var storedAltContent,storedAltContentId,storedCallbackFn,storedCallbackObj,dynamicStylesheet,dynamicStylesheetMedia,UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=!1,domLoadFnArr=[main],regObjArr=[],objIdArr=[],listenersArr=[],isDomLoaded=!1,isExpressInstallActive=!1,autoHideShow=!0,ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,ie=!1,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT)d=nav.plugins[SHOCKWAVE_FLASH].description,!d||typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin||(plugin=!0,ie=!1,d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10),playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10),playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof win.ActiveXObject!=UNDEF)try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);a&&(d=a.GetVariable("$version"),d&&(ie=!0,d=d.split(" ")[1].split(","),playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]))}catch(e){}return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}();(function(){ua.w3&&((typeof doc.readyState!=UNDEF&&"complete"==doc.readyState||typeof doc.readyState==UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body))&&callDomLoadFunctions(),isDomLoaded||(typeof doc.addEventListener!=UNDEF&&doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,!1),ua.ie&&ua.win&&(doc.attachEvent(ON_READY_STATE_CHANGE,function(){"complete"==doc.readyState&&(doc.detachEvent(ON_READY_STATE_CHANGE,arguments.callee),callDomLoadFunctions())}),win==top&&!function(){if(!isDomLoaded){try{doc.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}callDomLoadFunctions()}}()),ua.wk&&!function(){return isDomLoaded?void 0:/loaded|complete/.test(doc.readyState)?void callDomLoadFunctions():void setTimeout(arguments.callee,0)}(),addLoadEvent(callDomLoadFunctions)))})(),function(){ua.ie&&ua.win&&window.attachEvent("onunload",function(){for(var ll=listenersArr.length,i=0;ll>i;i++)listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2]);for(var il=objIdArr.length,j=0;il>j;j++)removeSWF(objIdArr[j]);for(var k in ua)ua[k]=null;ua=null;for(var l in swfobject)swfobject[l]=null;swfobject=null,window.detachEvent("onunload",arguments.callee)})}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&objectIdStr&&swfVersionStr){var regObj={};regObj.id=objectIdStr,regObj.swfVersion=swfVersionStr,regObj.expressInstall=xiSwfUrlStr,regObj.callbackFn=callbackFn,regObjArr[regObjArr.length]=regObj,setVisibility(objectIdStr,!1)}else callbackFn&&callbackFn({success:!1,id:objectIdStr})},getObjectById:function(objectIdStr){return ua.w3?getObjectById(objectIdStr):void 0},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var callbackObj={success:!1,id:replaceElemIdStr};ua.w3&&!(ua.wk&&ua.wk<312)&&swfUrlStr&&replaceElemIdStr&&widthStr&&heightStr&&swfVersionStr?(setVisibility(replaceElemIdStr,!1),addDomLoadEvent(function(){widthStr+="",heightStr+="";var att={};if(attObj&&typeof attObj===OBJECT)for(var i in attObj)att[i]=attObj[i];att.data=swfUrlStr,att.width=widthStr,att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT)for(var j in parObj)par[j]=parObj[j];if(flashvarsObj&&typeof flashvarsObj===OBJECT)for(var k in flashvarsObj)typeof par.flashvars!=UNDEF?par.flashvars+="&"+k+"="+flashvarsObj[k]:par.flashvars=k+"="+flashvarsObj[k];if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);att.id==replaceElemIdStr&&setVisibility(replaceElemIdStr,!0),callbackObj.success=!0,callbackObj.ref=obj}else{if(xiSwfUrlStr&&canExpressInstall())return att.data=xiSwfUrlStr,void showExpressInstall(att,par,replaceElemIdStr,callbackFn);setVisibility(replaceElemIdStr,!0)}callbackFn&&callbackFn(callbackObj)})):callbackFn&&callbackFn(callbackObj)},switchOffAutoHideShow:function(){autoHideShow=!1},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){return ua.w3?createSWF(attObj,parObj,replaceElemIdStr):void 0},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){ua.w3&&canExpressInstall()&&showExpressInstall(att,par,replaceElemIdStr,callbackFn)},removeSWF:function(objElemIdStr){ua.w3&&removeSWF(objElemIdStr)},createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){ua.w3&&createCSS(selStr,declStr,mediaStr,newStyleBoolean)},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){if(/\?/.test(q)&&(q=q.split("?")[1]),null==param)return urlEncodeIfNecessary(q);for(var pairs=q.split("&"),i=0;i<pairs.length;i++)if(pairs[i].substring(0,pairs[i].indexOf("="))==param)return urlEncodeIfNecessary(pairs[i].substring(pairs[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(isExpressInstallActive){var obj=getElementById(EXPRESS_INSTALL_ID);obj&&storedAltContent&&(obj.parentNode.replaceChild(storedAltContent,obj),storedAltContentId&&(setVisibility(storedAltContentId,!0),ua.ie&&ua.win&&(storedAltContent.style.display="block")),storedCallbackFn&&storedCallbackFn(storedCallbackObj)),isExpressInstallActive=!1}}}}();Ext.FlashComponent=Ext.extend(Ext.BoxComponent,{flashVersion:"9.0.115",backgroundColor:"#ffffff",wmode:"opaque",flashVars:void 0,flashParams:void 0,url:void 0,swfId:void 0,swfWidth:"100%",swfHeight:"100%",expressInstall:!1,initComponent:function(){Ext.FlashComponent.superclass.initComponent.call(this),this.addEvents("initialize")},onRender:function(){Ext.FlashComponent.superclass.onRender.apply(this,arguments);var params=Ext.apply({allowScriptAccess:"always",bgcolor:this.backgroundColor,wmode:this.wmode},this.flashParams),vars=Ext.apply({allowedDomain:document.location.hostname,YUISwfId:this.getId(),YUIBridgeCallback:"Ext.FlashEventProxy.onEvent"},this.flashVars);new swfobject.embedSWF(this.url,this.id,this.swfWidth,this.swfHeight,this.flashVersion,this.expressInstall?Ext.FlashComponent.EXPRESS_INSTALL_URL:void 0,vars,params),this.swf=Ext.getDom(this.id),this.el=Ext.get(this.swf)},getSwfId:function(){return this.swfId||(this.swfId="extswf"+ ++Ext.Component.AUTO_ID)},getId:function(){return this.id||(this.id="extflashcmp"+ ++Ext.Component.AUTO_ID)},onFlashEvent:function(e){switch(e.type){case"swfReady":return void this.initSwf();case"log":return}e.component=this,this.fireEvent(e.type.toLowerCase().replace(/event$/,""),e)},initSwf:function(){this.onSwfReady(!!this.isInitialized),this.isInitialized=!0,this.fireEvent("initialize",this)},beforeDestroy:function(){this.rendered&&swfobject.removeSWF(this.swf.id),Ext.FlashComponent.superclass.beforeDestroy.call(this)},onSwfReady:Ext.emptyFn}),Ext.FlashComponent.EXPRESS_INSTALL_URL="http://swfobject.googlecode.com/svn/trunk/swfobject/expressInstall.swf",Ext.reg("flash",Ext.FlashComponent),Ext.FlashEventProxy={onEvent:function(id,e){var fp=Ext.getCmp(id);fp?fp.onFlashEvent(e):arguments.callee.defer(10,this,[id,e])}},Ext.chart.Chart=Ext.extend(Ext.FlashComponent,{refreshBuffer:100,chartStyle:{padding:10,animationEnabled:!0,font:{name:"Tahoma",color:4473924,size:11},dataTip:{padding:5,border:{color:10075112,size:1},background:{color:14346230,alpha:.9},font:{name:"Tahoma",color:1393291,size:10,bold:!0}}},extraStyle:null,seriesStyles:null,disableCaching:Ext.isIE||Ext.isOpera,disableCacheParam:"_dc",initComponent:function(){Ext.chart.Chart.superclass.initComponent.call(this),this.url||(this.url=Ext.chart.Chart.CHART_URL),this.disableCaching&&(this.url=Ext.urlAppend(this.url,String.format("{0}={1}",this.disableCacheParam,(new Date).getTime()))),this.addEvents("itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh"),this.store=Ext.StoreMgr.lookup(this.store)},setStyle:function(name,value){this.swf.setStyle(name,Ext.encode(value))},setStyles:function(styles){this.swf.setStyles(Ext.encode(styles))},setSeriesStyles:function(styles){this.seriesStyles=styles;var s=[];Ext.each(styles,function(style){s.push(Ext.encode(style))}),this.swf.setSeriesStyles(s)},setCategoryNames:function(names){this.swf.setCategoryNames(names)},setLegendRenderer:function(fn,scope){var chart=this;scope=scope||chart,chart.removeFnProxy(chart.legendFnName),chart.legendFnName=chart.createFnProxy(function(name){return fn.call(scope,name)}),chart.swf.setLegendLabelFunction(chart.legendFnName)},setTipRenderer:function(fn,scope){var chart=this;scope=scope||chart,chart.removeFnProxy(chart.tipFnName),chart.tipFnName=chart.createFnProxy(function(item,index,series){var record=chart.store.getAt(index);return fn.call(scope,chart,record,index,series)}),chart.swf.setDataTipFunction(chart.tipFnName)},setSeries:function(series){this.series=series,this.refresh()},bindStore:function(store,initial){!initial&&this.store&&(store!==this.store&&this.store.autoDestroy?this.store.destroy():(this.store.un("datachanged",this.refresh,this),this.store.un("add",this.delayRefresh,this),this.store.un("remove",this.delayRefresh,this),this.store.un("update",this.delayRefresh,this),this.store.un("clear",this.refresh,this))),store&&(store=Ext.StoreMgr.lookup(store),store.on({scope:this,datachanged:this.refresh,add:this.delayRefresh,remove:this.delayRefresh,update:this.delayRefresh,clear:this.refresh})),this.store=store,store&&!initial&&this.refresh()},onSwfReady:function(isReset){Ext.chart.Chart.superclass.onSwfReady.call(this,isReset);var ref;this.swf.setType(this.type),this.chartStyle&&this.setStyles(Ext.apply({},this.extraStyle,this.chartStyle)),this.categoryNames&&this.setCategoryNames(this.categoryNames),this.tipRenderer&&(ref=this.getFunctionRef(this.tipRenderer),this.setTipRenderer(ref.fn,ref.scope)),this.legendRenderer&&(ref=this.getFunctionRef(this.legendRenderer),this.setLegendRenderer(ref.fn,ref.scope)),isReset||this.bindStore(this.store,!0),this.refresh.defer(10,this)},delayRefresh:function(){this.refreshTask||(this.refreshTask=new Ext.util.DelayedTask(this.refresh,this)),this.refreshTask.delay(this.refreshBuffer)},refresh:function(){if(this.fireEvent("beforerefresh",this)!==!1){for(var styleChanged=!1,data=[],rs=this.store.data.items,j=0,len=rs.length;len>j;j++)data[j]=rs[j].data;var dataProvider=[],seriesCount=0,currentSeries=null,i=0;if(this.series)for(seriesCount=this.series.length,i=0;seriesCount>i;i++){currentSeries=this.series[i];var clonedSeries={};
for(var prop in currentSeries)"style"==prop&&null!==currentSeries.style?(clonedSeries.style=Ext.encode(currentSeries.style),styleChanged=!0):clonedSeries[prop]=currentSeries[prop];dataProvider.push(clonedSeries)}if(seriesCount>0)for(i=0;seriesCount>i;i++)currentSeries=dataProvider[i],currentSeries.type||(currentSeries.type=this.type),currentSeries.dataProvider=data;else dataProvider.push({type:this.type,dataProvider:data});this.swf.setDataProvider(dataProvider),this.seriesStyles&&this.setSeriesStyles(this.seriesStyles),this.fireEvent("refresh",this)}},createFnProxy:function(fn){var fnName="extFnProxy"+ ++Ext.chart.Chart.PROXY_FN_ID;return Ext.chart.Chart.proxyFunction[fnName]=fn,"Ext.chart.Chart.proxyFunction."+fnName},removeFnProxy:function(fn){Ext.isEmpty(fn)||(fn=fn.replace("Ext.chart.Chart.proxyFunction.",""),delete Ext.chart.Chart.proxyFunction[fn])},getFunctionRef:function(val){return Ext.isFunction(val)?{fn:val,scope:this}:{fn:val.fn,scope:val.scope||this}},onDestroy:function(){this.refreshTask&&this.refreshTask.cancel&&this.refreshTask.cancel(),Ext.chart.Chart.superclass.onDestroy.call(this),this.bindStore(null),this.removeFnProxy(this.tipFnName),this.removeFnProxy(this.legendFnName)}}),Ext.reg("chart",Ext.chart.Chart),Ext.chart.Chart.PROXY_FN_ID=0,Ext.chart.Chart.proxyFunction={},Ext.chart.Chart.CHART_URL="http://yui.yahooapis.com/2.8.2/build/charts/assets/charts.swf",Ext.chart.PieChart=Ext.extend(Ext.chart.Chart,{type:"pie",onSwfReady:function(isReset){Ext.chart.PieChart.superclass.onSwfReady.call(this,isReset),this.setDataField(this.dataField),this.setCategoryField(this.categoryField)},setDataField:function(field){this.dataField=field,this.swf.setDataField(field)},setCategoryField:function(field){this.categoryField=field,this.swf.setCategoryField(field)}}),Ext.reg("piechart",Ext.chart.PieChart),Ext.chart.CartesianChart=Ext.extend(Ext.chart.Chart,{onSwfReady:function(isReset){Ext.chart.CartesianChart.superclass.onSwfReady.call(this,isReset),this.labelFn=[],this.xField&&this.setXField(this.xField),this.yField&&this.setYField(this.yField),this.xAxis&&this.setXAxis(this.xAxis),this.xAxes&&this.setXAxes(this.xAxes),this.yAxis&&this.setYAxis(this.yAxis),this.yAxes&&this.setYAxes(this.yAxes),Ext.isDefined(this.constrainViewport)&&this.swf.setConstrainViewport(this.constrainViewport)},setXField:function(value){this.xField=value,this.swf.setHorizontalField(value)},setYField:function(value){this.yField=value,this.swf.setVerticalField(value)},setXAxis:function(value){this.xAxis=this.createAxis("xAxis",value),this.swf.setHorizontalAxis(this.xAxis)},setXAxes:function(value){for(var axis,i=0;i<value.length;i++)axis=this.createAxis("xAxis"+i,value[i]),this.swf.setHorizontalAxis(axis)},setYAxis:function(value){this.yAxis=this.createAxis("yAxis",value),this.swf.setVerticalAxis(this.yAxis)},setYAxes:function(value){for(var axis,i=0;i<value.length;i++)axis=this.createAxis("yAxis"+i,value[i]),this.swf.setVerticalAxis(axis)},createAxis:function(axis,value){var ref,old,o=Ext.apply({},value);return this[axis]&&(old=this[axis].labelFunction,this.removeFnProxy(old),this.labelFn.remove(old)),o.labelRenderer&&(ref=this.getFunctionRef(o.labelRenderer),o.labelFunction=this.createFnProxy(function(v){return ref.fn.call(ref.scope,v)}),delete o.labelRenderer,this.labelFn.push(o.labelFunction)),axis.indexOf("xAxis")>-1&&"left"==o.position&&(o.position="bottom"),o},onDestroy:function(){Ext.chart.CartesianChart.superclass.onDestroy.call(this),Ext.each(this.labelFn,function(fn){this.removeFnProxy(fn)},this)}}),Ext.reg("cartesianchart",Ext.chart.CartesianChart),Ext.chart.LineChart=Ext.extend(Ext.chart.CartesianChart,{type:"line"}),Ext.reg("linechart",Ext.chart.LineChart),Ext.chart.ColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:"column"}),Ext.reg("columnchart",Ext.chart.ColumnChart),Ext.chart.StackedColumnChart=Ext.extend(Ext.chart.CartesianChart,{type:"stackcolumn"}),Ext.reg("stackedcolumnchart",Ext.chart.StackedColumnChart),Ext.chart.BarChart=Ext.extend(Ext.chart.CartesianChart,{type:"bar"}),Ext.reg("barchart",Ext.chart.BarChart),Ext.chart.StackedBarChart=Ext.extend(Ext.chart.CartesianChart,{type:"stackbar"}),Ext.reg("stackedbarchart",Ext.chart.StackedBarChart),Ext.chart.Axis=function(config){Ext.apply(this,config)},Ext.chart.Axis.prototype={type:null,orientation:"horizontal",reverse:!1,labelFunction:null,hideOverlappingLabels:!0,labelSpacing:2},Ext.chart.NumericAxis=Ext.extend(Ext.chart.Axis,{type:"numeric",minimum:NaN,maximum:NaN,majorUnit:NaN,minorUnit:NaN,snapToUnits:!0,alwaysShowZero:!0,scale:"linear",roundMajorUnit:!0,calculateByLabelSize:!0,position:"left",adjustMaximumByMajorUnit:!0,adjustMinimumByMajorUnit:!0}),Ext.chart.TimeAxis=Ext.extend(Ext.chart.Axis,{type:"time",minimum:null,maximum:null,majorUnit:NaN,majorTimeUnit:null,minorUnit:NaN,minorTimeUnit:null,snapToUnits:!0,stackingEnabled:!1,calculateByLabelSize:!0}),Ext.chart.CategoryAxis=Ext.extend(Ext.chart.Axis,{type:"category",categoryNames:null,calculateCategoryCount:!1}),Ext.chart.Series=function(config){Ext.apply(this,config)},Ext.chart.Series.prototype={type:null,displayName:null},Ext.chart.CartesianSeries=Ext.extend(Ext.chart.Series,{xField:null,yField:null,showInLegend:!0,axis:"primary"}),Ext.chart.ColumnSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"column"}),Ext.chart.LineSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"line"}),Ext.chart.BarSeries=Ext.extend(Ext.chart.CartesianSeries,{type:"bar"}),Ext.chart.PieSeries=Ext.extend(Ext.chart.Series,{type:"pie",dataField:null,categoryField:null}),Ext.menu.Menu=Ext.extend(Ext.Container,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:!1,ignoreParentClicks:!1,enableScrolling:!0,maxHeight:null,scrollIncrement:24,showSeparator:!0,defaultOffsets:[0,0],plain:!1,floating:!0,zIndex:15e3,hidden:!0,layout:"menu",hideMode:"offsets",scrollerHeight:8,autoLayout:!0,defaultType:"menuitem",bufferResize:!1,initComponent:function(){if(Ext.isArray(this.initialConfig)&&Ext.apply(this,{items:this.initialConfig}),this.addEvents("click","mouseover","mouseout","itemclick"),Ext.menu.MenuMgr.register(this),this.floating?Ext.EventManager.onWindowResize(this.hide,this):(this.initialConfig.hidden!==!1&&(this.hidden=!1),this.internalDefaults={hideOnClick:!1}),Ext.menu.Menu.superclass.initComponent.call(this),this.autoLayout){var fn=this.doLayout.createDelegate(this,[]);this.on({add:fn,remove:fn})}},getLayoutTarget:function(){return this.ul},onRender:function(ct,position){ct||(ct=Ext.getBody());var dh={id:this.getId(),cls:"x-menu "+(this.floating?"x-menu-floating x-layer ":"")+(this.cls||"")+(this.plain?" x-menu-plain":"")+(this.showSeparator?"":" x-menu-nosep"),style:this.style,cn:[{tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"},{tag:"ul",cls:"x-menu-list"}]};this.floating?this.el=new Ext.Layer({shadow:this.shadow,dh:dh,constrain:!1,parentEl:ct,zindex:this.zIndex}):this.el=ct.createChild(dh),Ext.menu.Menu.superclass.onRender.call(this,ct,position),this.keyNav||(this.keyNav=new Ext.menu.MenuNav(this)),this.focusEl=this.el.child("a.x-menu-focus"),this.ul=this.el.child("ul.x-menu-list"),this.mon(this.ul,{scope:this,click:this.onClick,mouseover:this.onMouseOver,mouseout:this.onMouseOut}),this.enableScrolling&&this.mon(this.el,{scope:this,delegate:".x-menu-scroller",click:this.onScroll,mouseover:this.deactivateActive})},findTargetItem:function(e){var t=e.getTarget(".x-menu-list-item",this.ul,!0);return t&&t.menuItemId?this.items.get(t.menuItemId):void 0},onClick:function(e){var t=this.findTargetItem(e);t&&(t.isFormField?this.setActiveItem(t):t instanceof Ext.menu.BaseItem&&(t.menu&&this.ignoreParentClicks?(t.expandMenu(),e.preventDefault()):t.onClick&&(t.onClick(e),this.fireEvent("click",this,t,e))))},setActiveItem:function(item,autoExpand){item!=this.activeItem?(this.deactivateActive(),(this.activeItem=item).isFormField?item.focus():item.activate(autoExpand)):autoExpand&&item.expandMenu()},deactivateActive:function(){var a=this.activeItem;a&&(a.isFormField?a.collapse&&a.collapse():a.deactivate(),delete this.activeItem)},tryActivate:function(start,step){for(var items=this.items,i=start,len=items.length;i>=0&&len>i;i+=step){var item=items.get(i);if(item.isVisible()&&!item.disabled&&(item.canActivate||item.isFormField))return this.setActiveItem(item,!1),item}return!1},onMouseOver:function(e){var t=this.findTargetItem(e);t&&t.canActivate&&!t.disabled&&this.setActiveItem(t,!0),this.over=!0,this.fireEvent("mouseover",this,e,t)},onMouseOut:function(e){var t=this.findTargetItem(e);t&&t==this.activeItem&&t.shouldDeactivate&&t.shouldDeactivate(e)&&(this.activeItem.deactivate(),delete this.activeItem),this.over=!1,this.fireEvent("mouseout",this,e,t)},onScroll:function(e,t){e&&e.stopEvent();var ul=this.ul.dom,top=Ext.fly(t).is(".x-menu-scroller-top");ul.scrollTop+=this.scrollIncrement*(top?-1:1),(top?ul.scrollTop<=0:ul.scrollTop+this.activeMax>=ul.scrollHeight)&&this.onScrollerOut(null,t)},onScrollerIn:function(e,t){var ul=this.ul.dom,top=Ext.fly(t).is(".x-menu-scroller-top");(top?ul.scrollTop>0:ul.scrollTop+this.activeMax<ul.scrollHeight)&&Ext.fly(t).addClass(["x-menu-item-active","x-menu-scroller-active"])},onScrollerOut:function(e,t){Ext.fly(t).removeClass(["x-menu-item-active","x-menu-scroller-active"])},show:function(el,pos,parentMenu){this.floating?(this.parentMenu=parentMenu,this.el||(this.render(),this.doLayout(!1,!0)),this.showAt(this.el.getAlignToXY(el,pos||this.defaultAlign,this.defaultOffsets),parentMenu)):Ext.menu.Menu.superclass.show.call(this)},showAt:function(xy,parentMenu){this.fireEvent("beforeshow",this)!==!1&&(this.parentMenu=parentMenu,this.el||this.render(),this.enableScrolling?(this.el.setXY(xy),xy[1]=this.constrainScroll(xy[1]),xy=[this.el.adjustForConstraints(xy)[0],xy[1]]):xy=this.el.adjustForConstraints(xy),this.el.setXY(xy),this.el.show(),Ext.menu.Menu.superclass.onShow.call(this),Ext.isIE9m&&(this.fireEvent("autosize",this),Ext.isIE8||this.el.repaint()),this.hidden=!1,this.focus(),this.fireEvent("show",this))},constrainScroll:function(y){var max,normalY,parentEl,scrollTop,viewHeight,full=this.ul.setHeight("auto").getHeight(),returnY=y;return this.floating?(parentEl=Ext.fly(this.el.dom.parentNode),scrollTop=parentEl.getScroll().top,viewHeight=parentEl.getViewSize().height,normalY=y-scrollTop,max=this.maxHeight?this.maxHeight:viewHeight-normalY,full>viewHeight?(max=viewHeight,returnY=y-normalY):full>max&&(returnY=y-(full-max),max=full)):max=this.getHeight(),this.maxHeight&&(max=Math.min(this.maxHeight,max)),full>max&&max>0?(this.activeMax=max-2*this.scrollerHeight-this.el.getFrameWidth("tb")-Ext.num(this.el.shadowOffset,0),this.ul.setHeight(this.activeMax),this.createScrollers(),this.el.select(".x-menu-scroller").setDisplayed("")):(this.ul.setHeight(full),this.el.select(".x-menu-scroller").setDisplayed("none")),this.ul.dom.scrollTop=0,returnY},createScrollers:function(){this.scroller||(this.scroller={pos:0,top:this.el.insertFirst({tag:"div",cls:"x-menu-scroller x-menu-scroller-top",html:"&#160;"}),bottom:this.el.createChild({tag:"div",cls:"x-menu-scroller x-menu-scroller-bottom",html:"&#160;"})},this.scroller.top.hover(this.onScrollerIn,this.onScrollerOut,this),this.scroller.topRepeater=new Ext.util.ClickRepeater(this.scroller.top,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.top],!1)}}),this.scroller.bottom.hover(this.onScrollerIn,this.onScrollerOut,this),this.scroller.bottomRepeater=new Ext.util.ClickRepeater(this.scroller.bottom,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.bottom],!1)}}))},onLayout:function(){this.isVisible()&&(this.enableScrolling&&this.constrainScroll(this.el.getTop()),this.floating&&this.el.sync())},focus:function(){this.hidden||this.doFocus.defer(50,this)},doFocus:function(){this.hidden||this.focusEl.focus()},hide:function(deep){this.isDestroyed||(this.deepHide=deep,Ext.menu.Menu.superclass.hide.call(this),delete this.deepHide)},onHide:function(){Ext.menu.Menu.superclass.onHide.call(this),this.deactivateActive(),this.el&&this.floating&&this.el.hide();var pm=this.parentMenu;this.deepHide===!0&&pm&&(pm.floating?pm.hide(!0):pm.deactivateActive())},lookupComponent:function(c){return Ext.isString(c)?(c="separator"==c||"-"==c?new Ext.menu.Separator:new Ext.menu.TextItem(c),this.applyDefaults(c)):Ext.isObject(c)?c=this.getMenuItem(c):(c.tagName||c.el)&&(c=new Ext.BoxComponent({el:c})),c},applyDefaults:function(c){if(!Ext.isString(c)){c=Ext.menu.Menu.superclass.applyDefaults.call(this,c);var d=this.internalDefaults;d&&(c.events?(Ext.applyIf(c.initialConfig,d),Ext.apply(c,d)):Ext.applyIf(c,d))}return c},getMenuItem:function(config){return config.ownerCt=this,config.isXType?config:!config.xtype&&Ext.isBoolean(config.checked)?new Ext.menu.CheckItem(config):Ext.create(config,this.defaultType)},addSeparator:function(){return this.add(new Ext.menu.Separator)},addElement:function(el){return this.add(new Ext.menu.BaseItem({el:el}))},addItem:function(item){return this.add(item)},addMenuItem:function(config){return this.add(this.getMenuItem(config))},addText:function(text){return this.add(new Ext.menu.TextItem(text))},onDestroy:function(){Ext.EventManager.removeResizeListener(this.hide,this);var pm=this.parentMenu;pm&&pm.activeChild==this&&delete pm.activeChild,delete this.parentMenu,Ext.menu.Menu.superclass.onDestroy.call(this),Ext.menu.MenuMgr.unregister(this),this.keyNav&&this.keyNav.disable();var s=this.scroller;s&&Ext.destroy(s.topRepeater,s.bottomRepeater,s.top,s.bottom),Ext.destroy(this.el,this.focusEl,this.ul)}}),Ext.reg("menu",Ext.menu.Menu),Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function up(e,m){m.tryActivate(m.items.indexOf(m.activeItem)-1,-1)||m.tryActivate(m.items.length-1,-1)}function down(e,m){m.tryActivate(m.items.indexOf(m.activeItem)+1,1)||m.tryActivate(0,1)}return{constructor:function(menu){Ext.menu.MenuNav.superclass.constructor.call(this,menu.el),this.scope=this.menu=menu},doRelay:function(e,h){var k=e.getKey();return this.menu.activeItem&&this.menu.activeItem.isFormField&&k!=e.TAB?!1:!this.menu.activeItem&&e.isNavKeyPress()&&k!=e.SPACE&&k!=e.RETURN?(this.menu.tryActivate(0,1),!1):h.call(this.scope||this,e,this.menu)},tab:function(e,m){e.stopEvent(),e.shiftKey?up(e,m):down(e,m)},up:up,down:down,right:function(e,m){m.activeItem&&m.activeItem.expandMenu(!0)},left:function(e,m){m.hide(),m.parentMenu&&m.parentMenu.activeItem&&m.parentMenu.activeItem.activate()},enter:function(e,m){return m.activeItem?(e.stopPropagation(),m.activeItem.onClick(e),m.fireEvent("click",this,m.activeItem),!0):void 0}}}()),Ext.menu.MenuMgr=function(){function init(){menus={},active=new Ext.util.MixedCollection,map=Ext.getDoc().addKeyListener(27,hideAll),map.disable()}function hideAll(){if(active&&active.length>0){var c=active.clone();return c.each(function(m){m.hide()}),!0}return!1}function onHide(m){active.remove(m),active.length<1&&(map.disable(),Ext.getDoc().un("mousedown",onMouseDown),attached=!1)}function onShow(m){var last=active.last();lastShow=new Date,active.add(m),attached||(map.enable(),Ext.getDoc().on("mousedown",onMouseDown),attached=!0),m.parentMenu?(m.getEl().setZIndex(parseInt(m.parentMenu.getEl().getStyle("z-index"),10)+3),m.parentMenu.activeChild=m):last&&!last.isDestroyed&&last.isVisible()&&m.getEl().setZIndex(parseInt(last.getEl().getStyle("z-index"),10)+3)}function onBeforeHide(m){m.activeChild&&m.activeChild.hide(),m.autoHideTimer&&(clearTimeout(m.autoHideTimer),delete m.autoHideTimer)}function onBeforeShow(m){var pm=m.parentMenu;pm||m.allowOtherMenus?pm&&pm.activeChild&&pm.activeChild.hide():hideAll()}function onMouseDown(e){lastShow.getElapsed()>50&&active.length>0&&!e.getTarget(".x-menu")&&hideAll()}var menus,active,map,groups={},attached=!1,lastShow=new Date;return{hideAll:function(){return hideAll()},register:function(menu){menus||init(),menus[menu.id]=menu,menu.on({beforehide:onBeforeHide,hide:onHide,beforeshow:onBeforeShow,show:onShow})},get:function(menu){return"string"==typeof menu?menus?menus[menu]:null:menu.events?menu:"number"==typeof menu.length?new Ext.menu.Menu({items:menu}):Ext.create(menu,"menu")},unregister:function(menu){delete menus[menu.id],menu.un("beforehide",onBeforeHide),menu.un("hide",onHide),menu.un("beforeshow",onBeforeShow),menu.un("show",onShow)},registerCheckable:function(menuItem){var g=menuItem.group;g&&(groups[g]||(groups[g]=[]),groups[g].push(menuItem))},unregisterCheckable:function(menuItem){var g=menuItem.group;g&&groups[g].remove(menuItem)},onCheckChange:function(item,state){if(item.group&&state)for(var current,group=groups[item.group],i=0,len=group.length;len>i;i++)current=group[i],current!=item&&current.setChecked(!1)},getCheckedItem:function(groupId){var g=groups[groupId];if(g)for(var i=0,l=g.length;l>i;i++)if(g[i].checked)return g[i];return null},setCheckedItem:function(groupId,itemId){var g=groups[groupId];if(g)for(var i=0,l=g.length;l>i;i++)g[i].id==itemId&&g[i].setChecked(!0);return null}}}(),Ext.menu.BaseItem=Ext.extend(Ext.Component,{canActivate:!1,activeClass:"x-menu-item-active",hideOnClick:!0,clickHideDelay:1,ctype:"Ext.menu.BaseItem",actionMode:"container",initComponent:function(){Ext.menu.BaseItem.superclass.initComponent.call(this),this.addEvents("click","activate","deactivate"),this.handler&&this.on("click",this.handler,this.scope)},onRender:function(container,position){Ext.menu.BaseItem.superclass.onRender.apply(this,arguments),this.ownerCt&&this.ownerCt instanceof Ext.menu.Menu?this.parentMenu=this.ownerCt:(this.container.addClass("x-menu-list-item"),this.mon(this.el,{scope:this,click:this.onClick,mouseenter:this.activate,mouseleave:this.deactivate}))},setHandler:function(handler,scope){this.handler&&this.un("click",this.handler,this.scope),this.on("click",this.handler=handler,this.scope=scope)},onClick:function(e){!this.disabled&&this.fireEvent("click",this,e)!==!1&&this.parentMenu&&this.parentMenu.fireEvent("itemclick",this,e)!==!1?this.handleClick(e):e.stopEvent()},activate:function(){if(this.disabled)return!1;var li=this.container;return li.addClass(this.activeClass),this.region=li.getRegion().adjust(2,2,-2,-2),this.fireEvent("activate",this),!0},deactivate:function(){this.container.removeClass(this.activeClass),this.fireEvent("deactivate",this)},shouldDeactivate:function(e){return!this.region||!this.region.contains(e.getPoint())},handleClick:function(e){var pm=this.parentMenu;this.hideOnClick&&(pm.floating?this.clickHideDelayTimer=pm.hide.defer(this.clickHideDelay,pm,[!0]):pm.deactivateActive())},beforeDestroy:function(){clearTimeout(this.clickHideDelayTimer),Ext.menu.BaseItem.superclass.beforeDestroy.call(this)},expandMenu:Ext.emptyFn,hideMenu:Ext.emptyFn}),Ext.reg("menubaseitem",Ext.menu.BaseItem),Ext.menu.TextItem=Ext.extend(Ext.menu.BaseItem,{hideOnClick:!1,itemCls:"x-menu-text",constructor:function(config){"string"==typeof config&&(config={text:config}),Ext.menu.TextItem.superclass.constructor.call(this,config)},onRender:function(){var s=document.createElement("span");s.className=this.itemCls,s.innerHTML=this.text,this.el=s,Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}}),Ext.reg("menutextitem",Ext.menu.TextItem),Ext.menu.Separator=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:!1,activeClass:"",onRender:function(li){var s=document.createElement("span");s.className=this.itemCls,s.innerHTML="&#160;",this.el=s,li.addClass("x-menu-sep-li"),Ext.menu.Separator.superclass.onRender.apply(this,arguments)}}),Ext.reg("menuseparator",Ext.menu.Separator),Ext.menu.Item=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:!0,showDelay:200,altText:"",hideDelay:200,ctype:"Ext.menu.Item",initComponent:function(){Ext.menu.Item.superclass.initComponent.call(this),this.menu&&(Ext.isArray(this.menu)&&(this.menu={items:this.menu}),Ext.isObject(this.menu)&&(this.menu.ownerCt=this),this.menu=Ext.menu.MenuMgr.get(this.menu),this.menu.ownerCt=void 0)},onRender:function(container,position){this.itemTpl||(this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id="{id}" class="{cls} x-unselectable" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"</tpl>",">",'<img alt="{altText}" src="{icon}" class="x-menu-item-icon {iconCls}"/>','<span class="x-menu-item-text">{text}</span>',"</a>"));var a=this.getTemplateArgs();this.el=position?this.itemTpl.insertBefore(position,a,!0):this.itemTpl.append(container,a,!0),this.iconEl=this.el.child("img.x-menu-item-icon"),this.textEl=this.el.child(".x-menu-item-text"),this.href||this.mon(this.el,"click",Ext.emptyFn,null,{preventDefault:!0}),Ext.menu.Item.superclass.onRender.call(this,container,position)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:""),href:this.href||"#",hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||"",text:this.itemText||this.text||"&#160;",altText:this.altText||""}},setText:function(text){this.text=text||"&#160;",this.rendered&&(this.textEl.update(this.text),this.parentMenu.layout.doAutoSize())},setIconClass:function(cls){var oldCls=this.iconCls;this.iconCls=cls,this.rendered&&this.iconEl.replaceClass(oldCls,this.iconCls)},beforeDestroy:function(){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.menu&&(delete this.menu.ownerCt,this.menu.destroy()),Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(e){this.href||e.stopEvent(),Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(autoExpand){return Ext.menu.Item.superclass.activate.apply(this,arguments)&&(this.focus(),autoExpand&&this.expandMenu()),!0},shouldDeactivate:function(e){return Ext.menu.Item.superclass.shouldDeactivate.call(this,e)?this.menu&&this.menu.isVisible()?!this.menu.getEl().getRegion().contains(e.getPoint()):!0:!1},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments),this.hideMenu()},expandMenu:function(autoActivate){!this.disabled&&this.menu&&(clearTimeout(this.hideTimer),delete this.hideTimer,this.menu.isVisible()||this.showTimer?this.menu.isVisible()&&autoActivate&&this.menu.tryActivate(0,1):this.showTimer=this.deferExpand.defer(this.showDelay,this,[autoActivate]))},deferExpand:function(autoActivate){delete this.showTimer,this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu),autoActivate&&this.menu.tryActivate(0,1)},hideMenu:function(){clearTimeout(this.showTimer),delete this.showTimer,!this.hideTimer&&this.menu&&this.menu.isVisible()&&(this.hideTimer=this.deferHide.defer(this.hideDelay,this))},deferHide:function(){delete this.hideTimer,this.menu.over?this.parentMenu.setActiveItem(this,!1):this.menu.hide()}}),Ext.reg("menuitem",Ext.menu.Item),Ext.menu.CheckItem=Ext.extend(Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:!1,ctype:"Ext.menu.CheckItem",initComponent:function(){Ext.menu.CheckItem.superclass.initComponent.call(this),this.addEvents("beforecheckchange","checkchange"),this.checkHandler&&this.on("checkchange",this.checkHandler,this.scope),Ext.menu.MenuMgr.registerCheckable(this)},onRender:function(c){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments),this.group&&this.el.addClass(this.groupClass),this.checked&&(this.checked=!1,this.setChecked(!0,!0))},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this),Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(state,suppressEvent){var suppress=suppressEvent===!0;this.checked==state||!suppress&&this.fireEvent("beforecheckchange",this,state)===!1||(Ext.menu.MenuMgr.onCheckChange(this,state),this.container&&this.container[state?"addClass":"removeClass"]("x-menu-item-checked"),this.checked=state,suppress||this.fireEvent("checkchange",this,state))},handleClick:function(e){this.disabled||this.checked&&this.group||this.setChecked(!this.checked),Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}}),Ext.reg("menucheckitem",Ext.menu.CheckItem),Ext.menu.DateMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:!1,hideOnClick:!0,pickerId:null,cls:"x-date-menu",initComponent:function(){this.on("beforeshow",this.onBeforeShow,this),(this.strict=Ext.isIE7&&Ext.isStrict)&&this.on("show",this.onShow,this,{single:!0,delay:20}),Ext.apply(this,{plain:!0,showSeparator:!1,items:this.picker=new Ext.DatePicker(Ext.applyIf({internalRender:this.strict||!Ext.isIE9m,ctCls:"x-menu-date-item",id:this.pickerId},this.initialConfig))}),this.picker.purgeListeners(),Ext.menu.DateMenu.superclass.initComponent.call(this),this.relayEvents(this.picker,["select"]),this.on("show",this.picker.focus,this.picker),this.on("select",this.menuHide,this),this.handler&&this.on("select",this.handler,this.scope||this)},menuHide:function(){this.hideOnClick&&this.hide(!0)},onBeforeShow:function(){this.picker&&this.picker.hideMonthPicker(!0)},onShow:function(){var el=this.picker.getEl();el.setWidth(el.getWidth())}}),Ext.reg("datemenu",Ext.menu.DateMenu),Ext.menu.ColorMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:!1,hideOnClick:!0,cls:"x-color-menu",paletteId:null,initComponent:function(){Ext.apply(this,{plain:!0,showSeparator:!1,items:this.palette=new Ext.ColorPalette(Ext.applyIf({id:this.paletteId},this.initialConfig))}),this.palette.purgeListeners(),Ext.menu.ColorMenu.superclass.initComponent.call(this),this.relayEvents(this.palette,["select"]),this.on("select",this.menuHide,this),this.handler&&this.on("select",this.handler,this.scope||this)},menuHide:function(){this.hideOnClick&&this.hide(!0)}}),Ext.reg("colormenu",Ext.menu.ColorMenu),Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:!0,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:!1,disabled:!1,submitValue:!0,isFormField:!0,msgDisplay:"",hasFocus:!1,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this),this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(ct,position){if(!this.el){var cfg=this.getAutoCreate();cfg.name||(cfg.name=this.name||this.id),this.inputType&&(cfg.type=this.inputType),this.autoEl=cfg}Ext.form.Field.superclass.onRender.call(this,ct,position),this.submitValue===!1&&this.el.dom.removeAttribute("name");var type=this.el.dom.type;type&&("password"==type&&(type="text"),this.el.addClass("x-form-"+type)),this.readOnly&&this.setReadOnly(!0),void 0!==this.tabIndex&&this.el.dom.setAttribute("tabIndex",this.tabIndex),this.el.addClass([this.fieldClass,this.cls])},getItemCt:function(){return this.itemCt},initValue:function(){void 0!==this.value?this.setValue(this.value):Ext.isEmpty(this.el.dom.value)||this.el.dom.value==this.emptyText||this.setValue(this.el.dom.value),this.originalValue=this.getValue()},isDirty:function(){return this.disabled||!this.rendered?!1:String(this.getValue())!==String(this.originalValue)},setReadOnly:function(readOnly){this.rendered&&(this.el.dom.readOnly=readOnly),this.readOnly=readOnly},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this),this.initEvents(),this.initValue()},fireKey:function(e){e.isSpecialKey()&&this.fireEvent("specialkey",this,e)},reset:function(){this.setValue(this.originalValue),this.clearInvalid()},initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this),this.mon(this.el,"focus",this.onFocus,this),this.mon(this.el,"blur",this.onBlur,this,this.inEditor?{buffer:10}:null)},preFocus:Ext.emptyFn,onFocus:function(){this.preFocus(),this.focusClass&&this.el.addClass(this.focusClass),this.hasFocus||(this.hasFocus=!0,this.startValue=this.getValue(),this.fireEvent("focus",this))},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur(),this.focusClass&&this.el.removeClass(this.focusClass),this.hasFocus=!1,this.validationEvent===!1||!this.validateOnBlur&&"blur"!=this.validationEvent||this.validate();var v=this.getValue();String(v)!==String(this.startValue)&&this.fireEvent("change",this,v,this.startValue),this.fireEvent("blur",this),this.postBlur()},postBlur:Ext.emptyFn,isValid:function(preventMark){if(this.disabled)return!0;var restore=this.preventMark;this.preventMark=preventMark===!0;var v=this.validateValue(this.processValue(this.getRawValue()),preventMark);return this.preventMark=restore,v},validate:function(){return this.disabled||this.validateValue(this.processValue(this.getRawValue()))?(this.clearInvalid(),!0):!1},processValue:function(value){return value},validateValue:function(value){var error=this.getErrors(value)[0];return void 0==error?!0:(this.markInvalid(error),!1)},getErrors:function(){return[]},getActiveError:function(){return this.activeError||""},markInvalid:function(msg){if(this.rendered&&!this.preventMark){msg=msg||this.invalidText;var mt=this.getMessageHandler();if(mt)mt.mark(this,msg);else if(this.msgTarget){this.el.addClass(this.invalidClass);var t=Ext.getDom(this.msgTarget);t&&(t.innerHTML=msg,t.style.display=this.msgDisplay)}}this.setActiveError(msg)},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.el.removeClass(this.invalidClass);var mt=this.getMessageHandler();if(mt)mt.clear(this);else if(this.msgTarget){this.el.removeClass(this.invalidClass);var t=Ext.getDom(this.msgTarget);t&&(t.innerHTML="",t.style.display="none")}}this.unsetActiveError()},setActiveError:function(msg,suppressEvent){this.activeError=msg,suppressEvent!==!0&&this.fireEvent("invalid",this,msg)},unsetActiveError:function(suppressEvent){delete this.activeError,suppressEvent!==!0&&this.fireEvent("valid",this)},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget]},getErrorCt:function(){return this.el.findParent(".x-form-element",5,!0)||this.el.findParent(".x-form-field-wrap",5,!0)},alignErrorEl:function(){this.errorEl.setWidth(this.getErrorCt().getWidth(!0)-20)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},getRawValue:function(){var v=this.rendered?this.el.getValue():Ext.value(this.value,"");return v===this.emptyText&&(v=""),v},getValue:function(){if(!this.rendered)return this.value;var v=this.el.getValue();return(v===this.emptyText||void 0===v)&&(v=""),v},setRawValue:function(v){return this.rendered?this.el.dom.value=Ext.isEmpty(v)?"":v:""},setValue:function(v){return this.value=v,this.rendered&&(this.el.dom.value=Ext.isEmpty(v)?"":v,this.validate()),this},append:function(v){this.setValue([this.getValue(),v].join(""))}}),Ext.form.MessageTargets={qtip:{mark:function(field,msg){field.el.addClass(field.invalidClass),field.el.dom.qtip=msg,field.el.dom.qclass="x-form-invalid-tip",Ext.QuickTips&&Ext.QuickTips.enable()},clear:function(field){field.el.removeClass(field.invalidClass),field.el.dom.qtip=""}},title:{mark:function(field,msg){field.el.addClass(field.invalidClass),field.el.dom.title=msg},clear:function(field){field.el.dom.title=""}},under:{mark:function(field,msg){if(field.el.addClass(field.invalidClass),!field.errorEl){var elp=field.getErrorCt();if(!elp)return void(field.el.dom.title=msg);field.errorEl=elp.createChild({cls:"x-form-invalid-msg"}),field.on("resize",field.alignErrorEl,field),field.on("destroy",function(){Ext.destroy(this.errorEl)},field)}field.alignErrorEl(),field.errorEl.update(msg),Ext.form.Field.msgFx[field.msgFx].show(field.errorEl,field)},clear:function(field){field.el.removeClass(field.invalidClass),field.errorEl?Ext.form.Field.msgFx[field.msgFx].hide(field.errorEl,field):field.el.dom.title=""}},side:{mark:function(field,msg){if(field.el.addClass(field.invalidClass),!field.errorIcon){var elp=field.getErrorCt();if(!elp)return void(field.el.dom.title=msg);field.errorIcon=elp.createChild({cls:"x-form-invalid-icon"}),field.ownerCt&&(field.ownerCt.on("afterlayout",field.alignErrorIcon,field),
field.ownerCt.on("expand",field.alignErrorIcon,field)),field.on("resize",field.alignErrorIcon,field),field.on("destroy",function(){Ext.destroy(this.errorIcon)},field)}field.alignErrorIcon(),field.errorIcon.dom.qtip=msg,field.errorIcon.dom.qclass="x-form-invalid-tip",field.errorIcon.show()},clear:function(field){field.el.removeClass(field.invalidClass),field.errorIcon?(field.errorIcon.dom.qtip="",field.errorIcon.hide()):field.el.dom.title=""}}},Ext.form.Field.msgFx={normal:{show:function(msgEl,f){msgEl.setDisplayed("block")},hide:function(msgEl,f){msgEl.setDisplayed(!1).update("")}},slide:{show:function(msgEl,f){msgEl.slideIn("t",{stopFx:!0})},hide:function(msgEl,f){msgEl.slideOut("t",{stopFx:!0,useDisplay:!0})}},slideRight:{show:function(msgEl,f){msgEl.fixDisplay(),msgEl.alignTo(f.el,"tl-tr"),msgEl.slideIn("l",{stopFx:!0})},hide:function(msgEl,f){msgEl.slideOut("l",{stopFx:!0,useDisplay:!0})}}},Ext.reg("field",Ext.form.Field),Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:!1,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:!1,allowBlank:!0,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:!1,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this),this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this),"keyup"==this.validationEvent?(this.validationTask=new Ext.util.DelayedTask(this.validate,this),this.mon(this.el,"keyup",this.filterValidation,this)):this.validationEvent!==!1&&"blur"!=this.validationEvent&&this.mon(this.el,this.validationEvent,this.validate,this,{buffer:this.validationDelay}),(this.selectOnFocus||this.emptyText)&&(this.mon(this.el,"mousedown",this.onMouseDown,this),this.emptyText&&this.applyEmptyText()),(this.maskRe||this.vtype&&this.disableKeyFilter!==!0&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))&&this.mon(this.el,"keypress",this.filterKeys,this),this.grow&&(this.mon(this.el,"keyup",this.onKeyUpBuffered,this,{buffer:50}),this.mon(this.el,"click",this.autoSize,this)),this.enableKeyEvents&&this.mon(this.el,{scope:this,keyup:this.onKeyUp,keydown:this.onKeyDown,keypress:this.onKeyPress})},onMouseDown:function(e){this.hasFocus||this.mon(this.el,"mouseup",Ext.emptyFn,this,{single:!0,preventDefault:!0})},processValue:function(value){if(this.stripCharsRe){var newValue=value.replace(this.stripCharsRe,"");if(newValue!==value)return this.setRawValue(newValue),newValue}return value},filterValidation:function(e){e.isNavKeyPress()||this.validationTask.delay(this.validationDelay)},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this),Ext.isIE&&(this.el.dom.unselectable="on")},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this),Ext.isIE&&(this.el.dom.unselectable="")},onKeyUpBuffered:function(e){this.doAutoSize(e)&&this.autoSize()},doAutoSize:function(e){return!e.isNavKeyPress()},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyDown:function(e){this.fireEvent("keydown",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},reset:function(){Ext.form.TextField.superclass.reset.call(this),this.applyEmptyText()},applyEmptyText:function(){this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus&&(this.setRawValue(this.emptyText),this.el.addClass(this.emptyClass))},preFocus:function(){var isEmpty,el=this.el;this.emptyText&&(el.dom.value==this.emptyText&&(this.setRawValue(""),isEmpty=!0),el.removeClass(this.emptyClass)),(this.selectOnFocus||isEmpty)&&el.dom.select()},postBlur:function(){this.applyEmptyText()},filterKeys:function(e){if(!e.ctrlKey){var k=e.getKey();if(!Ext.isGecko||!(e.isNavKeyPress()||k==e.BACKSPACE||k==e.DELETE&&-1==e.button)){var cc=String.fromCharCode(e.getCharCode());(Ext.isGecko||!e.isSpecialKey()||cc)&&(this.maskRe.test(cc)||e.stopEvent())}}},setValue:function(v){return this.emptyText&&this.el&&!Ext.isEmpty(v)&&this.el.removeClass(this.emptyClass),Ext.form.TextField.superclass.setValue.apply(this,arguments),this.applyEmptyText(),this.autoSize(),this},getErrors:function(value){var errors=Ext.form.TextField.superclass.getErrors.apply(this,arguments);if(value=Ext.isDefined(value)?value:this.processValue(this.getRawValue()),Ext.isFunction(this.validator)){var msg=this.validator(value);msg!==!0&&errors.push(msg)}if(value.length<1||value===this.emptyText){if(this.allowBlank)return errors;errors.push(this.blankText)}if(!this.allowBlank&&(value.length<1||value===this.emptyText)&&errors.push(this.blankText),value.length<this.minLength&&errors.push(String.format(this.minLengthText,this.minLength)),value.length>this.maxLength&&errors.push(String.format(this.maxLengthText,this.maxLength)),this.vtype){var vt=Ext.form.VTypes;vt[this.vtype](value,this)||errors.push(this.vtypeText||vt[this.vtype+"Text"])}return this.regex&&!this.regex.test(value)&&errors.push(this.regexText),errors},selectText:function(start,end){var v=this.getRawValue(),doFocus=!1;if(v.length>0){start=void 0===start?0:start,end=void 0===end?v.length:end;var d=this.el.dom;if(d.setSelectionRange)d.setSelectionRange(start,end);else if(d.createTextRange){var range=d.createTextRange();range.moveStart("character",start),range.moveEnd("character",end-v.length),range.select()}doFocus=Ext.isGecko||Ext.isOpera}else doFocus=!0;doFocus&&this.focus()},autoSize:function(){if(this.grow&&this.rendered){this.metrics||(this.metrics=Ext.util.TextMetrics.createInstance(this.el));var el=this.el,v=el.dom.value,d=document.createElement("div");d.appendChild(document.createTextNode(v)),v=d.innerHTML,Ext.removeNode(d),d=null,v+="&#160;";var w=Math.min(this.growMax,Math.max(this.metrics.getWidth(v)+10,this.growMin));this.el.setWidth(w),this.fireEvent("autosize",this,w)}},onDestroy:function(){this.validationTask&&(this.validationTask.cancel(),this.validationTask=null),Ext.form.TextField.superclass.onDestroy.call(this)}}),Ext.reg("textfield",Ext.form.TextField),Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:!1,editable:!0,readOnly:!1,wrapFocusClass:"x-trigger-wrap-focus",autoSize:Ext.emptyFn,monitorTab:!0,deferHeight:!0,mimicing:!1,actionMode:"wrap",defaultTriggerWidth:17,onResize:function(w,h){Ext.form.TriggerField.superclass.onResize.call(this,w,h);var tw=this.getTriggerWidth();Ext.isNumber(w)&&this.el.setWidth(w-tw),this.wrap.setWidth(this.el.getWidth()+tw)},getTriggerWidth:function(){var tw=this.trigger.getWidth();return this.hideTrigger||this.readOnly||0!==tw||(tw=this.defaultTriggerWidth),tw},alignErrorIcon:function(){this.wrap&&this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])},onRender:function(ct,position){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc(),Ext.form.TriggerField.superclass.onRender.call(this,ct,position),this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-field-trigger-wrap"}),this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.triggerClass}),this.initTrigger(),this.width||this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth()),this.resizeEl=this.positionEl=this.wrap},getWidth:function(){return this.el.getWidth()+this.trigger.getWidth()},updateEditState:function(){this.rendered&&(this.readOnly?(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this),this.trigger.setDisplayed(!1)):(this.editable?(this.el.dom.readOnly=!1,this.el.removeClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this)):(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mon(this.el,"click",this.onTriggerClick,this)),this.trigger.setDisplayed(!this.hideTrigger)),this.onResize(this.width||this.wrap.getWidth()))},setHideTrigger:function(hideTrigger){hideTrigger!=this.hideTrigger&&(this.hideTrigger=hideTrigger,this.updateEditState())},setEditable:function(editable){editable!=this.editable&&(this.editable=editable,this.updateEditState())},setReadOnly:function(readOnly){readOnly!=this.readOnly&&(this.readOnly=readOnly,this.updateEditState())},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this),this.updateEditState()},initTrigger:function(){this.mon(this.trigger,"click",this.onTriggerClick,this,{preventDefault:!0}),this.trigger.addClassOnOver("x-form-trigger-over"),this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){Ext.destroy(this.trigger,this.wrap),this.mimicing&&this.doc.un("mousedown",this.mimicBlur,this),delete this.doc,Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this),this.mimicing||(this.wrap.addClass(this.wrapFocusClass),this.mimicing=!0,this.doc.on("mousedown",this.mimicBlur,this,{delay:10}),this.monitorTab&&this.on("specialkey",this.checkTab,this))},checkTab:function(me,e){e.getKey()==e.TAB&&this.triggerBlur()},onBlur:Ext.emptyFn,mimicBlur:function(e){this.isDestroyed||this.wrap.contains(e.target)||!this.validateBlur(e)||this.triggerBlur()},triggerBlur:function(){this.mimicing=!1,this.doc.un("mousedown",this.mimicBlur,this),this.monitorTab&&this.el&&this.un("specialkey",this.checkTab,this),Ext.form.TriggerField.superclass.onBlur.call(this),this.wrap&&this.wrap.removeClass(this.wrapFocusClass)},beforeBlur:Ext.emptyFn,validateBlur:function(e){return!0},onTriggerClick:Ext.emptyFn}),Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this),this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(index){return this.triggers[index]},afterRender:function(){Ext.form.TwinTriggerField.superclass.afterRender.call(this);for(var triggers=this.triggers,i=0,len=triggers.length;len>i;++i)this["hideTrigger"+(i+1)]&&triggers[i].hide()},initTrigger:function(){var ts=this.trigger.select(".x-form-trigger",!0),triggerField=this;ts.each(function(t,all,index){var triggerIndex="Trigger"+(index+1);t.hide=function(){var w=triggerField.wrap.getWidth();this.dom.style.display="none",triggerField.el.setWidth(w-triggerField.trigger.getWidth()),triggerField["hidden"+triggerIndex]=!0},t.show=function(){var w=triggerField.wrap.getWidth();this.dom.style.display="",triggerField.el.setWidth(w-triggerField.trigger.getWidth()),triggerField["hidden"+triggerIndex]=!1},this.mon(t,"click",this["on"+triggerIndex+"Click"],this,{preventDefault:!0}),t.addClassOnOver("x-form-trigger-over"),t.addClassOnClick("x-form-trigger-click")},this),this.triggers=ts.elements},getTriggerWidth:function(){var tw=0;return Ext.each(this.triggers,function(t,index){var triggerIndex="Trigger"+(index+1),w=t.getWidth();tw+=0!==w||this["hidden"+triggerIndex]?w:this.defaultTriggerWidth},this),tw},onDestroy:function(){Ext.destroy(this.triggers),Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn}),Ext.reg("trigger",Ext.form.TriggerField),Ext.reg("twintrigger",Ext.form.TwinTriggerField),Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1e3,growAppend:"&#160;\n&#160;",enterIsSpecial:!1,preventScrollbars:!1,onRender:function(ct,position){this.el||(this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"}),Ext.form.TextArea.superclass.onRender.call(this,ct,position),this.grow&&(this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"}),this.preventScrollbars&&this.el.setStyle("overflow","hidden"),this.el.setHeight(this.growMin))},onDestroy:function(){Ext.removeNode(this.textSizeEl),Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(e){e.isSpecialKey()&&(this.enterIsSpecial||e.getKey()!=e.ENTER||e.hasModifier())&&this.fireEvent("specialkey",this,e)},doAutoSize:function(e){return!e.isNavKeyPress()||e.getKey()==e.ENTER},filterValidation:function(e){(!e.isNavKeyPress()||!this.enterIsSpecial&&e.keyCode==e.ENTER)&&this.validationTask.delay(this.validationDelay)},autoSize:function(){if(this.grow&&this.textSizeEl){var h,el=this.el,v=Ext.util.Format.htmlEncode(el.dom.value),ts=this.textSizeEl;Ext.fly(ts).setWidth(this.el.getWidth()),v.length<1?v="&#160;&#160;":(v+=this.growAppend,Ext.isIE&&(v=v.replace(/\n/g,"&#160;<br />"))),ts.innerHTML=v,h=Math.min(this.growMax,Math.max(ts.offsetHeight,this.growMin)),h!=this.lastHeight&&(this.lastHeight=h,this.el.setHeight(h),this.fireEvent("autosize",this,h))}}}),Ext.reg("textarea",Ext.form.TextArea),Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:!0,decimalSeparator:".",decimalPrecision:2,allowNegative:!0,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",autoStripChars:!1,initEvents:function(){var allowed=this.baseChars+"";this.allowDecimals&&(allowed+=this.decimalSeparator),this.allowNegative&&(allowed+="-"),allowed=Ext.escapeRe(allowed),this.maskRe=new RegExp("["+allowed+"]"),this.autoStripChars&&(this.stripCharsRe=new RegExp("[^"+allowed+"]","gi")),Ext.form.NumberField.superclass.initEvents.call(this)},getErrors:function(value){var errors=Ext.form.NumberField.superclass.getErrors.apply(this,arguments);if(value=Ext.isDefined(value)?value:this.processValue(this.getRawValue()),value.length<1)return errors;value=String(value).replace(this.decimalSeparator,"."),isNaN(value)&&errors.push(String.format(this.nanText,value));var num=this.parseValue(value);return num<this.minValue&&errors.push(String.format(this.minText,this.minValue)),num>this.maxValue&&errors.push(String.format(this.maxText,this.maxValue)),errors},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(v){return v=Ext.isNumber(v)?v:parseFloat(String(v).replace(this.decimalSeparator,".")),v=this.fixPrecision(v),v=isNaN(v)?"":String(v).replace(".",this.decimalSeparator),Ext.form.NumberField.superclass.setValue.call(this,v)},setMinValue:function(value){this.minValue=Ext.num(value,Number.NEGATIVE_INFINITY)},setMaxValue:function(value){this.maxValue=Ext.num(value,Number.MAX_VALUE)},parseValue:function(value){return value=parseFloat(String(value).replace(this.decimalSeparator,".")),isNaN(value)?"":value},fixPrecision:function(value){var nan=isNaN(value);return this.allowDecimals&&-1!=this.decimalPrecision&&!nan&&value?parseFloat(parseFloat(value).toFixed(this.decimalPrecision)):nan?"":value},beforeBlur:function(){var v=this.parseValue(this.getRawValue());Ext.isEmpty(v)||this.setValue(v)}}),Ext.reg("numberfield",Ext.form.NumberField),Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:!0,startDay:0,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initTime:"12",initTimeFormat:"H",safeParse:function(value,format){if(Date.formatContainsHourInfo(format))return Date.parseDate(value,format);var parsedDate=Date.parseDate(value+" "+this.initTime,format+" "+this.initTimeFormat);return parsedDate?parsedDate.clearTime():void 0},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this),this.addEvents("select"),Ext.isString(this.minValue)&&(this.minValue=this.parseDate(this.minValue)),Ext.isString(this.maxValue)&&(this.maxValue=this.parseDate(this.maxValue)),this.disabledDatesRE=null,this.initDisabledDays()},initEvents:function(){Ext.form.DateField.superclass.initEvents.call(this),this.keyNav=new Ext.KeyNav(this.el,{down:function(e){this.onTriggerClick()},scope:this,forceKeyDown:!0})},initDisabledDays:function(){if(this.disabledDates){var dd=this.disabledDates,len=dd.length-1,re="(?:";Ext.each(dd,function(d,i){re+=Ext.isDate(d)?"^"+Ext.escapeRe(d.dateFormat(this.format))+"$":dd[i],i!=len&&(re+="|")},this),this.disabledDatesRE=new RegExp(re+")")}},setDisabledDates:function(dd){this.disabledDates=dd,this.initDisabledDays(),this.menu&&this.menu.picker.setDisabledDates(this.disabledDatesRE)},setDisabledDays:function(dd){this.disabledDays=dd,this.menu&&this.menu.picker.setDisabledDays(dd)},setMinValue:function(dt){this.minValue=Ext.isString(dt)?this.parseDate(dt):dt,this.menu&&this.menu.picker.setMinDate(this.minValue)},setMaxValue:function(dt){this.maxValue=Ext.isString(dt)?this.parseDate(dt):dt,this.menu&&this.menu.picker.setMaxDate(this.maxValue)},getErrors:function(value){var errors=Ext.form.DateField.superclass.getErrors.apply(this,arguments);if(value=this.formatDate(value||this.processValue(this.getRawValue())),value.length<1)return errors;var svalue=value;if(value=this.parseDate(value),!value)return errors.push(String.format(this.invalidText,svalue,this.format)),errors;var time=value.getTime();if(this.minValue&&time<this.minValue.clearTime().getTime()&&errors.push(String.format(this.minText,this.formatDate(this.minValue))),this.maxValue&&time>this.maxValue.clearTime().getTime()&&errors.push(String.format(this.maxText,this.formatDate(this.maxValue))),this.disabledDays)for(var day=value.getDay(),i=0;i<this.disabledDays.length;i++)if(day===this.disabledDays[i]){errors.push(this.disabledDaysText);break}var fvalue=this.formatDate(value);return this.disabledDatesRE&&this.disabledDatesRE.test(fvalue)&&errors.push(String.format(this.disabledDatesText,fvalue)),errors},validateBlur:function(){return!this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(date){return Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(date)))},parseDate:function(value){if(!value||Ext.isDate(value))return value;var v=this.safeParse(value,this.format),af=this.altFormats,afa=this.altFormatsArray;if(!v&&af){afa=afa||af.split("|");for(var i=0,len=afa.length;len>i&&!v;i++)v=this.safeParse(value,afa[i])}return v},onDestroy:function(){Ext.destroy(this.menu,this.keyNav),Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(date){return Ext.isDate(date)?date.dateFormat(this.format):date},onTriggerClick:function(){this.disabled||(null==this.menu&&(this.menu=new Ext.menu.DateMenu({hideOnClick:!1,focusOnSelect:!1})),this.onFocus(),Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,startDay:this.startDay,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))}),this.menu.picker.setValue(this.getValue()||new Date),this.menu.show(this.el,"tl-bl?"),this.menuEvents("on"))},menuEvents:function(method){this.menu[method]("select",this.onSelect,this),this.menu[method]("hide",this.onMenuHide,this),this.menu[method]("show",this.onFocus,this)},onSelect:function(m,d){this.setValue(d),this.fireEvent("select",this,d),this.menu.hide()},onMenuHide:function(){this.focus(!1,60),this.menuEvents("un")},beforeBlur:function(){var v=this.parseDate(this.getRawValue());v&&this.setValue(v)}}),Ext.reg("datefield",Ext.form.DateField),Ext.form.DisplayField=Ext.extend(Ext.form.Field,{validationEvent:!1,validateOnBlur:!1,defaultAutoCreate:{tag:"div"},fieldClass:"x-form-display-field",htmlEncode:!1,initEvents:Ext.emptyFn,isValid:function(){return!0},validate:function(){return!0},getRawValue:function(){var v=this.rendered?this.el.dom.innerHTML:Ext.value(this.value,"");return v===this.emptyText&&(v=""),this.htmlEncode&&(v=Ext.util.Format.htmlDecode(v)),v},getValue:function(){return this.getRawValue()},getName:function(){return this.name},setRawValue:function(v){return this.htmlEncode&&(v=Ext.util.Format.htmlEncode(v)),this.rendered?this.el.dom.innerHTML=Ext.isEmpty(v)?"":v:this.value=v},setValue:function(v){return this.setRawValue(v),this}}),Ext.reg("displayfield",Ext.form.DisplayField),Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",listEmptyText:"",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,autoSelect:!0,typeAhead:!1,queryDelay:500,pageSize:0,selectOnFocus:!1,queryParam:"query",loadingText:"Loading...",resizable:!1,handleHeight:8,allQuery:"",mode:"remote",minListWidth:70,forceSelection:!1,typeAheadDelay:250,lazyInit:!0,clearFilterOnReset:!0,submitValue:void 0,initComponent:function(){if(Ext.form.ComboBox.superclass.initComponent.call(this),this.addEvents("expand","collapse","beforeselect","select","beforequery"),this.transform){var s=Ext.getDom(this.transform);if(this.hiddenName||(this.hiddenName=s.name),!this.store){this.mode="local";for(var d=[],opts=s.options,i=0,len=opts.length;len>i;i++){var o=opts[i],value=(o.hasAttribute?o.hasAttribute("value"):o.getAttributeNode("value").specified)?o.value:o.text;o.selected&&Ext.isEmpty(this.value,!0)&&(this.value=value),d.push([value,o.text])}this.store=new Ext.data.ArrayStore({idIndex:0,fields:["value","text"],data:d,autoDestroy:!0}),this.valueField="value",this.displayField="text"}s.name=Ext.id(),this.lazyRender||(this.target=!0,this.el=Ext.DomHelper.insertBefore(s,this.autoCreate||this.defaultAutoCreate),this.render(this.el.parentNode,s)),Ext.removeNode(s)}else this.store&&(this.store=Ext.StoreMgr.lookup(this.store),this.store.autoCreated&&(this.displayField=this.valueField="field1",this.store.expandData||(this.displayField="field2"),this.mode="local"));this.selectedIndex=-1,"local"==this.mode&&(Ext.isDefined(this.initialConfig.queryDelay)||(this.queryDelay=10),Ext.isDefined(this.initialConfig.minChars)||(this.minChars=0))},onRender:function(ct,position){this.hiddenName&&!Ext.isDefined(this.submitValue)&&(this.submitValue=!1),Ext.form.ComboBox.superclass.onRender.call(this,ct,position),this.hiddenName&&(this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:this.hiddenId||Ext.id()},"before",!0)),Ext.isGecko&&this.el.dom.setAttribute("autocomplete","off"),this.lazyInit?this.on("focus",this.initList,this,{single:!0}):this.initList()},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this),this.hiddenField&&(this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,""))},getParentZIndex:function(){var zindex;return this.ownerCt&&this.findParentBy(function(ct){return zindex=parseInt(ct.getPositionEl().getStyle("z-index"),10),!!zindex}),zindex},getZIndex:function(listParent){listParent=listParent||Ext.getDom(this.getListParent()||Ext.getBody());var zindex=parseInt(Ext.fly(listParent).getStyle("z-index"),10);return zindex||(zindex=this.getParentZIndex()),(zindex||12e3)+5},initList:function(){if(!this.list){var cls="x-combo-list",listParent=Ext.getDom(this.getListParent()||Ext.getBody());this.list=new Ext.Layer({parentEl:listParent,shadow:this.shadow,cls:[cls,this.listClass].join(" "),constrain:!1,zindex:this.getZIndex(listParent)});var lw=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setSize(lw,0),this.list.swallowEvent("mousewheel"),this.assetHeight=0,this.syncFont!==!1&&this.list.setStyle("font-size",this.el.getStyle("font-size")),this.title&&(this.header=this.list.createChild({cls:cls+"-hd",html:this.title}),this.assetHeight+=this.header.getHeight()),this.innerList=this.list.createChild({cls:cls+"-inner"}),this.mon(this.innerList,"mouseover",this.onViewOver,this),this.mon(this.innerList,"mousemove",this.onViewMove,this),this.innerList.setWidth(lw-this.list.getFrameWidth("lr")),this.pageSize&&(this.footer=this.list.createChild({cls:cls+"-ft"}),this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer}),this.assetHeight+=this.footer.getHeight()),this.tpl||(this.tpl='<tpl for="."><div class="'+cls+'-item">{'+this.displayField+"}</div></tpl>"),this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:!0,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+cls+"-item",emptyText:this.listEmptyText,deferEmptyText:!1}),this.mon(this.view,{containerclick:this.onViewClick,click:this.onViewClick,scope:this}),this.bindStore(this.store,!0),this.resizable&&(this.resizer=new Ext.Resizable(this.list,{pinned:!0,handles:"se"}),this.mon(this.resizer,"resize",function(r,w,h){this.maxHeight=h-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight,this.listWidth=w,this.innerList.setWidth(w-this.list.getFrameWidth("lr")),this.restrictHeight()},this),this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px"))}},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(store,initial){this.store&&!initial&&(this.store!==store&&this.store.autoDestroy?this.store.destroy():(this.store.un("beforeload",this.onBeforeLoad,this),this.store.un("load",this.onLoad,this),this.store.un("exception",this.collapse,this)),store||(this.store=null,this.view&&this.view.bindStore(null),this.pageTb&&this.pageTb.bindStore(null))),store&&(initial||(this.lastQuery=null,this.pageTb&&this.pageTb.bindStore(store)),this.store=Ext.StoreMgr.lookup(store),this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse}),this.view&&this.view.bindStore(store))},reset:function(){this.clearFilterOnReset&&"local"==this.mode&&this.store.clearFilter(),Ext.form.ComboBox.superclass.reset.call(this)},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this),this.keyNav=new Ext.KeyNav(this.el,{up:function(e){this.inKeyMode=!0,this.selectPrev()},down:function(e){this.isExpanded()?(this.inKeyMode=!0,this.selectNext()):this.onTriggerClick()},enter:function(e){this.onViewClick()},esc:function(e){this.collapse()},tab:function(e){return this.forceSelection===!0?this.collapse():this.onViewClick(!1),!0},scope:this,doRelay:function(e,h,hname){if("down"==hname||this.scope.isExpanded()){var relay=Ext.KeyNav.prototype.doRelay.apply(this,arguments);return(Ext.isIE9&&Ext.isStrict||Ext.isIE10p||!Ext.isIE)&&Ext.EventManager.useKeydown&&this.scope.fireKey(e),relay}return!0},forceKeyDown:!0,defaultEventAction:"stopEvent"}),this.queryDelay=Math.max(this.queryDelay||10,"local"==this.mode?10:250),this.dqTask=new Ext.util.DelayedTask(this.initQuery,this),this.typeAhead&&(this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)),this.enableKeyEvents||this.mon(this.el,"keyup",this.onKeyUp,this)},onDestroy:function(){this.dqTask&&(this.dqTask.cancel(),this.dqTask=null),this.bindStore(null),Ext.destroy(this.resizer,this.view,this.pageTb,this.list),Ext.destroyMembers(this,"hiddenField"),Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(e){this.isExpanded()||Ext.form.ComboBox.superclass.fireKey.call(this,e)},onResize:function(w,h){Ext.form.ComboBox.superclass.onResize.apply(this,arguments),!isNaN(w)&&this.isVisible()&&this.list?this.doResize(w):this.bufferSize=w},doResize:function(w){if(!Ext.isDefined(this.listWidth)){var lw=Math.max(w,this.minListWidth);this.list.setWidth(lw),this.innerList.setWidth(lw-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments),this.hiddenField&&(this.hiddenField.disabled=!1)},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments),this.hiddenField&&(this.hiddenField.disabled=!0)},onBeforeLoad:function(){this.hasFocus&&(this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":""),this.restrictHeight(),this.selectedIndex=-1)},onLoad:function(){this.hasFocus&&(this.store.getCount()>0||this.listEmptyText?(this.expand(),this.restrictHeight(),this.lastQuery==this.allQuery?(this.editable&&this.el.dom.select(),this.autoSelect===!1||this.selectByValue(this.value,!0)||this.select(0,!0)):(this.autoSelect!==!1&&this.selectNext(),this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE&&this.taTask.delay(this.typeAheadDelay))):this.collapse())},onTypeAhead:function(){if(this.store.getCount()>0){var r=this.store.getAt(0),newValue=r.data[this.displayField],len=newValue.length,selStart=this.getRawValue().length;selStart!=len&&(this.setRawValue(newValue),this.selectText(selStart,newValue.length))}},assertValue:function(){var rec,val=this.getRawValue();if(this.valueField&&Ext.isDefined(this.value)&&(rec=this.findRecord(this.valueField,this.value)),rec&&rec.get(this.displayField)==val||(rec=this.findRecord(this.displayField,val)),!rec&&this.forceSelection)val.length>0&&val!=this.emptyText?(this.el.dom.value=Ext.value(this.lastSelectionText,""),this.applyEmptyText()):this.clearValue();else{if(rec&&this.valueField){if(this.value==val)return;val=rec.get(this.valueField||this.displayField)}this.setValue(val)}},onSelect:function(record,index){this.fireEvent("beforeselect",this,record,index)!==!1&&(this.setValue(record.data[this.valueField||this.displayField]),this.collapse(),this.fireEvent("select",this,record,index))},getName:function(){var hf=this.hiddenField;return hf&&hf.name?hf.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){return this.valueField?Ext.isDefined(this.value)?this.value:"":Ext.form.ComboBox.superclass.getValue.call(this)},clearValue:function(){this.hiddenField&&(this.hiddenField.value=""),this.setRawValue(""),this.lastSelectionText="",this.applyEmptyText(),this.value=""},setValue:function(v){var text=v;if(this.valueField){var r=this.findRecord(this.valueField,v);r?text=r.data[this.displayField]:Ext.isDefined(this.valueNotFoundText)&&(text=this.valueNotFoundText)}return this.lastSelectionText=text,this.hiddenField&&(this.hiddenField.value=Ext.value(v,"")),Ext.form.ComboBox.superclass.setValue.call(this,text),this.value=v,this},findRecord:function(prop,value){var record;return this.store.getCount()>0&&this.store.each(function(r){return r.data[prop]==value?(record=r,!1):void 0}),record},onViewMove:function(e,t){this.inKeyMode=!1},onViewOver:function(e,t){if(!this.inKeyMode){var item=this.view.findItemFromChild(t);if(item){var index=this.view.indexOf(item);this.select(index,!1)}}},onViewClick:function(doFocus){var index=this.view.getSelectedIndexes()[0],s=this.store,r=s.getAt(index);r?this.onSelect(r,index):this.collapse(),doFocus!==!1&&this.el.focus()},restrictHeight:function(){this.innerList.dom.style.height="";var inner=this.innerList.dom,pad=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight,h=Math.max(inner.clientHeight,inner.offsetHeight,inner.scrollHeight),ha=this.getPosition()[1]-Ext.getBody().getScroll().top,hb=Ext.lib.Dom.getViewHeight()-ha-this.getSize().height,space=Math.max(ha,hb,this.minHeight||0)-this.list.shadowOffset-pad-5;h=Math.min(h,space,this.maxHeight),this.innerList.setHeight(h),this.list.beginUpdate(),this.list.setHeight(h+pad),this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign)),this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(v,scrollIntoView){if(!Ext.isEmpty(v,!0)){
var r=this.findRecord(this.valueField||this.displayField,v);if(r)return this.select(this.store.indexOf(r),scrollIntoView),!0}return!1},select:function(index,scrollIntoView){if(this.selectedIndex=index,this.view.select(index),scrollIntoView!==!1){var el=this.view.getNode(index);el&&this.innerList.scrollChildIntoView(el,!1)}},selectNext:function(){var ct=this.store.getCount();ct>0&&(-1==this.selectedIndex?this.select(0):this.selectedIndex<ct-1&&this.select(this.selectedIndex+1))},selectPrev:function(){var ct=this.store.getCount();ct>0&&(-1==this.selectedIndex?this.select(0):0!==this.selectedIndex&&this.select(this.selectedIndex-1))},onKeyUp:function(e){var k=e.getKey();this.editable===!1||this.readOnly===!0||k!=e.BACKSPACE&&e.isSpecialKey()||(this.lastKey=k,this.dqTask.delay(this.queryDelay)),Ext.form.ComboBox.superclass.onKeyUp.call(this,e)},validateBlur:function(){return!this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.form.ComboBox.superclass.postBlur.call(this),this.collapse(),this.inKeyMode=!1},doQuery:function(q,forceAll){q=Ext.isEmpty(q)?"":q;var qe={query:q,forceAll:forceAll,combo:this,cancel:!1};return this.fireEvent("beforequery",qe)===!1||qe.cancel?!1:(q=qe.query,forceAll=qe.forceAll,void((forceAll===!0||q.length>=this.minChars)&&(this.lastQuery!==q?(this.lastQuery=q,"local"==this.mode?(this.selectedIndex=-1,forceAll?this.store.clearFilter():this.store.filter(this.displayField,q),this.onLoad()):(this.store.baseParams[this.queryParam]=q,this.store.load({params:this.getParams(q)}),this.expand())):(this.selectedIndex=-1,this.onLoad()))))},getParams:function(q){var params={},paramNames=this.store.paramNames;return this.pageSize&&(params[paramNames.start]=0,params[paramNames.limit]=this.pageSize),params},collapse:function(){this.isExpanded()&&(this.list.hide(),Ext.getDoc().un("mousewheel",this.collapseIf,this),Ext.getDoc().un("mousedown",this.collapseIf,this),this.fireEvent("collapse",this))},collapseIf:function(e){this.isDestroyed||e.within(this.wrap)||e.within(this.list)||this.collapse()},expand:function(){!this.isExpanded()&&this.hasFocus&&((this.title||this.pageSize)&&(this.assetHeight=0,this.title&&(this.assetHeight+=this.header.getHeight()),this.pageSize&&(this.assetHeight+=this.footer.getHeight())),this.bufferSize&&(this.doResize(this.bufferSize),delete this.bufferSize),this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign)),this.list.setZIndex(this.getZIndex()),this.list.show(),Ext.isGecko2&&this.innerList.setOverflow("auto"),this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf}),this.fireEvent("expand",this))},onTriggerClick:function(){this.readOnly||this.disabled||(this.isExpanded()?(this.collapse(),this.el.focus()):(this.onFocus({}),"all"==this.triggerAction?this.doQuery(this.allQuery,!0):this.doQuery(this.getRawValue()),this.el.focus()))}}),Ext.reg("combo",Ext.form.ComboBox),Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:void 0,fieldClass:"x-form-field",checked:!1,boxLabel:"&#160;",defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this),this.addEvents("check")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments),this.boxLabel||this.fieldLabel||this.el.alignTo(this.wrap,"c-c")},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this),this.mon(this.el,{scope:this,click:this.onClick,change:this.onClick})},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(ct,position){Ext.form.Checkbox.superclass.onRender.call(this,ct,position),void 0!==this.inputValue&&(this.el.dom.value=this.inputValue),this.wrap=this.el.wrap({cls:"x-form-check-wrap"}),this.boxLabel&&this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel}),this.checked?this.setValue(!0):this.checked=this.el.dom.checked,Ext.isIEQuirks&&this.wrap.repaint(),this.resizeEl=this.positionEl=this.wrap},onDestroy:function(){Ext.destroy(this.wrap),Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:function(){this.originalValue=this.getValue()},getValue:function(){return this.rendered?this.el.dom.checked:this.checked},onClick:function(){this.el.dom.checked!=this.checked&&this.setValue(this.el.dom.checked)},setValue:function(v){var checked=this.checked,inputVal=this.inputValue;return v===!1?this.checked=!1:this.checked=v===!0||"true"===v||"1"==v||(inputVal?v==inputVal:"on"==String(v).toLowerCase()),this.rendered&&(this.el.dom.checked=this.checked,this.el.dom.defaultChecked=this.checked),checked!=this.checked&&(this.fireEvent("check",this,this.checked),this.handler&&this.handler.call(this.scope||this,this,this.checked)),this}}),Ext.reg("checkbox",Ext.form.Checkbox),Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:!1,allowBlank:!0,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change"),this.on("change",this.validate,this),Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(ct,position){if(!this.el){var panelCfg={autoEl:{id:this.id},cls:this.groupCls,layout:"column",renderTo:ct,bufferResize:!1},colCfg={xtype:"container",defaultType:this.defaultType,layout:"form",defaults:{hideLabel:!0,anchor:"100%"}};if(this.items[0].items){Ext.apply(panelCfg,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var i=0,len=this.items.length;len>i;i++)Ext.applyIf(this.items[i],colCfg)}else{var numCols,cols=[];if("string"==typeof this.columns&&(this.columns=this.items.length),!Ext.isArray(this.columns)){for(var cs=[],i=0;i<this.columns;i++)cs.push(100/this.columns*.01);this.columns=cs}numCols=this.columns.length;for(var i=0;numCols>i;i++){var cc=Ext.apply({items:[]},colCfg);cc[this.columns[i]<=1?"columnWidth":"width"]=this.columns[i],this.defaults&&(cc.defaults=Ext.apply(cc.defaults||{},this.defaults)),cols.push(cc)}if(this.vertical)for(var rows=Math.ceil(this.items.length/numCols),ri=0,i=0,len=this.items.length;len>i;i++)i>0&&i%rows==0&&ri++,this.items[i].fieldLabel&&(this.items[i].hideLabel=!1),cols[ri].items.push(this.items[i]);else for(var i=0,len=this.items.length;len>i;i++){var ci=i%numCols;this.items[i].fieldLabel&&(this.items[i].hideLabel=!1),cols[ci].items.push(this.items[i])}Ext.apply(panelCfg,{layoutConfig:{columns:numCols},items:cols})}if(this.panel=new Ext.Container(panelCfg),this.panel.ownerCt=this,this.el=this.panel.getEl(),this.forId&&this.itemCls){var l=this.el.up(this.itemCls).child("label",!0);l&&l.setAttribute("htmlFor",this.forId)}var fields=this.panel.findBy(function(c){return c.isFormField},this);this.items=new Ext.util.MixedCollection,this.items.addAll(fields)}Ext.form.CheckboxGroup.superclass.onRender.call(this,ct,position)},initValue:function(){this.value&&(this.setValue.apply(this,this.buffered?this.value:[this.value]),delete this.buffered,delete this.value)},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this),this.eachItem(function(item){item.on("check",this.fireChecked,this),item.inGroup=!0})},doLayout:function(){this.rendered&&(this.panel.forceLayout=this.ownerCt.forceLayout,this.panel.doLayout())},fireChecked:function(){var arr=[];this.eachItem(function(item){item.checked&&arr.push(item)}),this.fireEvent("change",this,arr)},getErrors:function(){var errors=Ext.form.CheckboxGroup.superclass.getErrors.apply(this,arguments);if(!this.allowBlank){var blank=!0;this.eachItem(function(f){return f.checked?blank=!1:void 0}),blank&&errors.push(this.blankText)}return errors},isDirty:function(){if(this.disabled||!this.rendered)return!1;var dirty=!1;return this.eachItem(function(item){return item.isDirty()?(dirty=!0,!1):void 0}),dirty},setReadOnly:function(readOnly){this.rendered&&this.eachItem(function(item){item.setReadOnly(readOnly)}),this.readOnly=readOnly},onDisable:function(){this.eachItem(function(item){item.disable()})},onEnable:function(){this.eachItem(function(item){item.enable()})},onResize:function(w,h){this.panel.setSize(w,h),this.panel.doLayout()},reset:function(){this.originalValue?(this.eachItem(function(c){c.setValue&&(c.setValue(!1),c.originalValue=c.getValue())}),this.resetOriginal=!0,this.setValue(this.originalValue),delete this.resetOriginal):this.eachItem(function(c){c.reset&&c.reset()}),function(){this.clearInvalid()}.defer(50,this)},setValue:function(){return this.rendered?this.onSetValue.apply(this,arguments):(this.buffered=!0,this.value=arguments),this},onSetValue:function(id,value){if(1==arguments.length)if(Ext.isArray(id))Ext.each(id,function(val,idx){if(Ext.isObject(val)&&val.setValue)val.setValue(!0),this.resetOriginal===!0&&(val.originalValue=val.getValue());else{var item=this.items.itemAt(idx);item&&item.setValue(val)}},this);else if(Ext.isObject(id))for(var i in id){var f=this.getBox(i);f&&f.setValue(id[i])}else this.setValueForItem(id);else{var f=this.getBox(id);f&&f.setValue(value)}},beforeDestroy:function(){Ext.destroy(this.panel),this.rendered||Ext.destroy(this.items),Ext.form.CheckboxGroup.superclass.beforeDestroy.call(this)},setValueForItem:function(val){val=String(val).split(","),this.eachItem(function(item){val.indexOf(item.inputValue)>-1&&item.setValue(!0)})},getBox:function(id){var box=null;return this.eachItem(function(f){return id==f||f.dataIndex==id||f.id==id||f.getName()==id?(box=f,!1):void 0}),box},getValue:function(){var out=[];return this.eachItem(function(item){item.checked&&out.push(item)}),out},eachItem:function(fn,scope){this.items&&this.items.each&&this.items.each(fn,scope||this)},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn}),Ext.reg("checkboxgroup",Ext.form.CheckboxGroup),Ext.form.CompositeField=Ext.extend(Ext.form.Field,{defaultMargins:"0 5 0 0",skipLastItemMargin:!0,isComposite:!0,combineErrors:!0,labelConnector:", ",initComponent:function(){for(var item,labels=[],items=this.items,i=0,j=items.length;j>i;i++)item=items[i],Ext.isEmpty(item.ref)||(item.ref="../"+item.ref),labels.push(item.fieldLabel),Ext.applyIf(item,this.defaults),i==j-1&&this.skipLastItemMargin||Ext.applyIf(item,{margins:this.defaultMargins});this.fieldLabel=this.fieldLabel||this.buildLabel(labels),this.fieldErrors=new Ext.util.MixedCollection(!0,function(item){return item.field}),this.fieldErrors.on({scope:this,add:this.updateInvalidMark,remove:this.updateInvalidMark,replace:this.updateInvalidMark}),Ext.form.CompositeField.superclass.initComponent.apply(this,arguments),this.innerCt=new Ext.Container({layout:"hbox",items:this.items,cls:"x-form-composite",defaultMargins:"0 3 0 0",ownerCt:this}),delete this.innerCt.ownerCt;var fields=this.innerCt.findBy(function(c){return c.isFormField},this);this.items=new Ext.util.MixedCollection,this.items.addAll(fields)},onRender:function(ct,position){if(!this.el){var innerCt=this.innerCt;innerCt.render(ct),this.innerCt.ownerCt=this,this.el=innerCt.getEl(),this.combineErrors&&this.eachItem(function(field){Ext.apply(field,{markInvalid:this.onFieldMarkInvalid.createDelegate(this,[field],0),clearInvalid:this.onFieldClearInvalid.createDelegate(this,[field],0)})});var l=this.el.parent().parent().child("label",!0);l&&l.setAttribute("for",this.items.items[0].id)}Ext.form.CompositeField.superclass.onRender.apply(this,arguments)},onFieldMarkInvalid:function(field,message){var name=field.getName(),error={field:name,errorName:field.fieldLabel||name,error:message};this.fieldErrors.replace(name,error),field.preventMark||field.el.addClass(field.invalidClass)},onFieldClearInvalid:function(field){this.fieldErrors.removeKey(field.getName()),field.el.removeClass(field.invalidClass)},updateInvalidMark:function(){var ieStrict=Ext.isIE6&&Ext.isStrict;if(0==this.fieldErrors.length)this.clearInvalid(),ieStrict&&this.clearInvalid.defer(50,this);else{var message=this.buildCombinedErrorMessage(this.fieldErrors.items);this.sortErrors(),this.markInvalid(message),ieStrict&&this.markInvalid(message)}},validateValue:function(value,preventMark){var valid=!0;return this.eachItem(function(field){field.isValid(preventMark)||(valid=!1)}),valid},buildCombinedErrorMessage:function(errors){for(var error,combined=[],i=0,j=errors.length;j>i;i++)error=errors[i],combined.push(String.format("{0}: {1}",error.errorName,error.error));return combined.join("<br />")},sortErrors:function(){var fields=this.items;this.fieldErrors.sort("ASC",function(a,b){var findByName=function(key){return function(field){return field.getName()==key}},aIndex=fields.findIndexBy(findByName(a.field)),bIndex=fields.findIndexBy(findByName(b.field));return bIndex>aIndex?-1:1})},reset:function(){this.eachItem(function(item){item.reset()}),function(){this.clearInvalid()}.defer(50,this)},clearInvalidChildren:function(){this.eachItem(function(item){item.clearInvalid()})},buildLabel:function(segments){return Ext.clean(segments).join(this.labelConnector)},isDirty:function(){if(this.disabled||!this.rendered)return!1;var dirty=!1;return this.eachItem(function(item){return item.isDirty()?(dirty=!0,!1):void 0}),dirty},eachItem:function(fn,scope){this.items&&this.items.each&&this.items.each(fn,scope||this)},onResize:function(adjWidth,adjHeight,rawWidth,rawHeight){var innerCt=this.innerCt;this.rendered&&innerCt.rendered&&innerCt.setSize(adjWidth,adjHeight),Ext.form.CompositeField.superclass.onResize.apply(this,arguments)},doLayout:function(shallow,force){if(this.rendered){var innerCt=this.innerCt;innerCt.forceLayout=this.ownerCt.forceLayout,innerCt.doLayout(shallow,force)}},beforeDestroy:function(){Ext.destroy(this.innerCt),Ext.form.CompositeField.superclass.beforeDestroy.call(this)},setReadOnly:function(readOnly){void 0==readOnly&&(readOnly=!0),readOnly=!!readOnly,this.rendered&&this.eachItem(function(item){item.setReadOnly(readOnly)}),this.readOnly=readOnly},onShow:function(){Ext.form.CompositeField.superclass.onShow.call(this),this.doLayout()},onDisable:function(){this.eachItem(function(item){item.disable()})},onEnable:function(){this.eachItem(function(item){item.enable()})}}),Ext.reg("compositefield",Ext.form.CompositeField),Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var p=this.el.up("form")||Ext.getBody(),c=p.child('input[name="'+this.el.dom.name+'"]:checked',!0);return c?c.value:null},setValue:function(v){var checkEl,els,radio;return"boolean"==typeof v?Ext.form.Radio.superclass.setValue.call(this,v):this.rendered&&(checkEl=this.getCheckEl(),radio=checkEl.child('input[name="'+this.el.dom.name+'"][value="'+v+'"]',!0),radio&&Ext.getCmp(radio.id).setValue(!0)),this.rendered&&this.checked&&(checkEl=checkEl||this.getCheckEl(),els=this.getCheckEl().select('input[name="'+this.el.dom.name+'"]'),els.each(function(el){el.dom.id!=this.id&&Ext.getCmp(el.dom.id).setValue(!1)},this)),this},getCheckEl:function(){return this.inGroup?this.el.up(".x-form-radio-group"):this.el.up("form")||Ext.getBody()}}),Ext.reg("radio",Ext.form.Radio),Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:!0,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",getValue:function(){var out=null;return this.eachItem(function(item){return item.checked?(out=item,!1):void 0}),out},onSetValue:function(id,value){if(arguments.length>1){var f=this.getBox(id);f&&(f.setValue(value),f.checked&&this.eachItem(function(item){item!==f&&item.setValue(!1)}))}else this.setValueForItem(id)},setValueForItem:function(val){val=String(val).split(",")[0],this.eachItem(function(item){item.setValue(val==item.inputValue)})},fireChecked:function(){this.checkTask||(this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)),this.checkTask.delay(10)},bufferChecked:function(){var out=null;this.eachItem(function(item){return item.checked?(out=item,!1):void 0}),this.fireEvent("change",this,out)},onDestroy:function(){this.checkTask&&(this.checkTask.cancel(),this.checkTask=null),Ext.form.RadioGroup.superclass.onDestroy.call(this)}}),Ext.reg("radiogroup",Ext.form.RadioGroup),Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",shouldLayout:!1,onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn}),Ext.reg("hidden",Ext.form.Hidden),Ext.form.BasicForm=Ext.extend(Ext.util.Observable,{constructor:function(el,config){Ext.apply(this,config),Ext.isString(this.paramOrder)&&(this.paramOrder=this.paramOrder.split(/[\s,|]/)),this.items=new Ext.util.MixedCollection(!1,function(o){return o.getItemId()}),this.addEvents("beforeaction","actionfailed","actioncomplete"),el&&this.initEl(el),Ext.form.BasicForm.superclass.constructor.call(this)},timeout:30,paramOrder:void 0,paramsAsHash:!1,waitTitle:"Please Wait...",activeAction:null,trackResetOnLoad:!1,initEl:function(el){this.el=Ext.get(el),this.id=this.el.id||Ext.id(),this.standardSubmit||this.el.on("submit",this.onSubmit,this),this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(e){e.stopEvent()},destroy:function(bound){bound!==!0&&(this.items.each(function(f){Ext.destroy(f)}),Ext.destroy(this.el)),this.items.clear(),this.purgeListeners()},isValid:function(){var valid=!0;return this.items.each(function(f){f.validate()||(valid=!1)}),valid},isDirty:function(){var dirty=!1;return this.items.each(function(f){return f.isDirty()?(dirty=!0,!1):void 0}),dirty},doAction:function(action,options){return Ext.isString(action)&&(action=new Ext.form.Action.ACTION_TYPES[action](this,options)),this.fireEvent("beforeaction",this,action)!==!1&&(this.beforeAction(action),action.run.defer(100,action)),this},submit:function(options){if(options=options||{},this.standardSubmit){var v=options.clientValidation===!1||this.isValid();if(v){var el=this.el.dom;this.url&&Ext.isEmpty(el.action)&&(el.action=this.url),el.submit()}return v}var submitAction=String.format("{0}submit",this.api?"direct":"");return this.doAction(submitAction,options),this},load:function(options){var loadAction=String.format("{0}load",this.api?"direct":"");return this.doAction(loadAction,options),this},updateRecord:function(record){record.beginEdit();var field,value,fs=record.fields;return fs.each(function(f){field=this.findField(f.name),field&&(value=field.getValue(),Ext.type(value)!==!1&&value.getGroupValue?value=value.getGroupValue():field.eachItem&&(value=[],field.eachItem(function(item){value.push(item.getValue())})),record.set(f.name,value))},this),record.endEdit(),this},loadRecord:function(record){return this.setValues(record.data),this},beforeAction:function(action){this.items.each(function(f){f.isFormField&&f.syncValue&&f.syncValue()});var o=action.options;o.waitMsg&&(this.waitMsgTarget===!0?this.el.mask(o.waitMsg,"x-mask-loading"):this.waitMsgTarget?(this.waitMsgTarget=Ext.get(this.waitMsgTarget),this.waitMsgTarget.mask(o.waitMsg,"x-mask-loading")):Ext.MessageBox.wait(o.waitMsg,o.waitTitle||this.waitTitle))},afterAction:function(action,success){this.activeAction=null;var o=action.options;o.waitMsg&&(this.waitMsgTarget===!0?this.el.unmask():this.waitMsgTarget?this.waitMsgTarget.unmask():(Ext.MessageBox.updateProgress(1),Ext.MessageBox.hide())),success?(o.reset&&this.reset(),Ext.callback(o.success,o.scope,[this,action]),this.fireEvent("actioncomplete",this,action)):(Ext.callback(o.failure,o.scope,[this,action]),this.fireEvent("actionfailed",this,action))},findField:function(id){var field=this.items.get(id);if(!Ext.isObject(field)){var findMatchingField=function(f){if(f.isFormField){if(f.dataIndex==id||f.id==id||f.getName()==id)return field=f,!1;if(f.isComposite)return f.items.each(findMatchingField);if(f instanceof Ext.form.CheckboxGroup&&f.rendered)return f.eachItem(findMatchingField)}};this.items.each(findMatchingField)}return field||null},markInvalid:function(errors){if(Ext.isArray(errors))for(var i=0,len=errors.length;len>i;i++){var fieldError=errors[i],f=this.findField(fieldError.id);f&&f.markInvalid(fieldError.msg)}else{var field,id;for(id in errors)!Ext.isFunction(errors[id])&&(field=this.findField(id))&&field.markInvalid(errors[id])}return this},setValues:function(values){if(Ext.isArray(values))for(var i=0,len=values.length;len>i;i++){var v=values[i],f=this.findField(v.id);f&&(f.setValue(v.value),this.trackResetOnLoad&&(f.originalValue=f.getValue()))}else{var field,id;for(id in values)!Ext.isFunction(values[id])&&(field=this.findField(id))&&(field.setValue(values[id]),this.trackResetOnLoad&&(field.originalValue=field.getValue()))}return this},getValues:function(asString){var fs=Ext.lib.Ajax.serializeForm(this.el.dom);return asString===!0?fs:Ext.urlDecode(fs)},getFieldValues:function(dirtyOnly){var n,key,val,o={};return this.items.each(function(f){f.disabled||dirtyOnly===!0&&!f.isDirty()||(n=f.getName(),key=o[n],val=f.getValue(),Ext.isDefined(key)?Ext.isArray(key)?o[n].push(val):o[n]=[key,val]:o[n]=val)}),o},clearInvalid:function(){return this.items.each(function(f){f.clearInvalid()}),this},reset:function(){return this.items.each(function(f){f.reset()}),this},add:function(){return this.items.addAll(Array.prototype.slice.call(arguments,0)),this},remove:function(field){return this.items.remove(field),this},cleanDestroyed:function(){this.items.filterBy(function(o){return!!o.isDestroyed}).each(this.remove,this)},render:function(){return this.items.each(function(f){f.isFormField&&!f.rendered&&document.getElementById(f.id)&&f.applyToMarkup(f.id)}),this},applyToFields:function(o){return this.items.each(function(f){Ext.apply(f,o)}),this},applyIfToFields:function(o){return this.items.each(function(f){Ext.applyIf(f,o)}),this},callFieldMethod:function(fnName,args){return args=args||[],this.items.each(function(f){Ext.isFunction(f[fnName])&&f[fnName].apply(f,args)}),this}}),Ext.BasicForm=Ext.form.BasicForm,Ext.FormPanel=Ext.extend(Ext.Panel,{minButtonWidth:75,labelAlign:"left",monitorValid:!1,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm(),Ext.FormPanel.superclass.initComponent.call(this),this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()},this.fileUpload&&(this.bodyCfg.enctype="multipart/form-data"),this.initItems(),this.addEvents("clientvalidation"),this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var config=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,config)},initFields:function(){var f=this.form,formPanel=this,fn=function(c){formPanel.isField(c)?f.add(c):c.findBy&&c!=formPanel&&(formPanel.applySettings(c),c.items&&c.items.each&&c.items.each(fn,this))};this.items.each(fn,this)},applySettings:function(c){var ct=c.ownerCt;Ext.applyIf(c,{labelAlign:ct.labelAlign,labelWidth:ct.labelWidth,itemCls:ct.itemCls})},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(ct,position){this.initFields(),Ext.FormPanel.superclass.onRender.call(this,ct,position),this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring(),this.form.destroy(!0),Ext.FormPanel.superclass.beforeDestroy.call(this)},isField:function(c){return!!(c.setValue&&c.getValue&&c.markInvalid&&c.clearInvalid)},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this),this.on({scope:this,add:this.onAddEvent,remove:this.onRemoveEvent}),this.monitorValid&&this.startMonitoring()},onAdd:function(c){Ext.FormPanel.superclass.onAdd.call(this,c),this.processAdd(c)},onAddEvent:function(ct,c){ct!==this&&this.processAdd(c)},processAdd:function(c){this.isField(c)?this.form.add(c):c.findBy&&(this.applySettings(c),this.form.add.apply(this.form,c.findBy(this.isField)))},onRemove:function(c){Ext.FormPanel.superclass.onRemove.call(this,c),this.processRemove(c)},onRemoveEvent:function(ct,c){ct!==this&&this.processRemove(c)},processRemove:function(c){this.destroying||(this.isField(c)?this.form.remove(c):c.findBy&&(Ext.each(c.findBy(this.isField),this.form.remove,this.form),this.form.cleanDestroyed()))},startMonitoring:function(){this.validTask||(this.validTask=new Ext.util.TaskRunner,this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this}))},stopMonitoring:function(){this.validTask&&(this.validTask.stopAll(),this.validTask=null)},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this),this.form&&this.form.items.each(function(){this.disable()})},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this),this.form&&this.form.items.each(function(){this.enable()})},bindHandler:function(){var valid=!0;if(this.form.items.each(function(f){return f.isValid(!0)?void 0:(valid=!1,!1)}),this.fbar)for(var fitems=this.fbar.items.items,i=0,len=fitems.length;len>i;i++){var btn=fitems[i];btn.formBind===!0&&btn.disabled===valid&&btn.setDisabled(!valid)}this.fireEvent("clientvalidation",this,valid)}}),Ext.reg("form",Ext.FormPanel),Ext.form.FormPanel=Ext.FormPanel,Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:!1,onRender:function(ct,position){if(this.el||(this.el=document.createElement("fieldset"),this.el.id=this.id,(this.title||this.header||this.checkboxToggle)&&(this.el.appendChild(document.createElement("legend")).className=this.baseCls+"-header")),Ext.form.FieldSet.superclass.onRender.call(this,ct,position),this.checkboxToggle){var o="object"==typeof this.checkboxToggle?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(o),this.checkbox.dom.checked=!this.collapsed,this.mon(this.checkbox,"click",this.onCheckClick,this)}},onCollapse:function(doAnim,animArg){this.checkbox&&(this.checkbox.dom.checked=!1),Ext.form.FieldSet.superclass.onCollapse.call(this,doAnim,animArg)},onExpand:function(doAnim,animArg){this.checkbox&&(this.checkbox.dom.checked=!0),Ext.form.FieldSet.superclass.onExpand.call(this,doAnim,animArg)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()}}),Ext.reg("fieldset",Ext.form.FieldSet),Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:!0,enableFontSize:!0,enableColors:!0,enableAlignments:!0,enableLists:!0,enableSourceEdit:!0,enableLinks:!0,enableFont:!0,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:Ext.isOpera||Ext.isIE6?"&#160;":"&#8203;",actionMode:"wrap",validationEvent:!1,deferHeight:!0,initialized:!1,activated:!1,sourceEditMode:!1,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange"),Ext.form.HtmlEditor.superclass.initComponent.call(this)},createFontOptions:function(){for(var ff,lc,buf=[],fs=this.fontFamilies,i=0,len=fs.length;len>i;i++)ff=fs[i],lc=ff.toLowerCase(),buf.push('<option value="',lc,'" style="font-family:',ff,';"',this.defaultFont==lc?' selected="true">':">",ff,"</option>");return buf.join("")},createToolbar:function(editor){function btn(id,toggle,handler){return{itemId:id,cls:"x-btn-icon",iconCls:"x-edit-"+id,enableToggle:toggle!==!1,scope:editor,handler:handler||editor.relayBtnCmd,clickEvent:"mousedown",tooltip:tipsEnabled?editor.buttonTips[id]||void 0:void 0,overflowText:editor.buttonTips[id].title||void 0,tabIndex:-1}}var items=[],tipsEnabled=Ext.QuickTips&&Ext.QuickTips.isEnabled();if(this.enableFont&&!Ext.isSafari2){var fontSelectItem=new Ext.Toolbar.Item({autoEl:{tag:"select",cls:"x-font-select",html:this.createFontOptions()}});items.push(fontSelectItem,"-")}this.enableFormat&&items.push(btn("bold"),btn("italic"),btn("underline")),this.enableFontSize&&items.push("-",btn("increasefontsize",!1,this.adjustFont),btn("decreasefontsize",!1,this.adjustFont)),this.enableColors&&items.push("-",{itemId:"forecolor",cls:"x-btn-icon",iconCls:"x-edit-forecolor",clickEvent:"mousedown",tooltip:tipsEnabled?editor.buttonTips.forecolor||void 0:void 0,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:!0,focus:Ext.emptyFn,value:"000000",plain:!0,listeners:{scope:this,select:function(cp,color){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+color:color),this.deferFocus()}},clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon",iconCls:"x-edit-backcolor",clickEvent:"mousedown",tooltip:tipsEnabled?editor.buttonTips.backcolor||void 0:void 0,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:!0,allowReselect:!0,listeners:{scope:this,select:function(cp,color){Ext.isGecko?(this.execCmd("useCSS",!1),this.execCmd("hilitecolor",color),this.execCmd("useCSS",!0),this.deferFocus()):(this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+color:color),this.deferFocus())}},clickEvent:"mousedown"})}),this.enableAlignments&&items.push("-",btn("justifyleft"),btn("justifycenter"),btn("justifyright")),Ext.isSafari2||(this.enableLinks&&items.push("-",btn("createlink",!1,this.createLink)),this.enableLists&&items.push("-",btn("insertorderedlist"),btn("insertunorderedlist")),this.enableSourceEdit&&items.push("-",btn("sourceedit",!0,function(btn){this.toggleSourceEdit(!this.sourceEditMode)})));var tb=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild,items:items});fontSelectItem&&(this.fontSelect=fontSelectItem.el,this.mon(this.fontSelect,"change",function(){var font=this.fontSelect.dom.value;this.relayCmd("fontname",font),this.deferFocus()},this)),this.mon(tb.el,"click",function(e){e.preventDefault()}),this.tb=tb,this.tb.doLayout()},onDisable:function(){this.wrap.mask(),Ext.form.HtmlEditor.superclass.onDisable.call(this)},onEnable:function(){this.wrap.unmask(),Ext.form.HtmlEditor.superclass.onEnable.call(this)},setReadOnly:function(readOnly){if(Ext.form.HtmlEditor.superclass.setReadOnly.call(this,readOnly),this.initialized){Ext.isIE?this.getEditorBody().contentEditable=!readOnly:this.setDesignMode(!readOnly);var bd=this.getEditorBody();bd&&(bd.style.cursor=this.readOnly?"default":"text"),this.disableItems(readOnly)}},getDocMarkup:function(){var h=Ext.fly(this.iframe).getHeight()-2*this.iframePad;return String.format('<html><head><style type="text/css">body{border: 0; margin: 0; padding: {0}px; height: {1}px; cursor: text}</style></head><body></body></html>',this.iframePad,h)},getEditorBody:function(){var doc=this.getDoc();return doc.body||doc.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:this.iframe.contentDocument||this.getWin().document},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(ct,position){if(Ext.form.HtmlEditor.superclass.onRender.call(this,ct,position),this.el.dom.style.border="0 none",this.el.dom.setAttribute("tabIndex",-1),this.el.addClass("x-hidden"),Ext.isIE&&this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;"),this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}}),this.createToolbar(this),this.disableItems(!0),this.tb.doLayout(),this.createIFrame(),!this.width){var sz=this.el.getSize();this.setSize(sz.width,this.height||sz.height)}this.resizeEl=this.positionEl=this.wrap},createIFrame:function(){var iframe=document.createElement("iframe");iframe.name=Ext.id(),iframe.frameBorder="0",iframe.style.overflow="auto",iframe.src=Ext.SSL_SECURE_URL,this.wrap.dom.appendChild(iframe),this.iframe=iframe,this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100})},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);var doc=this.getDoc();this.win=this.getWin(),
doc.open(),doc.write(this.getDocMarkup()),doc.close(),this.readyTask={run:function(){var doc=this.getDoc();(doc.body||"complete"==doc.readyState)&&(Ext.TaskMgr.stop(this.readyTask),this.setDesignMode(!0),this.initEditor.defer(10,this))},interval:10,duration:1e4,scope:this},Ext.TaskMgr.start(this.readyTask)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var doc=this.getDoc();if(!doc)return;doc.editorInitialized&&"on"==this.getDesignMode()||this.initFrame()}},setDesignMode:function(mode){var doc=this.getDoc();doc&&(this.readOnly&&(mode=!1),doc.designMode=/on|true/i.test(String(mode).toLowerCase())?"on":"off")},getDesignMode:function(){var doc=this.getDoc();return doc?String(doc.designMode).toLowerCase():""},disableItems:function(disabled){this.fontSelect&&(this.fontSelect.dom.disabled=disabled),this.tb.items.each(function(item){"sourceedit"!=item.getItemId()&&item.setDisabled(disabled)})},onResize:function(w,h){if(Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments),this.el&&this.iframe){if(Ext.isNumber(w)){var aw=w-this.wrap.getFrameWidth("lr");this.el.setWidth(aw),this.tb.setWidth(aw),this.iframe.style.width=Math.max(aw,0)+"px"}if(Ext.isNumber(h)){var ah=h-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(ah),this.iframe.style.height=Math.max(ah,0)+"px";var bd=this.getEditorBody();bd&&(bd.style.height=Math.max(ah-2*this.iframePad,0)+"px")}}},toggleSourceEdit:function(sourceEditMode){var iframeHeight,elHeight;void 0===sourceEditMode&&(sourceEditMode=!this.sourceEditMode),this.sourceEditMode=sourceEditMode===!0;var btn=this.tb.getComponent("sourceedit");(btn.pressed===this.sourceEditMode||(btn.toggle(this.sourceEditMode),btn.xtbHidden))&&(this.sourceEditMode?(this.previousSize=this.getSize(),iframeHeight=Ext.get(this.iframe).getHeight(),this.disableItems(!0),this.syncValue(),this.iframe.className="x-hidden",this.el.removeClass("x-hidden"),this.el.dom.removeAttribute("tabIndex"),this.el.focus(),this.el.dom.style.height=iframeHeight+"px"):(elHeight=parseInt(this.el.dom.style.height,10),this.initialized&&this.disableItems(this.readOnly),this.pushValue(),this.iframe.className="",this.el.addClass("x-hidden"),this.el.dom.setAttribute("tabIndex",-1),this.deferFocus(),this.setSize(this.previousSize),delete this.previousSize,this.iframe.style.height=elHeight+"px"),this.fireEvent("editmodechange",this,this.sourceEditMode))},createLink:function(){var url=prompt(this.createLinkText,this.defaultLinkValue);url&&"http://"!=url&&this.relayCmd("createlink",url)},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(v){return Ext.form.HtmlEditor.superclass.setValue.call(this,v),this.pushValue(),this},cleanHtml:function(html){return html=String(html),Ext.isWebKit&&(html=html.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")),html.charCodeAt(0)==this.defaultValue.replace(/\D/g,"")&&(html=html.substring(1)),html},syncValue:function(){if(this.initialized){var bd=this.getEditorBody(),html=bd.innerHTML;if(Ext.isWebKit){var bs=bd.getAttribute("style"),m=bs.match(/text-align:(.*?);/i);m&&m[1]&&(html='<div style="'+m[0]+'">'+html+"</div>")}html=this.cleanHtml(html),this.fireEvent("beforesync",this,html)!==!1&&(this.el.dom.value=html,this.fireEvent("sync",this,html))}},getValue:function(){return this[this.sourceEditMode?"pushValue":"syncValue"](),Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var v=this.el.dom.value;!this.activated&&v.length<1&&(v=this.defaultValue),this.fireEvent("beforepush",this,v)!==!1&&(this.getEditorBody().innerHTML=v,Ext.isGecko&&(this.setDesignMode(!1),this.setDesignMode(!0)),this.fireEvent("push",this,v))}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){this.win&&!this.sourceEditMode?this.win.focus():this.el.focus()},initEditor:function(){try{var doc,fn,dbody=this.getEditorBody(),ss=this.el.getStyles("font-size","font-family","background-image","background-repeat","background-color","color");if(ss["background-attachment"]="fixed",dbody.bgProperties="fixed",Ext.DomHelper.applyStyles(dbody,ss),doc=this.getDoc())try{Ext.EventManager.removeAll(doc)}catch(e){}fn=this.onEditorEvent.createDelegate(this),Ext.EventManager.on(doc,{mousedown:fn,dblclick:fn,click:fn,keyup:fn,buffer:100}),Ext.isGecko&&Ext.EventManager.on(doc,"keypress",this.applyCommand,this),(Ext.isIE||Ext.isWebKit||Ext.isOpera)&&Ext.EventManager.on(doc,"keydown",this.fixKeys,this),doc.editorInitialized=!0,this.initialized=!0,this.pushValue(),this.setReadOnly(this.readOnly),this.fireEvent("initialize",this)}catch(e){}},beforeDestroy:function(){if(this.monitorTask&&Ext.TaskMgr.stop(this.monitorTask),this.readyTask&&Ext.TaskMgr.stop(this.readyTask),this.rendered){Ext.destroy(this.tb);var doc=this.getDoc();if(Ext.EventManager.removeFromSpecialCache(doc),doc)try{Ext.EventManager.removeAll(doc);for(var prop in doc)delete doc[prop]}catch(e){}this.wrap&&(this.wrap.dom.innerHTML="",this.wrap.remove())}Ext.form.HtmlEditor.superclass.beforeDestroy.call(this)},onFirstFocus:function(){if(this.activated=!0,this.disableItems(this.readOnly),Ext.isGecko){this.win.focus();var s=this.win.getSelection();if(!s.focusNode||3!=s.focusNode.nodeType){var r=s.getRangeAt(0);r.selectNodeContents(this.getEditorBody()),r.collapse(!0),this.deferFocus()}try{this.execCmd("useCSS",!0),this.execCmd("styleWithCSS",!1)}catch(e){}}this.fireEvent("activate",this)},adjustFont:function(btn){var adjust="increasefontsize"==btn.getItemId()?1:-1,doc=this.getDoc(),v=parseInt(doc.queryCommandValue("FontSize")||2,10);Ext.isSafari&&!Ext.isSafari2||Ext.isChrome||Ext.isAir?(v=10>=v?1+adjust:13>=v?2+adjust:16>=v?3+adjust:18>=v?4+adjust:24>=v?5+adjust:6+adjust,v=v.constrain(1,6)):(Ext.isSafari&&(adjust*=2),v=Math.max(1,v+adjust)+(Ext.isSafari?"px":0)),this.execCmd("FontSize",v)},onEditorEvent:function(e){this.updateToolbar()},updateToolbar:function(){if(!this.readOnly){if(!this.activated)return void this.onFirstFocus();var btns=this.tb.items.map,doc=this.getDoc();if(this.enableFont&&!Ext.isSafari2){var name=(doc.queryCommandValue("FontName")||this.defaultFont).toLowerCase();name!=this.fontSelect.dom.value&&(this.fontSelect.dom.value=name)}this.enableFormat&&(btns.bold.toggle(doc.queryCommandState("bold")),btns.italic.toggle(doc.queryCommandState("italic")),btns.underline.toggle(doc.queryCommandState("underline"))),this.enableAlignments&&(btns.justifyleft.toggle(doc.queryCommandState("justifyleft")),btns.justifycenter.toggle(doc.queryCommandState("justifycenter")),btns.justifyright.toggle(doc.queryCommandState("justifyright"))),!Ext.isSafari2&&this.enableLists&&(btns.insertorderedlist.toggle(doc.queryCommandState("insertorderedlist")),btns.insertunorderedlist.toggle(doc.queryCommandState("insertunorderedlist"))),Ext.menu.MenuMgr.hideAll(),this.syncValue()}},relayBtnCmd:function(btn){this.relayCmd(btn.getItemId())},relayCmd:function(cmd,value){(function(){this.focus(),this.execCmd(cmd,value),this.updateToolbar()}).defer(10,this)},execCmd:function(cmd,value){var doc=this.getDoc();doc.execCommand(cmd,!1,void 0===value?null:value),this.syncValue()},applyCommand:function(e){if(e.ctrlKey){var cmd,c=e.getCharCode();if(c>0){switch(c=String.fromCharCode(c)){case"b":cmd="bold";break;case"i":cmd="italic";break;case"u":cmd="underline"}cmd&&(this.win.focus(),this.execCmd(cmd),this.deferFocus(),e.preventDefault())}}},insertAtCursor:function(text){if(this.activated)if(Ext.isIE){this.win.focus();var doc=this.getDoc(),r=doc.selection.createRange();r&&(r.pasteHTML(text),this.syncValue(),this.deferFocus())}else this.win.focus(),this.execCmd("InsertHTML",text),this.deferFocus()},fixKeys:function(){return Ext.isIE?function(e){var r,k=e.getKey(),doc=this.getDoc();if(k==e.TAB)e.stopEvent(),r=doc.selection.createRange(),r&&(r.collapse(!0),r.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus());else if(k==e.ENTER&&(r=doc.selection.createRange())){var target=r.parentElement();target&&"li"==target.tagName.toLowerCase()||(e.stopEvent(),r.pasteHTML("<br />"),r.collapse(!1),r.select())}}:Ext.isOpera?function(e){var k=e.getKey();k==e.TAB&&(e.stopEvent(),this.win.focus(),this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;"),this.deferFocus())}:Ext.isWebKit?function(e){var k=e.getKey();k==e.TAB?(e.stopEvent(),this.execCmd("InsertText","	"),this.deferFocus()):k==e.ENTER&&(e.stopEvent(),this.execCmd("InsertHtml","<br /><br />"),this.deferFocus())}:void 0}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}}),Ext.reg("htmleditor",Ext.form.HtmlEditor),Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:void 0,maxValue:void 0,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,mode:"local",triggerAction:"all",typeAhead:!1,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){Ext.isDefined(this.minValue)&&this.setMinValue(this.minValue,!0),Ext.isDefined(this.maxValue)&&this.setMaxValue(this.maxValue,!0),this.store||this.generateStore(!0),Ext.form.TimeField.superclass.initComponent.call(this)},setMinValue:function(value,initial){return this.setLimit(value,!0,initial),this},setMaxValue:function(value,initial){return this.setLimit(value,!1,initial),this},generateStore:function(initial){for(var min=this.minValue||new Date(this.initDate).clearTime(),max=this.maxValue||new Date(this.initDate).clearTime().add("mi",1439),times=[];max>=min;)times.push(min.dateFormat(this.format)),min=min.add("mi",this.increment);this.bindStore(times,initial)},setLimit:function(value,isMin,initial){var d;if(Ext.isString(value)?d=this.parseDate(value):Ext.isDate(value)&&(d=value),d){var val=new Date(this.initDate).clearTime();val.setHours(d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()),this[isMin?"minValue":"maxValue"]=val,initial||this.generateStore()}},getValue:function(){var v=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(v))||""},setValue:function(value){return Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(value)))},validateValue:Ext.form.DateField.prototype.validateValue,formatDate:Ext.form.DateField.prototype.formatDate,parseDate:function(value){if(!value||Ext.isDate(value))return value;var id=this.initDate+" ",idf=this.initDateFormat+" ",v=Date.parseDate(id+value,idf+this.format),af=this.altFormats;if(!v&&af){this.altFormatsArray||(this.altFormatsArray=af.split("|"));for(var i=0,afa=this.altFormatsArray,len=afa.length;len>i&&!v;i++)v=Date.parseDate(id+value,idf+afa[i])}return v}}),Ext.reg("timefield",Ext.form.TimeField),Ext.form.SliderField=Ext.extend(Ext.form.Field,{useTips:!0,tipText:null,actionMode:"wrap",initComponent:function(){var cfg=Ext.copyTo({id:this.id+"-slider"},this.initialConfig,["vertical","minValue","maxValue","decimalPrecision","keyIncrement","increment","clickToChange","animate"]);if(this.useTips){var plug=this.tipText?{getText:this.tipText}:{};cfg.plugins=[new Ext.slider.Tip(plug)]}this.slider=new Ext.Slider(cfg),Ext.form.SliderField.superclass.initComponent.call(this)},onRender:function(ct,position){this.autoCreate={id:this.id,name:this.name,type:"hidden",tag:"input"},Ext.form.SliderField.superclass.onRender.call(this,ct,position),this.wrap=this.el.wrap({cls:"x-form-field-wrap"}),this.resizeEl=this.positionEl=this.wrap,this.slider.render(this.wrap)},onResize:function(w,h,aw,ah){Ext.form.SliderField.superclass.onResize.call(this,w,h,aw,ah),this.slider.setSize(w,h)},initEvents:function(){Ext.form.SliderField.superclass.initEvents.call(this),this.slider.on("change",this.onChange,this)},onChange:function(slider,v){this.setValue(v,void 0,!0)},onEnable:function(){Ext.form.SliderField.superclass.onEnable.call(this),this.slider.enable()},onDisable:function(){Ext.form.SliderField.superclass.onDisable.call(this),this.slider.disable()},beforeDestroy:function(){Ext.destroy(this.slider),Ext.form.SliderField.superclass.beforeDestroy.call(this)},alignErrorIcon:function(){this.errorIcon.alignTo(this.slider.el,"tl-tr",[2,0])},setMinValue:function(v){return this.slider.setMinValue(v),this},setMaxValue:function(v){return this.slider.setMaxValue(v),this},setValue:function(v,animate,silent){return silent||this.slider.setValue(v,animate),Ext.form.SliderField.superclass.setValue.call(this,this.slider.getValue())},getValue:function(){return this.slider.getValue()}}),Ext.reg("sliderfield",Ext.form.SliderField),Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(ct,position){this.el||(this.el=document.createElement("label"),this.el.id=this.getId(),this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):this.html||"",this.forId&&this.el.setAttribute("for",this.forId)),Ext.form.Label.superclass.onRender.call(this,ct,position)},setText:function(t,encode){var e=encode===!1;return this[e?"html":"text"]=t,delete this[e?"text":"html"],this.rendered&&(this.el.dom.innerHTML=encode!==!1?Ext.util.Format.htmlEncode(t):t),this}}),Ext.reg("label",Ext.form.Label),Ext.form.Action=function(form,options){this.form=form,this.options=options||{}},Ext.form.Action.CLIENT_INVALID="client",Ext.form.Action.SERVER_INVALID="server",Ext.form.Action.CONNECT_FAILURE="connect",Ext.form.Action.LOAD_FAILURE="load",Ext.form.Action.prototype={type:"default",run:function(options){},success:function(response){},handleResponse:function(response){},failure:function(response){this.response=response,this.failureType=Ext.form.Action.CONNECT_FAILURE,this.form.afterAction(this,!1)},processResponse:function(response){return this.response=response,response.responseText||response.responseXML?(this.result=this.handleResponse(response),this.result):!0},decodeResponse:function(response){try{return Ext.decode(response.responseText)}catch(e){return!1}},getUrl:function(appendParams){var url=this.options.url||this.form.url||this.form.el.dom.action;if(appendParams){var p=this.getParams();p&&(url=Ext.urlAppend(url,p))}return url},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var bp=this.form.baseParams,p=this.options.params;return p?"object"==typeof p?p=Ext.urlEncode(Ext.applyIf(p,bp)):"string"==typeof p&&bp&&(p+="&"+Ext.urlEncode(bp)):bp&&(p=Ext.urlEncode(bp)),p},createCallback:function(opts){var opts=opts||{};return{success:this.success,failure:this.failure,scope:this,timeout:1e3*opts.timeout||1e3*this.form.timeout,upload:this.form.fileUpload?this.success:void 0}}},Ext.form.Action.Submit=function(form,options){Ext.form.Action.Submit.superclass.constructor.call(this,form,options)},Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var o=this.options,method=this.getMethod(),isGet="GET"==method;if(o.clientValidation===!1||this.form.isValid()){if(o.submitEmptyText===!1){var fields=this.form.items,emptyFields=[],setupEmptyFields=function(f){f.el.getValue()==f.emptyText&&(emptyFields.push(f),f.el.dom.value=""),f.isComposite&&f.rendered&&f.items.each(setupEmptyFields)};fields.each(setupEmptyFields)}Ext.Ajax.request(Ext.apply(this.createCallback(o),{form:this.form.el.dom,url:this.getUrl(isGet),method:method,headers:o.headers,params:isGet?null:this.getParams(),isUpload:this.form.fileUpload})),o.submitEmptyText===!1&&Ext.each(emptyFields,function(f){f.applyEmptyText&&f.applyEmptyText()})}else o.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},success:function(response){var result=this.processResponse(response);return result===!0||result.success?void this.form.afterAction(this,!0):(result.errors&&this.form.markInvalid(result.errors),this.failureType=Ext.form.Action.SERVER_INVALID,void this.form.afterAction(this,!1))},handleResponse:function(response){if(this.form.errorReader){var rs=this.form.errorReader.read(response),errors=[];if(rs.records)for(var i=0,len=rs.records.length;len>i;i++){var r=rs.records[i];errors[i]=r.data}return errors.length<1&&(errors=null),{success:rs.success,errors:errors}}return this.decodeResponse(response)}}),Ext.form.Action.Load=function(form,options){Ext.form.Action.Load.superclass.constructor.call(this,form,options),this.reader=this.form.reader},Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(!1),headers:this.options.headers,params:this.getParams()}))},success:function(response){var result=this.processResponse(response);return result!==!0&&result.success&&result.data?(this.form.clearInvalid(),this.form.setValues(result.data),void this.form.afterAction(this,!0)):(this.failureType=Ext.form.Action.LOAD_FAILURE,void this.form.afterAction(this,!1))},handleResponse:function(response){if(this.form.reader){var rs=this.form.reader.read(response),data=rs.records&&rs.records[0]?rs.records[0].data:null;return{success:rs.success,data:data}}return this.decodeResponse(response)}}),Ext.form.Action.DirectLoad=Ext.extend(Ext.form.Action.Load,{constructor:function(form,opts){Ext.form.Action.DirectLoad.superclass.constructor.call(this,form,opts)},type:"directload",run:function(){var args=this.getParams();args.push(this.success,this),this.form.api.load.apply(window,args)},getParams:function(){var buf=[],o={},bp=this.form.baseParams,p=this.options.params;Ext.apply(o,p,bp);var paramOrder=this.form.paramOrder;if(paramOrder)for(var i=0,len=paramOrder.length;len>i;i++)buf.push(o[paramOrder[i]]);else this.form.paramsAsHash&&buf.push(o);return buf},processResponse:function(result){return this.result=result,result},success:function(response,trans){trans.type==Ext.Direct.exceptions.SERVER&&(response={}),Ext.form.Action.DirectLoad.superclass.success.call(this,response)}}),Ext.form.Action.DirectSubmit=Ext.extend(Ext.form.Action.Submit,{constructor:function(form,opts){Ext.form.Action.DirectSubmit.superclass.constructor.call(this,form,opts)},type:"directsubmit",run:function(){var o=this.options;o.clientValidation===!1||this.form.isValid()?(this.success.params=this.getParams(),this.form.api.submit(this.form.el.dom,this.success,this)):o.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},getParams:function(){var o={},bp=this.form.baseParams,p=this.options.params;return Ext.apply(o,p,bp),o},processResponse:function(result){return this.result=result,result},success:function(response,trans){trans.type==Ext.Direct.exceptions.SERVER&&(response={}),Ext.form.Action.DirectSubmit.superclass.success.call(this,response)}}),Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit,directload:Ext.form.Action.DirectLoad,directsubmit:Ext.form.Action.DirectSubmit},Ext.form.VTypes=function(){var alpha=/^[a-zA-Z_]+$/,alphanum=/^[a-zA-Z0-9_]+$/,email=/^(\w+)([\-+.\'][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,url=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(v){return email.test(v)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-\+\'@]/i,url:function(v){return url.test(v)},urlText:'This field should be a URL in the format "http://www.example.com"',alpha:function(v){return alpha.test(v)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(v){return alphanum.test(v)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}(),Ext.grid.GridPanel=Ext.extend(Ext.Panel,{autoExpandColumn:!1,autoExpandMax:1e3,autoExpandMin:50,columnLines:!1,ddText:"{0} selected row{1}",deferRowRender:!0,enableColumnHide:!0,enableColumnMove:!0,enableDragDrop:!1,enableHdMenu:!0,loadMask:!1,minColumnWidth:25,stripeRows:!1,trackMouseOver:!0,stateEvents:["columnmove","columnresize","sortchange","groupchange"],view:null,bubbleEvents:[],rendered:!1,viewReady:!1,initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this),this.columnLines&&(this.cls=(this.cls||"")+" x-grid-with-col-lines"),this.autoScroll=!1,this.autoWidth=!1,Ext.isArray(this.columns)&&(this.colModel=new Ext.grid.ColumnModel(this.columns),delete this.columns),this.ds&&(this.store=this.ds,delete this.ds),this.cm&&(this.colModel=this.cm,delete this.cm),this.sm&&(this.selModel=this.sm,delete this.sm),this.store=Ext.StoreMgr.lookup(this.store),this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","groupmousedown","rowbodymousedown","containermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","groupclick","groupdblclick","containerclick","containerdblclick","rowbodyclick","rowbodydblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","groupcontextmenu","containercontextmenu","rowbodycontextmenu","bodyscroll","columnresize","columnmove","sortchange","groupchange","reconfigure","viewready")},onRender:function(ct,position){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var c=this.getGridEl();this.el.addClass("x-grid-panel"),this.mon(c,{scope:this,mousedown:this.onMouseDown,click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu}),this.relayEvents(c,["mousedown","mouseup","mouseover","mouseout","keypress","keydown"]);var view=this.getView();view.init(this),view.render(),this.getSelectionModel().init(this)},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this),this.loadMask&&(this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask)))},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this),this.mon(this.colModel,"hiddenchange",this.saveState,this,{delay:100})},applyState:function(state){var s,c,colIndex,cm=this.colModel,cs=state.columns,store=this.store;if(cs)for(var i=0,len=cs.length;len>i;i++)s=cs[i],c=cm.getColumnById(s.id),c&&(colIndex=cm.getIndexById(s.id),cm.setState(colIndex,{hidden:s.hidden,width:s.width,sortable:c.sortable,editable:c.editable}),colIndex!=i&&cm.moveColumn(colIndex,i));store&&(s=state.sort,s&&store[store.remoteSort?"setDefaultSort":"sort"](s.field,s.direction),s=state.group,store.groupBy&&(s?store.groupBy(s):store.clearGrouping()));var o=Ext.apply({},state);delete o.columns,delete o.sort,Ext.grid.GridPanel.superclass.applyState.call(this,o)},getState:function(){for(var ss,gs,c,o={columns:[]},store=this.store,i=0;c=this.colModel.config[i];i++)o.columns[i]={id:c.id,width:c.width},c.hidden&&(o.columns[i].hidden=!0);return store&&(ss=store.getSortState(),ss&&(o.sort=ss),store.getGroupState&&(gs=store.getGroupState(),gs&&(o.group=gs))),o},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);var v=this.view;this.on("bodyresize",v.layout,v),v.layout(!0),this.deferRowRender?(this.deferRowRenderTask||(this.deferRowRenderTask=new Ext.util.DelayedTask(v.afterRender,this.view)),this.deferRowRenderTask.delay(10)):v.afterRender(),this.viewReady=!0},reconfigure:function(store,colModel){var rendered=this.rendered;rendered&&this.loadMask&&(this.loadMask.destroy(),this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:store},this.initialConfig.loadMask))),this.view&&this.view.initData(store,colModel),this.store=store,this.colModel=colModel,rendered&&this.view.refresh(!0),this.fireEvent("reconfigure",this,store,colModel)},onDestroy:function(){this.deferRowRenderTask&&this.deferRowRenderTask.cancel&&this.deferRowRenderTask.cancel(),this.rendered?Ext.destroy(this.view,this.loadMask):this.store&&this.store.autoDestroy&&this.store.destroy(),Ext.destroy(this.colModel,this.selModel),this.store=this.selModel=this.colModel=this.view=this.loadMask=null,Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(name,e){this.view.processEvent(name,e)},onClick:function(e){this.processEvent("click",e)},onMouseDown:function(e){this.processEvent("mousedown",e)},onContextMenu:function(e,t){this.processEvent("contextmenu",e)},onDblClick:function(e){this.processEvent("dblclick",e)},walkCells:function(row,col,step,fn,scope){var cm=this.colModel,clen=cm.getColumnCount(),ds=this.store,rlen=ds.getCount(),first=!0;if(0>step)for(0>col&&(row--,first=!1);row>=0;){for(first||(col=clen-1),first=!1;col>=0;){if(fn.call(scope||this,row,col,cm)===!0)return[row,col];col--}row--}else for(col>=clen&&(row++,first=!1);rlen>row;){for(first||(col=0),first=!1;clen>col;){if(fn.call(scope||this,row,col,cm)===!0)return[row,col];col++}row++}return null},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){return this.selModel||(this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)),this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){return this.view||(this.view=new Ext.grid.GridView(this.viewConfig)),this.view},getDragDropText:function(){var count=this.selModel.getCount?this.selModel.getCount():1;return String.format(this.ddText,count,1==count?"":"s")}}),Ext.reg("grid",Ext.grid.GridPanel),Ext.grid.PivotGrid=Ext.extend(Ext.grid.GridPanel,{aggregator:"sum",renderer:void 0,initComponent:function(){Ext.grid.PivotGrid.superclass.initComponent.apply(this,arguments),this.initAxes(),this.enableColumnResize=!1,this.viewConfig=Ext.apply(this.viewConfig||{},{forceFit:!0}),this.colModel=new Ext.grid.ColumnModel({})},getAggregator:function(){return"string"==typeof this.aggregator?Ext.grid.PivotAggregatorMgr.types[this.aggregator]:this.aggregator},setAggregator:function(aggregator){this.aggregator=aggregator},setMeasure:function(measure){this.measure=measure},setLeftAxis:function(axis,refresh){this.leftAxis=axis,refresh&&this.view.refresh()},setTopAxis:function(axis,refresh){this.topAxis=axis,refresh&&this.view.refresh()},initAxes:function(){var PivotAxis=Ext.grid.PivotAxis;this.leftAxis instanceof PivotAxis||this.setLeftAxis(new PivotAxis({orientation:"vertical",dimensions:this.leftAxis||[],store:this.store})),this.topAxis instanceof PivotAxis||this.setTopAxis(new PivotAxis({orientation:"horizontal",dimensions:this.topAxis||[],store:this.store}))},extractData:function(){var record,i,j,k,records=this.store.data.items,recCount=records.length,cells=[];if(0==recCount)return[];var leftTuples=this.leftAxis.getTuples(),leftCount=leftTuples.length,topTuples=this.topAxis.getTuples(),topCount=topTuples.length,aggregator=this.getAggregator();for(i=0;recCount>i;i++)for(record=records[i],j=0;leftCount>j;j++)if(cells[j]=cells[j]||[],leftTuples[j].matcher(record)===!0)for(k=0;topCount>k;k++)cells[j][k]=cells[j][k]||[],topTuples[k].matcher(record)&&cells[j][k].push(record);var colCount,row,rowCount=cells.length;for(i=0;rowCount>i;i++)for(row=cells[i],colCount=row.length,j=0;colCount>j;j++)cells[i][j]=aggregator(cells[i][j],this.measure);return cells},getView:function(){return this.view||(this.view=new Ext.grid.PivotGridView(this.viewConfig)),this.view}}),Ext.reg("pivotgrid",Ext.grid.PivotGrid),Ext.grid.PivotAggregatorMgr=new Ext.AbstractManager,Ext.grid.PivotAggregatorMgr.registerType("sum",function(records,measure){var i,length=records.length,total=0;for(i=0;length>i;i++)total+=records[i].get(measure);return total}),Ext.grid.PivotAggregatorMgr.registerType("avg",function(records,measure){var i,length=records.length,total=0;for(i=0;length>i;i++)total+=records[i].get(measure);return total/length||"n/a"}),Ext.grid.PivotAggregatorMgr.registerType("min",function(records,measure){var i,data=[],length=records.length;for(i=0;length>i;i++)data.push(records[i].get(measure));return Math.min.apply(this,data)||"n/a"}),Ext.grid.PivotAggregatorMgr.registerType("max",function(records,measure){var i,data=[],length=records.length;for(i=0;length>i;i++)data.push(records[i].get(measure));return Math.max.apply(this,data)||"n/a"}),Ext.grid.PivotAggregatorMgr.registerType("count",function(records,measure){return records.length}),Ext.grid.GridView=Ext.extend(Ext.util.Observable,{deferEmptyText:!0,scrollOffset:void 0,autoFill:!1,forceFit:!1,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",hideSortIcons:!1,columnsText:"Columns",selectedRowClass:"x-grid3-row-selected",borderWidth:2,tdClass:"x-grid3-cell",hdCls:"x-grid3-hd",markDirty:!0,cellSelectorDepth:4,rowSelectorDepth:10,rowBodySelectorDepth:10,cellSelector:"td.x-grid3-cell",rowSelector:"div.x-grid3-row",rowBodySelector:"div.x-grid3-row-body",firstRowCls:"x-grid3-row-first",lastRowCls:"x-grid3-row-last",rowClsRe:/(?:^|\s+)x-grid3-row-(first|last|alt)(?:\s+|$)/g,headerMenuOpenCls:"x-grid3-hd-menu-open",rowOverCls:"x-grid3-row-over",constructor:function(config){Ext.apply(this,config),this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh"),Ext.grid.GridView.superclass.constructor.call(this)},masterTpl:new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}">{header}</div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),headerTpl:new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<thead>",'<tr class="x-grid3-hd-row">{cells}</tr>',"</thead>","</table>"),bodyTpl:new Ext.Template("{rows}"),cellTpl:new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id} x-unselectable" unselectable="on" {attr}>{value}</div>',"</td>"),initTemplates:function(){var template,name,templates=this.templates||{},headerCellTpl=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}">','<div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}",'<img alt="" class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div>","</td>"),rowBodyText=['<tr class="x-grid3-row-body-tr" style="{bodyStyle}">','<td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on">','<div class="x-grid3-row-body">{body}</div>',"</td>","</tr>"].join(""),innerText=['<table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody>","<tr>{cells}</tr>",this.enableRowBody?rowBodyText:"","</tbody>","</table>"].join("");
Ext.applyIf(templates,{hcell:headerCellTpl,cell:this.cellTpl,body:this.bodyTpl,header:this.headerTpl,master:this.masterTpl,row:new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}">'+innerText+"</div>"),rowInner:new Ext.Template(innerText)});for(name in templates)template=templates[name],template&&Ext.isFunction(template.compile)&&!template.compiled&&(template.disableFormats=!0,template.compile());this.templates=templates,this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(el){return this._flyweight||(this._flyweight=new Ext.Element.Flyweight(document.body)),this._flyweight.dom=el,this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var Element=Ext.Element,el=Ext.get(this.grid.getGridEl().dom.firstChild),mainWrap=new Element(el.child("div.x-grid3-viewport")),mainHd=new Element(mainWrap.child("div.x-grid3-header")),scroller=new Element(mainWrap.child("div.x-grid3-scroller"));this.grid.hideHeaders&&mainHd.setDisplayed(!1),this.forceFit&&scroller.setStyle("overflow-x","hidden"),Ext.apply(this,{el:el,mainWrap:mainWrap,scroller:scroller,mainHd:mainHd,innerHd:mainHd.child("div.x-grid3-header-inner").dom,mainBody:new Element(Element.fly(scroller).child("div.x-grid3-body")),focusEl:new Element(Element.fly(scroller).child("a")),resizeMarker:new Element(el.child("div.x-grid3-resize-marker")),resizeProxy:new Element(el.child("div.x-grid3-resize-proxy"))}),this.focusEl.swallowEvent("click",!0)},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(el){return el?this.fly(el).findParent(this.cellSelector,this.cellSelectorDepth):!1},findCellIndex:function(el,requiredCls){var hasCls,cell=this.findCell(el);return cell&&(hasCls=this.fly(cell).hasClass(requiredCls),!requiredCls||hasCls)?this.getCellIndex(cell):!1},getCellIndex:function(el){if(el){var match=el.className.match(this.colRe);if(match&&match[1])return this.cm.getIndexById(match[1])}return!1},findHeaderCell:function(el){var cell=this.findCell(el);return cell&&this.fly(cell).hasClass(this.hdCls)?cell:null},findHeaderIndex:function(el){return this.findCellIndex(el,this.hdCls)},findRow:function(el){return el?this.fly(el).findParent(this.rowSelector,this.rowSelectorDepth):!1},findRowIndex:function(el){var row=this.findRow(el);return row?row.rowIndex:!1},findRowBody:function(el){return el?this.fly(el).findParent(this.rowBodySelector,this.rowBodySelectorDepth):!1},getRow:function(row){return this.getRows()[row]},getCell:function(row,col){return Ext.fly(this.getRow(row)).query(this.cellSelector)[col]},getHeaderCell:function(index){return this.mainHd.dom.getElementsByTagName("td")[index]},addRowClass:function(rowId,cls){var row=this.getRow(rowId);row&&this.fly(row).addClass(cls)},removeRowClass:function(row,cls){var r=this.getRow(row);r&&this.fly(r).removeClass(cls)},removeRow:function(row){Ext.removeNode(this.getRow(row)),this.syncFocusEl(row)},removeRows:function(firstRow,lastRow){var rowIndex,bd=this.mainBody.dom;for(rowIndex=firstRow;lastRow>=rowIndex;rowIndex++)Ext.removeNode(bd.childNodes[firstRow]);this.syncFocusEl(firstRow)},getScrollState:function(){var sb=this.scroller.dom;return{left:sb.scrollLeft,top:sb.scrollTop}},restoreScroll:function(state){var sb=this.scroller.dom;sb.scrollLeft=state.left,sb.scrollTop=state.top},scrollToTop:function(){var dom=this.scroller.dom;dom.scrollTop=0,dom.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var mb=this.scroller.dom;this.grid.fireEvent("bodyscroll",mb.scrollLeft,mb.scrollTop)},syncHeaderScroll:function(){var innerHd=this.innerHd,scrollLeft=this.scroller.dom.scrollLeft;innerHd.scrollLeft=scrollLeft,innerHd.scrollLeft=scrollLeft},updateSortIcon:function(col,dir){var sortClasses=this.sortClasses,sortClass=sortClasses["DESC"==dir?1:0],headers=this.mainHd.select("td").removeClass(sortClasses);headers.item(col).addClass(sortClass)},updateAllColumnWidths:function(){var row,rowFirstChild,trow,i,j,totalWidth=this.getTotalWidth(),colCount=this.cm.getColumnCount(),rows=this.getRows(),rowCount=rows.length,widths=[];for(i=0;colCount>i;i++)widths[i]=this.getColumnWidth(i),this.getHeaderCell(i).style.width=widths[i];for(this.updateHeaderWidth(),i=0;rowCount>i;i++)if(row=rows[i],row.style.width=totalWidth,rowFirstChild=row.firstChild)for(rowFirstChild.style.width=totalWidth,trow=rowFirstChild.rows[0],j=0;colCount>j;j++)trow.childNodes[j].style.width=widths[j];this.onAllColumnWidthsUpdated(widths,totalWidth)},updateColumnWidth:function(column,width){var row,i,firstChild,columnWidth=this.getColumnWidth(column),totalWidth=this.getTotalWidth(),headerCell=this.getHeaderCell(column),nodes=this.getRows(),nodeCount=nodes.length;for(this.updateHeaderWidth(),headerCell.style.width=columnWidth,i=0;nodeCount>i;i++)row=nodes[i],firstChild=row.firstChild,row.style.width=totalWidth,firstChild&&(firstChild.style.width=totalWidth,firstChild.rows[0].childNodes[column].style.width=columnWidth);this.onColumnWidthUpdated(column,columnWidth,totalWidth)},updateColumnHidden:function(col,hidden){var row,rowFirstChild,i,totalWidth=this.getTotalWidth(),display=hidden?"none":"",headerCell=this.getHeaderCell(col),nodes=this.getRows(),nodeCount=nodes.length;for(this.updateHeaderWidth(),headerCell.style.display=display,i=0;nodeCount>i;i++)row=nodes[i],row.style.width=totalWidth,rowFirstChild=row.firstChild,rowFirstChild&&(rowFirstChild.style.width=totalWidth,rowFirstChild.rows[0].childNodes[col].style.display=display);this.onColumnHiddenUpdated(col,hidden,totalWidth),delete this.lastViewWidth,this.layout()},doRender:function(columns,records,store,startRow,colCount,stripe){var alt,column,record,i,j,rowIndex,templates=this.templates,cellTemplate=templates.cell,rowTemplate=templates.row,last=colCount-1,tstyle="width:"+this.getTotalWidth()+";",rowBuffer=[],colBuffer=[],rowParams={tstyle:tstyle},meta={},len=records.length;for(j=0;len>j;j++){for(record=records[j],colBuffer=[],rowIndex=j+startRow,i=0;colCount>i;i++)column=columns[i],meta.id=column.id,meta.css=0===i?"x-grid3-cell-first ":i==last?"x-grid3-cell-last ":"",meta.attr=meta.cellAttr="",meta.style=column.style,meta.value=column.renderer.call(column.scope,record.data[column.name],meta,record,rowIndex,i,store),Ext.isEmpty(meta.value)&&(meta.value="&#160;"),this.markDirty&&record.dirty&&"undefined"!=typeof record.modified[column.name]&&(meta.css+=" x-grid3-dirty-cell"),colBuffer[colBuffer.length]=cellTemplate.apply(meta);alt=[],stripe&&(rowIndex+1)%2===0&&(alt[0]="x-grid3-row-alt"),record.dirty&&(alt[1]=" x-grid3-dirty-row"),rowParams.cols=colCount,this.getRowClass&&(alt[2]=this.getRowClass(record,rowIndex,rowParams,store)),rowParams.alt=alt.join(" "),rowParams.cells=colBuffer.join(""),rowBuffer[rowBuffer.length]=rowTemplate.apply(rowParams)}return rowBuffer.join("")},processRows:function(startRow,skipStripe){if(this.ds&&!(this.ds.getCount()<1)){var row,i,rows=this.getRows(),length=rows.length;for(skipStripe=skipStripe||!this.grid.stripeRows,startRow=startRow||0,i=0;length>i;i++)row=rows[i],row&&(row.rowIndex=i,skipStripe||(row.className=row.className.replace(this.rowClsRe," "),(i+1)%2===0&&(row.className+=" x-grid3-row-alt")));0===startRow&&Ext.fly(rows[0]).addClass(this.firstRowCls),Ext.fly(rows[length-1]).addClass(this.lastRowCls)}},afterRender:function(){this.ds&&this.cm&&(this.mainBody.dom.innerHTML=this.renderBody()||"&#160;",this.processRows(0,!0),this.deferEmptyText!==!0&&this.applyEmptyText(),this.grid.fireEvent("viewready",this.grid))},afterRenderUI:function(){var grid=this.grid;this.initElements(),Ext.fly(this.innerHd).on("click",this.handleHdDown,this),this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove}),this.scroller.on("scroll",this.syncScroll,this),grid.enableColumnResize!==!1&&(this.splitZone=new Ext.grid.GridView.SplitDragZone(grid,this.mainHd.dom)),grid.enableColumnMove&&(this.columnDrag=new Ext.grid.GridView.ColumnDragZone(grid,this.innerHd),this.columnDrop=new Ext.grid.HeaderDropZone(grid,this.mainHd.dom)),grid.enableHdMenu!==!1&&(this.hmenu=new Ext.menu.Menu({id:grid.id+"-hctx"}),this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"}),grid.enableColumnHide!==!1&&(this.colMenu=new Ext.menu.Menu({id:grid.id+"-hcols-menu"}),this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick}),this.hmenu.add({itemId:"sortSep",xtype:"menuseparator"},{itemId:"columns",hideOnClick:!1,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})),this.hmenu.on("itemclick",this.handleHdMenuClick,this)),grid.trackMouseOver&&this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut}),(grid.enableDragDrop||grid.enableDrag)&&(this.dragZone=new Ext.grid.GridDragZone(grid,{ddGroup:grid.ddGroup||"GridDD"})),this.updateHeaderSortState()},renderUI:function(){var templates=this.templates;return templates.master.apply({body:templates.body.apply({rows:"&#160;"}),header:this.renderHeaders(),ostyle:"width:"+this.getOffsetWidth()+";",bstyle:"width:"+this.getTotalWidth()+";"})},processEvent:function(name,e){var row,cell,col,body,target=e.getTarget(),grid=this.grid,header=this.findHeaderIndex(target);grid.fireEvent(name,e),header!==!1?grid.fireEvent("header"+name,grid,header,e):(row=this.findRowIndex(target),row!==!1?(cell=this.findCellIndex(target),cell!==!1?(col=grid.colModel.getColumnAt(cell),grid.fireEvent("cell"+name,grid,row,cell,e)!==!1&&(!col||col.processEvent&&col.processEvent(name,e,grid,row,cell)!==!1)&&grid.fireEvent("row"+name,grid,row,e)):grid.fireEvent("row"+name,grid,row,e)!==!1&&(body=this.findRowBody(target))&&grid.fireEvent("rowbody"+name,grid,row,e)):grid.fireEvent("container"+name,grid,e))},layout:function(initial){if(this.mainBody){var scrollStyle,headerHeight,scrollHeight,grid=this.grid,gridEl=grid.getGridEl(),gridSize=gridEl.getSize(!0),gridWidth=gridSize.width,gridHeight=gridSize.height,scroller=this.scroller;20>gridWidth||20>gridHeight||(grid.autoHeight?(scrollStyle=scroller.dom.style,scrollStyle.overflow="visible",Ext.isWebKit&&(scrollStyle.position="static")):(this.el.setSize(gridWidth,gridHeight),headerHeight=this.mainHd.getHeight(),scrollHeight=gridHeight-headerHeight,scroller.setSize(gridWidth,scrollHeight),this.innerHd&&(this.innerHd.style.width=gridWidth+"px")),this.forceFit||initial===!0&&this.autoFill?this.lastViewWidth!=gridWidth&&(this.fitColumns(!1,!1),this.lastViewWidth=gridWidth):(this.autoExpand(),this.syncHeaderScroll()),this.onLayout(gridWidth,scrollHeight))}},onLayout:function(vw,vh){},onColumnWidthUpdated:function(col,w,tw){},onAllColumnWidthsUpdated:function(ws,tw){},onColumnHiddenUpdated:function(col,hidden,tw){},updateColumnText:function(col,text){},afterMove:function(colIndex){},init:function(grid){this.grid=grid,this.initTemplates(),this.initData(grid.store,grid.colModel),this.initUI(grid)},getColumnId:function(index){return this.cm.getColumnId(index)},getOffsetWidth:function(){return this.cm.getTotalWidth()+this.getScrollOffset()+"px"},getScrollOffset:function(){return Ext.num(this.scrollOffset,Ext.getScrollBarWidth())},renderHeaders:function(){var i,cssCls,colModel=this.cm,templates=this.templates,headerTpl=templates.hcell,properties={},colCount=colModel.getColumnCount(),last=colCount-1,cells=[];for(i=0;colCount>i;i++)cssCls=0==i?"x-grid3-cell-first ":i==last?"x-grid3-cell-last ":"",properties={id:colModel.getColumnId(i),value:colModel.getColumnHeader(i)||"",style:this.getColumnStyle(i,!0),css:cssCls,tooltip:this.getColumnTooltip(i)},"right"==colModel.config[i].align?properties.istyle="padding-right: 16px;":delete properties.istyle,cells[i]=headerTpl.apply(properties);return templates.header.apply({cells:cells.join(""),tstyle:String.format("width: {0};",this.getTotalWidth())})},getColumnTooltip:function(i){var tooltip=this.cm.getColumnTooltip(i);return tooltip?Ext.QuickTips.isEnabled()?'ext:qtip="'+tooltip+'"':'title="'+tooltip+'"':""},beforeUpdate:function(){this.grid.stopEditing(!0)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders(),this.updateHeaderWidth(!1)},updateHeaderWidth:function(updateMain){var innerHdChild=this.innerHd.firstChild,totalWidth=this.getTotalWidth();innerHdChild.style.width=this.getOffsetWidth(),innerHdChild.firstChild.style.width=totalWidth,updateMain!==!1&&(this.mainBody.dom.style.width=totalWidth)},focusRow:function(row){this.focusCell(row,0,!1)},focusCell:function(row,col,hscroll){this.syncFocusEl(this.ensureVisible(row,col,hscroll));var focusEl=this.focusEl;Ext.isGecko?focusEl.focus():focusEl.focus.defer(1,focusEl)},resolveCell:function(row,col,hscroll){if(Ext.isNumber(row)||(row=row.rowIndex),!this.ds)return null;if(0>row||row>=this.ds.getCount())return null;col=void 0!==col?col:0;var cellEl,rowEl=this.getRow(row),colModel=this.cm,colCount=colModel.getColumnCount();if(hscroll!==!1||0!==col){for(;colCount>col&&colModel.isHidden(col);)col++;cellEl=this.getCell(row,col)}return{row:rowEl,cell:cellEl}},getResolvedXY:function(resolved){if(!resolved)return null;var cell=resolved.cell,row=resolved.row;return cell?Ext.fly(cell).getXY():[this.el.getX(),Ext.fly(row).getY()]},syncFocusEl:function(row,col,hscroll){var xy=row;if(!Ext.isArray(xy)){if(row=Math.min(row,Math.max(0,this.getRows().length-1)),isNaN(row))return;xy=this.getResolvedXY(this.resolveCell(row,col,hscroll))}this.focusEl.setXY(xy||this.scroller.getXY())},ensureVisible:function(row,col,hscroll){var resolved=this.resolveCell(row,col,hscroll);if(!resolved||!resolved.row)return null;for(var rowEl=resolved.row,cellEl=resolved.cell,c=this.scroller.dom,p=rowEl,ctop=0,stop=this.el.dom;p&&p!=stop;)ctop+=p.offsetTop,p=p.offsetParent;ctop-=this.mainHd.dom.offsetHeight,stop=parseInt(c.scrollTop,10);var cbot=ctop+rowEl.offsetHeight,ch=c.clientHeight,sbot=stop+ch;if(stop>ctop?c.scrollTop=ctop:cbot>sbot&&(c.scrollTop=cbot-ch),hscroll!==!1){var cleft=parseInt(cellEl.offsetLeft,10),cright=cleft+cellEl.offsetWidth,sleft=parseInt(c.scrollLeft,10),sright=sleft+c.clientWidth;sleft>cleft?c.scrollLeft=cleft:cright>sright&&(c.scrollLeft=cright-c.clientWidth)}return this.getResolvedXY(resolved)},insertRows:function(dm,firstRow,lastRow,isUpdate){var last=dm.getCount()-1;if(!isUpdate&&0===firstRow&&lastRow>=last)this.fireEvent("beforerowsinserted",this,firstRow,lastRow),this.refresh(),this.fireEvent("rowsinserted",this,firstRow,lastRow);else{isUpdate||this.fireEvent("beforerowsinserted",this,firstRow,lastRow);var html=this.renderRows(firstRow,lastRow),before=this.getRow(firstRow);if(before)0===firstRow&&Ext.fly(this.getRow(0)).removeClass(this.firstRowCls),Ext.DomHelper.insertHtml("beforeBegin",before,html);else{var r=this.getRow(last-1);r&&Ext.fly(r).removeClass(this.lastRowCls),Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,html)}isUpdate?(0===firstRow||firstRow>=last)&&Ext.fly(this.getRow(firstRow)).addClass(0===firstRow?this.firstRowCls:this.lastRowCls):(this.processRows(firstRow),this.fireEvent("rowsinserted",this,firstRow,lastRow))}this.syncFocusEl(firstRow)},deleteRows:function(dm,firstRow,lastRow){dm.getRowCount()<1?this.refresh():(this.fireEvent("beforerowsdeleted",this,firstRow,lastRow),this.removeRows(firstRow,lastRow),this.processRows(firstRow),this.fireEvent("rowsdeleted",this,firstRow,lastRow))},getColumnStyle:function(colIndex,isHeader){var colModel=this.cm,colConfig=colModel.config,style=isHeader?"":colConfig[colIndex].css||"",align=colConfig[colIndex].align;return style+=String.format("width: {0};",this.getColumnWidth(colIndex)),colModel.isHidden(colIndex)&&(style+="display: none; "),align&&(style+=String.format("text-align: {0};",align)),style},getColumnWidth:function(column){var columnWidth=this.cm.getColumnWidth(column),borderWidth=this.borderWidth;return Ext.isNumber(columnWidth)?Ext.isBorderBox?columnWidth+"px":Math.max(columnWidth-borderWidth,0)+"px":columnWidth},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(preventRefresh,onlyExpand,omitColumn){var colWidth,fraction,i,grid=this.grid,colModel=this.cm,totalColWidth=colModel.getTotalWidth(!1),gridWidth=this.getGridInnerWidth(),extraWidth=gridWidth-totalColWidth,columns=[],extraCol=0,width=0;if(20>gridWidth||0===extraWidth)return!1;var visibleColCount=colModel.getColumnCount(!0),totalColCount=colModel.getColumnCount(!1),adjCount=visibleColCount-(Ext.isNumber(omitColumn)?1:0);for(0===adjCount&&(adjCount=1,omitColumn=void 0),i=0;totalColCount>i;i++)colModel.isFixed(i)||i===omitColumn||(colWidth=colModel.getColumnWidth(i),columns.push(i,colWidth),colModel.isHidden(i)||(extraCol=i,width+=colWidth));for(fraction=(gridWidth-colModel.getTotalWidth())/width;columns.length;)colWidth=columns.pop(),i=columns.pop(),colModel.setColumnWidth(i,Math.max(grid.minColumnWidth,Math.floor(colWidth+colWidth*fraction)),!0);if(totalColWidth=colModel.getTotalWidth(!1),totalColWidth>gridWidth){var adjustCol=adjCount==visibleColCount?extraCol:omitColumn,newWidth=Math.max(1,colModel.getColumnWidth(adjustCol)-(totalColWidth-gridWidth));colModel.setColumnWidth(adjustCol,newWidth,!0)}return preventRefresh!==!0&&this.updateAllColumnWidths(),!0},autoExpand:function(preventUpdate){var grid=this.grid,colModel=this.cm,gridWidth=this.getGridInnerWidth(),totalColumnWidth=colModel.getTotalWidth(!1),autoExpandColumn=grid.autoExpandColumn;if(!this.userResized&&autoExpandColumn&&gridWidth!=totalColumnWidth){var colIndex=colModel.getIndexById(autoExpandColumn),currentWidth=colModel.getColumnWidth(colIndex),desiredWidth=gridWidth-totalColumnWidth+currentWidth,newWidth=Math.min(Math.max(desiredWidth,grid.autoExpandMin),grid.autoExpandMax);currentWidth!=newWidth&&(colModel.setColumnWidth(colIndex,newWidth,!0),preventUpdate!==!0&&this.updateColumnWidth(colIndex,newWidth))}},getGridInnerWidth:function(){return this.grid.getGridEl().getWidth(!0)-this.getScrollOffset()},getColumnData:function(){var i,name,columns=[],colModel=this.cm,colCount=colModel.getColumnCount(),fields=this.ds.fields;for(i=0;colCount>i;i++)name=colModel.getDataIndex(i),columns[i]={name:Ext.isDefined(name)?name:fields.get(i)?fields.get(i).name:void 0,renderer:colModel.getRenderer(i),scope:colModel.getRendererScope(i),id:colModel.getColumnId(i),style:this.getColumnStyle(i)};return columns},renderRows:function(startRow,endRow){var records,grid=this.grid,store=grid.store,stripe=grid.stripeRows,colModel=grid.colModel,colCount=colModel.getColumnCount(),rowCount=store.getCount();return 1>rowCount?"":(startRow=startRow||0,endRow=Ext.isDefined(endRow)?endRow:rowCount-1,records=store.getRange(startRow,endRow),this.doRender(this.getColumnData(),records,store,startRow,colCount,stripe))},renderBody:function(){var markup=this.renderRows()||"&#160;";return this.templates.body.apply({rows:markup})},refreshRow:function(record){var rowIndex,row,column,meta,css,i,store=this.ds,colCount=this.cm.getColumnCount(),columns=this.getColumnData(),last=colCount-1,cls=["x-grid3-row"],rowParams={tstyle:String.format("width: {0};",this.getTotalWidth())},colBuffer=[],cellTpl=this.templates.cell;if(Ext.isNumber(record)?(rowIndex=record,record=store.getAt(rowIndex)):rowIndex=store.indexOf(record),record&&!(0>rowIndex)){for(i=0;colCount>i;i++)column=columns[i],css=0==i?"x-grid3-cell-first":i==last?"x-grid3-cell-last ":"",meta={id:column.id,style:column.style,css:css,attr:"",cellAttr:""},meta.value=column.renderer.call(column.scope,record.data[column.name],meta,record,rowIndex,i,store),Ext.isEmpty(meta.value)&&(meta.value="&#160;"),this.markDirty&&record.dirty&&"undefined"!=typeof record.modified[column.name]&&(meta.css+=" x-grid3-dirty-cell"),colBuffer[i]=cellTpl.apply(meta);row=this.getRow(rowIndex),row.className="",this.grid.stripeRows&&(rowIndex+1)%2===0&&cls.push("x-grid3-row-alt"),this.getRowClass&&(rowParams.cols=colCount,cls.push(this.getRowClass(record,rowIndex,rowParams,store))),this.fly(row).addClass(cls).setStyle(rowParams.tstyle),rowParams.cells=colBuffer.join(""),row.innerHTML=this.templates.rowInner.apply(rowParams),this.fireEvent("rowupdated",this,rowIndex,record)}},refresh:function(headersToo){this.fireEvent("beforerefresh",this),this.grid.stopEditing(!0);var result=this.renderBody();this.mainBody.update(result).setWidth(this.getTotalWidth()),headersToo===!0&&(this.updateHeaders(),this.updateHeaderSortState()),this.processRows(0,!0),this.layout(),this.applyEmptyText(),this.fireEvent("refresh",this)},applyEmptyText:function(){this.emptyText&&!this.hasRows()&&this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"</div>")},updateHeaderSortState:function(){var state=this.ds.getSortState();if(state){this.sortState&&this.sortState.field==state.field&&this.sortState.direction==state.direction||this.grid.fireEvent("sortchange",this.grid,state),this.sortState=state;var sortColumn=this.cm.findColumnIndex(state.field);if(-1!=sortColumn){var sortDir=state.direction;this.updateSortIcon(sortColumn,sortDir)}}},clearHeaderSortState:function(){this.sortState&&(this.grid.fireEvent("sortchange",this.grid,null),this.mainHd.select("td").removeClass(this.sortClasses),delete this.sortState)},destroy:function(){var columnDragData,columnDragProxy,me=this,grid=me.grid,gridEl=grid.getGridEl(),dragZone=me.dragZone,splitZone=me.splitZone,columnDrag=me.columnDrag,columnDrop=me.columnDrop,scrollToTopTask=me.scrollToTopTask;scrollToTopTask&&scrollToTopTask.cancel&&scrollToTopTask.cancel(),Ext.destroyMembers(me,"colMenu","hmenu"),me.initData(null,null),me.purgeListeners(),Ext.fly(me.innerHd).un("click",me.handleHdDown,me),grid.enableColumnMove&&(columnDragData=columnDrag.dragData,columnDragProxy=columnDrag.proxy,Ext.destroy(columnDrag.el,columnDragProxy.ghost,columnDragProxy.el,columnDrop.el,columnDrop.proxyTop,columnDrop.proxyBottom,columnDragData.ddel,columnDragData.header),columnDragProxy.anim&&Ext.destroy(columnDragProxy.anim),delete columnDragProxy.ghost,delete columnDragData.ddel,delete columnDragData.header,columnDrag.destroy(),delete Ext.dd.DDM.locationCache[columnDrag.id],delete columnDrag._domRef,delete columnDrop.proxyTop,delete columnDrop.proxyBottom,columnDrop.destroy(),delete Ext.dd.DDM.locationCache["gridHeader"+gridEl.id],delete columnDrop._domRef,delete Ext.dd.DDM.ids[columnDrop.ddGroup]),splitZone&&(splitZone.destroy(),delete splitZone._domRef,delete Ext.dd.DDM.ids["gridSplitters"+gridEl.id]),Ext.fly(me.innerHd).removeAllListeners(),Ext.removeNode(me.innerHd),delete me.innerHd,Ext.destroy(me.el,me.mainWrap,me.mainHd,me.scroller,me.mainBody,me.focusEl,me.resizeMarker,me.resizeProxy,me.activeHdBtn,me._flyweight,dragZone,splitZone),delete grid.container,dragZone&&dragZone.destroy(),Ext.dd.DDM.currentTarget=null,delete Ext.dd.DDM.locationCache[gridEl.id],Ext.EventManager.removeResizeListener(me.onWindowResize,me)},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var ct=this.grid.ownerCt;ct&&ct.getLayout()&&ct.on("afterlayout",function(){this.fitColumns(!0,!0),this.updateHeaders(),this.updateHeaderSortState()},this,{single:!0})}else this.forceFit?this.fitColumns(!0,!1):this.grid.autoExpandColumn&&this.autoExpand(!0);this.grid.getGridEl().dom.innerHTML=this.renderUI(),this.afterRenderUI()},initData:function(newStore,newColModel){var me=this;if(me.ds){var oldStore=me.ds;oldStore.un("add",me.onAdd,me),oldStore.un("load",me.onLoad,me),oldStore.un("clear",me.onClear,me),oldStore.un("remove",me.onRemove,me),oldStore.un("update",me.onUpdate,me),oldStore.un("datachanged",me.onDataChange,me),oldStore!==newStore&&oldStore.autoDestroy&&oldStore.destroy()}if(newStore&&newStore.on({scope:me,load:me.onLoad,add:me.onAdd,remove:me.onRemove,update:me.onUpdate,clear:me.onClear,datachanged:me.onDataChange}),me.cm){var oldColModel=me.cm;oldColModel.un("configchange",me.onColConfigChange,me),oldColModel.un("widthchange",me.onColWidthChange,me),oldColModel.un("headerchange",me.onHeaderChange,me),oldColModel.un("hiddenchange",me.onHiddenChange,me),oldColModel.un("columnmoved",me.onColumnMove,me)}newColModel&&(delete me.lastViewWidth,newColModel.on({scope:me,configchange:me.onColConfigChange,widthchange:me.onColWidthChange,headerchange:me.onHeaderChange,hiddenchange:me.onHiddenChange,columnmoved:me.onColumnMove})),me.ds=newStore,me.cm=newColModel},onDataChange:function(){this.refresh(!0),this.updateHeaderSortState(),this.syncFocusEl(0)},onClear:function(){this.refresh(),this.syncFocusEl(0)},onUpdate:function(store,record){this.refreshRow(record)},onAdd:function(store,records,index){this.insertRows(store,index,index+(records.length-1))},onRemove:function(store,record,index,isUpdate){isUpdate!==!0&&this.fireEvent("beforerowremoved",this,index,record),this.removeRow(index),isUpdate!==!0&&(this.processRows(index),this.applyEmptyText(),this.fireEvent("rowremoved",this,index,record))},onLoad:function(){Ext.isGecko?(this.scrollToTopTask||(this.scrollToTopTask=new Ext.util.DelayedTask(this.scrollToTop,this)),this.scrollToTopTask.delay(1)):this.scrollToTop()},onColWidthChange:function(cm,col,width){this.updateColumnWidth(col,width)},onHeaderChange:function(cm,col,text){this.updateHeaders()},onHiddenChange:function(cm,col,hidden){this.updateColumnHidden(col,hidden)},onColumnMove:function(cm,oldIndex,newIndex){this.indexMap=null,this.refresh(!0),this.restoreScroll(this.getScrollState()),this.afterMove(newIndex),this.grid.fireEvent("columnmove",oldIndex,newIndex)},onColConfigChange:function(){delete this.lastViewWidth,this.indexMap=null,this.refresh(!0)},initUI:function(grid){grid.on("headerclick",this.onHeaderClick,this)},initEvents:Ext.emptyFn,onHeaderClick:function(g,index){!this.headersDisabled&&this.cm.isSortable(index)&&(g.stopEditing(!0),g.store.sort(this.cm.getDataIndex(index)))},onRowOver:function(e,target){var row=this.findRowIndex(target);row!==!1&&this.addRowClass(row,this.rowOverCls)},onRowOut:function(e,target){var row=this.findRowIndex(target);row===!1||e.within(this.getRow(row),!0)||this.removeRowClass(row,this.rowOverCls)},onRowSelect:function(row){this.addRowClass(row,this.selectedRowClass)},onRowDeselect:function(row){this.removeRowClass(row,this.selectedRowClass)},onCellSelect:function(row,col){var cell=this.getCell(row,col);cell&&this.fly(cell).addClass("x-grid3-cell-selected")},onCellDeselect:function(row,col){var cell=this.getCell(row,col);cell&&this.fly(cell).removeClass("x-grid3-cell-selected")},handleWheel:function(e){e.stopPropagation()},onColumnSplitterMoved:function(cellIndex,width){this.userResized=!0,this.grid.colModel.setColumnWidth(cellIndex,width,!0),this.forceFit?(this.fitColumns(!0,!1,cellIndex),this.updateAllColumnWidths()):(this.updateColumnWidth(cellIndex,width),this.syncHeaderScroll()),this.grid.fireEvent("columnresize",cellIndex,width)},beforeColMenuShow:function(){var i,colModel=this.cm,colCount=colModel.getColumnCount(),colMenu=this.colMenu;for(colMenu.removeAll(),i=0;colCount>i;i++)colModel.config[i].hideable!==!1&&colMenu.add(new Ext.menu.CheckItem({text:colModel.getColumnHeader(i),itemId:"col-"+colModel.getColumnId(i),checked:!colModel.isHidden(i),disabled:colModel.config[i].hideable===!1,hideOnClick:!1}))},handleHdMenuClick:function(item){var store=this.ds,dataIndex=this.cm.getDataIndex(this.hdCtxIndex);switch(item.getItemId()){case"asc":store.sort(dataIndex,"ASC");break;case"desc":store.sort(dataIndex,"DESC");break;default:this.handleHdMenuClickDefault(item)}return!0},handleHdMenuClickDefault:function(item){var colModel=this.cm,itemId=item.getItemId(),index=colModel.getIndexById(itemId.substr(4));if(-1!=index){if(item.checked&&colModel.getColumnsBy(this.isHideableColumn,this).length<=1)return void this.onDenyColumnHide();colModel.setHidden(index,item.checked)}},handleHdDown:function(e,target){if(Ext.fly(target).hasClass("x-grid3-hd-btn")){e.stopEvent();var sep,colModel=this.cm,header=this.findHeaderCell(target),index=this.getCellIndex(header),sortable=colModel.isSortable(index),menu=this.hmenu,menuItems=menu.items,menuCls=this.headerMenuOpenCls;this.hdCtxIndex=index,Ext.fly(header).addClass(menuCls),this.hideSortIcons?(menuItems.get("asc").setVisible(sortable),menuItems.get("desc").setVisible(sortable),sep=menuItems.get("sortSep"),sep&&sep.setVisible(sortable)):(menuItems.get("asc").setDisabled(!sortable),menuItems.get("desc").setDisabled(!sortable)),menu.on("hide",function(){Ext.fly(header).removeClass(menuCls)},this,{single:!0}),menu.show(target,"tl-bl?")}},handleHdMove:function(e){var header=this.findHeaderCell(this.activeHdRef);if(header&&!this.headersDisabled){var handleWidth=this.splitHandleWidth||5,activeRegion=this.activeHdRegion,headerStyle=header.style,colModel=this.cm,cursor="",pageX=e.getPageX();if(this.grid.enableColumnResize!==!1){var activeHeaderIndex=this.activeHdIndex,previousVisible=this.getPreviousVisible(activeHeaderIndex),currentResizable=colModel.isResizable(activeHeaderIndex),previousResizable=previousVisible&&colModel.isResizable(previousVisible),inLeftResizer=pageX-activeRegion.left<=handleWidth,inRightResizer=activeRegion.right-pageX<=(this.activeHdBtn?2:handleWidth);inLeftResizer&&previousResizable?cursor=Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize":inRightResizer&&currentResizable&&(cursor=Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize")}headerStyle.cursor=cursor}},getPreviousVisible:function(index){for(;index>0;){if(!this.cm.isHidden(index-1))return index;index--}},handleHdOver:function(e,target){var header=this.findHeaderCell(target);if(header&&!this.headersDisabled){var fly=this.fly(header);this.activeHdRef=target,this.activeHdIndex=this.getCellIndex(header),this.activeHdRegion=fly.getRegion(),this.isMenuDisabled(this.activeHdIndex,fly)||(fly.addClass("x-grid3-hd-over"),this.activeHdBtn=fly.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=header.firstChild.offsetHeight-1+"px"))}},handleHdOut:function(e,target){var header=this.findHeaderCell(target);!header||Ext.isIE9m&&e.within(header,!0)||(this.activeHdRef=null,this.fly(header).removeClass("x-grid3-hd-over"),header.style.cursor="")},isMenuDisabled:function(cellIndex,el){return this.cm.isMenuDisabled(cellIndex)},hasRows:function(){var fc=this.mainBody.dom.firstChild;return fc&&1==fc.nodeType&&"x-grid-empty"!=fc.className},isHideableColumn:function(c){return!c.hidden},bind:function(d,c){this.initData(d,c)}}),Ext.grid.GridView.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{constructor:function(grid,hd){this.grid=grid,this.view=grid.getView(),this.marker=this.view.resizeMarker,this.proxy=this.view.resizeProxy,Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,hd,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1}),this.scroll=!1,this.hw=this.view.splitHandleWidth||5},b4StartDrag:function(x,y){this.dragHeadersDisabled=this.view.headersDisabled,this.view.headersDisabled=!0;var h=this.view.mainWrap.getHeight();this.marker.setHeight(h),this.marker.show(),this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]),this.proxy.setHeight(h);var w=this.cm.getColumnWidth(this.cellIndex),minw=Math.max(w-this.grid.minColumnWidth,0);this.resetConstraints(),this.setXConstraint(minw,1e3),this.setYConstraint(0,0),this.minX=x-minw,this.maxX=x+1e3,this.startPos=x,Ext.dd.DDProxy.prototype.b4StartDrag.call(this,x,y)},allowHeaderDrag:function(e){return!0},handleMouseDown:function(e){var t=this.view.findHeaderCell(e.getTarget());if(t&&this.allowHeaderDrag(e)){var xy=this.view.fly(t).getXY(),x=xy[0],exy=e.getXY(),ex=exy[0],w=t.offsetWidth,adjust=!1;if(ex-x<=this.hw?adjust=-1:x+w-ex<=this.hw&&(adjust=0),adjust!==!1){this.cm=this.grid.colModel;var ci=this.view.getCellIndex(t);if(-1==adjust){if(0>ci+adjust)return;for(;this.cm.isHidden(ci+adjust);)if(--adjust,0>ci+adjust)return}this.cellIndex=ci+adjust,this.split=t.dom,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}else this.view.columnDrag&&this.view.columnDrag.callHandleMouseDown(e)}},endDrag:function(e){this.marker.hide();
var v=this.view,endX=Math.max(this.minX,e.getPageX()),diff=endX-this.startPos,disabled=this.dragHeadersDisabled;v.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+diff),setTimeout(function(){v.headersDisabled=disabled},50)},autoOffset:function(){this.setDelta(0,0)}}),Ext.grid.PivotGridView=Ext.extend(Ext.grid.GridView,{colHeaderCellCls:"grid-hd-group-cell",title:"",getColumnHeaders:function(){return this.grid.topAxis.buildHeaders()},getRowHeaders:function(){return this.grid.leftAxis.buildHeaders()},renderRows:function(startRow,endRow){var colBuffer,colCount,i,row,grid=this.grid,rows=grid.extractData(),rowCount=rows.length,templates=this.templates,renderer=grid.renderer,hasRenderer="function"==typeof renderer,getCellCls=this.getCellCls,hasGetCellCls="function"==typeof getCellCls,cellTemplate=templates.cell,rowTemplate=templates.row,rowBuffer=[],meta={},tstyle="width:"+this.getGridInnerWidth()+"px;";for(startRow=startRow||0,endRow=Ext.isDefined(endRow)?endRow:rowCount-1,i=0;rowCount>i;i++){row=rows[i],colCount=row.length,colBuffer=[];for(var j=0;colCount>j;j++)meta.id=i+"-"+j,meta.css=0===j?"x-grid3-cell-first ":j==colCount-1?"x-grid3-cell-last ":"",meta.attr=meta.cellAttr="",meta.value=row[j],Ext.isEmpty(meta.value)&&(meta.value="&#160;"),hasRenderer&&(meta.value=renderer(meta.value)),hasGetCellCls&&(meta.css+=getCellCls(meta.value)+" "),colBuffer[colBuffer.length]=cellTemplate.apply(meta);rowBuffer[rowBuffer.length]=rowTemplate.apply({tstyle:tstyle,cols:colCount,cells:colBuffer.join(""),alt:""})}return rowBuffer.join("")},masterTpl:new Ext.Template('<div class="x-grid3 x-pivotgrid" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-title"><span>{title}</span></div>','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}"></div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-row-headers"></div>','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),initTemplates:function(){Ext.grid.PivotGridView.superclass.initTemplates.apply(this,arguments);var templates=this.templates||{};templates.gcell||(templates.gcell=new Ext.XTemplate('<td class="x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} '+this.colHeaderCellCls+'" style="{style}">','<div {tooltip} class="x-grid3-hd-inner x-grid3-hd-{id} x-unselectable" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}","</div>","</td>")),this.templates=templates,this.hrowRe=new RegExp("ux-grid-hd-group-row-(\\d+)","")},initElements:function(){Ext.grid.PivotGridView.superclass.initElements.apply(this,arguments),this.rowHeadersEl=new Ext.Element(this.scroller.child("div.x-grid3-row-headers")),this.headerTitleEl=new Ext.Element(this.mainHd.child("div.x-grid3-header-title"))},getGridInnerWidth:function(){var previousWidth=Ext.grid.PivotGridView.superclass.getGridInnerWidth.apply(this,arguments);return previousWidth-this.getTotalRowHeaderWidth()},getTotalRowHeaderWidth:function(){var i,headers=this.getRowHeaders(),length=headers.length,total=0;for(i=0;length>i;i++)total+=headers[i].width;return total},getTotalColumnHeaderHeight:function(){return 21*this.getColumnHeaders().length},getCellIndex:function(el){if(el){var data,match=el.className.match(this.colRe);if(match&&(data=match[1]))return parseInt(data.split("-")[1],10)}return!1},renderUI:function(){var templates=this.templates,innerWidth=this.getGridInnerWidth();return templates.master.apply({body:templates.body.apply({rows:"&#160;"}),ostyle:"width:"+innerWidth+"px",bstyle:"width:"+innerWidth+"px"})},onLayout:function(width,height){Ext.grid.PivotGridView.superclass.onLayout.apply(this,arguments);var width=this.getGridInnerWidth();this.resizeColumnHeaders(width),this.resizeAllRows(width)},refresh:function(headersToo){this.fireEvent("beforerefresh",this),this.grid.stopEditing(!0);var result=this.renderBody();this.mainBody.update(result).setWidth(this.getGridInnerWidth()),headersToo===!0&&(this.updateHeaders(),this.updateHeaderSortState()),this.processRows(0,!0),this.layout(),this.applyEmptyText(),this.fireEvent("refresh",this)},renderHeaders:Ext.emptyFn,fitColumns:Ext.emptyFn,resizeColumnHeaders:function(width){var topAxis=this.grid.topAxis;topAxis.rendered&&topAxis.el.setWidth(width)},resizeRowHeaders:function(){var rowHeaderWidth=this.getTotalRowHeaderWidth(),marginStyle=String.format("margin-left: {0}px;",rowHeaderWidth);this.rowHeadersEl.setWidth(rowHeaderWidth),this.mainBody.applyStyles(marginStyle),Ext.fly(this.innerHd).applyStyles(marginStyle),this.headerTitleEl.setWidth(rowHeaderWidth),this.headerTitleEl.setHeight(this.getTotalColumnHeaderHeight())},resizeAllRows:function(width){var i,rows=this.getRows(),length=rows.length;for(i=0;length>i;i++)Ext.fly(rows[i]).setWidth(width),Ext.fly(rows[i]).child("table").setWidth(width)},updateHeaders:function(){this.renderGroupRowHeaders(),this.renderGroupColumnHeaders()},renderGroupRowHeaders:function(){var leftAxis=this.grid.leftAxis;this.resizeRowHeaders(),leftAxis.rendered=!1,leftAxis.render(this.rowHeadersEl),this.setTitle(this.title)},setTitle:function(title){this.headerTitleEl.child("span").dom.innerHTML=title},renderGroupColumnHeaders:function(){var topAxis=this.grid.topAxis;topAxis.rendered=!1,topAxis.render(this.innerHd.firstChild)},isMenuDisabled:function(cellIndex,el){return!0}}),Ext.grid.PivotAxis=Ext.extend(Ext.Component,{orientation:"horizontal",defaultHeaderWidth:80,paddingWidth:7,setDimensions:function(dimensions){this.dimensions=dimensions},onRender:function(ct,position){var rows="horizontal"==this.orientation?this.renderHorizontalRows():this.renderVerticalRows();this.el=Ext.DomHelper.overwrite(ct.dom,{tag:"table",cn:rows},!0)},renderHorizontalRows:function(){var cells,cols,colCount,i,j,headers=this.buildHeaders(),rowCount=headers.length,rows=[];for(i=0;rowCount>i;i++){for(cells=[],cols=headers[i].items,colCount=cols.length,j=0;colCount>j;j++)cells.push({tag:"td",html:cols[j].header,colspan:cols[j].span});rows[i]={tag:"tr",cn:cells}}return rows},renderVerticalRows:function(){var rowCount,col,row,colWidth,i,j,headers=this.buildHeaders(),colCount=headers.length,rowCells=[],rows=[];for(i=0;colCount>i;i++)for(col=headers[i],colWidth=col.width||80,rowCount=col.items.length,j=0;rowCount>j;j++)row=col.items[j],rowCells[row.start]=rowCells[row.start]||[],rowCells[row.start].push({tag:"td",html:row.header,rowspan:row.span,width:Ext.isBorderBox?colWidth:colWidth-this.paddingWidth});for(rowCount=rowCells.length,i=0;rowCount>i;i++)rows[i]={tag:"tr",cn:rowCells[i]};return rows},getTuples:function(){var newStore=new Ext.data.Store({});newStore.data=this.store.data.clone(),newStore.fields=this.store.fields;var i,sorters=[],dimensions=this.dimensions,length=dimensions.length;for(i=0;length>i;i++)sorters.push({field:dimensions[i].dataIndex,direction:dimensions[i].direction||"ASC"});newStore.sort(sorters);var hash,info,data,key,records=newStore.data.items,hashes=[],tuples=[];for(length=records.length,i=0;length>i;i++){info=this.getRecordInfo(records[i]),data=info.data,hash="";for(key in data)hash+=data[key]+"---";-1==hashes.indexOf(hash)&&(hashes.push(hash),tuples.push(info))}return newStore.destroy(),tuples},getRecordInfo:function(record){var dimension,dataIndex,i,dimensions=this.dimensions,length=dimensions.length,data={};for(i=0;length>i;i++)dimension=dimensions[i],dataIndex=dimension.dataIndex,data[dataIndex]=record.get(dataIndex);var createMatcherFunction=function(data){return function(record){for(var dataIndex in data)if(record.get(dataIndex)!=data[dataIndex])return!1;return!0}};return{data:data,matcher:createMatcherFunction(data)}},buildHeaders:function(){var dimension,tuple,rows,currentHeader,previousHeader,span,start,isLast,changed,i,j,tuples=this.getTuples(),rowCount=tuples.length,dimensions=this.dimensions,colCount=dimensions.length,headers=[];for(i=0;colCount>i;i++){for(dimension=dimensions[i],rows=[],span=0,start=0,j=0;rowCount>j;j++)tuple=tuples[j],isLast=j==rowCount-1,currentHeader=tuple.data[dimension.dataIndex],changed=void 0!=previousHeader&&previousHeader!=currentHeader,i>0&&j>0&&(changed=changed||tuple.data[dimensions[i-1].dataIndex]!=tuples[j-1].data[dimensions[i-1].dataIndex]),changed&&(rows.push({header:previousHeader,span:span,start:start}),start+=span,span=0),isLast&&(rows.push({header:currentHeader,span:span+1,start:start}),start+=span,span=0),previousHeader=currentHeader,span++;headers.push({items:rows,width:dimension.width||this.defaultHeaderWidth}),previousHeader=void 0}return headers}}),Ext.grid.HeaderDragZone=Ext.extend(Ext.dd.DragZone,{maxDragWidth:120,constructor:function(grid,hd,hd2){this.grid=grid,this.view=grid.getView(),this.ddGroup="gridHeader"+this.grid.getGridEl().id,Ext.grid.HeaderDragZone.superclass.constructor.call(this,hd),hd2&&(this.setHandleElId(Ext.id(hd)),this.setOuterHandleElId(Ext.id(hd2))),this.scroll=!1},getDragData:function(e){var t=Ext.lib.Event.getTarget(e),h=this.view.findHeaderCell(t);return h?{ddel:h.firstChild,header:h}:!1},onInitDrag:function(e){this.dragHeadersDisabled=this.view.headersDisabled,this.view.headersDisabled=!0;var clone=this.dragData.ddel.cloneNode(!0);return clone.id=Ext.id(),clone.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px",this.proxy.update(clone),!0},afterValidDrop:function(){this.completeDrop()},afterInvalidDrop:function(){this.completeDrop()},completeDrop:function(){var v=this.view,disabled=this.dragHeadersDisabled;setTimeout(function(){v.headersDisabled=disabled},50)}}),Ext.grid.HeaderDropZone=Ext.extend(Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,constructor:function(grid,hd,hd2){this.grid=grid,this.view=grid.getView(),this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},!0),this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},!0),this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100),this.setStyle("visibility","hidden")},this.ddGroup="gridHeader"+this.grid.getGridEl().id,Ext.grid.HeaderDropZone.superclass.constructor.call(this,grid.getGridEl().dom)},getTargetFromEvent:function(e){var t=Ext.lib.Event.getTarget(e),cindex=this.view.findCellIndex(t);return cindex!==!1?this.view.getHeaderCell(cindex):void 0},nextVisible:function(h){var v=this.view,cm=this.grid.colModel;for(h=h.nextSibling;h;){if(!cm.isHidden(v.getCellIndex(h)))return h;h=h.nextSibling}return null},prevVisible:function(h){var v=this.view,cm=this.grid.colModel;for(h=h.prevSibling;h;){if(!cm.isHidden(v.getCellIndex(h)))return h;h=h.prevSibling}return null},positionIndicator:function(h,n,e){var px,pt,x=Ext.lib.Event.getPageX(e),r=Ext.lib.Dom.getRegion(n.firstChild),py=r.top+this.proxyOffsets[1];return r.right-x<=(r.right-r.left)/2?(px=r.right+this.view.borderWidth,pt="after"):(px=r.left,pt="before"),this.grid.colModel.isFixed(this.view.getCellIndex(n))?!1:(px+=this.proxyOffsets[0],this.proxyTop.setLeftTop(px,py),this.proxyTop.show(),this.bottomOffset||(this.bottomOffset=this.view.mainHd.getHeight()),this.proxyBottom.setLeftTop(px,py+this.proxyTop.dom.offsetHeight+this.bottomOffset),this.proxyBottom.show(),pt)},onNodeEnter:function(n,dd,e,data){data.header!=n&&this.positionIndicator(data.header,n,e)},onNodeOver:function(n,dd,e,data){var result=!1;return data.header!=n&&(result=this.positionIndicator(data.header,n,e)),result||(this.proxyTop.hide(),this.proxyBottom.hide()),result?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(n,dd,e,data){this.proxyTop.hide(),this.proxyBottom.hide()},onNodeDrop:function(n,dd,e,data){var h=data.header;if(h!=n){var cm=this.grid.colModel,x=Ext.lib.Event.getPageX(e),r=Ext.lib.Dom.getRegion(n.firstChild),pt=r.right-x<=(r.right-r.left)/2?"after":"before",oldIndex=this.view.getCellIndex(h),newIndex=this.view.getCellIndex(n);return"after"==pt&&newIndex++,newIndex>oldIndex&&newIndex--,cm.moveColumn(oldIndex,newIndex),!0}return!1}}),Ext.grid.GridView.ColumnDragZone=Ext.extend(Ext.grid.HeaderDragZone,{constructor:function(grid,hd){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,grid,hd,null),this.proxy.el.addClass("x-grid3-col-dd")},handleMouseDown:function(e){},callHandleMouseDown:function(e){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,e)}}),Ext.grid.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{fly:Ext.Element.fly,constructor:function(grid,hd,hd2){this.grid=grid,this.view=grid.getView(),this.proxy=this.view.resizeProxy,Ext.grid.SplitDragZone.superclass.constructor.call(this,hd,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:!1}),this.setHandleElId(Ext.id(hd)),this.setOuterHandleElId(Ext.id(hd2)),this.scroll=!1},b4StartDrag:function(x,y){this.view.headersDisabled=!0,this.proxy.setHeight(this.view.mainWrap.getHeight());var w=this.cm.getColumnWidth(this.cellIndex),minw=Math.max(w-this.grid.minColumnWidth,0);this.resetConstraints(),this.setXConstraint(minw,1e3),this.setYConstraint(0,0),this.minX=x-minw,this.maxX=x+1e3,this.startPos=x,Ext.dd.DDProxy.prototype.b4StartDrag.call(this,x,y)},handleMouseDown:function(e){var ev=Ext.EventObject.setEvent(e),t=this.fly(ev.getTarget());t.hasClass("x-grid-split")&&(this.cellIndex=this.view.getCellIndex(t.dom),this.split=t.dom,this.cm=this.grid.colModel,this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)&&Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments))},endDrag:function(e){this.view.headersDisabled=!1;var endX=Math.max(this.minX,Ext.lib.Event.getPageX(e)),diff=endX-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+diff)},autoOffset:function(){this.setDelta(0,0)}}),Ext.grid.GridDragZone=function(grid,config){this.view=grid.getView(),Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,config),this.scroll=!1,this.grid=grid,this.ddel=document.createElement("div"),this.ddel.className="x-grid-dd-wrap",this.preventDefault=!0},Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(e){var sm,cellIndex,selectedCell,selection,t=Ext.lib.Event.getTarget(e),rowIndex=this.view.findRowIndex(t);return rowIndex!==!1?(sm=this.grid.selModel,sm.getSelectedCell?(cellIndex=this.view.findCellIndex(t),selectedCell=sm.getSelectedCell(),selectedCell&&selectedCell[0]===rowIndex&&selectedCell[1]===cellIndex||sm.handleMouseDown(this.grid,rowIndex,cellIndex,e),this.grid.dragCell?(selection=sm.getSelectedCell(),this.grid.hasOwnProperty("ddText")||(this.grid.ddText="{0} selected cell{1}")):selection=[this.grid.store.getAt(rowIndex)]):((!sm.isSelected(rowIndex)||e.hasModifier())&&sm.handleMouseDown(this.grid,rowIndex,e),selection=sm.getSelections()),{grid:this.grid,ddel:this.ddel,rowIndex:rowIndex,selections:selection}):!1},onInitDrag:function(e){this.dragData;this.ddel.innerHTML=this.grid.getDragDropText(),this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=!1},getRepairXY:function(e,data){return!1},onEndDrag:function(data,e){},onValidDrop:function(dd,e,id){this.hideProxy()},beforeInvalidDrop:function(e,id){}}),Ext.grid.ColumnModel=Ext.extend(Ext.util.Observable,{defaultWidth:100,defaultSortable:!1,constructor:function(config){config.columns?(Ext.apply(this,config),this.setConfig(config.columns,!0)):this.setConfig(config,!0),this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","configchange"),Ext.grid.ColumnModel.superclass.constructor.call(this)},getColumnId:function(index){return this.config[index].id},getColumnAt:function(index){return this.config[index]},setConfig:function(config,initial){var i,c,len;if(!initial)for(delete this.totalWidth,i=0,len=this.config.length;len>i;i++)c=this.config[i],c.setEditor&&c.setEditor(null);for(this.defaults=Ext.apply({width:this.defaultWidth,sortable:this.defaultSortable},this.defaults),this.config=config,this.lookup={},i=0,len=config.length;len>i;i++){if(c=Ext.applyIf(config[i],this.defaults),Ext.isEmpty(c.id)&&(c.id=i),!c.isColumn){var Cls=Ext.grid.Column.types[c.xtype||"gridcolumn"];c=new Cls(c),config[i]=c}this.lookup[c.id]=c}initial||this.fireEvent("configchange",this)},getColumnById:function(id){return this.lookup[id]},getIndexById:function(id){for(var i=0,len=this.config.length;len>i;i++)if(this.config[i].id==id)return i;return-1},moveColumn:function(oldIndex,newIndex){var config=this.config,c=config[oldIndex];config.splice(oldIndex,1),config.splice(newIndex,0,c),this.dataMap=null,this.fireEvent("columnmoved",this,oldIndex,newIndex)},getColumnCount:function(visibleOnly){var i,length=this.config.length,c=0;if(visibleOnly===!0){for(i=0;length>i;i++)this.isHidden(i)||c++;return c}return length},getColumnsBy:function(fn,scope){var i,c,config=this.config,length=config.length,result=[];for(i=0;length>i;i++)c=config[i],fn.call(scope||this,c,i)===!0&&(result[result.length]=c);return result},isSortable:function(col){return!!this.config[col].sortable},isMenuDisabled:function(col){return!!this.config[col].menuDisabled},getRenderer:function(col){return this.config[col].renderer||Ext.grid.ColumnModel.defaultRenderer},getRendererScope:function(col){return this.config[col].scope},setRenderer:function(col,fn){this.config[col].renderer=fn},getColumnWidth:function(col){var width=this.config[col].width;return"number"!=typeof width&&(width=this.defaultWidth),width},setColumnWidth:function(col,width,suppressEvent){this.config[col].width=width,this.totalWidth=null,suppressEvent||this.fireEvent("widthchange",this,col,width)},getTotalWidth:function(includeHidden){if(!this.totalWidth){this.totalWidth=0;for(var i=0,len=this.config.length;len>i;i++)(includeHidden||!this.isHidden(i))&&(this.totalWidth+=this.getColumnWidth(i))}return this.totalWidth},getColumnHeader:function(col){return this.config[col].header},setColumnHeader:function(col,header){this.config[col].header=header,this.fireEvent("headerchange",this,col,header)},getColumnTooltip:function(col){return this.config[col].tooltip},setColumnTooltip:function(col,tooltip){this.config[col].tooltip=tooltip},getDataIndex:function(col){return this.config[col].dataIndex},setDataIndex:function(col,dataIndex){this.config[col].dataIndex=dataIndex},findColumnIndex:function(dataIndex){for(var c=this.config,i=0,len=c.length;len>i;i++)if(c[i].dataIndex==dataIndex)return i;return-1},isCellEditable:function(colIndex,rowIndex){var c=this.config[colIndex],ed=c.editable;return!!(ed||!Ext.isDefined(ed)&&c.editor)},getCellEditor:function(colIndex,rowIndex){return this.config[colIndex].getCellEditor(rowIndex)},setEditable:function(col,editable){this.config[col].editable=editable},isHidden:function(colIndex){return!!this.config[colIndex].hidden},isFixed:function(colIndex){return!!this.config[colIndex].fixed},isResizable:function(colIndex){return colIndex>=0&&this.config[colIndex].resizable!==!1&&this.config[colIndex].fixed!==!0},setHidden:function(colIndex,hidden){var c=this.config[colIndex];c.hidden!==hidden&&(c.hidden=hidden,this.totalWidth=null,this.fireEvent("hiddenchange",this,colIndex,hidden))},setEditor:function(col,editor){this.config[col].setEditor(editor)},destroy:function(){for(var length=this.config.length,i=0;length>i;i++)this.config[i].destroy();delete this.config,delete this.lookup,this.purgeListeners()},setState:function(col,state){state=Ext.applyIf(state,this.defaults),Ext.apply(this.config[col],state)}}),Ext.grid.ColumnModel.defaultRenderer=function(value){return"string"==typeof value&&value.length<1?"&#160;":value},Ext.grid.AbstractSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(){this.locked=!1,Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)},init:function(grid){this.grid=grid,this.lockOnInit&&(delete this.lockOnInit,this.locked=!1,this.lock()),this.initEvents()},lock:function(){if(!this.locked){this.locked=!0;var g=this.grid;g?g.getView().on({scope:this,beforerefresh:this.sortUnLock,refresh:this.sortLock}):this.lockOnInit=!0}},sortLock:function(){this.locked=!0},sortUnLock:function(){this.locked=!1},unlock:function(){if(this.locked){this.locked=!1;var gv,g=this.grid;g?(gv=g.getView(),gv.un("beforerefresh",this.sortUnLock,this),gv.un("refresh",this.sortLock,this)):delete this.lockOnInit}},isLocked:function(){return this.locked},destroy:function(){this.unlock(),this.purgeListeners()}}),Ext.grid.RowSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{singleSelect:!1,constructor:function(config){Ext.apply(this,config),this.selections=new Ext.util.MixedCollection(!1,function(o){return o.id}),this.last=!1,this.lastActive=!1,this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect"),Ext.grid.RowSelectionModel.superclass.constructor.call(this)},initEvents:function(){this.grid.enableDragDrop||this.grid.enableDrag||this.grid.on("rowmousedown",this.handleMouseDown,this),this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:this.onKeyPress,down:this.onKeyPress,scope:this}),this.grid.getView().on({scope:this,refresh:this.onRefresh,rowupdated:this.onRowUpdated,rowremoved:this.onRemove})},onKeyPress:function(e,name){var last,up="up"==name,method=up?"selectPrevious":"selectNext",add=up?-1:1;!e.shiftKey||this.singleSelect?this[method](!1):this.last!==!1&&this.lastActive!==!1?(last=this.last,this.selectRange(this.last,this.lastActive+add),this.grid.getView().focusRow(this.lastActive),last!==!1&&(this.last=last)):this.selectFirstRow()},onRefresh:function(){var index,r,ds=this.grid.store,s=this.getSelections(),i=0,len=s.length;for(this.silent=!0,this.clearSelections(!0);len>i;i++)r=s[i],-1!=(index=ds.indexOfId(r.id))&&this.selectRow(index,!0);s.length!=this.selections.getCount()&&this.fireEvent("selectionchange",this),this.silent=!1},onRemove:function(v,index,r){this.selections.remove(r)!==!1&&this.fireEvent("selectionchange",this)},onRowUpdated:function(v,index,r){this.isSelected(r)&&v.onRowSelect(index)},selectRecords:function(records,keepExisting){keepExisting||this.clearSelections();for(var ds=this.grid.store,i=0,len=records.length;len>i;i++)this.selectRow(ds.indexOf(records[i]),!0)},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(keepExisting){this.selectRow(this.grid.store.getCount()-1,keepExisting)},selectNext:function(keepExisting){return this.hasNext()?(this.selectRow(this.last+1,keepExisting),this.grid.getView().focusRow(this.last),!0):!1},selectPrevious:function(keepExisting){return this.hasPrevious()?(this.selectRow(this.last-1,keepExisting),this.grid.getView().focusRow(this.last),!0):!1},hasNext:function(){return this.last!==!1&&this.last+1<this.grid.store.getCount()},hasPrevious:function(){return!!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(fn,scope){for(var s=this.getSelections(),i=0,len=s.length;len>i;i++)if(fn.call(scope||this,s[i],i)===!1)return!1;return!0},clearSelections:function(fast){if(!this.isLocked()){if(fast!==!0){var ds=this.grid.store,s=this.selections;s.each(function(r){this.deselectRow(ds.indexOfId(r.id))},this),s.clear()}else this.selections.clear();this.last=!1}},selectAll:function(){if(!this.isLocked()){this.selections.clear();for(var i=0,len=this.grid.store.getCount();len>i;i++)this.selectRow(i,!0)}},hasSelection:function(){return this.selections.length>0},isSelected:function(index){var r=Ext.isNumber(index)?this.grid.store.getAt(index):index;return r&&this.selections.key(r.id)?!0:!1},isIdSelected:function(id){return this.selections.key(id)?!0:!1},handleMouseDown:function(g,rowIndex,e){if(0===e.button&&!this.isLocked()){var view=this.grid.getView();if(e.shiftKey&&!this.singleSelect&&this.last!==!1){var last=this.last;this.selectRange(last,rowIndex,e.ctrlKey),this.last=last,view.focusRow(rowIndex)}else{var isSelected=this.isSelected(rowIndex);e.ctrlKey&&isSelected?this.deselectRow(rowIndex):(!isSelected||this.getCount()>1)&&(this.selectRow(rowIndex,e.ctrlKey||e.shiftKey),view.focusRow(rowIndex))}}},selectRows:function(rows,keepExisting){keepExisting||this.clearSelections();for(var i=0,len=rows.length;len>i;i++)this.selectRow(rows[i],!0)},selectRange:function(startRow,endRow,keepExisting){var i;if(!this.isLocked())if(keepExisting||this.clearSelections(),endRow>=startRow)for(i=startRow;endRow>=i;i++)this.selectRow(i,!0);else for(i=startRow;i>=endRow;i--)this.selectRow(i,!0)},deselectRange:function(startRow,endRow,preventViewNotify){if(!this.isLocked())for(var i=startRow;endRow>=i;i++)this.deselectRow(i,preventViewNotify)},selectRow:function(index,keepExisting,preventViewNotify){if(!(this.isLocked()||0>index||index>=this.grid.store.getCount()||keepExisting&&this.isSelected(index))){var r=this.grid.store.getAt(index);r&&this.fireEvent("beforerowselect",this,index,keepExisting,r)!==!1&&((!keepExisting||this.singleSelect)&&this.clearSelections(),this.selections.add(r),this.last=this.lastActive=index,preventViewNotify||this.grid.getView().onRowSelect(index),this.silent||(this.fireEvent("rowselect",this,index,r),this.fireEvent("selectionchange",this)))}},deselectRow:function(index,preventViewNotify){if(!this.isLocked()){this.last==index&&(this.last=!1),this.lastActive==index&&(this.lastActive=!1);var r=this.grid.store.getAt(index);r&&(this.selections.remove(r),preventViewNotify||this.grid.getView().onRowDeselect(index),this.fireEvent("rowdeselect",this,index,r),this.fireEvent("selectionchange",this))}},acceptsNav:function(row,col,cm){return!cm.isHidden(col)&&cm.isCellEditable(col,row)},onEditorKey:function(field,e){var newCell,ae,last,r,c,k=e.getKey(),g=this.grid,last=g.lastEdit,ed=g.activeEditor,shift=e.shiftKey;k==e.TAB?(e.stopEvent(),ed.completeEdit(),newCell=shift?g.walkCells(ed.row,ed.col-1,-1,this.acceptsNav,this):g.walkCells(ed.row,ed.col+1,1,this.acceptsNav,this)):k==e.ENTER&&this.moveEditorOnEnter!==!1&&(newCell=shift?g.walkCells(last.row-1,last.col,-1,this.acceptsNav,this):g.walkCells(last.row+1,last.col,1,this.acceptsNav,this)),newCell&&(r=newCell[0],c=newCell[1],this.onEditorSelect(r,last.row),g.isEditor&&g.editing&&(ae=g.activeEditor,ae&&ae.field.triggerBlur&&ae.field.triggerBlur()),g.startEditing(r,c))},onEditorSelect:function(row,lastRow){lastRow!=row&&this.selectRow(row)},destroy:function(){Ext.destroy(this.rowNav),this.rowNav=null,Ext.grid.RowSelectionModel.superclass.destroy.call(this)}}),Ext.grid.Column=Ext.extend(Ext.util.Observable,{isColumn:!0,constructor:function(config){Ext.apply(this,config),Ext.isString(this.renderer)?this.renderer=Ext.util.Format[this.renderer]:Ext.isObject(this.renderer)&&(this.scope=this.renderer.scope,this.renderer=this.renderer.fn),this.scope||(this.scope=this);var ed=this.editor;delete this.editor,this.setEditor(ed),this.addEvents("click","contextmenu","dblclick","mousedown"),Ext.grid.Column.superclass.constructor.call(this)},processEvent:function(name,e,grid,rowIndex,colIndex){return this.fireEvent(name,this,grid,rowIndex,e)},destroy:function(){this.setEditor&&this.setEditor(null),this.purgeListeners()},renderer:function(value){return value},getEditor:function(rowIndex){return this.editable!==!1?this.editor:null},setEditor:function(editor){var ed=this.editor;ed&&(ed.gridEditor?(ed.gridEditor.destroy(),delete ed.gridEditor):ed.destroy()),this.editor=null,editor&&(editor.isXType||(editor=Ext.create(editor,"textfield")),this.editor=editor)},getCellEditor:function(rowIndex){var ed=this.getEditor(rowIndex);return ed&&(ed.startEdit||(ed.gridEditor||(ed.gridEditor=new Ext.grid.GridEditor(ed)),ed=ed.gridEditor)),ed}}),Ext.grid.BooleanColumn=Ext.extend(Ext.grid.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(cfg){Ext.grid.BooleanColumn.superclass.constructor.call(this,cfg);var t=this.trueText,f=this.falseText,u=this.undefinedText;this.renderer=function(v){return void 0===v?u:v&&"false"!==v?t:f}}}),Ext.grid.NumberColumn=Ext.extend(Ext.grid.Column,{format:"0,000.00",constructor:function(cfg){Ext.grid.NumberColumn.superclass.constructor.call(this,cfg),this.renderer=Ext.util.Format.numberRenderer(this.format)}}),Ext.grid.DateColumn=Ext.extend(Ext.grid.Column,{format:"m/d/Y",constructor:function(cfg){Ext.grid.DateColumn.superclass.constructor.call(this,cfg),this.renderer=Ext.util.Format.dateRenderer(this.format)}}),Ext.grid.TemplateColumn=Ext.extend(Ext.grid.Column,{constructor:function(cfg){Ext.grid.TemplateColumn.superclass.constructor.call(this,cfg);var tpl=!Ext.isPrimitive(this.tpl)&&this.tpl.compile?this.tpl:new Ext.XTemplate(this.tpl);this.renderer=function(value,p,r){return tpl.apply(r.data)},this.tpl=tpl}}),Ext.grid.ActionColumn=Ext.extend(Ext.grid.Column,{header:"&#160;",actionIdRe:/x-action-col-(\d+)/,altText:"",constructor:function(cfg){var i,item,me=this,items=cfg.items||(me.items=[me]),l=items.length;Ext.grid.ActionColumn.superclass.constructor.call(me,cfg),me.renderer=function(v,meta){for(v=Ext.isFunction(cfg.renderer)?cfg.renderer.apply(this,arguments)||"":"",meta.css+=" x-action-col-cell",i=0;l>i;i++)item=items[i],v+='<img alt="'+(item.altText||me.altText)+'" src="'+(item.icon||Ext.BLANK_IMAGE_URL)+'" class="x-action-col-icon x-action-col-'+String(i)+" "+(item.iconCls||"")+" "+(Ext.isFunction(item.getClass)?item.getClass.apply(item.scope||this.scope||this,arguments):"")+'"'+(item.tooltip?' ext:qtip="'+item.tooltip+'"':"")+" />";return v}},destroy:function(){return delete this.items,delete this.renderer,Ext.grid.ActionColumn.superclass.destroy.apply(this,arguments)},processEvent:function(name,e,grid,rowIndex,colIndex){var item,fn,m=e.getTarget().className.match(this.actionIdRe);if(m&&(item=this.items[parseInt(m[1],10)]))if("click"==name)(fn=item.handler||this.handler)&&fn.call(item.scope||this.scope||this,grid,rowIndex,colIndex,item,e);else if("mousedown"==name&&item.stopSelection!==!1)return!1;return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)}}),Ext.grid.Column.types={gridcolumn:Ext.grid.Column,booleancolumn:Ext.grid.BooleanColumn,numbercolumn:Ext.grid.NumberColumn,datecolumn:Ext.grid.DateColumn,templatecolumn:Ext.grid.TemplateColumn,actioncolumn:Ext.grid.ActionColumn},Ext.grid.RowNumberer=Ext.extend(Object,{header:"",width:23,sortable:!1,constructor:function(config){Ext.apply(this,config),this.rowspan&&(this.renderer=this.renderer.createDelegate(this))},fixed:!0,hideable:!1,menuDisabled:!0,dataIndex:"",id:"numberer",rowspan:void 0,renderer:function(v,p,record,rowIndex){return this.rowspan&&(p.cellAttr='rowspan="'+this.rowspan+'"'),rowIndex+1}}),Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;</div>',width:20,sortable:!1,menuDisabled:!0,fixed:!0,hideable:!1,dataIndex:"",id:"checker",isColumn:!0,constructor:function(){Ext.grid.CheckboxSelectionModel.superclass.constructor.apply(this,arguments),this.checkOnly&&(this.handleMouseDown=Ext.emptyFn)},initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this),this.grid.on("render",function(){Ext.fly(this.grid.getView().innerHd).on("mousedown",this.onHdMouseDown,this)},this)},processEvent:function(name,e,grid,rowIndex,colIndex){return"mousedown"==name?(this.onMouseDown(e,e.getTarget()),!1):Ext.grid.Column.prototype.processEvent.apply(this,arguments)},onMouseDown:function(e,t){if(0===e.button&&"x-grid3-row-checker"==t.className){e.stopEvent();var row=e.getTarget(".x-grid3-row");if(row){var index=row.rowIndex;this.isSelected(index)?this.deselectRow(index):(this.selectRow(index,!0),this.grid.getView().focusRow(index))}}},onHdMouseDown:function(e,t){if("x-grid3-hd-checker"==t.className){e.stopEvent();var hd=Ext.fly(t.parentNode),isChecked=hd.hasClass("x-grid3-hd-checker-on");isChecked?(hd.removeClass("x-grid3-hd-checker-on"),
this.clearSelections()):(hd.addClass("x-grid3-hd-checker-on"),this.selectAll())}},renderer:function(v,p,record){return'<div class="x-grid3-row-checker">&#160;</div>'},onEditorSelect:function(row,lastRow){lastRow==row||this.checkOnly||this.selectRow(row)}}),Ext.grid.CellSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{constructor:function(config){Ext.apply(this,config),this.selection=null,this.addEvents("beforecellselect","cellselect","selectionchange"),Ext.grid.CellSelectionModel.superclass.constructor.call(this)},initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this),this.grid.on(Ext.EventManager.getKeyEvent(),this.handleKeyDown,this),this.grid.getView().on({scope:this,refresh:this.onViewChange,rowupdated:this.onRowUpdated,beforerowremoved:this.clearSelections,beforerowsinserted:this.clearSelections}),this.grid.isEditor&&this.grid.on("beforeedit",this.beforeEdit,this)},beforeEdit:function(e){this.select(e.row,e.column,!1,!0,e.record)},onRowUpdated:function(v,index,r){this.selection&&this.selection.record==r&&v.onCellSelect(index,this.selection.cell[1])},onViewChange:function(){this.clearSelections(!0)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(preventNotify){var s=this.selection;s&&(preventNotify!==!0&&this.grid.view.onCellDeselect(s.cell[0],s.cell[1]),this.selection=null,this.fireEvent("selectionchange",this,null))},hasSelection:function(){return this.selection?!0:!1},handleMouseDown:function(g,row,cell,e){0!==e.button||this.isLocked()||this.select(row,cell)},select:function(rowIndex,colIndex,preventViewNotify,preventFocus,r){if(this.fireEvent("beforecellselect",this,rowIndex,colIndex)!==!1){if(this.clearSelections(),r=r||this.grid.store.getAt(rowIndex),this.selection={record:r,cell:[rowIndex,colIndex]},!preventViewNotify){var v=this.grid.getView();v.onCellSelect(rowIndex,colIndex),preventFocus!==!0&&v.focusCell(rowIndex,colIndex)}this.fireEvent("cellselect",this,rowIndex,colIndex),this.fireEvent("selectionchange",this,this.selection)}},isSelectable:function(rowIndex,colIndex,cm){return!cm.isHidden(colIndex)},onEditorKey:function(field,e){e.getKey()==e.TAB&&this.handleKeyDown(e)},handleKeyDown:function(e){if(e.isNavKeyPress()){var cell,newCell,r,c,ae,k=e.getKey(),g=this.grid,s=this.selection,sm=this,walk=function(row,col,step){return g.walkCells(row,col,step,g.isEditor&&g.editing?sm.acceptsNav:sm.isSelectable,sm)};switch(k){case e.ESC:case e.PAGE_UP:case e.PAGE_DOWN:break;default:e.stopEvent()}if(!s)return cell=walk(0,0,1),void(cell&&this.select(cell[0],cell[1]));switch(cell=s.cell,r=cell[0],c=cell[1],k){case e.TAB:newCell=e.shiftKey?walk(r,c-1,-1):walk(r,c+1,1);break;case e.DOWN:newCell=walk(r+1,c,1);break;case e.UP:newCell=walk(r-1,c,-1);break;case e.RIGHT:newCell=walk(r,c+1,1);break;case e.LEFT:newCell=walk(r,c-1,-1);break;case e.ENTER:if(g.isEditor&&!g.editing)return void g.startEditing(r,c)}newCell&&(r=newCell[0],c=newCell[1],this.select(r,c),g.isEditor&&g.editing&&(ae=g.activeEditor,ae&&ae.field.triggerBlur&&ae.field.triggerBlur(),g.startEditing(r,c)))}},acceptsNav:function(row,col,cm){return!cm.isHidden(col)&&cm.isCellEditable(col,row)}}),Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,forceValidation:!1,isEditor:!0,detectEdit:!1,autoEncode:!1,trackMouseOver:!1,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this),this.selModel||(this.selModel=new Ext.grid.CellSelectionModel),this.activeEditor=null,this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){if(Ext.grid.EditorGridPanel.superclass.initEvents.call(this),this.getGridEl().on("mousewheel",this.stopEditing.createDelegate(this,[!0]),this),this.on("columnresize",this.stopEditing,this,[!0]),1==this.clicksToEdit)this.on("cellclick",this.onCellDblClick,this);else{var view=this.getView();"auto"==this.clicksToEdit&&view.mainBody&&view.mainBody.on("mousedown",this.onAutoEditClick,this),this.on("celldblclick",this.onCellDblClick,this)}},onResize:function(){Ext.grid.EditorGridPanel.superclass.onResize.apply(this,arguments);var ae=this.activeEditor;this.editing&&ae&&ae.realign(!0)},onCellDblClick:function(g,row,col){this.startEditing(row,col)},onAutoEditClick:function(e,t){if(0===e.button){var row=this.view.findRowIndex(t),col=this.view.findCellIndex(t);if(row!==!1&&col!==!1)if(this.stopEditing(),this.selModel.getSelectedCell){var sc=this.selModel.getSelectedCell();sc&&sc[0]===row&&sc[1]===col&&this.startEditing(row,col)}else this.selModel.isSelected(row)&&this.startEditing(row,col)}},onEditComplete:function(ed,value,startValue){this.editing=!1,this.lastActiveEditor=this.activeEditor,this.activeEditor=null;var r=ed.record,field=this.colModel.getDataIndex(ed.col);if(value=this.postEditValue(value,startValue,r,field),this.forceValidation===!0||String(value)!==String(startValue)){var e={grid:this,record:r,field:field,originalValue:startValue,value:value,row:ed.row,column:ed.col,cancel:!1};this.fireEvent("validateedit",e)===!1||e.cancel||String(value)===String(startValue)||(r.set(field,e.value),delete e.cancel,this.fireEvent("afteredit",e))}this.view.focusCell(ed.row,ed.col)},startEditing:function(row,col){if(this.stopEditing(),this.colModel.isCellEditable(col,row)){this.view.ensureVisible(row,col,!0);var r=this.store.getAt(row),field=this.colModel.getDataIndex(col),e={grid:this,record:r,field:field,value:r.data[field],row:row,column:col,cancel:!1};if(this.fireEvent("beforeedit",e)!==!1&&!e.cancel){this.editing=!0;var ed=this.colModel.getCellEditor(col,row);if(!ed)return;ed.rendered||(ed.parentEl=this.view.getEditorParent(ed),ed.on({scope:this,render:{fn:function(c){c.field.focus(!1,!0)},single:!0,scope:this},specialkey:function(field,e){this.getSelectionModel().onEditorKey(field,e)},complete:this.onEditComplete,canceledit:this.stopEditing.createDelegate(this,[!0])})),Ext.apply(ed,{row:row,col:col,record:r}),this.lastEdit={row:row,col:col},this.activeEditor=ed,ed.field.isXType("checkbox")&&(ed.allowBlur=!1,this.setupCheckbox(ed.field)),ed.selectSameEditor=this.activeEditor==this.lastActiveEditor;var v=this.preEditValue(r,field);ed.startEdit(this.view.getCell(row,col).firstChild,Ext.isDefined(v)?v:""),function(){delete ed.selectSameEditor}.defer(50)}}},setupCheckbox:function(field){var me=this,fn=function(){field.el.on("click",me.onCheckClick,me,{single:!0})};field.rendered?fn():field.on("render",fn,null,{single:!0})},onCheckClick:function(){var ed=this.activeEditor;ed.allowBlur=!0,ed.field.focus(!1,10)},preEditValue:function(r,field){var value=r.data[field];return this.autoEncode&&Ext.isString(value)?Ext.util.Format.htmlDecode(value):value},postEditValue:function(value,originalValue,r,field){return this.autoEncode&&Ext.isString(value)?Ext.util.Format.htmlEncode(value):value},stopEditing:function(cancel){if(this.editing){var ae=this.lastActiveEditor=this.activeEditor;ae&&(ae[cancel===!0?"cancelEdit":"completeEdit"](),this.view.focusCell(ae.row,ae.col)),this.activeEditor=null}this.editing=!1}}),Ext.reg("editorgrid",Ext.grid.EditorGridPanel),Ext.grid.GridEditor=function(field,config){Ext.grid.GridEditor.superclass.constructor.call(this,field,config),field.monitorTab=!1},Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:!1,cls:"x-small-editor x-grid-editor",shim:!1,shadow:!1}),Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]),Ext.grid.PropertyStore=Ext.extend(Ext.util.Observable,{constructor:function(grid,source){this.grid=grid,this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord}),this.store.on("update",this.onUpdate,this),source&&this.setSource(source),Ext.grid.PropertyStore.superclass.constructor.call(this)},setSource:function(o){this.source=o,this.store.removeAll();var data=[];for(var k in o)this.isEditableValue(o[k])&&data.push(new Ext.grid.PropertyRecord({name:k,value:o[k]},k));this.store.loadRecords({records:data},{},!0)},onUpdate:function(ds,record,type){if(type==Ext.data.Record.EDIT){var v=record.data.value,oldValue=record.modified.value;this.grid.fireEvent("beforepropertychange",this.source,record.id,v,oldValue)!==!1?(this.source[record.id]=v,record.commit(),this.grid.fireEvent("propertychange",this.source,record.id,v,oldValue)):record.reject()}},getProperty:function(row){return this.store.getAt(row)},isEditableValue:function(val){return Ext.isPrimitive(val)||Ext.isDate(val)},setValue:function(prop,value,create){var r=this.getRec(prop);r?(r.set("value",value),this.source[prop]=value):create&&(this.source[prop]=value,r=new Ext.grid.PropertyRecord({name:prop,value:value},prop),this.store.add(r))},remove:function(prop){var r=this.getRec(prop);r&&(this.store.remove(r),delete this.source[prop])},getRec:function(prop){return this.store.getById(prop)},getSource:function(){return this.source}}),Ext.grid.PropertyColumnModel=Ext.extend(Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",constructor:function(grid,store){var g=Ext.grid,f=Ext.form;this.grid=grid,g.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:!0,dataIndex:"name",id:"name",menuDisabled:!0},{header:this.valueText,width:50,resizable:!1,dataIndex:"value",id:"value",menuDisabled:!0}]),this.store=store;var bfield=new f.Field({autoCreate:{tag:"select",children:[{tag:"option",value:"true",html:this.trueText},{tag:"option",value:"false",html:this.falseText}]},getValue:function(){return"true"==this.el.dom.value}});this.editors={date:new g.GridEditor(new f.DateField({selectOnFocus:!0})),string:new g.GridEditor(new f.TextField({selectOnFocus:!0})),number:new g.GridEditor(new f.NumberField({selectOnFocus:!0,style:"text-align:left;"})),"boolean":new g.GridEditor(bfield,{autoSize:"both"})},this.renderCellDelegate=this.renderCell.createDelegate(this),this.renderPropDelegate=this.renderProp.createDelegate(this)},renderDate:function(dateVal){return dateVal.dateFormat(this.dateFormat)},renderBool:function(bVal){return this[bVal?"trueText":"falseText"]},isCellEditable:function(colIndex,rowIndex){return 1==colIndex},getRenderer:function(col){return 1==col?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(v){return this.getPropertyName(v)},renderCell:function(val,meta,rec){var renderer=this.grid.customRenderers[rec.get("name")];if(renderer)return renderer.apply(this,arguments);var rv=val;return Ext.isDate(val)?rv=this.renderDate(val):"boolean"==typeof val&&(rv=this.renderBool(val)),Ext.util.Format.htmlEncode(rv)},getPropertyName:function(name){var pn=this.grid.propertyNames;return pn&&pn[name]?pn[name]:name},getCellEditor:function(colIndex,rowIndex){var p=this.store.getProperty(rowIndex),n=p.data.name,val=p.data.value;return this.grid.customEditors[n]?this.grid.customEditors[n]:Ext.isDate(val)?this.editors.date:"number"==typeof val?this.editors.number:"boolean"==typeof val?this.editors["boolean"]:this.editors.string},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this),this.destroyEditors(this.editors),this.destroyEditors(this.grid.customEditors)},destroyEditors:function(editors){for(var ed in editors)Ext.destroy(editors[ed])}}),Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:!1,stripeRows:!1,trackMouseOver:!1,clicksToEdit:1,enableHdMenu:!1,viewConfig:{forceFit:!0},initComponent:function(){this.customRenderers=this.customRenderers||{},this.customEditors=this.customEditors||{},this.lastEditRow=null;var store=new Ext.grid.PropertyStore(this);this.propStore=store;var cm=new Ext.grid.PropertyColumnModel(this,store);store.store.sort("name","ASC"),this.addEvents("beforepropertychange","propertychange"),this.cm=cm,this.ds=store.store,Ext.grid.PropertyGrid.superclass.initComponent.call(this),this.mon(this.selModel,"beforecellselect",function(sm,rowIndex,colIndex){return 0===colIndex?(this.startEditing.defer(200,this,[rowIndex,1]),!1):void 0},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments),this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments),this.source&&this.setSource(this.source)},setSource:function(source){this.propStore.setSource(source)},getSource:function(){return this.propStore.getSource()},setProperty:function(prop,value,create){this.propStore.setValue(prop,value,create)},removeProperty:function(prop){this.propStore.remove(prop)}}),Ext.reg("propertygrid",Ext.grid.PropertyGrid),Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{groupByText:"Group By This Field",showGroupsText:"Show in Groups",hideGroupedColumn:!1,showGroupName:!0,startCollapsed:!1,enableGrouping:!0,enableGroupingMenu:!0,enableNoGroups:!0,emptyGroupText:"(None)",ignoreAdd:!1,groupTextTpl:"{text}",groupMode:"value",cancelEditOnToggle:!0,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this),this.state={};var sm=this.grid.getSelectionModel();sm.on(sm.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this),this.startGroup||(this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div class="x-grid-group-title">',this.groupTextTpl,"</div></div>",'<div id="{groupId}-bd" class="x-grid-group-body">')),this.startGroup.compile(),this.endGroup||(this.endGroup="</div></div>")},findGroup:function(el){return Ext.fly(el).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(ds,records,index){if(this.canGroup()&&!this.ignoreAdd){var ss=this.getScrollState();this.fireEvent("beforerowsinserted",ds,index,index+(records.length-1)),this.refresh(),this.restoreScroll(ss),this.fireEvent("rowsinserted",ds,index,index+(records.length-1))}else this.canGroup()||Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)},onRemove:function(ds,record,index,isUpdate){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var g=document.getElementById(record._groupId);g&&g.childNodes[1].childNodes.length<1&&Ext.removeNode(g),this.applyEmptyText()},refreshRow:function(record){1==this.ds.getCount()?this.refresh():(this.isUpdating=!0,Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments),this.isUpdating=!1)},beforeMenuShow:function(){var item,items=this.hmenu.items,disabled=this.cm.config[this.hdCtxIndex].groupable===!1;(item=items.get("groupBy"))&&item.setDisabled(disabled),(item=items.get("showGroups"))&&(item.setDisabled(disabled),item.setChecked(this.canGroup(),!0))},renderUI:function(){var markup=Ext.grid.GroupingView.superclass.renderUI.call(this);return this.enableGroupingMenu&&this.hmenu&&(this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"}),this.enableNoGroups&&this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this}),this.hmenu.on("beforeshow",this.beforeMenuShow,this)),markup},processEvent:function(name,e){Ext.grid.GroupingView.superclass.processEvent.call(this,name,e);var hd=e.getTarget(".x-grid-group-hd",this.mainBody);if(hd){var field=this.getGroupField(),prefix=this.getPrefix(field),groupValue=hd.id.substring(prefix.length),emptyRe=new RegExp("gp-"+Ext.escapeRe(field)+"--hd");groupValue=groupValue.substr(0,groupValue.length-3),(groupValue||emptyRe.test(hd.id))&&this.grid.fireEvent("group"+name,this.grid,field,groupValue,e),"mousedown"==name&&0==e.button&&this.toggleGroup(hd.parentNode)}},onGroupByClick:function(){var grid=this.grid;this.enableGrouping=!0,grid.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex)),grid.fireEvent("groupchange",grid,grid.store.getGroupState()),this.beforeMenuShow(),this.refresh()},onShowGroupsClick:function(mi,checked){this.enableGrouping=checked,checked?this.onGroupByClick():(this.grid.store.clearGrouping(),this.grid.fireEvent("groupchange",this,null))},toggleRowIndex:function(rowIndex,expanded){if(this.canGroup()){var row=this.getRow(rowIndex);row&&this.toggleGroup(this.findGroup(row),expanded)}},toggleGroup:function(group,expanded){var gel=Ext.get(group),id=Ext.util.Format.htmlEncode(gel.id);expanded=Ext.isDefined(expanded)?expanded:gel.hasClass("x-grid-group-collapsed"),this.state[id]!==expanded&&(this.cancelEditOnToggle!==!1&&this.grid.stopEditing(!0),this.state[id]=expanded,gel[expanded?"removeClass":"addClass"]("x-grid-group-collapsed"))},toggleAllGroups:function(expanded){for(var groups=this.getGroups(),i=0,len=groups.length;len>i;i++)this.toggleGroup(groups[i],expanded)},expandAllGroups:function(){this.toggleAllGroups(!0)},collapseAllGroups:function(){this.toggleAllGroups(!1)},getGroup:function(v,r,groupRenderer,rowIndex,colIndex,ds){var column=this.cm.config[colIndex],g=groupRenderer?groupRenderer.call(column.scope,v,{},r,rowIndex,colIndex,ds):String(v);return(""===g||"&#160;"===g)&&(g=column.emptyGroupText||this.emptyGroupText),g},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){this.ds&&this.cm&&(Ext.grid.GroupingView.superclass.afterRender.call(this),this.grid.deferRowRender&&this.updateGroupWidths())},afterRenderUI:function(){Ext.grid.GroupingView.superclass.afterRenderUI.call(this),this.enableGroupingMenu&&this.hmenu&&(this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"}),this.enableNoGroups&&this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:!0,checkHandler:this.onShowGroupsClick,scope:this}),this.hmenu.on("beforeshow",this.beforeMenuShow,this))},renderRows:function(){var groupField=this.getGroupField(),eg=!!groupField;if(this.hideGroupedColumn){var colIndex=this.cm.findColumnIndex(groupField),hasLastGroupField=Ext.isDefined(this.lastGroupField);if(!eg&&hasLastGroupField)this.mainBody.update(""),this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),!1),delete this.lastGroupField;else if(eg&&!hasLastGroupField)this.lastGroupField=groupField,this.cm.setHidden(colIndex,!0);else if(eg&&hasLastGroupField&&groupField!==this.lastGroupField){this.mainBody.update("");var oldIndex=this.cm.findColumnIndex(this.lastGroupField);this.cm.setHidden(oldIndex,!1),this.lastGroupField=groupField,this.cm.setHidden(colIndex,!0)}}return Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(cs,rs,ds,startRow,colCount,stripe){if(rs.length<1)return"";if(!this.canGroup()||this.isUpdating)return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments);var g,curGroup,i,len,gid,groupField=this.getGroupField(),colIndex=this.cm.findColumnIndex(groupField),gstyle="width:"+this.getTotalWidth()+";",cfg=this.cm.config[colIndex],groupRenderer=cfg.groupRenderer||cfg.renderer,prefix=this.showGroupName?(cfg.groupName||cfg.header)+": ":"",groups=[];for(i=0,len=rs.length;len>i;i++){var rowIndex=startRow+i,r=rs[i],gvalue=r.data[groupField];g=this.getGroup(gvalue,r,groupRenderer,rowIndex,colIndex,ds),curGroup&&curGroup.group==g?curGroup.rs.push(r):(gid=this.constructId(gvalue,groupField,colIndex),this.state[gid]=!(Ext.isDefined(this.state[gid])?!this.state[gid]:this.startCollapsed),curGroup={group:g,gvalue:gvalue,text:prefix+g,groupId:gid,startRow:rowIndex,rs:[r],cls:this.state[gid]?"":"x-grid-group-collapsed",style:gstyle},groups.push(curGroup)),r._groupId=gid}var buf=[];for(i=0,len=groups.length;len>i;i++)g=groups[i],this.doGroupStart(buf,g,cs,ds,colCount),buf[buf.length]=Ext.grid.GroupingView.superclass.doRender.call(this,cs,g.rs,ds,g.startRow,colCount,stripe),this.doGroupEnd(buf,g,cs,ds,colCount);return buf.join("")},getGroupId:function(value){var field=this.getGroupField();return this.constructId(value,field,this.cm.findColumnIndex(field))},constructId:function(value,field,idx){var cfg=this.cm.config[idx],groupRenderer=cfg.groupRenderer||cfg.renderer,val="value"==this.groupMode?value:this.getGroup(value,{data:{}},groupRenderer,0,idx,this.ds);return this.getPrefix(field)+Ext.util.Format.htmlEncode(val)},canGroup:function(){return this.enableGrouping&&!!this.getGroupField()},getPrefix:function(field){return this.grid.getGridEl().id+"-gp-"+field+"-"},doGroupStart:function(buf,g,cs,ds,colCount){buf[buf.length]=this.startGroup.apply(g)},doGroupEnd:function(buf,g,cs,ds,colCount){buf[buf.length]=this.endGroup},getRows:function(){if(!this.canGroup())return Ext.grid.GroupingView.superclass.getRows.call(this);for(var g,j,jlen,r=[],gs=this.getGroups(),i=0,len=gs.length;len>i;++i)if(g=gs[i].childNodes[1])for(g=g.childNodes,j=0,jlen=g.length;jlen>j;++j)r[r.length]=g[j];return r},updateGroupWidths:function(){if(this.canGroup()&&this.hasRows())for(var tw=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.getScrollOffset())+"px",gs=this.getGroups(),i=0,len=gs.length;len>i;i++)gs[i].firstChild.style.width=tw},onColumnWidthUpdated:function(col,w,tw){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,col,w,tw),this.updateGroupWidths()},onAllColumnWidthsUpdated:function(ws,tw){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,ws,tw),this.updateGroupWidths()},onColumnHiddenUpdated:function(col,hidden,tw){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,col,hidden,tw),this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(sm,rowIndex){this.toggleRowIndex(rowIndex,!0)}}),Ext.grid.GroupingView.GROUP_ID=1e3;
